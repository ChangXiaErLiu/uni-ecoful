{"version":3,"file":"safe-area.js","sources":["utils/safe-area.js"],"sourcesContent":["// utf-8\n// 中文注释：安全区与导航栏尺寸工具，统一获取状态栏、胶囊与底部安全区，跨端兜底\nimport { ref, computed, onMounted } from 'vue'\n\nexport function useSafeArea() {\n  const statusBarHeightPx = ref(0)\n  // 中文注释：兜底导航栏高度（iOS 通常 44px）\n  const navBarHeightPx = ref(44)\n  // 中文注释：底部安全区高度（适配全面屏/Home 指示条）\n  const safeAreaBottomPx = ref(0)\n  // 中文注释：总导航高度（状态栏 + 自定义导航高度）\n  const totalNavHeightPx = computed(() => Number(statusBarHeightPx.value || 0) + Number(navBarHeightPx.value || 0))\n\n  function refresh() {\n    try {\n      const info = uni.getSystemInfoSync()\n      statusBarHeightPx.value = Number(info.statusBarHeight || 0)\n\n      // 中文注释：计算底部安全区（以 screenHeight 与 safeArea.bottom 差值为准）\n      try {\n        const screenH = Number(info.screenHeight || 0)\n        const safeBottom = Number((info.safeArea && info.safeArea.bottom) || 0)\n        const insetBottom = Math.max(0, screenH - safeBottom)\n        safeAreaBottomPx.value = isNaN(insetBottom) ? 0 : insetBottom\n      } catch (e) {\n        safeAreaBottomPx.value = 0\n      }\n\n      // #ifdef MP-WEIXIN\n      try {\n        const cap = uni.getMenuButtonBoundingClientRect()\n        // 中文注释：微信推荐的自定义导航高度计算方式\n        navBarHeightPx.value = (cap.bottom - statusBarHeightPx.value) + (cap.top - statusBarHeightPx.value)\n      } catch (e) {\n        navBarHeightPx.value = 44\n      }\n      // #endif\n\n      // #ifndef MP-WEIXIN\n      // 中文注释：其他端给出一个合理的默认值\n      if (!navBarHeightPx.value || isNaN(navBarHeightPx.value)) {\n        navBarHeightPx.value = 44\n      }\n      // #endif\n    } catch (e) {\n      statusBarHeightPx.value = 20\n      navBarHeightPx.value = 44\n      safeAreaBottomPx.value = 0\n    }\n  }\n\n  onMounted(refresh)\n  refresh()\n\n  return {\n    statusBarHeightPx,\n    navBarHeightPx,\n    totalNavHeightPx,\n    safeAreaBottomPx,\n  }\n}\n\n"],"names":["ref","computed","uni","onMounted"],"mappings":";;AAIO,SAAS,cAAc;AAC5B,QAAM,oBAAoBA,cAAG,IAAC,CAAC;AAE/B,QAAM,iBAAiBA,cAAG,IAAC,EAAE;AAE7B,QAAM,mBAAmBA,cAAG,IAAC,CAAC;AAE9B,QAAM,mBAAmBC,cAAAA,SAAS,MAAM,OAAO,kBAAkB,SAAS,CAAC,IAAI,OAAO,eAAe,SAAS,CAAC,CAAC;AAEhH,WAAS,UAAU;AACjB,QAAI;AACF,YAAM,OAAOC,cAAG,MAAC,kBAAmB;AACpC,wBAAkB,QAAQ,OAAO,KAAK,mBAAmB,CAAC;AAG1D,UAAI;AACF,cAAM,UAAU,OAAO,KAAK,gBAAgB,CAAC;AAC7C,cAAM,aAAa,OAAQ,KAAK,YAAY,KAAK,SAAS,UAAW,CAAC;AACtE,cAAM,cAAc,KAAK,IAAI,GAAG,UAAU,UAAU;AACpD,yBAAiB,QAAQ,MAAM,WAAW,IAAI,IAAI;AAAA,MACnD,SAAQ,GAAG;AACV,yBAAiB,QAAQ;AAAA,MAC1B;AAGD,UAAI;AACF,cAAM,MAAMA,cAAG,MAAC,gCAAiC;AAEjD,uBAAe,QAAS,IAAI,SAAS,kBAAkB,SAAU,IAAI,MAAM,kBAAkB;AAAA,MAC9F,SAAQ,GAAG;AACV,uBAAe,QAAQ;AAAA,MACxB;AAAA,IASF,SAAQ,GAAG;AACV,wBAAkB,QAAQ;AAC1B,qBAAe,QAAQ;AACvB,uBAAiB,QAAQ;AAAA,IAC1B;AAAA,EACF;AAEDC,gBAAAA,UAAU,OAAO;AACjB,UAAS;AAET,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACH;;"}