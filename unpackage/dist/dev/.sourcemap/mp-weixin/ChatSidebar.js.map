{"version":3,"file":"ChatSidebar.js","sources":["components/chat/ChatSidebar.vue"],"sourcesContent":["<!-- ai聊天界面的左边历史信息区域 -->\r\n<template>\r\n\t<view class=\"chat-sidebar\" :class=\"{'sidebar-collapsed': collapsed}\">\r\n\t\t<!-- 头部 -->\r\n\t\t<view class=\"sidebar-header\">\r\n\t\t\t<view class=\"header-main\">\r\n\t\t\t\t<text class=\"sidebar-title\">对话历史</text>\r\n\t\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t\t<view class=\"action-btn\" @tap=\"toggleCollapse\" @click=\"toggleCollapse\">\r\n\t\t\t\t\t\t<uni-icons :type=\"collapsed ? 'right' : 'left'\" size=\"20\" color=\"#64748b\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 新建 -->\r\n\t\t<view class=\"sidebar-body\">\r\n\t\t\t<button class=\"create-chat-btn\" @tap=\"createChat\" @click=\"createChat\">\r\n\t\t\t\t<uni-icons type=\"plusempty\" size=\"18\" color=\"#ffffff\" />\r\n\t\t\t\t新建对话\r\n\t\t\t</button>\r\n\t\t</view>\r\n\r\n\t\t<!-- 列表 -->\r\n\t\t<scroll-view class=\"conversation-list\" scroll-y>\r\n\t\t\t<view v-for=\"conv in conversations\" :key=\"conv.id\" class=\"conversation-item\"\r\n\t\t\t\t:class=\"{'active': conv.id === currentConversationId}\" @tap=\"selectConversation(conv.id)\"\r\n\t\t\t\t@click=\"selectConversation(conv.id)\">\r\n\t\t\t\t<view class=\"conv-content\">\r\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"18\" color=\"#64748b\" />\r\n\t\t\t\t\t<text class=\"conv-title\">{{ conv.title || '新对话' }}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"conv-actions\" v-if=\"!collapsed\">\r\n\t\t\t\t\t<view class=\"conv-action-btn\" @tap.stop=\"editTitle(conv.id)\" @click.stop=\"editTitle(conv.id)\">\r\n\t\t\t\t\t\t<uni-icons type=\"compose\" size=\"14\" color=\"#94a3b8\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"conv-action-btn\" @tap.stop=\"deleteConv(conv.id)\" @click.stop=\"deleteConv(conv.id)\">\r\n\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"14\" color=\"#94a3b8\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\tconst props = defineProps({\r\n\t\tconversations: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t},\r\n\t\tcurrentConversationId: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tcollapsed: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t} // 仅桌面端“窄/宽”\r\n\t})\r\n\tconst emit = defineEmits([\r\n\t\t'create-chat',\r\n\t\t'select-conversation',\r\n\t\t'edit-conversation',\r\n\t\t'delete-conversation',\r\n\t\t'toggle-collapse'\r\n\t])\r\n\r\n\tconst createChat = () => emit('create-chat')\r\n\tconst selectConversation = id => emit('select-conversation', id)\r\n\tconst toggleCollapse = () => emit('toggle-collapse')\r\n\r\n\tconst editTitle = (id) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '编辑对话标题',\r\n\t\t\tcontent: '请输入新的对话标题',\r\n\t\t\teditable: true,\r\n\t\t\tplaceholderText: '对话标题',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm && res.content) emit('edit-conversation', id, res.content)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst deleteConv = (id) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: '确定要删除这个对话吗？',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) emit('delete-conversation', id)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chat-sidebar {\n  width: 320rpx;\n  background: #ffffff;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #e2e8f0;\n  min-width: 0;\n  /* 中文注释：避免使用 vh，改为随父容器自适应高度 */\n  height: 100%;\n  border-radius: 15rpx;\n}\n\r\n\t/* 头部 */\r\n\t.sidebar-header {\r\n\t\tpadding: 28rpx 32rpx;\r\n\t\tborder-bottom: 1px solid #e2e8f0;\r\n\t}\r\n\r\n\t.header-main {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.sidebar-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #111827;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.header-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.action-btn {\r\n\t\twidth: 56rpx;\r\n\t\theight: 56rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t/* 折叠（桌面窄栏） */\r\n\t.sidebar-collapsed {\r\n\t\twidth: 96rpx;\r\n\t}\r\n\r\n\t/* 新建按钮 */\r\n\t.sidebar-body {\r\n\t\tpadding: 16rpx;\r\n\t}\r\n\r\n\t.create-chat-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 8rpx;\r\n\t\twidth: 100%;\r\n\t\theight: 72rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: #00aa00;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t/* 列表 */\r\n\t.conversation-list {\r\n\t\tflex: 1;\r\n\t\toverflow: auto;\r\n\t\tpadding: 8rpx 0;\r\n\t}\r\n\r\n\t.conversation-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tmargin: 0 16rpx 8rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\ttransition: .2s;\r\n\r\n\t\t&.active {\r\n\t\t\tbackground: #f0f9ff;\r\n\t\t\tborder: 1px solid #e0f2fe;\r\n\r\n\t\t\t.conv-title {\r\n\t\t\t\tcolor: #0369a1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tbackground: #f8fafc;\r\n\t\t}\r\n\t}\r\n\r\n\t.conv-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.conv-title {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #374151;\r\n\t\tfont-weight: 500;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.conv-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\topacity: 0;\r\n\t\ttransition: opacity .2s;\r\n\r\n\t\t.conversation-item:hover &,\r\n\t\t.conversation-item.active & {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.conv-action-btn {\r\n\t\twidth: 36rpx;\r\n\t\theight: 36rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\t\r\n\t}\r\n</style>\n"],"names":["uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DC,UAAM,OAAO;AAQb,UAAM,aAAa,MAAM,KAAK,aAAa;AAC3C,UAAM,qBAAqB,QAAM,KAAK,uBAAuB,EAAE;AAC/D,UAAM,iBAAiB,MAAM,KAAK,iBAAiB;AAEnD,UAAM,YAAY,CAAC,OAAO;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,WAAW,IAAI;AAAS,iBAAK,qBAAqB,IAAI,IAAI,OAAO;AAAA,QACzE;AAAA,MACJ,CAAG;AAAA,IACD;AACD,UAAM,aAAa,CAAC,OAAO;AAC1BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI;AAAS,iBAAK,uBAAuB,EAAE;AAAA,QAC/C;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}