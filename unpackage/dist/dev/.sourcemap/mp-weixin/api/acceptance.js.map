{"version":3,"file":"acceptance.js","sources":["api/acceptance.js"],"sourcesContent":["/**\r\n * api/acceptance.js\r\n * 验收报告页面，各个方法总结\r\n */\r\n\r\nimport {\r\n\tBASE_URL\r\n} from '@/utils/config.js'\r\nimport {\r\n\trequest\r\n} from '@/utils/request.js'\r\n\r\n//---------- 文件上传、文件处理方法----------------//\r\n/**\r\n * 上传单个文件到后端\r\n * @param {Object} file - uni-file-picker返回的文件对象\r\n * @returns {Promise} 上传结果\r\n */\r\nexport async function uploadFileToBackend(file) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t// 获取文件路径\r\n\t\tconst filePath = file.url || file.path || file.tempFilePath\r\n\t\tconst fileName = file.name || '环评报告.pdf'\r\n\r\n\t\tif (!filePath) {\r\n\t\t\treject(new Error('文件路径无效'))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tuni.uploadFile({\r\n\t\t\turl: BASE_URL + '/api/v1/documents/upload',\r\n\t\t\tfilePath: filePath,\r\n\t\t\tname: 'file',\r\n\t\t\tformData: {\r\n\t\t\t\tcategory: 'eia_report' // 标记为环评报告\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = JSON.parse(res.data)\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tdocument_id: data.document_id,\r\n\t\t\t\t\t\t\tfilename: data.filename,\r\n\t\t\t\t\t\t\tsize_bytes: data.size_bytes,\r\n\t\t\t\t\t\t\tupload_time: data.upload_time\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error(data.detail || '上传失败'))\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treject(new Error('解析响应失败'))\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (error) => {\r\n\t\t\t\treject(new Error('网络请求失败'))\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n\r\n/**\r\n * 批量上传文件\r\n * @param {Array} files - 文件数组\r\n * @returns {Promise} 上传结果数组\r\n */\r\nexport async function uploadMultipleFiles(files) {\r\n\tif (!files || files.length === 0) {\r\n\t\tthrow new Error('没有选择文件')\r\n\t}\r\n\r\n\tconst uploadPromises = files.map(file => uploadFileToBackend(file))\r\n\treturn await Promise.all(uploadPromises)\r\n}\r\n\r\n\r\n/**\n * 获取已上传文件列表\n * @returns {Promise<Array>} 格式化后的文件列表\n */\nexport async function fetchUploadedFiles() {\n  try {\n    const res = await request.get('/api/v1/documents?skip=0&limit=1000')\n    if (Array.isArray(res)) {\n      return res.map(file => ({\n        name: file.filename,\n        ext: file.metadata?.file_extension || '',\n        url: `BASE_URL/${file.file_path.replace(/\\\\\\\\/g, '/')}`, // 构造预览地址（可选）\n        document_id: file.document_id,\n        size: file.size_bytes,\n        upload_time: file.upload_time\n      }))\n    }\n    return []\n  } catch (error) {\n    console.error('自动刷新文件列表失败:', error)\n    return []\n  }\n}\r\n\r\n/**\n * 删除指定上传的文件\n * @param {string} document_id\n * @returns {Promise<void>}\n */\nexport async function deleteFile(document_id) {\n  if (!document_id) throw new Error('document_id 不能为空')\n  await request.delete(`/api/v1/documents/${document_id}`)\n}\r\n\r\n/**\r\n * 临时测试构建向量方案：硬编码 source_dir，后端需要优化\r\n * @param {Object} options - 选项\r\n * @param {boolean} options.hideLoading - 是否隐藏 loading（默认 false）\r\n */\r\nexport async function rebuildIndex(options = {}) {\r\n\tconst {\r\n\t\thideLoading = false\r\n\t} = options;\r\n\r\n\tconst TEST_SOURCE_DIR = './storage/project_completion_and_acceptance/uploads'\r\n\r\n\treturn request.post('/api/v1/index/build', {\r\n\t\tsource_dir: TEST_SOURCE_DIR,\r\n\t\tsplit_by_heading: true\r\n\t}, {\r\n\t\thideLoading,\r\n\t\ttimeout: 900000 // 增加：15分钟超时（900秒）\r\n\t});\r\n}\r\n\r\n/**\r\n * 执行任务（提取项目信息）\r\n * @param {string} taskName - 任务名称（如 'task1'）\r\n * @param {Object} options - 选项\r\n * @param {boolean} options.hideLoading - 是否隐藏 loading\r\n * @param {number} options.timeout - 超时时间（毫秒）\r\n * @returns {Promise<Object>} 任务执行结果\r\n */\r\nexport async function runTask(taskName, options = {}) {\r\n\tconst {\r\n\t\thideLoading = false,\r\n\t\t\ttimeout = 600000 // 默认10分钟\r\n\t} = options\r\n\r\n\ttry {\r\n\t\tconst result = await request.get(`/api/v1/extract-info/EIA/run`, {\r\n\t\t\ttimeout,\r\n\t\t\thideLoading\r\n\t\t})\r\n\r\n\t\t// 数据校验\r\n\t\tif (!result || result.status !== 'success') {\r\n\t\t\tthrow new Error(result?.message || '任务执行失败')\r\n\t\t}\r\n\r\n\t\tif (!result.result || Object.keys(result.result).length === 0) {\r\n\t\t\tthrow new Error('未提取到任何项目信息，请检查文件内容是否完整')\r\n\t\t}\r\n\r\n\t\treturn result\r\n\t} catch (error) {\r\n\t\t// 错误分类处理\r\n\t\tif (error.code === 'NETWORK_ERROR' && error.message.includes('timeout')) {\r\n\t\t\tthrow new Error('提取超时：文档过大或网络不稳定，请稍后重试')\r\n\t\t} else if (error.code === 'HTTP_ERROR' && error.message.includes('404')) {\r\n\t\t\tthrow new Error(`任务 ${taskName} 不存在，请联系管理员配置`)\r\n\t\t} else {\r\n\t\t\tthrow error\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 转换后端提取结果为 baseTable 格式（支持嵌套对象）\r\n * @param {Object} result - 后端返回的 result 对象\r\n * @returns {Array} baseTable 格式的数组\r\n */\r\nexport function transformExtractResult(result) {\r\n\t// 完整的字段映射表：后端中文 key -> 英文 id + 显示标签\r\n\tconst FIELD_MAP = {\r\n\t\t// 基本信息\r\n\t\t'建设项目名称': {\r\n\t\t\tid: 'project_name',\r\n\t\t\tlabel: '建设项目名称'\r\n\t\t},\r\n\t\t'建设单位名称': {\r\n\t\t\tid: 'company_name',\r\n\t\t\tlabel: '建设单位名称'\r\n\t\t},\r\n\t\t'建设地点': {\r\n\t\t\tid: 'project_address',\r\n\t\t\tlabel: '建设地点'\r\n\t\t},\r\n\t\t'建设项目性质': {\r\n\t\t\tid: 'project_type',\r\n\t\t\tlabel: '建设项目性质'\r\n\t\t},\r\n\t\t'产品及产能': {\r\n\t\t\tid: 'product_scale',\r\n\t\t\tlabel: '产品及产能'\r\n\t\t},\r\n\r\n\t\t// 审批信息\r\n\t\t'环评报告表审批部门': {\r\n\t\t\tid: 'assessment_department',\r\n\t\t\tlabel: '环评报告表审批部门'\r\n\t\t},\r\n\t\t'环评报告表编制单位': {\r\n\t\t\tid: 'assessment_unit',\r\n\t\t\tlabel: '环评报告表编制单位'\r\n\t\t},\r\n\r\n\t\t// 投资信息\r\n\t\t'投资总概算(万元)': {\r\n\t\t\tid: 'investment',\r\n\t\t\tlabel: '投资总概算(万元)'\r\n\t\t},\r\n\t\t'环保投资总概算(万元)': {\r\n\t\t\tid: 'env_investment',\r\n\t\t\tlabel: '环保投资总概算(万元)'\r\n\t\t},\r\n\t\t'比例': {\r\n\t\t\tid: 'env_investment_ratio',\r\n\t\t\tlabel: '环保投资占比'\r\n\t\t},\r\n\r\n\t\t// 建设内容\r\n\t\t'主要建设内容': {\r\n\t\t\tid: 'construction_content',\r\n\t\t\tlabel: '主要建设内容'\r\n\t\t},\r\n\t\t'改扩建项目变动情况': {\r\n\t\t\tid: 'project_changes',\r\n\t\t\tlabel: '改扩建项目变动情况'\r\n\t\t},\r\n\r\n\t\t// 污染物\r\n\t\t'生产工艺': {\r\n\t\t\tid: 'production_process',\r\n\t\t\tlabel: '生产工艺'\r\n\t\t},\r\n\t\t'噪声执行标准': {\r\n\t\t\tid: 'noise_standard',\r\n\t\t\tlabel: '噪声标准'\r\n\t\t},\r\n\t\t'固体废物产生情况': {\r\n\t\t\tid: 'solid_generation',\r\n\t\t\tlabel: '固体废物产生情况'\r\n\t\t},\r\n\t\t'污染物产排情况': {\r\n\t\t\tid: 'pollutants_emission',\r\n\t\t\tlabel: '污染物产排情况',\r\n\t\t\ttype: 'table' // 添加类型标识\r\n\t\t},\r\n\r\n\t}\r\n\r\n\tconst baseTable = []\r\n\r\n\t// 遍历 result 对象\r\n\tObject.entries(result).forEach(([chineseKey, value]) => {\r\n\t\t// 如果有映射，按映射显示\r\n\t\tif (FIELD_MAP[chineseKey]) {\r\n\t\t\tconst fieldConfig = FIELD_MAP[chineseKey]\r\n\r\n\t\t\t// ✅ 特殊处理表格类型数据\r\n\t\t\tif (fieldConfig.type === 'table') {\r\n\t\t\t\tbaseTable.push({\r\n\t\t\t\t\tid: fieldConfig.id,\r\n\t\t\t\t\tlabel: fieldConfig.label,\r\n\t\t\t\t\tvalue: value, // 保留原始对象，不进行格式化\r\n\t\t\t\t\tsource: 'extracted',\r\n\t\t\t\t\ttype: 'table' // 前端通过这个类型来识别需要渲染表格\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// 普通字段正常处理\r\n\t\t\t\tbaseTable.push({\r\n\t\t\t\t\tid: fieldConfig.id,\r\n\t\t\t\t\tlabel: fieldConfig.label,\r\n\t\t\t\t\tvalue: formatValue(value),\r\n\t\t\t\t\tsource: 'extracted'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 如果是嵌套对象（但不是表格类型），展开显示\r\n\t\telse if (typeof value === 'object' && value !== null) {\r\n\t\t\tObject.entries(value).forEach(([subKey, subValue]) => {\r\n\t\t\t\tbaseTable.push({\r\n\t\t\t\t\tid: `${chineseKey}_${subKey}`,\r\n\t\t\t\t\tlabel: `${chineseKey} - ${subKey}`,\r\n\t\t\t\t\tvalue: formatValue(subValue),\r\n\t\t\t\t\tsource: 'extracted'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 如果没有映射，直接显示\r\n\t\telse {\r\n\t\t\tbaseTable.push({\r\n\t\t\t\tid: chineseKey,\r\n\t\t\t\tlabel: chineseKey,\r\n\t\t\t\tvalue: formatValue(value),\r\n\t\t\t\tsource: 'extracted'\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\r\n\r\n\t// 按id顺序排序\r\n\tconst ORDER = [\r\n\t\t'project_name', // 建设项目名称\r\n\t\t'company_name', // 建设单位名称\r\n\t\t'project_address', // 建设地点\r\n\t\t'project_type', // 建设项目性质\r\n\t\t'product_scale', // 产品及产能\r\n\t\t'assessment_department', // 环评报告表审批部门\r\n\t\t'assessment_unit', // 环评报告表编制单位\r\n\t\t'investment', // 投资总概算(万元)\r\n\t\t'env_investment', // 环保投资总概算(万元)\r\n\t\t'env_investment_ratio', // 比例\r\n\t\t'construction_content', // 主要建设内容\r\n\t\t'project_changes', // 改扩建项目变动情况\r\n\t\t'production_process', // 生产工艺\r\n\t\t'noise_standard', // 噪声执行标准\r\n\t\t'solid_generation', // 固体废物产生情况\r\n\t\t'pollutants_emission', // 污染物产排情况\r\n\t];\r\n\treturn baseTable.sort((a, b) => {\r\n\t\tconst aIndex = ORDER.indexOf(a.id)\r\n\t\tconst bIndex = ORDER.indexOf(b.id)\r\n\t\tif (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex\r\n\t\tif (aIndex !== -1) return -1\r\n\t\tif (bIndex !== -1) return 1\r\n\t\treturn 0\r\n\t})\r\n}\r\n\r\n// 格式化值的辅助函数（处理数组、对象等）\r\nfunction formatValue(value) {\r\n\t// 如果是数组，转成字符串\r\n\tif (Array.isArray(value)) {\r\n\t\treturn value.length > 0 ? JSON.stringify(value, null, 2) : '-'\r\n\t}\r\n\t// 如果是对象，转成字符串\r\n\tif (typeof value === 'object' && value !== null) {\r\n\t\treturn JSON.stringify(value, null, 2)\r\n\t}\r\n\t// 如果是数字，直接返回\r\n\tif (typeof value === 'number') {\r\n\t\treturn value\r\n\t}\r\n\t// 如果是字符串，去掉首尾空格\r\n\tif (typeof value === 'string') {\r\n\t\treturn value.trim() || '-'\r\n\t}\r\n\t// 其他情况\r\n\treturn value || ''\r\n}\r\n\r\n/**\r\n * 纯前端数据 → 后端生成 Word\r\n * @param {Object} signboard  \r\n * @returns {Promise<ArrayBuffer>}\r\n */\r\nexport function downloadSignboardWord(signboard) {\n  const payload = {\n    sections: signboard.sections.map(sec => ({\n      block: sec.block,\n      items: sec.items.map(it => ({ title: it.title, content: it.content }))\n    }))\n  };\n\n  // #ifdef H5\n  // H5 用 fetch 保证 arrayBuffer\r\n  // uni.request 在H5环境中不稳定，使用原生的 fetch API 是一个可靠且推荐的方案\n  return fetch(BASE_URL + '/api/v1/download/signageborad', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload)\n  }).then(res => {\n    if (!res.ok) throw new Error('生成失败');\n    return res.arrayBuffer();   // 浏览器原生一定返回 ArrayBuffer\n  });\n  // #endif\n\n  // #ifndef H5\n  // 小程序、App 用 uni.request\n  return new Promise((resolve, reject) => {\n    uni.request({\n      url: BASE_URL + '/api/v1/download/signageborad',\n      method: 'POST',\n      data: payload,\n      header: { 'Content-Type': 'application/json' },\n      responseType: 'arraybuffer',\n      success: (res) => {\n        if (res.statusCode === 200 && res.data && res.data.byteLength > 0) {\n          resolve(res.data);\n        } else {\n          reject(new Error('空文件'));\n        }\n      },\n      fail: reject\n    });\n  });\n  // #endif\n}"],"names":["uni","BASE_URL","request"],"mappings":"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"}