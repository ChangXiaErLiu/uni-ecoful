{"version":3,"file":"auth.js","sources":["api/auth.js"],"sourcesContent":["/**\r\n * author：zyg\r\n * date:2025.11.27\r\n * api/auth.js\r\n * 认证模块接口\r\n */\r\n\r\nimport { request } from '@/utils/request.js'\r\n\r\n/**\r\n * 1. 密码登录\r\n * @param {string} account - 用户名或手机号\r\n * @param {string} password - 密码\r\n * @returns {Promise}\r\n */\r\nexport function loginByPassword(account, password) {\r\n\treturn request.post('/api/v1/auth/login', {\r\n\t\taccount,\r\n\t\tpassword\r\n\t})\r\n}\r\n\r\n/**\r\n * 2. 发送短信验证码\r\n * @param {string} phoneNum - 手机号\r\n * @param {string} purpose - 用途：login/register/reset_password\r\n * @returns {Promise}\r\n */\r\nexport function sendSmsCode(phoneNum, purpose = 'login') {\r\n\treturn request.post('/api/v1/auth/send-code', {\r\n\t\tphone_num: phoneNum,\r\n\t\tpurpose: purpose\r\n\t})\r\n}\r\n\r\n/**\r\n * 3. 验证码登录（首次登录自动注册）\r\n * @param {string} phoneNum - 手机号\r\n * @param {string} code - 验证码\r\n * @returns {Promise}\r\n */\r\nexport function loginByCode(phoneNum, code) {\r\n\treturn request.post('/api/v1/auth/code-login', {\r\n\t\tphone_num: phoneNum,\r\n\t\tcode: code\r\n\t})\r\n}\r\n\r\n/**\r\n * 4. 用户注册\r\n * @param {Object} data - 注册信息\r\n * @param {string} data.username - 用户名（姓名）\r\n * @param {string} data.password - 密码\r\n * @param {string} data.confirmPassword - 确认密码\r\n * @param {string} data.companyName - 企业名称（可选）\r\n * @param {string} data.phoneNum - 手机号\r\n * @param {string} data.code - 验证码\r\n * @returns {Promise}\r\n */\r\nexport function register(data) {\r\n\treturn request.post('/api/v1/auth/register', {\r\n\t\tusername: data.username,\r\n\t\tpassword: data.password,\r\n\t\tconfirm_password: data.confirmPassword,\r\n\t\tcompany_name: data.companyName || null,\r\n\t\tphone_num: data.phoneNum,\r\n\t\tcode: data.code\r\n\t})\r\n}\r\n\r\n/**\r\n * 5. 微信登录 - 生成二维码\r\n * @returns {Promise}\r\n */\r\nexport function getWeChatQRCode() {\r\n\treturn request.get('/api/v1/auth/wechat/qrcode')\r\n}\r\n\r\n/**\r\n * 6. 微信登录 - 查询二维码扫码状态\r\n * @param {string} qrcodeId - 二维码ID\r\n * @returns {Promise}\r\n */\r\nexport function checkQRCodeStatus(qrcodeId) {\r\n\treturn request.get(`/api/v1/auth/wechat/qrcode/${qrcodeId}/status`)\r\n}\r\n\r\n/**\r\n * 7. 微信登录 - 完成登录\r\n * @param {string} code - 微信授权码\r\n * @returns {Promise}\r\n */\r\nexport function loginByWechat(code) {\r\n\treturn request.post('/api/v1/auth/wechat/login', {\r\n\t\tcode: code\r\n\t})\r\n}\r\n\r\n/**\r\n * 8. 微信登录 - 模拟扫码（测试用）\r\n * @param {string} qrcodeId - 二维码ID\r\n * @returns {Promise}\r\n */\r\nexport function mockWeChatScan(qrcodeId) {\r\n\treturn request.post('/api/v1/auth/wechat/mock-scan', {\r\n\t\tqrcode_id: qrcodeId\r\n\t})\r\n}\r\n\r\n/**\r\n * 9. 获取当前用户信息\r\n * @returns {Promise}\r\n */\r\nexport function getUserInfo() {\r\n\treturn request.get('/api/v1/auth/profile')\r\n}\r\n\r\n/**\r\n * 10. 用户登出\r\n * @returns {Promise}\r\n */\r\nexport function logout() {\r\n\treturn request.post('/api/v1/auth/logout')\r\n}\r\n"],"names":["request"],"mappings":";;;AAeO,SAAS,gBAAgB,SAAS,UAAU;AAClD,SAAOA,cAAO,QAAC,KAAK,sBAAsB;AAAA,IACzC;AAAA,IACA;AAAA,EACF,CAAE;AACF;AAQO,SAAS,YAAY,UAAU,UAAU,SAAS;AACxD,SAAOA,cAAO,QAAC,KAAK,0BAA0B;AAAA,IAC7C,WAAW;AAAA,IACX;AAAA,EACF,CAAE;AACF;AAQO,SAAS,YAAY,UAAU,MAAM;AAC3C,SAAOA,cAAO,QAAC,KAAK,2BAA2B;AAAA,IAC9C,WAAW;AAAA,IACX;AAAA,EACF,CAAE;AACF;AAaO,SAAS,SAAS,MAAM;AAC9B,SAAOA,cAAO,QAAC,KAAK,yBAAyB;AAAA,IAC5C,UAAU,KAAK;AAAA,IACf,UAAU,KAAK;AAAA,IACf,kBAAkB,KAAK;AAAA,IACvB,cAAc,KAAK,eAAe;AAAA,IAClC,WAAW,KAAK;AAAA,IAChB,MAAM,KAAK;AAAA,EACb,CAAE;AACF;AAwBO,SAAS,cAAc,MAAM;AACnC,SAAOA,cAAO,QAAC,KAAK,6BAA6B;AAAA,IAChD;AAAA,EACF,CAAE;AACF;AAiBO,SAAS,cAAc;AAC7B,SAAOA,cAAO,QAAC,IAAI,sBAAsB;AAC1C;AAMO,SAAS,SAAS;AACxB,SAAOA,cAAO,QAAC,KAAK,qBAAqB;AAC1C;;;;;;;;"}