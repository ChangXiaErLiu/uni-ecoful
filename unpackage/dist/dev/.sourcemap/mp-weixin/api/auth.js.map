{"version":3,"file":"auth.js","sources":["api/auth.js"],"sourcesContent":["/**\n * author：zyg\n * date:2025.11.27\n * api/auth.js\n * 认证模块接口\n */\n\nimport { request } from '@/utils/request.js'\n\n/**\n * 1. 密码登录\n * @param {string} account - 用户名或手机号\n * @param {string} password - 密码\n * @returns {Promise}\n */\nexport function loginByPassword(account, password) {\n\treturn request.post('/api/v1/auth/login', {\n\t\taccount,\n\t\tpassword\n\t})\n}\n\n/**\n * 2. 发送短信验证码\n * @param {string} phoneNum - 手机号\n * @param {string} purpose - 用途：login/register/reset_password\n * @returns {Promise}\n */\nexport function sendSmsCode(phoneNum, purpose = 'login') {\n\treturn request.post('/api/v1/auth/send-code', {\n\t\tphone_num: phoneNum,\n\t\tpurpose: purpose\n\t})\n}\n\n/**\n * 3. 验证码登录（首次登录自动注册）\n * @param {string} phoneNum - 手机号\n * @param {string} code - 验证码\n * @returns {Promise}\n */\nexport function loginByCode(phoneNum, code) {\n\treturn request.post('/api/v1/auth/code-login', {\n\t\tphone_num: phoneNum,\n\t\tcode: code\n\t})\n}\n\n/**\n * 4. 用户注册\n * @param {Object} data - 注册信息\n * @param {string} data.username - 用户名（姓名）\n * @param {string} data.password - 密码\n * @param {string} data.confirmPassword - 确认密码\n * @param {string} data.companyName - 企业名称（可选）\n * @param {string} data.phoneNum - 手机号\n * @param {string} data.code - 验证码\n * @returns {Promise}\n */\nexport function register(data) {\n\treturn request.post('/api/v1/auth/register', {\n\t\tusername: data.username,\n\t\tpassword: data.password,\n\t\tconfirm_password: data.confirmPassword,\n\t\tcompany_name: data.companyName || null,\n\t\tphone_num: data.phoneNum,\n\t\tcode: data.code\n\t})\n}\n\n/**\n * 5. 微信登录 - 生成二维码\n * @returns {Promise}\n */\nexport function getWeChatQRCode() {\n\treturn request.get('/api/v1/auth/wechat/qrcode')\n}\n\n/**\n * 6. 微信登录 - 查询二维码扫码状态\n * @param {string} qrcodeId - 二维码ID\n * @returns {Promise}\n */\nexport function checkQRCodeStatus(qrcodeId) {\n\treturn request.get(`/api/v1/auth/wechat/qrcode/${qrcodeId}/status`)\n}\n\n/**\n * 7. 微信登录 - 完成登录\n * @param {string} code - 微信授权码\n * @returns {Promise}\n */\nexport function loginByWechat(code) {\n\treturn request.post('/api/v1/auth/wechat/login', {\n\t\tcode: code\n\t})\n}\n\n/**\n * 8. 微信登录 - 模拟扫码（测试用）\n * @param {string} qrcodeId - 二维码ID\n * @returns {Promise}\n */\nexport function mockWeChatScan(qrcodeId) {\n\treturn request.post('/api/v1/auth/wechat/mock-scan', {\n\t\tqrcode_id: qrcodeId\n\t})\n}\n\n/**\n * 9. 获取当前用户信息\n * @returns {Promise}\n */\nexport function getUserInfo() {\n\treturn request.get('/api/v1/auth/profile')\n}\n\n/**\n * 10. 用户登出\n * @returns {Promise}\n */\nexport function logout() {\n\treturn request.post('/api/v1/auth/logout')\n}\n"],"names":["request"],"mappings":";;;AAeO,SAAS,gBAAgB,SAAS,UAAU;AAClD,SAAOA,cAAO,QAAC,KAAK,sBAAsB;AAAA,IACzC;AAAA,IACA;AAAA,EACF,CAAE;AACF;AAQO,SAAS,YAAY,UAAU,UAAU,SAAS;AACxD,SAAOA,cAAO,QAAC,KAAK,0BAA0B;AAAA,IAC7C,WAAW;AAAA,IACX;AAAA,EACF,CAAE;AACF;AAQO,SAAS,YAAY,UAAU,MAAM;AAC3C,SAAOA,cAAO,QAAC,KAAK,2BAA2B;AAAA,IAC9C,WAAW;AAAA,IACX;AAAA,EACF,CAAE;AACF;AAaO,SAAS,SAAS,MAAM;AAC9B,SAAOA,cAAO,QAAC,KAAK,yBAAyB;AAAA,IAC5C,UAAU,KAAK;AAAA,IACf,UAAU,KAAK;AAAA,IACf,kBAAkB,KAAK;AAAA,IACvB,cAAc,KAAK,eAAe;AAAA,IAClC,WAAW,KAAK;AAAA,IAChB,MAAM,KAAK;AAAA,EACb,CAAE;AACF;AAwBO,SAAS,cAAc,MAAM;AACnC,SAAOA,cAAO,QAAC,KAAK,6BAA6B;AAAA,IAChD;AAAA,EACF,CAAE;AACF;AAiBO,SAAS,cAAc;AAC7B,SAAOA,cAAO,QAAC,IAAI,sBAAsB;AAC1C;AAMO,SAAS,SAAS;AACxB,SAAOA,cAAO,QAAC,KAAK,qBAAqB;AAC1C;;;;;;;;"}