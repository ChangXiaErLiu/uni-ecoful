{"version":3,"file":"useFieldSurveyData.js","sources":["composables/useFieldSurveyData.js"],"sourcesContent":["import { ref, computed } from 'vue'\nimport { fetchConstructionData as apiFetchConstructionData, fetchEquipmentData as apiFetchEquipmentData } from '@/api/fieldSurvey.js'\n\n/**\n * 现场踏勘数据管理 Composable\n * 管理现场踏勘模块的所有状态和业务逻辑\n * 注意：网络请求已移至 /api/fieldSurvey.js\n */\n\n// 创建单例状态（确保所有组件共享同一份数据）\nlet instance = null\n\nexport function useFieldSurveyData() {\n\t// 如果已经创建过实例，直接返回\n\tif (instance) {\n\t\treturn instance\n\t}\n\n\t// Tab定义\n\tconst tabs = ['建设内容', '设备情况', '治理设施', '排污口']\n\tconst currentTab = ref(0)\n\n\t// 现场踏勘比对清单\n\tconst fieldworkComparison = ref([])\n\n\t//  Tab 0: 主要建设内容 \n\tconst mainContentTable = ref([\n\t\t{\n\t\t\tid: 'mc_1',\n\t\t\tlabel: '项目名称',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_2',\n\t\t\tlabel: '建设单位',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_3',\n\t\t\tlabel: '建设地点',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_4',\n\t\t\tlabel: '建设规模',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_5',\n\t\t\tlabel: '主体工程',\n\t\t\tvalue: [],\n\t\t\ttype: 'image'\n\t\t}\n\t])\n\n\tconst selectModeMain = ref(false)\n\tconst selectedMainIds = ref([])\n\n\tfunction toggleSelectModeMain() {\n\t\tselectModeMain.value = !selectModeMain.value\n\t\tif (!selectModeMain.value) selectedMainIds.value = []\n\t}\n\n\tfunction toggleSelectedMain(id) {\n\t\tconst idx = selectedMainIds.value.indexOf(id)\n\t\tif (idx > -1) selectedMainIds.value.splice(idx, 1)\n\t\telse selectedMainIds.value.push(id)\n\t}\n\n\tfunction removeSelectedMain() {\n\t\tmainContentTable.value = mainContentTable.value.filter(\n\t\t\titem => !selectedMainIds.value.includes(item.id)\n\t\t)\n\t\tselectedMainIds.value = []\n\t\tselectModeMain.value = false\n\t\tuni.showToast({\n\t\t\ttitle: '删除成功',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 主体工程列表\n\tconst constructionList = ref([])\n\tconst constructionSearchKeyword = ref('')\n\tconst loadingConstruction = ref(false)\n\tconst fetchConstructionError = ref('')\n\n\t// 过滤后的主体工程列表\n\tconst filteredConstructionList = computed(() => {\n\t\tif (!constructionSearchKeyword.value) {\n\t\t\treturn constructionList.value\n\t\t}\n\t\tconst keyword = constructionSearchKeyword.value.toLowerCase().trim()\n\t\treturn constructionList.value.filter(item => {\n\t\t\tconst category = (item.category || '').toLowerCase()\n\t\t\tconst name = (item.name || '').toLowerCase()\n\t\t\tconst content = (item.content || '').toLowerCase()\n\t\t\tconst remark = (item.remark || '').toLowerCase()\n\t\t\treturn category.includes(keyword) || name.includes(keyword) || content.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// 搜索输入处理\n\tfunction onConstructionSearchInput() {\n\t\tconsole.log('搜索主体工程关键词:', constructionSearchKeyword.value)\n\t}\n\n\t// 解析主体工程数据\n\tfunction parseConstructionData(apiData) {\n\t\ttry {\n\t\t\tconst parsedConstruction = []\n\n\t\t\tif (!apiData || !Array.isArray(apiData) || apiData.length <= 1) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// 跳过表头行，从索引1开始\n\t\t\tfor (let i = 1; i < apiData.length; i++) {\n\t\t\t\tconst row = apiData[i]\n\n\t\t\t\tif (row.column_1) {\n\t\t\t\t\tconst columns = row.column_1.split('\\\\t')\n\n\t\t\t\t\tif (columns.length >= 6) {\n\t\t\t\t\t\tconst category = columns[0] || ''\n\t\t\t\t\t\tconst name = columns[1] || ''\n\t\t\t\t\t\tconst content = columns[4] || ''\n\n\t\t\t\t\t\tif (name.trim()) {\n\t\t\t\t\t\t\tparsedConstruction.push({\n\t\t\t\t\t\t\t\tid: 'const_' + Date.now() + '_' + i,\n\t\t\t\t\t\t\t\tcategory: category.trim(),\n\t\t\t\t\t\t\t\tname: name.trim(),\n\t\t\t\t\t\t\t\tcontent: content.trim(),\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(`第${i+1}行数据列数不足:`, columns)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`第${i+1}行没有column_1字段:`, row)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parsedConstruction\n\t\t} catch (error) {\n\t\t\tconsole.error('解析主体工程数据失败:', error)\n\t\t\treturn []\n\t\t}\n\t}\n\n\t// 从接口获取主体工程数据\n\tasync function fetchConstructionData(userId, projectId) {\n\t\tloadingConstruction.value = true\n\t\tfetchConstructionError.value = ''\n\n\t\ttry {\n\t\t\t// request.js 已经处理过响应，直接使用返回的数据\n\t\t\tconst resData = await apiFetchConstructionData(userId, projectId)\n\n\t\t\tconsole.log('接口返回完整数据:', resData)\n\n\t\t\tif (resData && resData.data) {\n\t\t\t\tconst apiData = resData.data\n\t\t\t\tconsole.log('主体工程数据数组:', apiData)\n\n\t\t\t\tif (apiData && Array.isArray(apiData) && apiData.length > 1) {\n\t\t\t\t\tconst parsedData = parseConstructionData(apiData)\n\t\t\t\t\tconsole.log('解析后的主体工程数据:', parsedData)\n\n\t\t\t\t\tif (parsedData.length > 0) {\n\t\t\t\t\t\tconstructionList.value = parsedData\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `加载成功`,\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetchConstructionError.value = '解析到的工程数据为空'\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '工程数据解析为空',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfetchConstructionError.value = '接口返回的工程数据格式不正确'\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '工程数据格式错误',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfetchConstructionError.value = resData?.message || '接口返回数据格式异常'\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '获取工程数据失败',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('获取主体工程数据失败:', error)\n\t\t\tfetchConstructionError.value = error.message || '网络请求失败'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '网络请求失败，请检查网络连接',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingConstruction.value = false\n\t\t}\n\t}\n\n\t// 增加主体工程记录\n\tfunction addConstruction() {\n\t\tconst newConstruction = {\n\t\t\tid: 'const_' + Date.now(),\n\t\t\tcategory: '主体工程',\n\t\t\tname: '',\n\t\t\tcontent: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tconstructionList.value.push(newConstruction)\n\t\tuni.showToast({\n\t\t\ttitle: '已添加新工程',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 删除主体工程记录\n\tfunction removeConstruction(index) {\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: '确定要删除这条工程记录吗？',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tconstructionList.value.splice(index, 1)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t//  Tab 1: 设备列表情况 \n\tconst equipmentList = ref([])\n\tconst equipmentSearchKeyword = ref('')\n\tconst loadingEquipment = ref(false)\n\tconst fetchEquipmentError = ref('')\n\n\t// 过滤后的设备列表\n\tconst filteredEquipmentList = computed(() => {\n\t\tif (!equipmentSearchKeyword.value) {\n\t\t\treturn equipmentList.value\n\t\t}\n\t\tconst keyword = equipmentSearchKeyword.value.toLowerCase().trim()\n\t\treturn equipmentList.value.filter(equipment => {\n\t\t\tconst name = (equipment.name || '').toLowerCase()\n\t\t\tconst quantity = (equipment.quantity || '').toLowerCase()\n\t\t\tconst remark = (equipment.remark || '').toLowerCase()\n\t\t\treturn name.includes(keyword) || quantity.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// 搜索输入处理\n\tfunction onEquipmentSearchInput() {\n\t\tconsole.log('搜索设备关键词:', equipmentSearchKeyword.value)\n\t}\n\n\t// 解析设备数据\n\tfunction parseEquipmentData(apiData) {\n\t\ttry {\n\t\t\tconst parsedEquipment = []\n\n\t\t\tif (!apiData || !Array.isArray(apiData) || apiData.length <= 1) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// 跳过表头行，从索引1开始\n\t\t\tfor (let i = 1; i < apiData.length; i++) {\n\t\t\t\tconst row = apiData[i]\n\n\t\t\t\tif (row.column_1) {\n\t\t\t\t\tconst columns = row.column_1.split('\\\\t')\n\n\t\t\t\t\tif (columns.length >= 4) {\n\t\t\t\t\t\tconst deviceName = columns[1] || ''\n\t\t\t\t\t\tconst quantity = columns[3] || ''\n\n\t\t\t\t\t\tif (deviceName.trim()) {\n\t\t\t\t\t\t\tparsedEquipment.push({\n\t\t\t\t\t\t\t\tid: 'eq_' + Date.now() + '_' + i,\n\t\t\t\t\t\t\t\tname: deviceName.trim(),\n\t\t\t\t\t\t\t\tquantity: quantity.trim(),\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(`第${i+1}行数据列数不足:`, columns)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`第${i+1}行没有column_1字段:`, row)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parsedEquipment\n\t\t} catch (error) {\n\t\t\tconsole.error('解析设备数据失败:', error)\n\t\t\treturn []\n\t\t}\n\t}\n\n\t// 从接口获取设备数据\n\tasync function fetchEquipmentData(userId, projectId) {\n\t\tloadingEquipment.value = true\n\t\tfetchEquipmentError.value = ''\n\n\t\ttry {\n\t\t\t// request.js 已经处理过响应，直接使用返回的数据\n\t\t\tconst resData = await apiFetchEquipmentData(userId, projectId)\n\n\t\t\tconsole.log('接口返回完整数据:', resData)\n\n\t\t\tif (resData && resData.data) {\n\t\t\t\tconst apiData = resData.data\n\t\t\t\tconsole.log('设备数据数组:', apiData)\n\n\t\t\t\tif (apiData && Array.isArray(apiData) && apiData.length > 1) {\n\t\t\t\t\tconst parsedData = parseEquipmentData(apiData)\n\t\t\t\t\tconsole.log('解析后的设备数据:', parsedData)\n\n\t\t\t\t\tif (parsedData.length > 0) {\n\t\t\t\t\t\tequipmentList.value = parsedData\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `加载成功，共${parsedData.length}条设备数据`,\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetchEquipmentError.value = '解析到的设备数据为空'\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '设备数据解析为空',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfetchEquipmentError.value = '接口返回的设备数据格式不正确'\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '设备数据格式错误',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfetchEquipmentError.value = resData?.message || '接口返回数据格式异常'\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '获取设备数据失败',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('获取设备数据失败:', error)\n\t\t\tfetchEquipmentError.value = error.message || '网络请求失败'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '网络请求失败，请检查网络连接',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingEquipment.value = false\n\t\t}\n\t}\n\n\t// 增加设备记录\n\tfunction addEquipment() {\n\t\tconst newEquipment = {\n\t\t\tid: 'eq_' + Date.now(),\n\t\t\tname: '',\n\t\t\tquantity: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tequipmentList.value.push(newEquipment)\n\t\tuni.showToast({\n\t\t\ttitle: '已添加新设备',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 删除设备记录\n\tfunction removeEquipment(index) {\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: '确定要删除这条设备记录吗？',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tequipmentList.value.splice(index, 1)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t//  Tab 2: 污染物设施情况（从项目基本信息中提取）\n\tconst pollutionFacilityList = ref([])\n\tconst facilitySearchKeyword = ref('')\n\tconst loadingFacility = ref(false)\n\tconst fetchFacilityError = ref('')\n\n\t// 过滤后的设施列表\n\tconst filteredFacilityList = computed(() => {\n\t\tif (!facilitySearchKeyword.value) {\n\t\t\treturn pollutionFacilityList.value\n\t\t}\n\t\tconst keyword = facilitySearchKeyword.value.toLowerCase().trim()\n\t\treturn pollutionFacilityList.value.filter(facility => {\n\t\t\tconst name = (facility.name || '').toLowerCase()\n\t\t\tconst quantity = (facility.quantity || '').toLowerCase()\n\t\t\tconst remark = (facility.remark || '').toLowerCase()\n\t\t\treturn name.includes(keyword) || quantity.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// 搜索输入处理\n\tfunction onFacilitySearchInput() {\n\t\tconsole.log('搜索设施关键词:', facilitySearchKeyword.value)\n\t}\n\n\t/**\n\t * 从项目基本信息（baseTable）中提取治理设施\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} baseTable - 项目基本信息表\n\t */\n\tfunction extractFacilitiesFromBaseTable(projectId, baseTable) {\n\t\ttry {\n\t\t\tloadingFacility.value = true\n\t\t\tfetchFacilityError.value = ''\n\n\t\t\t// 1. 查找污染物产排情况\n\t\t\tconst emissionData = baseTable.find(x => x.id === 'pollutants_emission')?.value\n\t\t\tif (!emissionData || typeof emissionData !== 'object') {\n\t\t\t\tconsole.log('未找到污染物信息，跳过设施提取')\n\t\t\t\tpollutionFacilityList.value = []\n\t\t\t\tsaveFacilityList(projectId, [])\n\t\t\t\tloadingFacility.value = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst facilityList = []\n\n\t\t\t// 2. 遍历所有污染物类型，提取设施信息\n\t\t\tconst pollutantTypes = ['水污染物', '大气污染物', '噪声', '固体废物', '危险废物']\n\n\t\t\tpollutantTypes.forEach(type => {\n\t\t\t\tconst pollutants = emissionData[type]\n\t\t\t\tif (!pollutants) return\n\n\t\t\t\t// 处理数组类型的污染物\n\t\t\t\tif (Array.isArray(pollutants)) {\n\t\t\t\t\tpollutants.forEach((item, index) => {\n\t\t\t\t\t\tconst pollutantName = item['污染物名称'] || item['废物名称'] || ''\n\t\t\t\t\t\tconst treatmentMeasure = item['污染治理措施'] || item['治理措施'] || ''\n\n\t\t\t\t\t\tif (pollutantName.trim()) {\n\t\t\t\t\t\t\tfacilityList.push({\n\t\t\t\t\t\t\t\tid: `facility_${type}_${index}_${Date.now()}`,\n\t\t\t\t\t\t\t\tname: pollutantName.trim(),\n\t\t\t\t\t\t\t\tquantity: treatmentMeasure.trim(),\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: [],\n\t\t\t\t\t\t\t\tpollutantType: type // 记录污染物类型\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// 处理对象类型的污染物\n\t\t\t\telse if (typeof pollutants === 'object') {\n\t\t\t\t\tconst pollutantName = pollutants['污染物名称'] || pollutants['废物名称'] || ''\n\t\t\t\t\tconst treatmentMeasure = pollutants['污染治理措施'] || pollutants['治理措施'] || ''\n\n\t\t\t\t\tif (pollutantName.trim()) {\n\t\t\t\t\t\tfacilityList.push({\n\t\t\t\t\t\t\tid: `facility_${type}_${Date.now()}`,\n\t\t\t\t\t\t\tname: pollutantName.trim(),\n\t\t\t\t\t\t\tquantity: treatmentMeasure.trim(),\n\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\timages: [],\n\t\t\t\t\t\t\tpollutantType: type\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 3. 更新状态\n\t\t\tpollutionFacilityList.value = facilityList\n\n\t\t\t// 4. 保存到本地存储\n\t\t\tsaveFacilityList(projectId, facilityList)\n\n\t\t\tconsole.log(`✅ 从项目 ${projectId} 提取了 ${facilityList.length} 条治理设施`)\n\n\t\t\tif (facilityList.length > 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `已提取 ${facilityList.length} 条设施`,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('提取治理设施失败:', error)\n\t\t\tfetchFacilityError.value = error.message || '提取失败'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '提取治理设施失败',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingFacility.value = false\n\t\t}\n\t}\n\n\t/**\n\t * 保存治理设施列表到本地存储\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} facilityList - 设施列表\n\t */\n\tfunction saveFacilityList(projectId, facilityList) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_facility_list_${projectId}`\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(facilityList))\n\t\t\tconsole.log(`✅ 项目 ${projectId} 的治理设施已保存到本地`)\n\t\t} catch (error) {\n\t\t\tconsole.error('保存治理设施失败:', error)\n\t\t}\n\t}\n\n\t/**\n\t * 从本地存储加载治理设施列表\n\t * @param {number|string} projectId - 项目ID\n\t */\n\tfunction loadFacilityList(projectId) {\n\t\ttry {\n\t\t\tloadingFacility.value = true\n\t\t\tfetchFacilityError.value = ''\n\n\t\t\tconst cacheKey = `project_facility_list_${projectId}`\n\t\t\tconst cachedData = uni.getStorageSync(cacheKey)\n\n\t\t\tif (cachedData) {\n\t\t\t\tpollutionFacilityList.value = JSON.parse(cachedData)\n\t\t\t\tconsole.log(`✅ 已加载项目 ${projectId} 的治理设施，共 ${pollutionFacilityList.value.length} 条`)\n\t\t\t} else {\n\t\t\t\tpollutionFacilityList.value = []\n\t\t\t\tconsole.log(`ℹ️ 项目 ${projectId} 暂无治理设施数据`)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('加载治理设施失败:', error)\n\t\t\tpollutionFacilityList.value = []\n\t\t\tfetchFacilityError.value = error.message || '加载失败'\n\t\t} finally {\n\t\t\tloadingFacility.value = false\n\t\t}\n\t}\n\n\t/**\n\t * 刷新治理设施（重新从baseTable提取）\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} baseTable - 项目基本信息表\n\t */\n\tfunction refreshFacilityData(projectId, baseTable) {\n\t\textractFacilitiesFromBaseTable(projectId, baseTable)\n\t}\n\n\t// 增加设施记录\n\tfunction addPollutionFacility(projectId) {\n\t\tconst newFacility = {\n\t\t\tid: 'pf_' + Date.now(),\n\t\t\tname: '',\n\t\t\tquantity: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tpollutionFacilityList.value.push(newFacility)\n\t\t\n\t\t// 保存到本地存储\n\t\tif (projectId) {\n\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t}\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '已添加新设施',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 删除设施记录\n\tfunction removePollutionFacility(index, projectId) {\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: '确定要删除这条设施记录吗？',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tpollutionFacilityList.value.splice(index, 1)\n\t\t\t\t\t\n\t\t\t\t\t// 保存到本地存储\n\t\t\t\t\tif (projectId) {\n\t\t\t\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// 更新设施数据（用于实时保存用户编辑）\n\tfunction updateFacilityData(projectId) {\n\t\tif (projectId) {\n\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t}\n\t}\n\n\t//  Tab 3: 排污口情况（从项目基本信息中提取）\n\tconst wastewaterOutlets = ref([])  // 废水排污口\n\tconst exhaustOutlets = ref([])     // 废气排污口\n\tconst noiseOutlets = ref([])       // 噪声排污口\n\n\t/**\n\t * 从项目基本信息（baseTable）中提取排污口编号\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} baseTable - 项目基本信息表\n\t */\n\tfunction extractOutletsFromBaseTable(projectId, baseTable) {\n\t\ttry {\n\t\t\t// 1. 查找污染物产排情况\n\t\t\tconst emissionData = baseTable.find(x => x.id === 'pollutants_emission')?.value\n\t\t\tif (!emissionData || typeof emissionData !== 'object') {\n\t\t\t\tconsole.log('未找到污染物信息，跳过排污口提取')\n\t\t\t\twastewaterOutlets.value = []\n\t\t\t\texhaustOutlets.value = []\n\t\t\t\tnoiseOutlets.value = []\n\t\t\t\tsaveOutletList(projectId, [], [], [])\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst wastewaterList = []\n\t\t\tconst exhaustList = []\n\t\t\tconst noiseList = []\n\n\t\t\t/**\n\t\t\t * 分割排污口编号字符串\n\t\t\t * 支持分隔符：; , ， 、 空格\n\t\t\t */\n\t\t\tfunction splitOutletCodes(codeString) {\n\t\t\t\tif (!codeString || typeof codeString !== 'string') return []\n\t\t\t\t\n\t\t\t\t// 使用正则分割，支持多种分隔符\n\t\t\t\tconst codes = codeString\n\t\t\t\t\t.split(/[;,，、\\s]+/)\n\t\t\t\t\t.map(code => code.trim())\n\t\t\t\t\t.filter(code => code && code.length > 0)\n\t\t\t\t\n\t\t\t\treturn codes\n\t\t\t}\n\n\t\t\t// 2. 提取废水排污口（从水污染物）\n\t\t\tconst waterPollutants = emissionData['水污染物']\n\t\t\tif (waterPollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(waterPollutants) ? waterPollutants : [waterPollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['排污口编号'] || item['排放口编号'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\t// 避免重复\n\t\t\t\t\t\tif (!wastewaterList.some(o => o.code === code)) {\n\t\t\t\t\t\t\twastewaterList.push({\n\t\t\t\t\t\t\t\tid: `outlet_wastewater_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 3. 提取废气排污口（从大气污染物）\n\t\t\tconst airPollutants = emissionData['大气污染物']\n\t\t\tif (airPollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(airPollutants) ? airPollutants : [airPollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['排污口编号'] || item['排放口编号'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\tif (!exhaustList.some(o => o.code === code)) {\n\t\t\t\t\t\t\texhaustList.push({\n\t\t\t\t\t\t\t\tid: `outlet_exhaust_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 4. 提取噪声排污口（从噪声）\n\t\t\tconst noisePollutants = emissionData['噪声']\n\t\t\tif (noisePollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(noisePollutants) ? noisePollutants : [noisePollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['排污口编号'] || item['排放口编号'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\tif (!noiseList.some(o => o.code === code)) {\n\t\t\t\t\t\t\tnoiseList.push({\n\t\t\t\t\t\t\t\tid: `outlet_noise_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 5. 更新状态\n\t\t\twastewaterOutlets.value = wastewaterList\n\t\t\texhaustOutlets.value = exhaustList\n\t\t\tnoiseOutlets.value = noiseList\n\n\t\t\t// 6. 保存到本地存储\n\t\t\tsaveOutletList(projectId, wastewaterList, exhaustList, noiseList)\n\n\t\t\tconst totalCount = wastewaterList.length + exhaustList.length + noiseList.length\n\t\t\tconsole.log(`✅ 从项目 ${projectId} 提取了 ${totalCount} 个排污口`)\n\n\t\t\tif (totalCount > 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `已提取 ${totalCount} 个排污口`,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('提取排污口失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '提取排污口失败',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * 保存排污口列表到本地存储\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} wastewaterList - 废水排污口列表\n\t * @param {Array} exhaustList - 废气排污口列表\n\t * @param {Array} noiseList - 噪声排污口列表\n\t */\n\tfunction saveOutletList(projectId, wastewaterList, exhaustList, noiseList) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_outlet_list_${projectId}`\n\t\t\tconst outletData = {\n\t\t\t\twastewater: wastewaterList,\n\t\t\t\texhaust: exhaustList,\n\t\t\t\tnoise: noiseList\n\t\t\t}\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(outletData))\n\t\t\tconsole.log(`✅ 项目 ${projectId} 的排污口已保存到本地`)\n\t\t} catch (error) {\n\t\t\tconsole.error('保存排污口失败:', error)\n\t\t}\n\t}\n\n\t/**\n\t * 从本地存储加载排污口列表\n\t * @param {number|string} projectId - 项目ID\n\t */\n\tfunction loadOutletList(projectId) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_outlet_list_${projectId}`\n\t\t\tconst cachedData = uni.getStorageSync(cacheKey)\n\n\t\t\tif (cachedData) {\n\t\t\t\tconst outletData = JSON.parse(cachedData)\n\t\t\t\twastewaterOutlets.value = outletData.wastewater || []\n\t\t\t\texhaustOutlets.value = outletData.exhaust || []\n\t\t\t\tnoiseOutlets.value = outletData.noise || []\n\t\t\t\t\n\t\t\t\tconst totalCount = wastewaterOutlets.value.length + exhaustOutlets.value.length + noiseOutlets.value.length\n\t\t\t\tconsole.log(`✅ 已加载项目 ${projectId} 的排污口，共 ${totalCount} 个`)\n\t\t\t} else {\n\t\t\t\twastewaterOutlets.value = []\n\t\t\t\texhaustOutlets.value = []\n\t\t\t\tnoiseOutlets.value = []\n\t\t\t\tconsole.log(`ℹ️ 项目 ${projectId} 暂无排污口数据`)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('加载排污口失败:', error)\n\t\t\twastewaterOutlets.value = []\n\t\t\texhaustOutlets.value = []\n\t\t\tnoiseOutlets.value = []\n\t\t}\n\t}\n\n\t/**\n\t * 刷新排污口（重新从baseTable提取）\n\t * @param {number|string} projectId - 项目ID\n\t * @param {Array} baseTable - 项目基本信息表\n\t */\n\tfunction refreshOutletData(projectId, baseTable) {\n\t\textractOutletsFromBaseTable(projectId, baseTable)\n\t}\n\n\t// 生成下一个排污口编号（用于手动新增）\n\tfunction generateOutletCode(type) {\n\t\tlet outlets = []\n\t\tlet prefix = ''\n\t\t\n\t\tif (type === 'wastewater') {\n\t\t\toutlets = wastewaterOutlets.value\n\t\t\tprefix = 'DW'\n\t\t} else if (type === 'exhaust') {\n\t\t\toutlets = exhaustOutlets.value\n\t\t\tprefix = 'DA'\n\t\t} else if (type === 'noise') {\n\t\t\toutlets = noiseOutlets.value\n\t\t\tprefix = 'ZS-'\n\t\t}\n\n\t\t// 找到最大编号\n\t\tlet maxNum = 0\n\t\toutlets.forEach(outlet => {\n\t\t\tconst match = outlet.code.match(/\\d+/)\n\t\t\tif (match) {\n\t\t\t\tconst num = parseInt(match[0], 10)\n\t\t\t\tif (num > maxNum) maxNum = num\n\t\t\t}\n\t\t})\n\n\t\t// 生成新编号\n\t\tconst newNum = maxNum + 1\n\t\tif (type === 'noise') {\n\t\t\treturn `${prefix}${String(newNum).padStart(2, '0')}`\n\t\t} else {\n\t\t\treturn `${prefix}${String(newNum).padStart(3, '0')}`\n\t\t}\n\t}\n\n\t// 添加排污口\n\tfunction addOutlet(type, projectId) {\n\t\tconst code = generateOutletCode(type)\n\t\tconst newOutlet = {\n\t\t\tid: `outlet_${type}_${Date.now()}`,\n\t\t\tcode: code,\n\t\t\tname: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\n\t\tif (type === 'wastewater') {\n\t\t\twastewaterOutlets.value.push(newOutlet)\n\t\t} else if (type === 'exhaust') {\n\t\t\texhaustOutlets.value.push(newOutlet)\n\t\t} else if (type === 'noise') {\n\t\t\tnoiseOutlets.value.push(newOutlet)\n\t\t}\n\n\t\t// 保存到本地存储\n\t\tif (projectId) {\n\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t}\n\n\t\tuni.showToast({\n\t\t\ttitle: '已添加新排污口',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 删除排污口\n\tfunction removeOutlet(type, index, projectId) {\n\t\tlet outlets = []\n\t\tlet typeName = ''\n\n\t\tif (type === 'wastewater') {\n\t\t\toutlets = wastewaterOutlets.value\n\t\t\ttypeName = '废水排污口'\n\t\t} else if (type === 'exhaust') {\n\t\t\toutlets = exhaustOutlets.value\n\t\t\ttypeName = '废气排污口'\n\t\t} else if (type === 'noise') {\n\t\t\toutlets = noiseOutlets.value\n\t\t\ttypeName = '噪声排污口'\n\t\t}\n\n\t\tconst outlet = outlets[index]\n\t\t\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: `确定要删除${typeName} ${outlet.code} 吗？`,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\toutlets.splice(index, 1)\n\t\t\t\t\t\n\t\t\t\t\t// 保存到本地存储\n\t\t\t\t\tif (projectId) {\n\t\t\t\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// 更新排污口数据（用于实时保存用户编辑）\n\tfunction updateOutletData(projectId) {\n\t\tif (projectId) {\n\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t}\n\t}\n\n\t//  通用方法 \n\t\n\t// Tab切换处理\n\tfunction handleTabChange(index, userId, projectId, baseTable = null) {\n\t\tcurrentTab.value = index\n\t\t\n\t\t// 当切换到建设内容Tab时，自动获取主体工程数据\n\t\tif (index === 0 && !constructionList.value.length) {\n\t\t\tfetchConstructionData(userId, projectId)\n\t\t}\n\t\t\n\t\t// 当切换到设备情况Tab时，自动获取数据\n\t\tif (index === 1 && !equipmentList.value.length) {\n\t\t\tfetchEquipmentData(userId, projectId)\n\t\t}\n\t\t\n\t\t// 当切换到治理设施Tab时，自动加载本地数据\n\t\tif (index === 2) {\n\t\t\tloadFacilityList(projectId)\n\t\t}\n\t\t\n\t\t// 当切换到排污口Tab时，自动加载本地数据\n\t\tif (index === 3) {\n\t\t\tloadOutletList(projectId)\n\t\t}\n\t}\n\n\t// 生成现场踏勘比对清单\n\tfunction generateFieldworkComparison(datasheet) {\n\t\tconst comparison = datasheet.map(item => ({\n\t\t\tid: Date.now() + Math.random(),\n\t\t\tproject: item.label,\n\t\t\teiaRequirement: item.value || '待确认',\n\t\t\tfieldSituation: '',\n\t\t\tdifference: '待现场核实'\n\t\t}))\n\n\t\tfieldworkComparison.value = comparison\n\t\tuni.showToast({\n\t\t\ttitle: `功能开发中`,\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// 创建实例对象\n\tinstance = {\n\t\t// Tab相关\n\t\ttabs,\n\t\tcurrentTab,\n\t\thandleTabChange,\n\t\t\n\t\t// 建设内容\n\t\tmainContentTable,\n\t\tselectModeMain,\n\t\tselectedMainIds,\n\t\ttoggleSelectModeMain,\n\t\ttoggleSelectedMain,\n\t\tremoveSelectedMain,\n\t\t\n\t\t// 主体工程\n\t\tconstructionList,\n\t\tconstructionSearchKeyword,\n\t\tfilteredConstructionList,\n\t\tloadingConstruction,\n\t\tfetchConstructionError,\n\t\tonConstructionSearchInput,\n\t\tfetchConstructionData,\n\t\taddConstruction,\n\t\tremoveConstruction,\n\t\t\n\t\t// 设备情况\n\t\tequipmentList,\n\t\tequipmentSearchKeyword,\n\t\tfilteredEquipmentList,\n\t\tloadingEquipment,\n\t\tfetchEquipmentError,\n\t\tonEquipmentSearchInput,\n\t\tfetchEquipmentData,\n\t\taddEquipment,\n\t\tremoveEquipment,\n\t\t\n\t\t// 治理设施（新方法）\n\t\tpollutionFacilityList,\n\t\tfacilitySearchKeyword,\n\t\tfilteredFacilityList,\n\t\tloadingFacility,\n\t\tfetchFacilityError,\n\t\tonFacilitySearchInput,\n\t\textractFacilitiesFromBaseTable,  // 新：从baseTable提取\n\t\tsaveFacilityList,                // 新：保存到本地\n\t\tloadFacilityList,                // 新：从本地加载\n\t\trefreshFacilityData,             // 新：刷新数据\n\t\tupdateFacilityData,              // 新：更新数据\n\t\taddPollutionFacility,\n\t\tremovePollutionFacility,\n\t\t\n\t\t// 排污口（新方法）\n\t\twastewaterOutlets,\n\t\texhaustOutlets,\n\t\tnoiseOutlets,\n\t\textractOutletsFromBaseTable,  // 新：从baseTable提取\n\t\tsaveOutletList,                // 新：保存到本地\n\t\tloadOutletList,                // 新：从本地加载\n\t\trefreshOutletData,             // 新：刷新数据\n\t\tupdateOutletData,              // 新：更新数据\n\t\taddOutlet,\n\t\tremoveOutlet,\n\t\t\n\t\t// 比对清单\n\t\tfieldworkComparison,\n\t\tgenerateFieldworkComparison\n\t}\n\n\treturn instance\n}\n"],"names":["ref","uni","computed","apiFetchConstructionData","apiFetchEquipmentData"],"mappings":"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"}