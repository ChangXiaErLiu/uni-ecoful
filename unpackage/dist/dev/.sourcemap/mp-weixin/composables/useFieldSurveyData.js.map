{"version":3,"file":"useFieldSurveyData.js","sources":["composables/useFieldSurveyData.js"],"sourcesContent":["import { ref, computed } from 'vue'\nimport { fetchConstructionData as apiFetchConstructionData, fetchEquipmentData as apiFetchEquipmentData } from '@/api/fieldSurvey.js'\n\n/**\n * Áé∞Âú∫Ë∏èÂãòÊï∞ÊçÆÁÆ°ÁêÜ Composable\n * ÁÆ°ÁêÜÁé∞Âú∫Ë∏èÂãòÊ®°ÂùóÁöÑÊâÄÊúâÁä∂ÊÄÅÂíå‰∏öÂä°ÈÄªËæë\n * Ê≥®ÊÑèÔºöÁΩëÁªúËØ∑Ê±ÇÂú® /api/fieldSurvey.js\n */\n\n// ÂàõÂª∫Âçï‰æãÁä∂ÊÄÅÔºàÁ°Æ‰øùÊâÄÊúâÁªÑ‰ª∂ÂÖ±‰∫´Âêå‰∏Ä‰ªΩÊï∞ÊçÆÔºâ\nlet instance = null\n\nexport function useFieldSurveyData() {\n\t// Â¶ÇÊûúÂ∑≤ÁªèÂàõÂª∫ËøáÂÆû‰æãÔºåÁõ¥Êé•ËøîÂõû\n\tif (instance) {\n\t\treturn instance\n\t}\n\n\t// TabÂÆö‰πâ\n\tconst tabs = ['Âª∫ËÆæÂÜÖÂÆπ', 'ËÆæÂ§áÊÉÖÂÜµ', 'Ê≤ªÁêÜËÆæÊñΩ', 'ÊéíÊ±°Âè£']\n\tconst currentTab = ref(0)\n\n\t// Áé∞Âú∫Ë∏èÂãòÊØîÂØπÊ∏ÖÂçï\n\tconst fieldworkComparison = ref([])\n\n\t//  Tab 0: ‰∏ªË¶ÅÂª∫ËÆæÂÜÖÂÆπ \n\tconst mainContentTable = ref([\n\t\t{\n\t\t\tid: 'mc_1',\n\t\t\tlabel: 'È°πÁõÆÂêçÁß∞',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_2',\n\t\t\tlabel: 'Âª∫ËÆæÂçï‰Ωç',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_3',\n\t\t\tlabel: 'Âª∫ËÆæÂú∞ÁÇπ',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_4',\n\t\t\tlabel: 'Âª∫ËÆæËßÑÊ®°',\n\t\t\tvalue: '',\n\t\t\ttype: 'text'\n\t\t},\n\t\t{\n\t\t\tid: 'mc_5',\n\t\t\tlabel: '‰∏ª‰ΩìÂ∑•Á®ã',\n\t\t\tvalue: [],\n\t\t\ttype: 'image'\n\t\t}\n\t])\n\n\tconst selectModeMain = ref(false)\n\tconst selectedMainIds = ref([])\n\n\tfunction toggleSelectModeMain() {\n\t\tselectModeMain.value = !selectModeMain.value\n\t\tif (!selectModeMain.value) selectedMainIds.value = []\n\t}\n\n\tfunction toggleSelectedMain(id) {\n\t\tconst idx = selectedMainIds.value.indexOf(id)\n\t\tif (idx > -1) selectedMainIds.value.splice(idx, 1)\n\t\telse selectedMainIds.value.push(id)\n\t}\n\n\tfunction removeSelectedMain() {\n\t\tmainContentTable.value = mainContentTable.value.filter(\n\t\t\titem => !selectedMainIds.value.includes(item.id)\n\t\t)\n\t\tselectedMainIds.value = []\n\t\tselectModeMain.value = false\n\t\tuni.showToast({\n\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// ‰∏ª‰ΩìÂ∑•Á®ãÂàóË°®\n\tconst constructionList = ref([])\n\tconst constructionSearchKeyword = ref('')\n\tconst loadingConstruction = ref(false)\n\tconst fetchConstructionError = ref('')\n\n\t// ËøáÊª§ÂêéÁöÑ‰∏ª‰ΩìÂ∑•Á®ãÂàóË°®\n\tconst filteredConstructionList = computed(() => {\n\t\tif (!constructionSearchKeyword.value) {\n\t\t\treturn constructionList.value\n\t\t}\n\t\tconst keyword = constructionSearchKeyword.value.toLowerCase().trim()\n\t\treturn constructionList.value.filter(item => {\n\t\t\tconst category = (item.category || '').toLowerCase()\n\t\t\tconst name = (item.name || '').toLowerCase()\n\t\t\tconst content = (item.content || '').toLowerCase()\n\t\t\tconst remark = (item.remark || '').toLowerCase()\n\t\t\treturn category.includes(keyword) || name.includes(keyword) || content.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// ÊêúÁ¥¢ËæìÂÖ•Â§ÑÁêÜ\n\tfunction onConstructionSearchInput() {\n\t\tconsole.log('ÊêúÁ¥¢‰∏ª‰ΩìÂ∑•Á®ãÂÖ≥ÈîÆËØç:', constructionSearchKeyword.value)\n\t}\n\n\t// Ëß£Êûê‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆÔºàÊñ∞Ê†ºÂºèÔºöcolumn_1 ÈáåÊòØ‰∫åÊ¨° JSON Â≠óÁ¨¶‰∏≤Ôºâ\n\tfunction parseConstructionData(apiData) {\n\t\ttry {\n\t\t\tif (!apiData || !Array.isArray(apiData) || apiData.length === 0) {\n\t\t\t\tconsole.warn('‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ‰∏∫Á©∫ÊàñÊ†ºÂºè‰∏çÊ≠£Á°Æ')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// Ê£ÄÊü•Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶Êúâ column_1\n\t\t\tconst firstItem = apiData[0]\n\t\t\tif (!firstItem || !firstItem.column_1) {\n\t\t\t\tconsole.warn('‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆÁº∫Â∞ë column_1 Â≠óÊÆµ')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// 1. Ëß£Êûê JSON Â≠óÁ¨¶‰∏≤\n\t\t\tconst raw = firstItem.column_1\n\t\t\tconst table = JSON.parse(raw)\n\n\t\t\t// 2. Ê£ÄÊü•Ëß£ÊûêÁªìÊûú\n\t\t\tif (!table || !table.success) {\n\t\t\t\tconsole.warn('‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆËß£ÊûêÂ§±Ë¥•Êàñ success ‰∏∫ false')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst rows = table.data || []\n\t\t\tconsole.log(`‚úÖ ÊàêÂäüËß£Êûê‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆÔºåÂÖ± ${rows.length} Êù°ËÆ∞ÂΩï`)\n\n\t\t\t// 3. Êò†Â∞ÑÊàêÂâçÁ´ØÈúÄË¶ÅÁöÑÁªìÊûÑ\n\t\t\t// Ê†πÊçÆÊï∞ÊçÆÁªìÊûÑÔºåÊèêÂèñÊúâÊÑè‰πâÁöÑË°å\n\t\t\tconst parsedConstruction = []\n\t\t\t\n\t\t\tfor (let i = 0; i < rows.length; i++) {\n\t\t\t\tconst row = rows[i]\n\t\t\t\t\n\t\t\t\t// Ëé∑ÂèñÊâÄÊúâÂ≠óÊÆµÂÄº\n\t\t\t\tconst col0 = row['Ë°®21Êú¨È°πÁôΩÁªÑÊàê‰∏ÄÂÆΩË°®'] || ''\n\t\t\t\tconst col1 = row['field_1'] || ''\n\t\t\t\tconst col2 = row['field_2'] || ''\n\t\t\t\tconst col3 = row['field_3'] || ''\n\t\t\t\tconst col4 = row['field_4'] || ''\n\t\t\t\tconst col5 = row['field_5'] || ''\n\t\t\t\t\n\t\t\t\t// Ë∑≥ËøáË°®Â§¥Ë°åÂíåÁ©∫Ë°å\n\t\t\t\tif (i === 0 || (!col0 && !col1 && !col2 && !col3 && !col4 && !col5)) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// ÊèêÂèñÊúâÊïàÊï∞ÊçÆ\n\t\t\t\t// Ê†πÊçÆÊï∞ÊçÆÁâπÁÇπÔºö\n\t\t\t\t// - col0 ÈÄöÂ∏∏ÊòØÂ∫èÂè∑ÊàñÁ±ªÂà´\n\t\t\t\t// - col1 ÊòØÂª∫Á≠ëÂêçÁß∞ÊàñÂ∑•Á®ãÁ±ªÂûã\n\t\t\t\t// - col2 ÊòØÂ≠êÁ±ªÂûã\n\t\t\t\t// - col3 ÊòØÊ•ºÂ±ÇÊàñ‰ΩçÁΩÆ\n\t\t\t\t// - col4 ÊòØÂ∑•Á®ãÂÜÖÂÆπ\n\t\t\t\t// - col5 ÊòØÈù¢ÁßØÁ≠âÂ§áÊ≥®‰ø°ÊÅØ\n\t\t\t\t\n\t\t\t\tlet category = col0.trim()\n\t\t\t\tlet name = col1.trim() || col2.trim()\n\t\t\t\tlet location = col3.trim()\n\t\t\t\tlet content = col4.trim()\n\t\t\t\tlet remark = col5.trim()\n\t\t\t\t\n\t\t\t\t// Â¶ÇÊûúÊúâÂÜÖÂÆπÔºåÂ∞±Ê∑ªÂä†\n\t\t\t\tif (content || name) {\n\t\t\t\t\tparsedConstruction.push({\n\t\t\t\t\t\tid: 'const_' + Date.now() + '_' + i,\n\t\t\t\t\t\tcategory: category,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tlocation: location,\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\tremark: remark,\n\t\t\t\t\t\timages: []\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.log(`‚úÖ ËøáÊª§ÂêéÊúâÊïàÊï∞ÊçÆ ${parsedConstruction.length} Êù°`)\n\t\t\treturn parsedConstruction\n\t\t} catch (e) {\n\t\t\tconsole.error('‚ùå Ëß£Êûê‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆÂ§±Ë¥•:', e)\n\t\t\treturn []\n\t\t}\n\t}\n\n\t// ‰ªéÊé•Âè£Ëé∑Âèñ‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ\n\tasync function fetchConstructionData(userId, projectId) {\n\t\tloadingConstruction.value = true\n\t\tfetchConstructionError.value = ''\n\n\t\ttry {\n\t\t\tconsole.log(`üîÑ ÂºÄÂßãËé∑Âèñ‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ - userId: ${userId}, projectId: ${projectId}`)\n\t\t\t\n\t\t\t// request.js Â∑≤ÁªèÂ§ÑÁêÜËøáÂìçÂ∫îÔºåÁõ¥Êé•‰ΩøÁî®ËøîÂõûÁöÑÊï∞ÊçÆ\n\t\t\tconst resData = await apiFetchConstructionData(userId, projectId)\n\n\t\t\tif (resData && resData.data) {\n\t\t\t\tconst apiData = resData.data\n\t\t\t\tconsole.log('üì¶ Êé•Êî∂Âà∞‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ:', apiData)\n\n\t\t\t\tif (apiData && Array.isArray(apiData) && apiData.length > 0) {\n\t\t\t\t\tconst parsedData = parseConstructionData(apiData)\n\t\t\t\t\tconsole.log('‚úÖ Ëß£ÊûêÂêéÁöÑ‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ:', parsedData)\n\n\t\t\t\t\tif (parsedData.length > 0) {\n\t\t\t\t\t\tconstructionList.value = parsedData\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `Âä†ËΩΩÊàêÂäüÔºåÂÖ±${parsedData.length}Êù°Â∑•Á®ã`,\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetchConstructionError.value = 'Êú™ÊâæÂà∞ÊúâÊïàÁöÑÂ∑•Á®ãÊï∞ÊçÆ'\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'Êú™ÊâæÂà∞Â∑•Á®ãÊï∞ÊçÆ',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfetchConstructionError.value = 'Êé•Âè£ËøîÂõûÁöÑÊï∞ÊçÆ‰∏∫Á©∫'\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Â∑•Á®ãÊï∞ÊçÆ‰∏∫Á©∫',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfetchConstructionError.value = resData?.message || 'Êé•Âè£ËøîÂõûÊï∞ÊçÆÊ†ºÂºèÂºÇÂ∏∏'\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Ëé∑ÂèñÂ∑•Á®ãÊï∞ÊçÆÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('‚ùå Ëé∑Âèñ‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆÂ§±Ë¥•:', error)\n\t\t\tfetchConstructionError.value = error.message || 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingConstruction.value = false\n\t\t}\n\t}\n\n\t// Â¢ûÂä†‰∏ª‰ΩìÂ∑•Á®ãËÆ∞ÂΩï\n\tfunction addConstruction() {\n\t\tconst newConstruction = {\n\t\t\tid: 'const_' + Date.now(),\n\t\t\tcategory: '‰∏ª‰ΩìÂ∑•Á®ã',\n\t\t\tname: '',\n\t\t\tcontent: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tconstructionList.value.push(newConstruction)\n\t\tuni.showToast({\n\t\t\ttitle: 'Â∑≤Ê∑ªÂä†Êñ∞Â∑•Á®ã',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// Âà†Èô§‰∏ª‰ΩìÂ∑•Á®ãËÆ∞ÂΩï\n\tfunction removeConstruction(index) {\n\t\tuni.showModal({\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°Â∑•Á®ãËÆ∞ÂΩïÂêóÔºü',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tconstructionList.value.splice(index, 1)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t//  Tab 1: ËÆæÂ§áÂàóË°®ÊÉÖÂÜµ \n\tconst equipmentList = ref([])\n\tconst equipmentSearchKeyword = ref('')\n\tconst loadingEquipment = ref(false)\n\tconst fetchEquipmentError = ref('')\n\n\t// ËøáÊª§ÂêéÁöÑËÆæÂ§áÂàóË°®\n\tconst filteredEquipmentList = computed(() => {\n\t\tif (!equipmentSearchKeyword.value) {\n\t\t\treturn equipmentList.value\n\t\t}\n\t\tconst keyword = equipmentSearchKeyword.value.toLowerCase().trim()\n\t\treturn equipmentList.value.filter(equipment => {\n\t\t\tconst name = (equipment.name || '').toLowerCase()\n\t\t\tconst quantity = (equipment.quantity || '').toLowerCase()\n\t\t\tconst remark = (equipment.remark || '').toLowerCase()\n\t\t\treturn name.includes(keyword) || quantity.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// ÊêúÁ¥¢ËæìÂÖ•Â§ÑÁêÜ\n\tfunction onEquipmentSearchInput() {\n\t\tconsole.log('ÊêúÁ¥¢ËÆæÂ§áÂÖ≥ÈîÆËØç:', equipmentSearchKeyword.value)\n\t}\n\n\t// Ëß£ÊûêËÆæÂ§áÊï∞ÊçÆ\n\t// Ëß£ÊûêËÆæÂ§áÊï∞ÊçÆÔºàÊñ∞Ê†ºÂºèÔºöcolumn_1 ÈáåÊòØ‰∫åÊ¨° JSON Â≠óÁ¨¶‰∏≤Ôºâ\n\tfunction parseEquipmentData(apiData) {\n\t\ttry {\n\t\t\tif (!apiData || !Array.isArray(apiData) || apiData.length === 0) {\n\t\t\t\tconsole.warn('ËÆæÂ§áÊï∞ÊçÆ‰∏∫Á©∫ÊàñÊ†ºÂºè‰∏çÊ≠£Á°Æ')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// Ê£ÄÊü•Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶Êúâ column_1\n\t\t\tconst firstItem = apiData[0]\n\t\t\tif (!firstItem || !firstItem.column_1) {\n\t\t\t\tconsole.warn('ËÆæÂ§áÊï∞ÊçÆÁº∫Â∞ë column_1 Â≠óÊÆµ')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\t// 1. Ëß£Êûê JSON Â≠óÁ¨¶‰∏≤\n\t\t\tconst raw = firstItem.column_1\n\t\t\tconst table = JSON.parse(raw)\n\n\t\t\t// 2. Ê£ÄÊü•Ëß£ÊûêÁªìÊûú\n\t\t\tif (!table || !table.success) {\n\t\t\t\tconsole.warn('ËÆæÂ§áÊï∞ÊçÆËß£ÊûêÂ§±Ë¥•Êàñ success ‰∏∫ false')\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst rows = table.data || []\n\t\t\tconsole.log(`‚úÖ ÊàêÂäüËß£ÊûêËÆæÂ§áÊï∞ÊçÆÔºåÂÖ± ${rows.length} Êù°ËÆ∞ÂΩï`)\n\n\t\t\t// 3. Êò†Â∞ÑÊàêÂâçÁ´ØÈúÄË¶ÅÁöÑÁªìÊûÑ\n\t\t\treturn rows\n\t\t\t\t.filter(r => r.col_ËÆæÂ§áÂêç && r.col_ËÆæÂ§áÂêç.trim()) // ËøáÊª§ÊéâÁ©∫Ë°å\n\t\t\t\t.map((r, idx) => ({\n\t\t\t\t\tid: 'eq_' + Date.now() + '_' + idx,\n\t\t\t\t\tname: r.col_ËÆæÂ§áÂêç || '',\n\t\t\t\t\tmodel: r.col_ÂûãÂè∑ || '',\n\t\t\t\t\tquantity: r.col_Êï∞Èáè || '',\n\t\t\t\t\tpurpose: r.col_Áî®ÈÄî || '', // Áî®ÈÄî\n\t\t\t\t\tlocation: r.col_ÊâÄÂ§ÑÂÆû || '', // ÊâÄÂ§ÑÂÆûÈ™åÂÆ§\n\t\t\t\t\tremark: '', // Â§áÊ≥®ÁïôÁ©∫Ôºå‰æõÁî®Êà∑Â°´ÂÜô\n\t\t\t\t\timages: []\n\t\t\t\t}))\n\t\t} catch (e) {\n\t\t\tconsole.error('‚ùå Ëß£ÊûêËÆæÂ§áÊï∞ÊçÆÂ§±Ë¥•:', e)\n\t\t\treturn []\n\t\t}\n\t}\n\t\n\t// ‰ªéÊé•Âè£Ëé∑ÂèñËÆæÂ§áÊï∞ÊçÆ\n\tasync function fetchEquipmentData(userId, projectId) {\n\t\tloadingEquipment.value = true\n\t\tfetchEquipmentError.value = ''\n\n\t\ttry {\n\t\t\tconsole.log(`üîÑ ÂºÄÂßãËé∑ÂèñËÆæÂ§áÊï∞ÊçÆ - userId: ${userId}, projectId: ${projectId}`)\n\t\t\t\n\t\t\t// request.js Â∑≤ÁªèÂ§ÑÁêÜËøáÂìçÂ∫îÔºåÁõ¥Êé•‰ΩøÁî®ËøîÂõûÁöÑÊï∞ÊçÆ\n\t\t\tconst resData = await apiFetchEquipmentData(userId, projectId)\n\n\t\t\tif (resData && resData.data) {\n\t\t\t\tconst apiData = resData.data\n\t\t\t\tconsole.log('üì¶ Êé•Êî∂Âà∞ËÆæÂ§áÊï∞ÊçÆ:', apiData)\n\n\t\t\t\tif (apiData && Array.isArray(apiData) && apiData.length > 0) {\n\t\t\t\t\tconst parsedData = parseEquipmentData(apiData)\n\t\t\t\t\tconsole.log('‚úÖ Ëß£ÊûêÂêéÁöÑËÆæÂ§áÊï∞ÊçÆ:', parsedData)\n\n\t\t\t\t\tif (parsedData.length > 0) {\n\t\t\t\t\t\tequipmentList.value = parsedData\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `Âä†ËΩΩÊàêÂäüÔºåÂÖ±${parsedData.length}Êù°ËÆæÂ§á`,\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetchEquipmentError.value = 'Êú™ÊâæÂà∞ÊúâÊïàÁöÑËÆæÂ§áÊï∞ÊçÆ'\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'Êú™ÊâæÂà∞ËÆæÂ§áÊï∞ÊçÆ',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfetchEquipmentError.value = 'Êé•Âè£ËøîÂõûÁöÑÊï∞ÊçÆ‰∏∫Á©∫'\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'ËÆæÂ§áÊï∞ÊçÆ‰∏∫Á©∫',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfetchEquipmentError.value = resData?.message || 'Êé•Âè£ËøîÂõûÊï∞ÊçÆÊ†ºÂºèÂºÇÂ∏∏'\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Ëé∑ÂèñËÆæÂ§áÊï∞ÊçÆÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('‚ùå Ëé∑ÂèñËÆæÂ§áÊï∞ÊçÆÂ§±Ë¥•:', error)\n\t\t\tfetchEquipmentError.value = error.message || 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingEquipment.value = false\n\t\t}\n\t}\n\n\t// Â¢ûÂä†ËÆæÂ§áËÆ∞ÂΩï\n\tfunction addEquipment() {\n\t\tconst newEquipment = {\n\t\t\tid: 'eq_' + Date.now(),\n\t\t\tname: '',\n\t\t\tquantity: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tequipmentList.value.push(newEquipment)\n\t\tuni.showToast({\n\t\t\ttitle: 'Â∑≤Ê∑ªÂä†Êñ∞ËÆæÂ§á',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// Âà†Èô§ËÆæÂ§áËÆ∞ÂΩï\n\tfunction removeEquipment(index) {\n\t\tuni.showModal({\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ËÆæÂ§áËÆ∞ÂΩïÂêóÔºü',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tequipmentList.value.splice(index, 1)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t//  Tab 2: Ê±°ÊüìÁâ©ËÆæÊñΩÊÉÖÂÜµÔºà‰ªéÈ°πÁõÆÂü∫Êú¨‰ø°ÊÅØ‰∏≠ÊèêÂèñÔºâ\n\tconst pollutionFacilityList = ref([])\n\tconst facilitySearchKeyword = ref('')\n\tconst loadingFacility = ref(false)\n\tconst fetchFacilityError = ref('')\n\n\t// ËøáÊª§ÂêéÁöÑËÆæÊñΩÂàóË°®\n\tconst filteredFacilityList = computed(() => {\n\t\tif (!facilitySearchKeyword.value) {\n\t\t\treturn pollutionFacilityList.value\n\t\t}\n\t\tconst keyword = facilitySearchKeyword.value.toLowerCase().trim()\n\t\treturn pollutionFacilityList.value.filter(facility => {\n\t\t\tconst name = (facility.name || '').toLowerCase()\n\t\t\tconst quantity = (facility.quantity || '').toLowerCase()\n\t\t\tconst remark = (facility.remark || '').toLowerCase()\n\t\t\treturn name.includes(keyword) || quantity.includes(keyword) || remark.includes(keyword)\n\t\t})\n\t})\n\n\t// ÊêúÁ¥¢ËæìÂÖ•Â§ÑÁêÜ\n\tfunction onFacilitySearchInput() {\n\t\tconsole.log('ÊêúÁ¥¢ËÆæÊñΩÂÖ≥ÈîÆËØç:', facilitySearchKeyword.value)\n\t}\n\n\t/**\n\t * ‰ªéÈ°πÁõÆÂü∫Êú¨‰ø°ÊÅØÔºàbaseTableÔºâ‰∏≠ÊèêÂèñÊ≤ªÁêÜËÆæÊñΩ\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} baseTable - È°πÁõÆÂü∫Êú¨‰ø°ÊÅØË°®\n\t */\n\tfunction extractFacilitiesFromBaseTable(projectId, baseTable) {\n\t\ttry {\n\t\t\tloadingFacility.value = true\n\t\t\tfetchFacilityError.value = ''\n\n\t\t\t// 1. Êü•ÊâæÊ±°ÊüìÁâ©‰∫ßÊéíÊÉÖÂÜµ\n\t\t\tconst emissionData = baseTable.find(x => x.id === 'pollutants_emission')?.value\n\t\t\tif (!emissionData || typeof emissionData !== 'object') {\n\t\t\t\tconsole.log('Êú™ÊâæÂà∞Ê±°ÊüìÁâ©‰ø°ÊÅØÔºåË∑≥ËøáËÆæÊñΩÊèêÂèñ')\n\t\t\t\tpollutionFacilityList.value = []\n\t\t\t\tsaveFacilityList(projectId, [])\n\t\t\t\tloadingFacility.value = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst facilityList = []\n\n\t\t\t// 2. Âè™ÊèêÂèñÊ∞¥Ê±°ÊüìÁâ©„ÄÅÂ§ßÊ∞îÊ±°ÊüìÁâ©„ÄÅÂô™Â£∞ÁöÑÊ≤ªÁêÜÊé™ÊñΩÔºà‰∏çÂåÖÊã¨Âõ∫‰ΩìÂ∫üÁâ©ÂíåÂç±Èô©Â∫üÁâ©Ôºâ\n\t\t\tconst pollutantTypes = ['Ê∞¥Ê±°ÊüìÁâ©', 'Â§ßÊ∞îÊ±°ÊüìÁâ©', 'Âô™Â£∞']\n\n\t\t\tpollutantTypes.forEach(type => {\n\t\t\t\tconst pollutants = emissionData[type]\n\t\t\t\tif (!pollutants) return\n\n\t\t\t\t// Â§ÑÁêÜÊï∞ÁªÑÁ±ªÂûãÁöÑÊ±°ÊüìÁâ©\n\t\t\t\tif (Array.isArray(pollutants)) {\n\t\t\t\t\tpollutants.forEach((item, index) => {\n\t\t\t\t\t\tconst pollutantName = item['Ê±°ÊüìÁâ©ÂêçÁß∞'] || item['Â∫üÁâ©ÂêçÁß∞'] || ''\n\t\t\t\t\t\tconst treatmentMeasure = item['Ê±°ÊüìÊ≤ªÁêÜÊé™ÊñΩ'] || item['Ê≤ªÁêÜÊé™ÊñΩ'] || ''\n\n\t\t\t\t\t\tif (pollutantName.trim()) {\n\t\t\t\t\t\t\tfacilityList.push({\n\t\t\t\t\t\t\t\tid: `facility_${type}_${index}_${Date.now()}`,\n\t\t\t\t\t\t\t\tname: pollutantName.trim(),\n\t\t\t\t\t\t\t\tquantity: treatmentMeasure.trim(),\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: [],\n\t\t\t\t\t\t\t\tpollutantType: type // ËÆ∞ÂΩïÊ±°ÊüìÁâ©Á±ªÂûã\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// Â§ÑÁêÜÂØπË±°Á±ªÂûãÁöÑÊ±°ÊüìÁâ©\n\t\t\t\telse if (typeof pollutants === 'object') {\n\t\t\t\t\tconst pollutantName = pollutants['Ê±°ÊüìÁâ©ÂêçÁß∞'] || pollutants['Â∫üÁâ©ÂêçÁß∞'] || ''\n\t\t\t\t\tconst treatmentMeasure = pollutants['Ê±°ÊüìÊ≤ªÁêÜÊé™ÊñΩ'] || pollutants['Ê≤ªÁêÜÊé™ÊñΩ'] || ''\n\n\t\t\t\t\tif (pollutantName.trim()) {\n\t\t\t\t\t\tfacilityList.push({\n\t\t\t\t\t\t\tid: `facility_${type}_${Date.now()}`,\n\t\t\t\t\t\t\tname: pollutantName.trim(),\n\t\t\t\t\t\t\tquantity: treatmentMeasure.trim(),\n\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\timages: [],\n\t\t\t\t\t\t\tpollutantType: type\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 3. Âõ∫ÂÆöÊ∑ªÂä†‰∏§Êù°Âõ∫Â∫üÊöÇÂ≠òÈó¥ËÆ∞ÂΩïÔºàÂ§ÑÁêÜÂ∑•Ëâ∫ÁïôÁ©∫ÔºåÁî±Áî®Êà∑ÊâãÂä®Â°´ÂÜôÔºâ\n\t\t\tfacilityList.push({\n\t\t\t\tid: `facility_solid_waste_${Date.now()}`,\n\t\t\t\tname: '‰∏ÄËà¨Âõ∫Â∫üÊöÇÂ≠òÈó¥',\n\t\t\t\tquantity: '',\n\t\t\t\tremark: '',\n\t\t\t\timages: [],\n\t\t\t\tpollutantType: 'Âõ∫‰ΩìÂ∫üÁâ©'\n\t\t\t})\n\n\t\t\tfacilityList.push({\n\t\t\t\tid: `facility_hazardous_waste_${Date.now()}`,\n\t\t\t\tname: 'Âç±Â∫üÊöÇÂ≠òÈó¥',\n\t\t\t\tquantity: '',\n\t\t\t\tremark: '',\n\t\t\t\timages: [],\n\t\t\t\tpollutantType: 'Âç±Èô©Â∫üÁâ©'\n\t\t\t})\n\n\t\t\t// 4. Êõ¥Êñ∞Áä∂ÊÄÅ\n\t\t\tpollutionFacilityList.value = facilityList\n\n\t\t\t// 5. ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\t\tsaveFacilityList(projectId, facilityList)\n\n\t\t\tconsole.log(`‚úÖ ‰ªéÈ°πÁõÆ ${projectId} ÊèêÂèñ‰∫Ü ${facilityList.length} Êù°Ê≤ªÁêÜËÆæÊñΩÔºàÂê´2Êù°Âõ∫Â∫üÊöÇÂ≠òÈó¥Ôºâ`)\n\n\t\t\tif (facilityList.length > 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `Â∑≤ÊèêÂèñ ${facilityList.length} Êù°ËÆæÊñΩ`,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('ÊèêÂèñÊ≤ªÁêÜËÆæÊñΩÂ§±Ë¥•:', error)\n\t\t\tfetchFacilityError.value = error.message || 'ÊèêÂèñÂ§±Ë¥•'\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ÊèêÂèñÊ≤ªÁêÜËÆæÊñΩÂ§±Ë¥•',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\tloadingFacility.value = false\n\t\t}\n\t}\n\n\t/**\n\t * ‰øùÂ≠òÊ≤ªÁêÜËÆæÊñΩÂàóË°®Âà∞Êú¨Âú∞Â≠òÂÇ®\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} facilityList - ËÆæÊñΩÂàóË°®\n\t */\n\tfunction saveFacilityList(projectId, facilityList) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_facility_list_${projectId}`\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(facilityList))\n\t\t\t// console.log(`‚úÖ È°πÁõÆ ${projectId} ÁöÑÊ≤ªÁêÜËÆæÊñΩÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞`)\n\t\t} catch (error) {\n\t\t\tconsole.error('‰øùÂ≠òÊ≤ªÁêÜËÆæÊñΩÂ§±Ë¥•:', error)\n\t\t}\n\t}\n\n\t/**\n\t * ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÊ≤ªÁêÜËÆæÊñΩÂàóË°®\n\t * @param {number|string} projectId - È°πÁõÆID\n\t */\n\tfunction loadFacilityList(projectId) {\n\t\ttry {\n\t\t\tloadingFacility.value = true\n\t\t\tfetchFacilityError.value = ''\n\n\t\t\tconst cacheKey = `project_facility_list_${projectId}`\n\t\t\tconst cachedData = uni.getStorageSync(cacheKey)\n\n\t\t\tif (cachedData) {\n\t\t\t\tpollutionFacilityList.value = JSON.parse(cachedData)\n\t\t\t\tconsole.log(`‚úÖ Â∑≤Âä†ËΩΩÈ°πÁõÆ ${projectId} ÁöÑÊ≤ªÁêÜËÆæÊñΩÔºåÂÖ± ${pollutionFacilityList.value.length} Êù°`)\n\t\t\t} else {\n\t\t\t\tpollutionFacilityList.value = []\n\t\t\t\tconsole.log(`‚ÑπÔ∏è È°πÁõÆ ${projectId} ÊöÇÊó†Ê≤ªÁêÜËÆæÊñΩÊï∞ÊçÆ`)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Âä†ËΩΩÊ≤ªÁêÜËÆæÊñΩÂ§±Ë¥•:', error)\n\t\t\tpollutionFacilityList.value = []\n\t\t\tfetchFacilityError.value = error.message || 'Âä†ËΩΩÂ§±Ë¥•'\n\t\t} finally {\n\t\t\tloadingFacility.value = false\n\t\t}\n\t}\n\n\t/**\n\t * Âà∑Êñ∞Ê≤ªÁêÜËÆæÊñΩÔºàÈáçÊñ∞‰ªébaseTableÊèêÂèñÔºâ\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} baseTable - È°πÁõÆÂü∫Êú¨‰ø°ÊÅØË°®\n\t */\n\tfunction refreshFacilityData(projectId, baseTable) {\n\t\textractFacilitiesFromBaseTable(projectId, baseTable)\n\t}\n\n\t// Â¢ûÂä†ËÆæÊñΩËÆ∞ÂΩï\n\tfunction addPollutionFacility(projectId) {\n\t\tconst newFacility = {\n\t\t\tid: 'pf_' + Date.now(),\n\t\t\tname: '',\n\t\t\tquantity: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\t\tpollutionFacilityList.value.push(newFacility)\n\t\t\n\t\t// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\tif (projectId) {\n\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t}\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: 'Â∑≤Ê∑ªÂä†Êñ∞ËÆæÊñΩ',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// Âà†Èô§ËÆæÊñΩËÆ∞ÂΩï\n\tfunction removePollutionFacility(index, projectId) {\n\t\tuni.showModal({\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ËÆæÊñΩËÆ∞ÂΩïÂêóÔºü',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tpollutionFacilityList.value.splice(index, 1)\n\t\t\t\t\t\n\t\t\t\t\t// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\t\t\t\tif (projectId) {\n\t\t\t\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// Êõ¥Êñ∞ËÆæÊñΩÊï∞ÊçÆÔºàÁî®‰∫éÂÆûÊó∂‰øùÂ≠òÁî®Êà∑ÁºñËæëÔºâ\n\tfunction updateFacilityData(projectId) {\n\t\tif (projectId) {\n\t\t\tsaveFacilityList(projectId, pollutionFacilityList.value)\n\t\t}\n\t}\n\n\t//  Tab 3: ÊéíÊ±°Âè£ÊÉÖÂÜµÔºà‰ªéÈ°πÁõÆÂü∫Êú¨‰ø°ÊÅØ‰∏≠ÊèêÂèñÔºâ\n\tconst wastewaterOutlets = ref([])  // Â∫üÊ∞¥ÊéíÊ±°Âè£\n\tconst exhaustOutlets = ref([])     // Â∫üÊ∞îÊéíÊ±°Âè£\n\tconst noiseOutlets = ref([])       // Âô™Â£∞ÊéíÊ±°Âè£\n\n\t/**\n\t * ‰ªéÈ°πÁõÆÂü∫Êú¨‰ø°ÊÅØÔºàbaseTableÔºâ‰∏≠ÊèêÂèñÊéíÊ±°Âè£ÁºñÂè∑\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} baseTable - È°πÁõÆÂü∫Êú¨‰ø°ÊÅØË°®\n\t */\n\tfunction extractOutletsFromBaseTable(projectId, baseTable) {\n\t\ttry {\n\t\t\t// 1. Êü•ÊâæÊ±°ÊüìÁâ©‰∫ßÊéíÊÉÖÂÜµ\n\t\t\tconst emissionData = baseTable.find(x => x.id === 'pollutants_emission')?.value\n\t\t\tif (!emissionData || typeof emissionData !== 'object') {\n\t\t\t\tconsole.log('Êú™ÊâæÂà∞Ê±°ÊüìÁâ©‰ø°ÊÅØÔºåË∑≥ËøáÊéíÊ±°Âè£ÊèêÂèñ')\n\t\t\t\twastewaterOutlets.value = []\n\t\t\t\texhaustOutlets.value = []\n\t\t\t\tnoiseOutlets.value = []\n\t\t\t\tsaveOutletList(projectId, [], [], [])\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst wastewaterList = []\n\t\t\tconst exhaustList = []\n\t\t\tconst noiseList = []\n\n\t\t\t/**\n\t\t\t * ÂàÜÂâ≤ÊéíÊ±°Âè£ÁºñÂè∑Â≠óÁ¨¶‰∏≤\n\t\t\t * ÊîØÊåÅÂàÜÈöîÁ¨¶Ôºö; , Ôºå „ÄÅ Á©∫Ê†º\n\t\t\t */\n\t\t\tfunction splitOutletCodes(codeString) {\n\t\t\t\tif (!codeString || typeof codeString !== 'string') return []\n\t\t\t\t\n\t\t\t\t// ‰ΩøÁî®Ê≠£ÂàôÂàÜÂâ≤ÔºåÊîØÊåÅÂ§öÁßçÂàÜÈöîÁ¨¶\n\t\t\t\tconst codes = codeString\n\t\t\t\t\t.split(/[;,Ôºå„ÄÅ\\s]+/)\n\t\t\t\t\t.map(code => code.trim())\n\t\t\t\t\t.filter(code => code && code.length > 0)\n\t\t\t\t\n\t\t\t\treturn codes\n\t\t\t}\n\n\t\t\t// 2. ÊèêÂèñÂ∫üÊ∞¥ÊéíÊ±°Âè£Ôºà‰ªéÊ∞¥Ê±°ÊüìÁâ©Ôºâ\n\t\t\tconst waterPollutants = emissionData['Ê∞¥Ê±°ÊüìÁâ©']\n\t\t\tif (waterPollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(waterPollutants) ? waterPollutants : [waterPollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['ÊéíÊ±°Âè£ÁºñÂè∑'] || item['ÊéíÊîæÂè£ÁºñÂè∑'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\t// ÈÅøÂÖçÈáçÂ§ç\n\t\t\t\t\t\tif (!wastewaterList.some(o => o.code === code)) {\n\t\t\t\t\t\t\twastewaterList.push({\n\t\t\t\t\t\t\t\tid: `outlet_wastewater_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 3. ÊèêÂèñÂ∫üÊ∞îÊéíÊ±°Âè£Ôºà‰ªéÂ§ßÊ∞îÊ±°ÊüìÁâ©Ôºâ\n\t\t\tconst airPollutants = emissionData['Â§ßÊ∞îÊ±°ÊüìÁâ©']\n\t\t\tif (airPollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(airPollutants) ? airPollutants : [airPollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['ÊéíÊ±°Âè£ÁºñÂè∑'] || item['ÊéíÊîæÂè£ÁºñÂè∑'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\tif (!exhaustList.some(o => o.code === code)) {\n\t\t\t\t\t\t\texhaustList.push({\n\t\t\t\t\t\t\t\tid: `outlet_exhaust_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 4. ÊèêÂèñÂô™Â£∞ÊéíÊ±°Âè£Ôºà‰ªéÂô™Â£∞Ôºâ\n\t\t\tconst noisePollutants = emissionData['Âô™Â£∞']\n\t\t\tif (noisePollutants) {\n\t\t\t\tconst pollutantArray = Array.isArray(noisePollutants) ? noisePollutants : [noisePollutants]\n\t\t\t\t\n\t\t\t\tpollutantArray.forEach(item => {\n\t\t\t\t\tconst outletCode = item['ÊéíÊ±°Âè£ÁºñÂè∑'] || item['ÊéíÊîæÂè£ÁºñÂè∑'] || ''\n\t\t\t\t\tconst codes = splitOutletCodes(outletCode)\n\t\t\t\t\t\n\t\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\t\tif (!noiseList.some(o => o.code === code)) {\n\t\t\t\t\t\t\tnoiseList.push({\n\t\t\t\t\t\t\t\tid: `outlet_noise_${code}_${Date.now()}`,\n\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tremark: '',\n\t\t\t\t\t\t\t\timages: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// 5. Êõ¥Êñ∞Áä∂ÊÄÅ\n\t\t\twastewaterOutlets.value = wastewaterList\n\t\t\texhaustOutlets.value = exhaustList\n\t\t\tnoiseOutlets.value = noiseList\n\n\t\t\t// 6. ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\t\tsaveOutletList(projectId, wastewaterList, exhaustList, noiseList)\n\n\t\t\tconst totalCount = wastewaterList.length + exhaustList.length + noiseList.length\n\t\t\tconsole.log(`‚úÖ ‰ªéÈ°πÁõÆ ${projectId} ÊèêÂèñ‰∫Ü ${totalCount} ‰∏™ÊéíÊ±°Âè£`)\n\n\t\t\tif (totalCount > 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `Â∑≤ÊèêÂèñ ${totalCount} ‰∏™ÊéíÊ±°Âè£`,\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('ÊèêÂèñÊéíÊ±°Âè£Â§±Ë¥•:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'ÊèêÂèñÊéíÊ±°Âè£Â§±Ë¥•',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * ‰øùÂ≠òÊéíÊ±°Âè£ÂàóË°®Âà∞Êú¨Âú∞Â≠òÂÇ®\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} wastewaterList - Â∫üÊ∞¥ÊéíÊ±°Âè£ÂàóË°®\n\t * @param {Array} exhaustList - Â∫üÊ∞îÊéíÊ±°Âè£ÂàóË°®\n\t * @param {Array} noiseList - Âô™Â£∞ÊéíÊ±°Âè£ÂàóË°®\n\t */\n\tfunction saveOutletList(projectId, wastewaterList, exhaustList, noiseList) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_outlet_list_${projectId}`\n\t\t\tconst outletData = {\n\t\t\t\twastewater: wastewaterList,\n\t\t\t\texhaust: exhaustList,\n\t\t\t\tnoise: noiseList\n\t\t\t}\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(outletData))\n\t\t\tconsole.log(`‚úÖ È°πÁõÆ ${projectId} ÁöÑÊéíÊ±°Âè£Â∑≤‰øùÂ≠òÂà∞Êú¨Âú∞`)\n\t\t} catch (error) {\n\t\t\tconsole.error('‰øùÂ≠òÊéíÊ±°Âè£Â§±Ë¥•:', error)\n\t\t}\n\t}\n\n\t/**\n\t * ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÊéíÊ±°Âè£ÂàóË°®\n\t * @param {number|string} projectId - È°πÁõÆID\n\t */\n\tfunction loadOutletList(projectId) {\n\t\ttry {\n\t\t\tconst cacheKey = `project_outlet_list_${projectId}`\n\t\t\tconst cachedData = uni.getStorageSync(cacheKey)\n\n\t\t\tif (cachedData) {\n\t\t\t\tconst outletData = JSON.parse(cachedData)\n\t\t\t\twastewaterOutlets.value = outletData.wastewater || []\n\t\t\t\texhaustOutlets.value = outletData.exhaust || []\n\t\t\t\tnoiseOutlets.value = outletData.noise || []\n\t\t\t\t\n\t\t\t\tconst totalCount = wastewaterOutlets.value.length + exhaustOutlets.value.length + noiseOutlets.value.length\n\t\t\t\tconsole.log(`‚úÖ Â∑≤Âä†ËΩΩÈ°πÁõÆ ${projectId} ÁöÑÊéíÊ±°Âè£ÔºåÂÖ± ${totalCount} ‰∏™`)\n\t\t\t} else {\n\t\t\t\twastewaterOutlets.value = []\n\t\t\t\texhaustOutlets.value = []\n\t\t\t\tnoiseOutlets.value = []\n\t\t\t\tconsole.log(`‚ÑπÔ∏è È°πÁõÆ ${projectId} ÊöÇÊó†ÊéíÊ±°Âè£Êï∞ÊçÆ`)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Âä†ËΩΩÊéíÊ±°Âè£Â§±Ë¥•:', error)\n\t\t\twastewaterOutlets.value = []\n\t\t\texhaustOutlets.value = []\n\t\t\tnoiseOutlets.value = []\n\t\t}\n\t}\n\n\t/**\n\t * Âà∑Êñ∞ÊéíÊ±°Âè£ÔºàÈáçÊñ∞‰ªébaseTableÊèêÂèñÔºâ\n\t * @param {number|string} projectId - È°πÁõÆID\n\t * @param {Array} baseTable - È°πÁõÆÂü∫Êú¨‰ø°ÊÅØË°®\n\t */\n\tfunction refreshOutletData(projectId, baseTable) {\n\t\textractOutletsFromBaseTable(projectId, baseTable)\n\t}\n\n\t// ÁîüÊàê‰∏ã‰∏Ä‰∏™ÊéíÊ±°Âè£ÁºñÂè∑ÔºàÁî®‰∫éÊâãÂä®Êñ∞Â¢ûÔºâ\n\tfunction generateOutletCode(type) {\n\t\tlet outlets = []\n\t\tlet prefix = ''\n\t\t\n\t\tif (type === 'wastewater') {\n\t\t\toutlets = wastewaterOutlets.value\n\t\t\tprefix = 'DW'\n\t\t} else if (type === 'exhaust') {\n\t\t\toutlets = exhaustOutlets.value\n\t\t\tprefix = 'DA'\n\t\t} else if (type === 'noise') {\n\t\t\toutlets = noiseOutlets.value\n\t\t\tprefix = 'ZS-'\n\t\t}\n\n\t\t// ÊâæÂà∞ÊúÄÂ§ßÁºñÂè∑\n\t\tlet maxNum = 0\n\t\toutlets.forEach(outlet => {\n\t\t\tconst match = outlet.code.match(/\\d+/)\n\t\t\tif (match) {\n\t\t\t\tconst num = parseInt(match[0], 10)\n\t\t\t\tif (num > maxNum) maxNum = num\n\t\t\t}\n\t\t})\n\n\t\t// ÁîüÊàêÊñ∞ÁºñÂè∑\n\t\tconst newNum = maxNum + 1\n\t\tif (type === 'noise') {\n\t\t\treturn `${prefix}${String(newNum).padStart(2, '0')}`\n\t\t} else {\n\t\t\treturn `${prefix}${String(newNum).padStart(3, '0')}`\n\t\t}\n\t}\n\n\t// Ê∑ªÂä†ÊéíÊ±°Âè£\n\tfunction addOutlet(type, projectId) {\n\t\tconst code = generateOutletCode(type)\n\t\tconst newOutlet = {\n\t\t\tid: `outlet_${type}_${Date.now()}`,\n\t\t\tcode: code,\n\t\t\tname: '',\n\t\t\tremark: '',\n\t\t\timages: []\n\t\t}\n\n\t\tif (type === 'wastewater') {\n\t\t\twastewaterOutlets.value.push(newOutlet)\n\t\t} else if (type === 'exhaust') {\n\t\t\texhaustOutlets.value.push(newOutlet)\n\t\t} else if (type === 'noise') {\n\t\t\tnoiseOutlets.value.push(newOutlet)\n\t\t}\n\n\t\t// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\tif (projectId) {\n\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t}\n\n\t\tuni.showToast({\n\t\t\ttitle: 'Â∑≤Ê∑ªÂä†Êñ∞ÊéíÊ±°Âè£',\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// Âà†Èô§ÊéíÊ±°Âè£\n\tfunction removeOutlet(type, index, projectId) {\n\t\tlet outlets = []\n\t\tlet typeName = ''\n\n\t\tif (type === 'wastewater') {\n\t\t\toutlets = wastewaterOutlets.value\n\t\t\ttypeName = 'Â∫üÊ∞¥ÊéíÊ±°Âè£'\n\t\t} else if (type === 'exhaust') {\n\t\t\toutlets = exhaustOutlets.value\n\t\t\ttypeName = 'Â∫üÊ∞îÊéíÊ±°Âè£'\n\t\t} else if (type === 'noise') {\n\t\t\toutlets = noiseOutlets.value\n\t\t\ttypeName = 'Âô™Â£∞ÊéíÊ±°Âè£'\n\t\t}\n\n\t\tconst outlet = outlets[index]\n\t\t\n\t\tuni.showModal({\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\tcontent: `Á°ÆÂÆöË¶ÅÂà†Èô§${typeName} ${outlet.code} ÂêóÔºü`,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\toutlets.splice(index, 1)\n\t\t\t\t\t\n\t\t\t\t\t// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\n\t\t\t\t\tif (projectId) {\n\t\t\t\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// Êõ¥Êñ∞ÊéíÊ±°Âè£Êï∞ÊçÆÔºàÁî®‰∫éÂÆûÊó∂‰øùÂ≠òÁî®Êà∑ÁºñËæëÔºâ\n\tfunction updateOutletData(projectId) {\n\t\tif (projectId) {\n\t\t\tsaveOutletList(projectId, wastewaterOutlets.value, exhaustOutlets.value, noiseOutlets.value)\n\t\t}\n\t}\n\n\t//  ÈÄöÁî®ÊñπÊ≥ï \n\t\n\t// TabÂàáÊç¢Â§ÑÁêÜ\n\tfunction handleTabChange(index, userId, projectId, baseTable = null) {\n\t\tcurrentTab.value = index\n\t\t\n\t\t// ÂΩìÂàáÊç¢Âà∞Âª∫ËÆæÂÜÖÂÆπTabÊó∂ÔºåËá™Âä®Ëé∑Âèñ‰∏ª‰ΩìÂ∑•Á®ãÊï∞ÊçÆ\n\t\tif (index === 0 && !constructionList.value.length) {\n\t\t\tfetchConstructionData(userId, projectId)\n\t\t}\n\t\t\n\t\t// ÂΩìÂàáÊç¢Âà∞ËÆæÂ§áÊÉÖÂÜµTabÊó∂ÔºåËá™Âä®Ëé∑ÂèñÊï∞ÊçÆ\n\t\tif (index === 1 && !equipmentList.value.length) {\n\t\t\tfetchEquipmentData(userId, projectId)\n\t\t}\n\t\t\n\t\t// ÂΩìÂàáÊç¢Âà∞Ê≤ªÁêÜËÆæÊñΩTabÊó∂ÔºåËá™Âä®Âä†ËΩΩÊú¨Âú∞Êï∞ÊçÆ\n\t\tif (index === 2) {\n\t\t\tloadFacilityList(projectId)\n\t\t}\n\t\t\n\t\t// ÂΩìÂàáÊç¢Âà∞ÊéíÊ±°Âè£TabÊó∂ÔºåËá™Âä®Âä†ËΩΩÊú¨Âú∞Êï∞ÊçÆ\n\t\tif (index === 3) {\n\t\t\tloadOutletList(projectId)\n\t\t}\n\t}\n\n\t// ÁîüÊàêÁé∞Âú∫Ë∏èÂãòÊØîÂØπÊ∏ÖÂçï\n\tfunction generateFieldworkComparison(datasheet) {\n\t\tconst comparison = datasheet.map(item => ({\n\t\t\tid: Date.now() + Math.random(),\n\t\t\tproject: item.label,\n\t\t\teiaRequirement: item.value || 'ÂæÖÁ°ÆËÆ§',\n\t\t\tfieldSituation: '',\n\t\t\tdifference: 'ÂæÖÁé∞Âú∫Ê†∏ÂÆû'\n\t\t}))\n\n\t\tfieldworkComparison.value = comparison\n\t\tuni.showToast({\n\t\t\ttitle: `ÂäüËÉΩÂºÄÂèë‰∏≠`,\n\t\t\ticon: 'success'\n\t\t})\n\t}\n\n\t// ÂàõÂª∫ÂÆû‰æãÂØπË±°\n\tinstance = {\n\t\t// TabÁõ∏ÂÖ≥\n\t\ttabs,\n\t\tcurrentTab,\n\t\thandleTabChange,\n\t\t\n\t\t// Âª∫ËÆæÂÜÖÂÆπ\n\t\tmainContentTable,\n\t\tselectModeMain,\n\t\tselectedMainIds,\n\t\ttoggleSelectModeMain,\n\t\ttoggleSelectedMain,\n\t\tremoveSelectedMain,\n\t\t\n\t\t// ‰∏ª‰ΩìÂ∑•Á®ã\n\t\tconstructionList,\n\t\tconstructionSearchKeyword,\n\t\tfilteredConstructionList,\n\t\tloadingConstruction,\n\t\tfetchConstructionError,\n\t\tonConstructionSearchInput,\n\t\tfetchConstructionData,\n\t\taddConstruction,\n\t\tremoveConstruction,\n\t\t\n\t\t// ËÆæÂ§áÊÉÖÂÜµ\n\t\tequipmentList,\n\t\tequipmentSearchKeyword,\n\t\tfilteredEquipmentList,\n\t\tloadingEquipment,\n\t\tfetchEquipmentError,\n\t\tonEquipmentSearchInput,\n\t\tfetchEquipmentData,\n\t\taddEquipment,\n\t\tremoveEquipment,\n\t\t\n\t\t// Ê≤ªÁêÜËÆæÊñΩÔºàÊñ∞ÊñπÊ≥ïÔºâ\n\t\tpollutionFacilityList,\n\t\tfacilitySearchKeyword,\n\t\tfilteredFacilityList,\n\t\tloadingFacility,\n\t\tfetchFacilityError,\n\t\tonFacilitySearchInput,\n\t\textractFacilitiesFromBaseTable,  // Êñ∞Ôºö‰ªébaseTableÊèêÂèñ\n\t\tsaveFacilityList,                // Êñ∞Ôºö‰øùÂ≠òÂà∞Êú¨Âú∞\n\t\tloadFacilityList,                // Êñ∞Ôºö‰ªéÊú¨Âú∞Âä†ËΩΩ\n\t\trefreshFacilityData,             // Êñ∞ÔºöÂà∑Êñ∞Êï∞ÊçÆ\n\t\tupdateFacilityData,              // Êñ∞ÔºöÊõ¥Êñ∞Êï∞ÊçÆ\n\t\taddPollutionFacility,\n\t\tremovePollutionFacility,\n\t\t\n\t\t// ÊéíÊ±°Âè£ÔºàÊñ∞ÊñπÊ≥ïÔºâ\n\t\twastewaterOutlets,\n\t\texhaustOutlets,\n\t\tnoiseOutlets,\n\t\textractOutletsFromBaseTable,  // Êñ∞Ôºö‰ªébaseTableÊèêÂèñ\n\t\tsaveOutletList,                // Êñ∞Ôºö‰øùÂ≠òÂà∞Êú¨Âú∞\n\t\tloadOutletList,                // Êñ∞Ôºö‰ªéÊú¨Âú∞Âä†ËΩΩ\n\t\trefreshOutletData,             // Êñ∞ÔºöÂà∑Êñ∞Êï∞ÊçÆ\n\t\tupdateOutletData,              // Êñ∞ÔºöÊõ¥Êñ∞Êï∞ÊçÆ\n\t\taddOutlet,\n\t\tremoveOutlet,\n\t\t\n\t\t// ÊØîÂØπÊ∏ÖÂçï\n\t\tfieldworkComparison,\n\t\tgenerateFieldworkComparison\n\t}\n\n\treturn instance\n}\n"],"names":["ref","uni","computed","apiFetchConstructionData","apiFetchEquipmentData"],"mappings":"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"}