{"version":3,"file":"router-guard.js","sources":["common/router-guard.js"],"sourcesContent":["import { isLoggedIn, WHITE_LIST } from './auth.js'\n\nexport function setupRouterGuard() {\n  const guard = (route) => {\n    const url = route.url || route\n    const path = url.split('?')[0]\n\n    const loggedIn = isLoggedIn()\n\n    if (!loggedIn && !WHITE_LIST.includes(path)) {\n      uni.reLaunch({ url: '/pages/auth/login' })\n      return false\n    }\n\n    if (loggedIn && WHITE_LIST.includes(path)) {\n      uni.switchTab({ url: '/pages/home/index' })\n      return false\n    }\n\n    return true\n  }\n\n  uni.addInterceptor('navigateTo', { invoke: guard })\n  uni.addInterceptor('switchTab', { invoke: guard })\n  uni.addInterceptor('redirectTo', { invoke: guard })\n}"],"names":["isLoggedIn","WHITE_LIST","uni"],"mappings":";;;AAEO,SAAS,mBAAmB;AACjC,QAAM,QAAQ,CAAC,UAAU;AACvB,UAAM,MAAM,MAAM,OAAO;AACzB,UAAM,OAAO,IAAI,MAAM,GAAG,EAAE,CAAC;AAE7B,UAAM,WAAWA,YAAAA,WAAY;AAE7B,QAAI,CAAC,YAAY,CAACC,YAAU,WAAC,SAAS,IAAI,GAAG;AAC3CC,oBAAAA,MAAI,SAAS,EAAE,KAAK,oBAAmB,CAAE;AACzC,aAAO;AAAA,IACR;AAED,QAAI,YAAYD,YAAAA,WAAW,SAAS,IAAI,GAAG;AACzCC,oBAAAA,MAAI,UAAU,EAAE,KAAK,oBAAmB,CAAE;AAC1C,aAAO;AAAA,IACR;AAED,WAAO;AAAA,EACR;AAEDA,gBAAAA,MAAI,eAAe,cAAc,EAAE,QAAQ,MAAK,CAAE;AAClDA,gBAAAA,MAAI,eAAe,aAAa,EAAE,QAAQ,MAAK,CAAE;AACjDA,gBAAAA,MAAI,eAAe,cAAc,EAAE,QAAQ,MAAK,CAAE;AACpD;;"}