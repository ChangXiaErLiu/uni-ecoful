{"version":3,"file":"TaskProgressModal.js","sources":["components/message-pop-up/TaskProgressModal.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvOTcyNDcvRGVza3RvcC91bmktZWNvZnVsL2NvbXBvbmVudHMvbWVzc2FnZS1wb3AtdXAvVGFza1Byb2dyZXNzTW9kYWwudnVl"],"sourcesContent":["<template>\n\t<uni-popup ref=\"popup\" type=\"center\" :mask-click=\"false\">\n\t\t<view class=\"progress-modal\">\n\t\t\t<!-- 标题 -->\n\t\t\t<view class=\"modal-header\">\n\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"24\" color=\"#166534\" class=\"spinning-icon\" />\n\t\t\t\t<text class=\"modal-title\">{{ title }}</text>\n\t\t\t</view>\n\n\t\t\t<!-- 进度条 -->\n\t\t\t<view class=\"progress-container\">\n\t\t\t\t<view class=\"progress-bar\">\n\t\t\t\t\t<view class=\"progress-fill\" :style=\"{ width: progress + '%' }\"></view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"progress-text\">{{ progress }}%</text>\n\t\t\t</view>\n\n\t\t\t<!-- 状态信息 -->\n\t\t\t<view class=\"status-info\">\n\t\t\t\t<view class=\"status-row\">\n\t\t\t\t\t<text class=\"status-label\">状态：</text>\n\t\t\t\t\t<text class=\"status-value\" :class=\"'status-' + state\">{{ stateText }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"status-row\">\n\t\t\t\t\t<text class=\"status-label\">当前步骤：</text>\n\t\t\t\t\t<text class=\"status-value status-step\">{{ statusText }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"estimatedTime\" class=\"status-row\">\n\t\t\t\t\t<text class=\"status-label\">预计剩余：</text>\n\t\t\t\t\t<text class=\"status-value status-time\">{{ estimatedTime }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 操作按钮（暂时隐藏取消功能）-->\n\t<!-- \t\t<view class=\"modal-actions\">\n\t\t\t\t<button v-if=\"cancelable\" class=\"btn-cancel\" @tap=\"handleCancel\">\n\t\t\t\t\t<uni-icons type=\"close\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t<text>取消任务</text>\n\t\t\t\t</button>\n\t\t\t</view> -->\n\t\t</view>\n\t</uni-popup>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\n// Props\nconst props = defineProps({\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: '任务执行中'\n\t},\n\tprogress: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\tstatusText: {\n\t\ttype: String,\n\t\tdefault: '正在处理...'\n\t},\n\tstate: {\n\t\ttype: String,\n\t\tdefault: 'running' // pending/running/success/failed\n\t},\n\tcancelable: {\n\t\ttype: Boolean,\n\t\tdefault: true\n\t}\n})\n\n// Emits\nconst emit = defineEmits(['cancel'])\n\n// Refs\nconst popup = ref(null)\n\n// 计算属性\nconst stateText = computed(() => {\n\tswitch (props.state) {\n\t\tcase 'pending': return '等待中'\n\t\tcase 'running': return '运行中'\n\t\tcase 'success': return '已完成'\n\t\tcase 'failed': return '失败'\n\t\tdefault: return '处理中'\n\t}\n})\n\n// 预计剩余时间（简单估算）\nconst estimatedTime = computed(() => {\n\tif (props.progress >= 100) return null\n\tif (props.progress <= 0) return null\n\t\n\t// 假设任务总时长3分钟，根据当前进度估算剩余时间\n\tconst totalSeconds = 180 // 3分钟\n\tconst remainingPercent = 100 - props.progress\n\tconst remainingSeconds = Math.ceil((remainingPercent / 100) * totalSeconds)\n\t\n\tif (remainingSeconds < 60) {\n\t\treturn `${remainingSeconds}秒`\n\t} else {\n\t\tconst minutes = Math.floor(remainingSeconds / 60)\n\t\tconst seconds = remainingSeconds % 60\n\t\treturn seconds > 0 ? `${minutes}分${seconds}秒` : `${minutes}分钟`\n\t}\n})\n\n// 方法\nfunction open() {\n\tpopup.value?.open()\n}\n\nfunction close() {\n\tpopup.value?.close()\n}\n\nfunction handleCancel() {\n\tuni.showModal({\n\t\ttitle: '确认取消',\n\t\tcontent: '确定要取消当前任务吗？',\n\t\tconfirmText: '确定取消',\n\t\tconfirmColor: '#dc2626',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\temit('cancel')\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 暴露方法给父组件\ndefineExpose({\n\topen,\n\tclose\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.progress-modal {\n\twidth: 600rpx;\n\tbackground: #ffffff;\n\tborder-radius: 24rpx;\n\tpadding: 48rpx 40rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.12);\n}\n\n.modal-header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 16rpx;\n\tmargin-bottom: 40rpx;\n}\n\n.spinning-icon {\n\tanimation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n}\n\n.modal-title {\n\tfont-size: 36rpx;\n\tfont-weight: 600;\n\tcolor: #166534;\n}\n\n.progress-container {\n\tmargin-bottom: 32rpx;\n}\n\n.progress-bar {\n\twidth: 100%;\n\theight: 16rpx;\n\tbackground: #e5e7eb;\n\tborder-radius: 8rpx;\n\toverflow: hidden;\n\tmargin-bottom: 16rpx;\n}\n\n.progress-fill {\n\theight: 100%;\n\tbackground: linear-gradient(90deg, #166534 0%, #22c55e 100%);\n\tborder-radius: 8rpx;\n\ttransition: width 0.3s ease;\n}\n\n.progress-text {\n\tdisplay: block;\n\ttext-align: center;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #166534;\n}\n\n.status-info {\n\tbackground: #f9fafb;\n\tborder-radius: 16rpx;\n\tpadding: 24rpx;\n\tmargin-bottom: 32rpx;\n}\n\n.status-row {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tmargin-bottom: 16rpx;\n\t\n\t&:last-child {\n\t\tmargin-bottom: 0;\n\t}\n}\n\n.status-label {\n\tfont-size: 28rpx;\n\tcolor: #6b7280;\n\tmin-width: 140rpx;\n\tflex-shrink: 0;\n}\n\n.status-value {\n\tfont-size: 28rpx;\n\tcolor: #1f2937;\n\tflex: 1;\n\tword-break: break-all;\n}\n\n.status-running {\n\tcolor: #166534;\n\tfont-weight: 500;\n}\n\n.status-pending {\n\tcolor: #f59e0b;\n\tfont-weight: 500;\n}\n\n.status-success {\n\tcolor: #22c55e;\n\tfont-weight: 500;\n}\n\n.status-failed {\n\tcolor: #dc2626;\n\tfont-weight: 500;\n}\n\n.status-step {\n\tline-height: 1.6;\n}\n\n.status-time {\n\tcolor: #f59e0b;\n\tfont-weight: 500;\n}\n\n.modal-actions {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.btn-cancel {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 8rpx;\n\tpadding: 20rpx 48rpx;\n\tbackground: #ffffff;\n\tborder: 2rpx solid #dc2626;\n\tborder-radius: 12rpx;\n\tfont-size: 28rpx;\n\tcolor: #dc2626;\n\t\n\t&:active {\n\t\topacity: 0.8;\n\t\tbackground: #fef2f2;\n\t}\n}\n</style>\n","import Component from 'C:/Users/97247/Desktop/uni-ecoful/components/message-pop-up/TaskProgressModal.vue'\nwx.createComponent(Component)"],"names":["ref","computed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,UAAM,QAAQ;AA2Bd,UAAM,QAAQA,cAAG,IAAC,IAAI;AAGtB,UAAM,YAAYC,cAAQ,SAAC,MAAM;AAChC,cAAQ,MAAM,OAAK;AAAA,QAClB,KAAK;AAAW,iBAAO;AAAA,QACvB,KAAK;AAAW,iBAAO;AAAA,QACvB,KAAK;AAAW,iBAAO;AAAA,QACvB,KAAK;AAAU,iBAAO;AAAA,QACtB;AAAS,iBAAO;AAAA,MAChB;AAAA,IACF,CAAC;AAGD,UAAM,gBAAgBA,cAAQ,SAAC,MAAM;AACpC,UAAI,MAAM,YAAY;AAAK,eAAO;AAClC,UAAI,MAAM,YAAY;AAAG,eAAO;AAGhC,YAAM,eAAe;AACrB,YAAM,mBAAmB,MAAM,MAAM;AACrC,YAAM,mBAAmB,KAAK,KAAM,mBAAmB,MAAO,YAAY;AAE1E,UAAI,mBAAmB,IAAI;AAC1B,eAAO,GAAG,gBAAgB;AAAA,MAC5B,OAAQ;AACN,cAAM,UAAU,KAAK,MAAM,mBAAmB,EAAE;AAChD,cAAM,UAAU,mBAAmB;AACnC,eAAO,UAAU,IAAI,GAAG,OAAO,IAAI,OAAO,MAAM,GAAG,OAAO;AAAA,MAC1D;AAAA,IACF,CAAC;AAGD,aAAS,OAAO;;AACf,kBAAM,UAAN,mBAAa;AAAA,IACd;AAEA,aAAS,QAAQ;;AAChB,kBAAM,UAAN,mBAAa;AAAA,IACd;AAiBA,aAAa;AAAA,MACZ;AAAA,MACA;AAAA,IACD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrID,GAAG,gBAAgB,SAAS;"}