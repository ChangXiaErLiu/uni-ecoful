{"version":3,"file":"MonitorPlanContainer.js","sources":["components/monitor-plan/MonitorPlanContainer.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvOTcyNDcvRGVza3RvcC91bmktZWNvZnVsL2NvbXBvbmVudHMvbW9uaXRvci1wbGFuL01vbml0b3JQbGFuQ29udGFpbmVyLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"monitor-plan-container\">\r\n\t\t<!-- æœªé€‰é¡¹ç›®æ—¶ï¼šç»„ä»¶å†…éƒ¨ç©ºçŠ¶æ€ -->\r\n\t\t<view v-if=\"!projectId\" class=\"empty-state\">\r\n\t\t\t<uni-icons type=\"folder-add\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t<text class=\"empty-text\">è¯·å…ˆé€‰æ‹©é¡¹ç›®</text>\r\n\t\t\t<text class=\"empty-tip\">è¯·åœ¨ç¬¬ä¸€æ­¥é€‰æ‹©é¡¹ç›®åï¼Œå³å¯ç”Ÿæˆç›‘æµ‹æ–¹æ¡ˆ</text>\r\n\t\t</view>\r\n\t\t<!-- å·²é€‰é¡¹ç›®ï¼šåŸæ¥çš„å®Œæ•´ç•Œé¢ -->\r\n\t\t<view v-else class=\"section-card\">\r\n\t\t\t<view class=\"section-header\">\r\n\t\t\t\t<uni-icons type=\"eye\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t<text class=\"section-title\">ç›‘æµ‹æ–¹æ¡ˆ</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"section-body\">\r\n\t\t\t\t<!-- ç©ºçŠ¶æ€æç¤º - åªåœ¨æœªç”Ÿæˆæ—¶æ˜¾ç¤º -->\r\n\t\t\t\t<view v-if=\"!plan\" class=\"empty-state\">\r\n\t\t\t\t\t<uni-icons type=\"eye\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t<text class=\"empty-text\">AIå¸®æ‚¨åˆ¶å®šç›‘æµ‹æ–¹æ¡ˆ</text>\r\n\t\t\t\t\t<text class=\"empty-tip\">è¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸ºæ‚¨ç”Ÿæˆæ™ºèƒ½æ£€æµ‹æ–¹æ¡ˆ</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- æ“ä½œæŒ‰é’® -->\r\n\t\t\t\t<view class=\"action-row\">\r\n\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"handleGenerate\" :disabled=\"isGenerating\">\r\n\t\t\t\t\t\t<uni-icons type=\"refresh-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t<text>ç”Ÿæˆç›‘æµ‹æ–¹æ¡ˆ</text>\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<!-- ç”Ÿæˆåæ˜¾ç¤ºä¸‹è½½æŒ‰é’® -->\r\n\t\t\t\t\t<button v-if=\"canDownload\" class=\"btn btn--primary\" @tap=\"handleDownload\">\r\n\t\t\t\t\t\t<uni-icons type=\"cloud-download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t<text>ä¸‹è½½ç›‘æµ‹æ–¹æ¡ˆ</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- é¢„è§ˆå¡ç‰‡ï¼ˆç”Ÿæˆåæ˜¾ç¤ºï¼‰ -->\r\n\t\t\t\t<view v-if=\"plan\" class=\"plan-preview\">\r\n\t\t\t\t\t<view class=\"preview-header\">\r\n\t\t\t\t\t\t<uni-icons type=\"checkmark-circle\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t<text class=\"preview-title\">ç¯ä¿éªŒæ”¶ç›‘æµ‹æ–¹æ¡ˆå·²ä¸ºæ‚¨å·²ç”Ÿæˆï¼Œè¯·ç‚¹å‡»ä¸‹è½½ï¼</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- è¿›åº¦å¼¹çª— -->\r\n\t\t<TaskProgressModal ref=\"taskProgressModal\" :title=\"taskProgressTitle\" :progress=\"taskProgress\"\r\n\t\t\t:statusText=\"taskStatusText\" :state=\"taskState\" />\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tnextTick\r\n\t} from 'vue'\r\n\timport {\r\n\t\tuseMonitorPlan\r\n\t} from '@/composables/useMonitorPlan.js'\r\n\timport TaskProgressModal from '@/components/message-pop-up/TaskProgressModal.vue'\r\n\r\n\tconst props = defineProps({\r\n\t\t// é¡¹ç›®ID\r\n\t\tprojectId: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\t// æ˜¯å¦å·²æå–é¡¹ç›®ä¿¡æ¯\r\n\t\thasExtracted: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t})\r\n\r\n\tconst emit = defineEmits(['plan-generated'])\r\n\r\n\t// ä½¿ç”¨ composable\r\n\tconst {\r\n\t\tplan,\r\n\t\tcanDownload,\r\n\t\tisGenerating,\r\n\t\ttaskProgress,\r\n\t\ttaskStatusText,\r\n\t\ttaskState,\r\n\t\tgeneratePlan,\r\n\t\tdownloadPlan\r\n\t} = useMonitorPlan()\r\n\r\n\t// è¿›åº¦å¼¹çª— ref\r\n\tconst taskProgressModal = ref(null)\r\n\tconst taskProgressTitle = ref('ç›‘æµ‹æ–¹æ¡ˆç”Ÿæˆä¸­')\r\n\r\n\t// ç”Ÿæˆç›‘æµ‹æ–¹æ¡ˆ\r\n\tasync function handleGenerate() {\r\n\t\tawait generatePlan(\r\n\t\t\tprops.projectId,\r\n\t\t\tprops.hasExtracted,\r\n\t\t\ttaskProgressModal.value\r\n\t\t)\r\n\r\n\t\t// è§¦å‘äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶\r\n\t\temit('plan-generated')\r\n\t\t\r\n\t\t// å¼ºåˆ¶ç­‰å¾…ä¸‹ä¸€ä¸ª tick ç¡®ä¿ UI æ›´æ–°\r\n\t\tawait nextTick()\r\n\t\tconsole.log('ğŸ”„ UI æ›´æ–°å - plan:', plan.value, 'canDownload:', canDownload.value)\r\n\t}\r\n\r\n\t// ä¸‹è½½ç›‘æµ‹æ–¹æ¡ˆ\r\n\tasync function handleDownload() {\r\n\t\tawait downloadPlan(props.projectId)\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.monitor-plan-container {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.section-card {\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 2rpx 12rpx rgba(15, 23, 42, 0.08);\r\n\t}\r\n\r\n\t.section-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tpadding: 28rpx 24rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-bottom: 1rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #166534;\r\n\t}\r\n\r\n\t.section-body {\r\n\t\tpadding: 32rpx 24rpx;\r\n\t}\r\n\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 80rpx 40rpx;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.empty-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #94a3b8;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.action-row {\r\n\t\tdisplay: flex;\r\n\t\tgap: 16rpx;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 32rpx;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 8rpx;\r\n\t\t// padding: 24rpx 48rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.btn--primary {\r\n\t\tbackground: #166534;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\r\n\t.btn--primary:active {\r\n\t\topacity: 0.8;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.btn--primary:disabled {\r\n\t\topacity: 0.5;\r\n\t\tcursor: not-allowed;\r\n\t}\r\n\r\n\t.plan-preview {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f0fdf4;\r\n\t\tborder-radius: 12rpx;\r\n\t\tborder: 1rpx solid #dcfce7;\r\n\t\tmargin-top: 32rpx;\r\n\t}\r\n\r\n\t.preview-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.preview-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #166534;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.preview-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.preview-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #374151;\r\n\t}\r\n\r\n\t.preview-sections {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t}\r\n\r\n\t.section-item {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #475569;\r\n\t}\r\n\r\n\t/* å“åº”å¼è®¾è®¡ */\r\n\t@media (max-width: 768px) {\r\n\t\t.action-row {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'C:/Users/97247/Desktop/uni-ecoful/components/monitor-plan/MonitorPlanContainer.vue'\nwx.createComponent(Component)"],"names":["useMonitorPlan","ref","nextTick","uni"],"mappings":";;;;;;;;;;;AA6DC,MAAM,oBAAoB,MAAW;;;;;;;;;;;;;;;;;AAErC,UAAM,QAAQ;AAad,UAAM,OAAO;AAGb,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACA,IAAGA,0CAAgB;AAGpB,UAAM,oBAAoBC,cAAG,IAAC,IAAI;AAClC,UAAM,oBAAoBA,cAAG,IAAC,SAAS;AAGvC,mBAAe,iBAAiB;AAC/B,YAAM;AAAA,QACL,MAAM;AAAA,QACN,MAAM;AAAA,QACN,kBAAkB;AAAA,MAClB;AAGD,WAAK,gBAAgB;AAGrB,YAAMC,yBAAU;AAChBC,0BAAA,MAAA,OAAA,2DAAY,qBAAqB,KAAK,OAAO,gBAAgB,YAAY,KAAK;AAAA,IAC9E;AAGD,mBAAe,iBAAiB;AAC/B,YAAM,aAAa,MAAM,SAAS;AAAA,IAClC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHF,GAAG,gBAAgB,SAAS;"}