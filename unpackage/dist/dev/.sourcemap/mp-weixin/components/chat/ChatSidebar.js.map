{"version":3,"file":"ChatSidebar.js","sources":["components/chat/ChatSidebar.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvOTcyNDcvRGVza3RvcC91bmktZWNvZnVsL2NvbXBvbmVudHMvY2hhdC9DaGF0U2lkZWJhci52dWU"],"sourcesContent":["<!-- ai聊天界面的左边历史信息区域 -->\n<template>\n\t\n\t<view class=\"chat-sidebar\" :class=\"{'sidebar-collapsed': collapsed}\">\n\t\t<!-- 头部 -->\n\t\t<view class=\"sidebar-header\">\n\t\t\t<view class=\"header-main\">\n\t\t\t\t<text class=\"sidebar-title\">对话历史</text>\n            <view class=\"header-actions\">\n                <view class=\"action-btn\" @tap=\"toggleCollapse\">\n                    <uni-icons :type=\"collapsed ? 'right' : 'left'\" size=\"20\" color=\"#64748b\" />\n                </view>\n            </view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 新建 -->\n        <view class=\"sidebar-body\">\n            <button class=\"create-chat-btn\" @tap=\"createChat\">\n                <uni-icons type=\"plusempty\" size=\"18\" color=\"#ffffff\" />\n                <text v-show=\"!collapsed\" class=\"create-chat-font\">新建对话</text>\n            </button>\n        </view>\n\n\t\t<!-- 列表 -->\n        <scroll-view class=\"conversation-list\" scroll-y>\n            <view v-for=\"conv in conversations\" :key=\"conv.id\" class=\"conversation-item\"\n                 @tap=\"selectConversation(conv.id)\">  \n\t\t\t\t <!-- :class=\"getItemClass(conv.id)\" -->\n                <view class=\"conv-content\">\n                    <uni-icons type=\"chat\" size=\"18\" color=\"#64748b\" />\n                    <text class=\"conv-title\">{{ conv.title || '新对话' }}</text>\n                </view>\n\n                <view class=\"conv-actions\" v-if=\"!collapsed\">\n                    <view class=\"conv-action-btn\" @tap.stop=\"editTitle(conv.id)\">\n                        <uni-icons type=\"compose\" size=\"14\" color=\"#94a3b8\" />\n                    </view>\n                    <view class=\"conv-action-btn\" @tap.stop=\"deleteConv(conv.id)\">\n                        <uni-icons type=\"trash\" size=\"14\" color=\"#94a3b8\" />\n                    </view>\n                </view>\n            </view>\n        </scroll-view>\n\t</view>\n</template>\n\n<script setup>\n\tconst props = defineProps({\n\t\tconversations: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tcurrentConversationId: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tcollapsed: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t} // 仅桌面端“窄/宽”\n\t})\n\tconst emit = defineEmits([\n\t\t'create-chat',\n\t\t'select-conversation',\n\t\t'edit-conversation',\n\t\t'delete-conversation',\n\t\t'toggle-collapse'\n\t])\n\n\tconst createChat = () => emit('create-chat')\n\tconst selectConversation = id => emit('select-conversation', id)\n\tconst toggleCollapse = () => emit('toggle-collapse')\n\t\n\t// 判断对话项是否选中\n\t// const getItemClass = (convId) => {\n\t// \tconst isActive = convId === props.currentConversationId\n\t// \t// 调试日志\n\t// \tconsole.log('getItemClass 调用:', {\n\t// \t\tconvId,\n\t// \t\tcurrentId: props.currentConversationId,\n\t// \t\tisActive,\n\t// \t\tconvIdType: typeof convId,\n\t// \t\tcurrentIdType: typeof props.currentConversationId\n\t// \t})\n\t// \treturn isActive ? 'active' : ''\n\t// }\n\n\tconst editTitle = (id) => {\n\t\tuni.showModal({\n\t\t\ttitle: '编辑对话标题',\n\t\t\tcontent: '',\n\t\t\teditable: true,\n\t\t\tplaceholderText: '输入新的对话标题',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm && res.content) emit('edit-conversation', id, res.content)\n\t\t\t}\n\t\t})\n\t}\n\tconst deleteConv = (id) => {\n\t\tuni.showModal({\n\t\t\ttitle: '永久删除对话',\n\t\t\tcontent: '删除后，该对话将不可恢复。确认删除吗？',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) emit('delete-conversation', id)\n\t\t\t}\n\t\t})\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-sidebar {\n  width: 420rpx;\n  background: #ffffff;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #e2e8f0;\n  min-width: 0;\n  height: 90%;\n  border-radius: 15rpx;\n  // margin-top: 44px; \n  @media (min-width: 768px) {\n    height: 100%;  // PC端\n\t}\n  \n  \n}\n\n\t/* 头部 */\n\t.sidebar-header {\n\t\tpadding: 28rpx 32rpx;\n\t\tborder-bottom: 1px solid #e2e8f0;\n\t}\n\n\t.header-main {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.sidebar-title {\n\t\tfont-size: 38rpx;\n\t\tcolor: #111827;\n\t\tfont-weight: 600;\n\t}\n\n\t.header-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t}\n\n\t.action-btn {\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #f8fafc;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t/* 折叠（桌面窄栏） */\n\t.sidebar-collapsed {\n\t\twidth: 124rpx;\n\t}\n\n\t/* 新建按钮 */\n\t.sidebar-body {\n\t\tpadding: 16rpx;\n\t}\n\n\t.create-chat-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 8rpx;\n\t\twidth: 100%;\n\t\theight: 72rpx;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #00aa00;\n\t\tcolor: #fff;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 600;\n\t}\n\n\t/* 列表 */\n\t.conversation-list {\n\t\t/* 中文注释：仅列表区域滚动，头部与“新建”保持固定 */\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t\tpadding: 8rpx 0;\n\t\toverflow-y: auto;\n\t}\n\n\t.conversation-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tgap: 12rpx;\n\t\tpadding: 16rpx;\n\t\tmargin: 0 16rpx 8rpx;\n\t\tborder-radius: 12rpx;\n\t\ttransition: .2s;\n\t\theight: 30px;\n\n\t\t&.active {\n\t\t\tbackground: #f0f9ff;\n\t\t\tborder: 1px solid #e0f2fe;\n\n\t\t\t.conv-title {\n\t\t\t\tcolor: #0369a1;\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\t\t}\n\n\t\t&:active {\n\t\t\tbackground: #f8fafc;\n\t\t}\n\t}\n\n\t.conv-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.conv-title {\n\t\tfont-size: 32rpx;\n\t\tcolor: #374151;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tflex: 1;\n\t}\n\n\t.conv-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\topacity: 0;\n\t\ttransition: opacity .2s;\n\n\t\t.conversation-item:hover &,\n\t\t.conversation-item.active & {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t.conv-action-btn {\n\t\twidth: 36rpx;\n\t\theight: 36rpx;\n\t\tborder-radius: 8rpx;\n\t\tbackground: #f8fafc;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t\n\t}\n</style>\n","import Component from 'C:/Users/97247/Desktop/uni-ecoful/components/chat/ChatSidebar.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DC,UAAM,OAAO;AAQb,UAAM,aAAa,MAAM,KAAK,aAAa;AAC3C,UAAM,qBAAqB,QAAM,KAAK,uBAAuB,EAAE;AAC/D,UAAM,iBAAiB,MAAM,KAAK,iBAAiB;AAgBnD,UAAM,YAAY,CAAC,OAAO;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,WAAW,IAAI;AAAS,iBAAK,qBAAqB,IAAI,IAAI,OAAO;AAAA,QACzE;AAAA,MACJ,CAAG;AAAA,IACD;AACD,UAAM,aAAa,CAAC,OAAO;AAC1BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI;AAAS,iBAAK,uBAAuB,EAAE;AAAA,QAC/C;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GF,GAAG,gBAAgB,SAAS;"}