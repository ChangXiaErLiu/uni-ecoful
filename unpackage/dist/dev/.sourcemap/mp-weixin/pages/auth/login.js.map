{"version":3,"file":"login.js","sources":["pages/auth/login.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXV0aC9sb2dpbi52dWU"],"sourcesContent":["<template>\n  <view class=\"auth\">\n    <view class=\"auth__card\">\n      <view class=\"auth__header\">\n        <text class=\"auth__title\">登录账户</text>\n        <text class=\"auth__subtitle\">选择登录方式，体验智能工作台</text>\n      </view>\n      \n      <!-- 登录方式切换 -->\n      <view class=\"auth__tabs\">\n        <view \n          class=\"auth__tab\" \n          :class=\"{ 'auth__tab--active': activeTab === 'code' }\"\n          @tap=\"switchTab('code')\"\n        >\n          验证码登录\n        </view>\n        <view \n          class=\"auth__tab\" \n          :class=\"{ 'auth__tab--active': activeTab === 'password' }\"\n          @tap=\"switchTab('password')\"\n        >\n          密码登录\n        </view>\n        <view \n          class=\"auth__tab\" \n          :class=\"{ 'auth__tab--active': activeTab === 'wechat' }\"\n          @tap=\"switchTab('wechat')\"\n        >\n          微信登录\n        </view>\n      </view>\n      \n      <!-- 验证码登录 -->\n      <view v-if=\"activeTab === 'code'\" class=\"auth__form\">\n        <view class=\"auth__input-group\">\n          <uni-icons type=\"phone\" size=\"20\" color=\"#64748b\" class=\"auth__input-icon\"></uni-icons>\n          <input \n            v-model=\"mobile\" \n            class=\"auth__input\" \n            placeholder=\"请输入手机号\" \n            type=\"number\"\n            maxlength=\"11\"\n          />\n        </view>\n        \n        <view class=\"auth__input-group\">\n          <uni-icons type=\"chat\" size=\"20\" color=\"#64748b\" class=\"auth__input-icon\"></uni-icons>\n          <input \n            v-model=\"code\" \n            class=\"auth__input auth__input--code\" \n            placeholder=\"请输入验证码\" \n            type=\"number\"\n            maxlength=\"6\"\n          />\n          <button \n            class=\"auth__code-btn\" \n            :disabled=\"codeCountdown > 0\"\n            @tap=\"sendCode\"\n          >\n            {{ codeCountdown > 0 ? `${codeCountdown}s后重发` : '发送验证码' }}\n          </button>\n        </view>\n        \n        <button class=\"auth__button auth__button--primary\" @tap=\"loginWithCode\">登录</button>\n      </view>\n      \n      <!-- 密码登录 -->\n      <view v-if=\"activeTab === 'password'\" class=\"auth__form\">\n        <view class=\"auth__input-group\">\n          <uni-icons type=\"person\" size=\"20\" color=\"#64748b\" class=\"auth__input-icon\"></uni-icons>\n          <input \n            v-model=\"account\" \n            class=\"auth__input\" \n            placeholder=\"请输入手机号/用户名\" \n          />\n        </view>\n        \n        <view class=\"auth__input-group\">\n          <uni-icons type=\"locked\" size=\"20\" color=\"#64748b\" class=\"auth__input-icon\"></uni-icons>\n          <input \n            v-model=\"password\" \n            class=\"auth__input\" \n            placeholder=\"请输入密码\" \n            :type=\"showPassword ? 'text' : 'password'\"\n          />\n          <uni-icons \n            :type=\"showPassword ? 'eye-slash' : 'eye'\" \n            size=\"20\" \n            color=\"#64748b\" \n            class=\"auth__password-toggle\"\n            @tap=\"togglePassword\"\n          ></uni-icons>\n        </view>\n        \n        <view class=\"auth__forgot\">\n          <a class=\"auth__link\" @tap=\"goForgotPassword\">忘记密码？</a>\n        </view>\n        \n        <button class=\"auth__button auth__button--primary\" @tap=\"loginWithPassword\">登录</button>\n      </view>\n      \n      <!-- 微信扫码登录 -->\n      <view v-if=\"activeTab === 'wechat'\" class=\"auth__wechat-scan\">\n        <view class=\"auth__qrcode-container\">\n          <view class=\"auth__qrcode-placeholder\">\n            <!-- 这里放置二维码，实际项目中替换为真实二维码 -->\n            <uni-icons type=\"weixin\" size=\"120\" color=\"#22c55e\"></uni-icons>\n            <text class=\"auth__qrcode-text\">微信扫码登录</text>\n          </view>\n          <text class=\"auth__qrcode-desc\">请使用微信扫描二维码登录</text>\n        </view>\n        \n        <view class=\"auth__wechat-tips\">\n          <text class=\"auth__wechat-tip\">打开微信扫一扫</text>\n          <text class=\"auth__wechat-tip\">扫描上方二维码</text>\n          <text class=\"auth__wechat-tip\">点击授权登录</text>\n        </view>\n        \n        <!-- 刷新二维码按钮 -->\n        <button class=\"auth__refresh-btn\" @tap=\"refreshQRCode\">\n          <uni-icons type=\"refresh\" size=\"16\" color=\"#2563eb\"></uni-icons>\n          刷新二维码\n        </button>\n      </view>\n      \n      <!-- 注册链接 -->\n      <view class=\"auth__footer\">\n        <text class=\"auth__footer-text\">还没有账户？</text>\n        <a class=\"auth__link\" @tap=\"goRegister\">立即注册</a>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onUnmounted } from 'vue'\n\n// 响应式数据\nconst activeTab = ref('code') // 默认验证码登录\nconst mobile = ref('')\nconst code = ref('')\nconst account = ref('')\nconst password = ref('')\nconst showPassword = ref(false)\nconst codeCountdown = ref(0)\nconst qrCodeUrl = ref('') // 存储二维码URL\nlet countdownTimer = null\nlet qrCodeTimer = null // 用于轮询二维码状态\n\n// 切换登录方式\nfunction switchTab(tab) {\n  activeTab.value = tab\n  // 清空表单\n  mobile.value = ''\n  code.value = ''\n  account.value = ''\n  password.value = ''\n  \n  // 切换到微信登录时，生成二维码\n  if (tab === 'wechat') {\n    generateQRCode()\n  } else {\n    // 清除二维码轮询\n    if (qrCodeTimer) {\n      clearInterval(qrCodeTimer)\n      qrCodeTimer = null\n    }\n  }\n}\n\n// 生成二维码（模拟）\nfunction generateQRCode() {\n  console.log('生成微信登录二维码')\n  // 实际项目中这里应该调用后端接口生成二维码\n  // 模拟生成二维码的过程\n  uni.showLoading({ title: '生成二维码中...' })\n  \n  setTimeout(() => {\n    uni.hideLoading()\n    // 开始轮询二维码状态\n    startPollingQRCode()\n  }, 1000)\n}\n\n// 刷新二维码\nfunction refreshQRCode() {\n  if (qrCodeTimer) {\n    clearInterval(qrCodeTimer)\n  }\n  generateQRCode()\n}\n\n// 开始轮询二维码状态\nfunction startPollingQRCode() {\n  // 实际项目中这里应该轮询后端接口检查扫码状态\n  qrCodeTimer = setInterval(() => {\n    console.log('检查二维码扫码状态...')\n    // 模拟扫码成功\n    // if (scanned) {\n    //   clearInterval(qrCodeTimer)\n    //   handleWeChatLoginSuccess()\n    // }\n  }, 3000)\n}\n\n// 微信登录成功处理\nfunction handleWeChatLoginSuccess() {\n  uni.showToast({ title: '微信登录成功', icon: 'success' })\n  // 跳转到首页或其他页面\n  // uni.switchTab({ url: '/pages/index/index' })\n}\n\n// 发送验证码\nfunction sendCode() {\n  if (!mobile.value) {\n    uni.showToast({ title: '请输入手机号', icon: 'none' })\n    return\n  }\n  \n  if (!/^1[3-9]\\d{9}$/.test(mobile.value)) {\n    uni.showToast({ title: '手机号格式不正确', icon: 'none' })\n    return\n  }\n  \n  // 模拟发送验证码\n  uni.showToast({ title: '验证码已发送', icon: 'success' })\n  \n  // 开始倒计时\n  codeCountdown.value = 60\n  countdownTimer = setInterval(() => {\n    codeCountdown.value--\n    if (codeCountdown.value <= 0) {\n      clearInterval(countdownTimer)\n    }\n  }, 1000)\n}\n\n// 切换密码显示/隐藏\nfunction togglePassword() {\n  showPassword.value = !showPassword.value\n}\n\n// 验证码登录\nfunction loginWithCode() {\n  if (!mobile.value) {\n    uni.showToast({ title: '请输入手机号', icon: 'none' })\n    return\n  }\n  \n  if (!code.value) {\n    uni.showToast({ title: '请输入验证码', icon: 'none' })\n    return\n  }\n  \n  console.log('验证码登录', mobile.value, code.value)\n  // 这里调用验证码登录API\n  uni.showLoading({ title: '登录中...' })\n  setTimeout(() => {\n    uni.hideLoading()\n    uni.showToast({ title: '登录成功', icon: 'success' })\n  }, 1500)\n}\n\n// 密码登录\nfunction loginWithPassword() {\n  if (!account.value) {\n    uni.showToast({ title: '请输入账号', icon: 'none' })\n    return\n  }\n  \n  if (!password.value) {\n    uni.showToast({ title: '请输入密码', icon: 'none' })\n    return\n  }\n  \n  console.log('密码登录', account.value, password.value)\n  // 这里调用密码登录API\n  uni.showLoading({ title: '登录中...' })\n  setTimeout(() => {\n    uni.hideLoading()\n    uni.showToast({ title: '登录成功', icon: 'success' })\n  }, 1500)\n}\n\n// 忘记密码\nfunction goForgotPassword() {\n  uni.navigateTo({ url: '/pages/auth/forgot-password' })\n}\n\n// 注册\nfunction goRegister() {\n  uni.navigateTo({ url: '/pages/auth/register' })\n}\n\n// 清理定时器\nonUnmounted(() => {\n  if (countdownTimer) {\n    clearInterval(countdownTimer)\n  }\n  if (qrCodeTimer) {\n    clearInterval(qrCodeTimer)\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.auth {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  padding: 48rpx;\n  background: linear-gradient(135deg, #e0f2fe, #ede9fe);\n}\n\n.auth__card {\n  width: 100%;\n  max-width: 640rpx;\n  background-color: #ffffff;\n  border-radius: 32rpx;\n  padding: 48rpx;\n  box-shadow: 0 24rpx 60rpx rgba(15, 23, 42, 0.12);\n  display: flex;\n  flex-direction: column;\n  gap: 32rpx;\n}\n\n.auth__header {\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n  text-align: center;\n}\n\n.auth__title {\n  font-size: 40rpx;\n  font-weight: 600;\n  color: #0f172a;\n}\n\n.auth__subtitle {\n  font-size: 26rpx;\n  color: #64748b;\n}\n\n.auth__tabs {\n  display: flex;\n  background-color: #f8fafc;\n  border-radius: 16rpx;\n  padding: 8rpx;\n}\n\n.auth__tab {\n  flex: 1;\n  text-align: center;\n  padding: 20rpx;\n  font-size: 28rpx;\n  color: #64748b;\n  border-radius: 12rpx;\n  transition: all 0.3s ease;\n}\n\n.auth__tab--active {\n  background-color: #ffffff;\n  color: #2563eb;\n  font-weight: 500;\n  box-shadow: 0 4rpx 12rpx rgba(37, 99, 235, 0.1);\n}\n\n.auth__form {\n  display: flex;\n  flex-direction: column;\n  gap: 32rpx;\n}\n\n.auth__input-group {\n  position: relative;\n  display: flex;\n  align-items: center;\n  border: 1px solid rgba(148, 163, 184, 0.6);\n  border-radius: 16rpx;\n  overflow: hidden;\n}\n\n.auth__input-icon {\n  padding: 0 24rpx;\n}\n\n.auth__input {\n  flex: 1;\n  height: 88rpx;\n  padding: 0 24rpx;\n  font-size: 28rpx;\n  border: none;\n  outline: none;\n}\n\n.auth__input--code {\n  border-right: 1px solid rgba(148, 163, 184, 0.3);\n}\n\n.auth__code-btn {\n  height: 88rpx;\n  line-height: 88rpx;\n  padding: 0 24rpx;\n  font-size: 24rpx;\n  background-color: transparent;\n  color: #2563eb;\n  border: none;\n  white-space: nowrap;\n  \n  &[disabled] {\n    color: #94a3b8;\n  }\n}\n\n.auth__password-toggle {\n  padding: 0 24rpx;\n}\n\n.auth__forgot {\n  text-align: right;\n}\n\n.auth__button {\n  height: 88rpx;\n  line-height: 88rpx;\n  font-size: 28rpx;\n  border: none;\n  border-radius: 16rpx;\n  background-color: #e2e8f0;\n  color: #334155;\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.auth__button--primary {\n  background: linear-gradient(135deg, #2563eb, #3b82f6);\n  color: #ffffff;\n}\n\n/* 微信扫码登录样式 */\n.auth__wechat-scan {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 40rpx;\n}\n\n.auth__qrcode-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 24rpx;\n}\n\n.auth__qrcode-placeholder {\n  width: 400rpx;\n  height: 400rpx;\n  border: 2rpx dashed #e2e8f0;\n  border-radius: 24rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 24rpx;\n  background-color: #f8fafc;\n}\n\n.auth__qrcode-text {\n  font-size: 28rpx;\n  color: #475569;\n}\n\n.auth__qrcode-desc {\n  font-size: 26rpx;\n  color: #64748b;\n}\n\n.auth__wechat-tips {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.auth__wechat-tip {\n  font-size: 26rpx;\n  color: #64748b;\n  position: relative;\n  padding-left: 40rpx;\n  \n  &::before {\n    content: \"•\";\n    position: absolute;\n    left: 20rpx;\n    color: #22c55e;\n  }\n}\n\n.auth__refresh-btn {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  background-color: transparent;\n  color: #2563eb;\n  border: none;\n  font-size: 26rpx;\n  padding: 20rpx 40rpx;\n  border-radius: 16rpx;\n  border: 1rpx solid #2563eb;\n}\n\n.auth__footer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12rpx;\n  font-size: 26rpx;\n}\n\n.auth__footer-text {\n  color: #64748b;\n}\n\n.auth__link {\n  color: #2563eb;\n  background: transparent;\n  font-size: 26rpx;\n}\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/auth/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onUnmounted"],"mappings":"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"}