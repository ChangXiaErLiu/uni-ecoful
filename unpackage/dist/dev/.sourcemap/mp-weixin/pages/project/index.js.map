{"version":3,"file":"index.js","sources":["pages/project/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvamVjdC9pbmRleC52dWU"],"sourcesContent":["<template>\n\t<AppLayout current=\"pages/projects/index\">\n\t\t<view class=\"projects\">\n\t\t\t<!-- 页面头部 -->\n\t\t\t<view class=\"projects__header\">\n\t\t\t\t<view class=\"projects__title-section\">\n\t\t\t\t\t<text class=\"projects__title\">项目管理</text>\n\t\t\t\t\t<text class=\"projects__subtitle\">统筹环保项目执行，确保按时高质量完成</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 主要内容区域 -->\n\t\t\t<view class=\"projects__content\">\n\t\t\t\t<!-- 左侧项目列表 -->\n\t\t\t\t<view class=\"projects__list-panel\">\n\t\t\t\t\t<view class=\"projects__panel-header\">\n\t\t\t\t\t\t<view class=\"projects__detail-header\">\n\t\t\t\t\t\t\t<text class=\"projects__panel-title\">项目列表</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"projects__detail-actions\">\n\t\t\t\t\t\t\t<button class=\"projects__button projects__button--primary\" @tap=\"addProject\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t<text>新建项目</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<scroll-view class=\"projects__scroll\"> <!-- scroll-y -->\n\t\t\t\t\t\t<view v-for=\"project in filteredProjects\" :key=\"project.id\" class=\"projects__item\" :class=\"{ \n\t\t\t\t\t\t\t'projects__item--active': project.id === activeProjectId\n\t\t\t\t\t\t\t}\" @tap=\"() => switchProject(project.id)\">\n\t\t\t\t\t\t\t<view class=\"projects__item-icon\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"20\" color=\"#43A761\" />\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"projects__item-content\">\n\t\t\t\t\t\t\t\t<view class=\"projects__item-header\">\n\t\t\t\t\t\t\t\t\t<text class=\"projects__item-name\">{{ project.name }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"projects__item-desc\">{{ project.description }}</text>\n\t\t\t\t\t\t\t\t<text class=\"projects__item-desc\">{{ project.notes }}</text>\n\t\t\t\t\t\t\t\t<view class=\"projects__item-meta\">\n\t\t\t\t\t\t\t\t\t<view class=\"projects__item-meta-item\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"person\" size=\"14\" color=\"#94a3b8\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"projects__item-meta-text\">{{ project.owner.username }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"projects__item-meta-item\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"14\" color=\"#94a3b8\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"projects__item-meta-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ project.created_at.slice(0, 10) }}\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"projects__item-actions\">\n\t\t\t\t\t\t\t\t<!-- 编辑按钮 -->\n\t\t\t\t\t\t\t\t<view class=\"projects__item-action\" @tap.stop=\"() => editProject(project.id)\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"compose\" size=\"16\" color=\"#64748b\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 删除按钮 -->\n\t\t\t\t\t\t\t\t<view class=\"projects__item-action\" @tap.stop=\"() => delProject(project.id)\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ef4444\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 空状态 -->\n\t\t\t\t\t\t<view v-if=\"filteredProjects.length === 0\" class=\"projects__empty\">\n\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"60\" color=\"#cbd5e1\" />\n\t\t\t\t\t\t\t<text class=\"projects__empty-text\">暂无项目</text>\n\t\t\t\t\t\t\t<text class=\"projects__empty-subtext\">点击上方按钮创建第一个项目</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 右侧项目详情 -->\n\t\t\t\t<view class=\"projects__detail-panel\">\n\t\t\t\t\t<view class=\"projects__panel-header\">\n\t\t\t\t\t\t<view class=\"projects__detail-header\">\n\t\t\t\t\t\t\t<text class=\"projects__panel-title\">文档列表</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"projects__detail-actions\">\n\t\t\t\t\t\t\t<button class=\"projects__button projects__button--primary\" @tap=\"uploadFile\"\n\t\t\t\t\t\t\t\t:disabled=\"!activeProject\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t<text>上传项目文件</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<scroll-view scroll-y class=\"projects__detail-scroll\">\n\t\t\t\t\t\t<view v-if=\"activeProject\" class=\"projects__detail-content\">\n\t\t\t\t\t\t\t<!-- 项目文档 -->\n\t\t\t\t\t\t\t<view class=\"projects__section\">\n\t\t\t\t\t\t\t\t<view class=\"projects__section-header\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"18\" color=\"#8b5cf6\" />\n\t\t\t\t\t\t\t\t\t<text class=\"projects__section-title\">项目文档</text>\n\t\t\t\t\t\t\t\t\t<text class=\"projects__section-count\">{{ activeProject.documents?.length || 0 }}\n\t\t\t\t\t\t\t\t\t\t个文档</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"activeProject.documents && activeProject.documents.length > 0\"\n\t\t\t\t\t\t\t\t\tclass=\"projects__documents-list\">\n\t\t\t\t\t\t\t\t\t<view v-for=\"document in activeProject.documents\" :key=\"document.id\"\n\t\t\t\t\t\t\t\t\t\tclass=\"projects__document-item\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"getDocumentIcon(document.file_extension)\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width:20px;height:20px;\" />\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-content\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"projects__document-name\">{{ document.filename }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"projects__document-meta\">{{ fmtSize(document.size_bytes) }} ·\n\t\t\t\t\t\t\t\t\t\t\t\t上传时间: {{ document.updated_at.slice(0, 10) }}</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-actions\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 下载按钮 -->\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-action\"\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"() => downloadDocument(document)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download\" size=\"16\" color=\"#64748b\" />\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<!-- 删除按钮 -->\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-action\"\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"() => deleteDocument(document.document_id)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ef4444\" />\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 空项目状态 -->\n\t\t\t\t\t\t\t\t<view v-else class=\"projects__empty-section\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"32\" color=\"#cbd5e1\" />\n\t\t\t\t\t\t\t\t\t<text class=\"projects__empty-section-text\">暂无文档</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 未选择项目状态 -->\n\t\t\t\t\t\t<view v-else class=\"projects__empty-detail\">\n\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"60\" color=\"#cbd5e1\" />\n\t\t\t\t\t\t\t<text class=\"projects__empty-text\">请选择项目</text>\n\t\t\t\t\t\t\t<text class=\"projects__empty-subtext\">点击对应项目查看详情</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 新增项目模态框 -->\n\t\t<view v-if=\"showAddProjectModal\" class=\"modal-overlay\">\n\t\t\t<view class=\"modal-container\">\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">新建项目</text>\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeAddProjectModal\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-content\">\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目名称</text>\n\t\t\t\t\t\t<input v-model=\"newProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目背景</text>\n\t\t\t\t\t\t<textarea v-model=\"newProjectForm.description\" class=\"form-textarea\" placeholder=\"请输入项目背景\"\n\t\t\t\t\t\t\tmaxlength=\"1000\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目备注</text>\n\t\t\t\t\t\t<textarea v-model=\"newProjectForm.notes\" class=\"form-textarea\" placeholder=\"请输入项目项目备注\"\n\t\t\t\t\t\t\tmaxlength=\"1000\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目成员</text>\n\t\t\t\t\t\t<input v-model=\"newProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-actions\">\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeAddProjectModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmAddProject\">确认</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 编辑项目模态框 -->\n\t\t<view v-if=\"showEditProjectModal\" class=\"modal-overlay\">\n\t\t\t<view class=\"modal-container\">\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">编辑项目</text>\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeEditProjectModal\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-content\">\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目名称</text>\n\t\t\t\t\t\t<input v-model=\"editProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目背景</text>\n\t\t\t\t\t\t<textarea v-model=\"editProjectForm.description\" class=\"form-textarea\" placeholder=\"请输入项目项目背景\"\n\t\t\t\t\t\t\tmaxlength=\"200\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"form-label\">项目备注</text>\n\t\t\t\t\t\t<textarea v-model=\"editProjectForm.notes\" class=\"form-textarea\" placeholder=\"请输入项目项目备注\"\n\t\t\t\t\t\t\tmaxlength=\"500\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-actions\">\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeEditProjectModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmEditProject\">确认</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 文件上传模态框 -->\n\t\t<view v-if=\"showUploadModal\" class=\"modal-overlay\">\n\t\t\t<view class=\"modal-container\">\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">上传文件</text>\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeUploadModal\" />\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"modal-content\">\n\t\t\t\t\t<!-- 统一上传区域 -->\n\t\t\t\t\t<!-- #ifdef H5 -->\n\t\t\t\t\t<div class=\"upload-area\" @click=\"chooseFiles\" @drop.prevent=\"handleDrop\"\n\t\t\t\t\t\t@dragover.prevent=\"handleDragOver\" @dragleave=\"handleDragLeave\"\n\t\t\t\t\t\t:class=\"{ 'upload-area--dragging': isDragging }\">\n\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"48\" :color=\"isDragging ? '#10b981' : '#3b82f6'\" />\n\t\t\t\t\t\t<text class=\"upload-text\">{{ isDragging ? '松开鼠标上传文件' : '点击选择文件' }}</text>\n\t\t\t\t\t\t<text class=\"upload-subtext\">或拖拽文件到这里（支持多个文件）</text>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- #endif -->\n\n\t\t\t\t\t<!-- #ifndef H5 -->\n\t\t\t\t\t<view class=\"upload-area\" @tap=\"chooseFiles\">\n\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"48\" color=\"#3b82f6\" />\n\t\t\t\t\t\t<text class=\"upload-text\">点击选择文件</text>\n\t\t\t\t\t\t<text class=\"upload-subtext\">最多选择9个文件</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<!-- #endif -->\n\n\t\t\t\t\t<text class=\"upload-hint\">支持 PDF、Word、Excel、图片等格式，单个文件最大 100 MB</text>\n\n\t\t\t\t\t<!-- 已选文件列表 -->\n\t\t\t\t\t<view v-if=\"selectedFiles.length > 0\" class=\"selected-files-list\">\n\t\t\t\t\t\t<view class=\"selected-files-header\">\n\t\t\t\t\t\t\t<view class=\"selected-files-info\">\n\t\t\t\t\t\t\t\t<text class=\"selected-files-title\">已选择 {{ selectedFiles.length }} 个文件</text>\n\t\t\t\t\t\t\t\t<text class=\"selected-files-size\">总大小:\n\t\t\t\t\t\t\t\t\t{{ fmtSize(selectedFiles.reduce((sum, f) => sum + f.size, 0)) }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<button class=\"clear-all-btn\" @tap=\"clearAllFiles\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"14\" color=\"#ef4444\" />\n\t\t\t\t\t\t\t\t<text>清空</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<scroll-view class=\"selected-files-scroll\" scroll-y>\n\t\t\t\t\t\t\t<view v-for=\"(file, index) in selectedFiles\" :key=\"index\" class=\"selected-file-item\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"16\" color=\"#3b82f6\" />\n\t\t\t\t\t\t\t\t<text class=\"file-item-name\">{{ file.name }}</text>\n\t\t\t\t\t\t\t\t<text class=\"file-item-size\">{{ fmtSize(file.size) }}</text>\n\t\t\t\t\t\t\t\t<view class=\"file-item-remove\" @tap.stop=\"removeFile(index)\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"close\" size=\"14\" color=\"#94a3b8\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</scroll-view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"modal-actions\">\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeUploadModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmUpload\"\n\t\t\t\t\t\t:disabled=\"selectedFiles.length === 0\">\n\t\t\t\t\t\t上传{{ selectedFiles.length > 0 ? `（${selectedFiles.length}个文件）` : '' }}\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 上传进度浮窗 -->\n\t\t<view v-if=\"showUploadProgress\" class=\"upload-progress-float\">\n\t\t\t<view class=\"progress-float-container\">\n\t\t\t\t<view class=\"progress-float-header\">\n\t\t\t\t\t<text class=\"progress-float-title\">文件上传中</text>\n\t\t\t\t\t<uni-icons v-if=\"!batchUploading\" type=\"close\" size=\"20\" color=\"#64748b\"\n\t\t\t\t\t\t@tap=\"closeUploadProgress\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"progress-float-content\">\n\t\t\t\t\t<view class=\"progress-info\">\n\t\t\t\t\t\t<text class=\"progress-message\">{{ batchMessage }}</text>\n\t\t\t\t\t\t<text class=\"progress-count\">{{ batchCurrent }} / {{ batchTotal }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"progress-bar-container\">\n\t\t\t\t\t\t<view class=\"progress-bar-fill\" :style=\"{ width: batchProgress + '%' }\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"progress-percent\">{{ batchProgress }}%</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</AppLayout>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\treactive,\n\t\tonMounted,\n\t\tcomputed\n\t} from 'vue'\n\timport AppLayout from '@/components/layout/AppLayout.vue'\n\n\timport {\n\t\tonShow\n\t} from '@dcloudio/uni-app'\n\timport {\n\t\tnavTitleStore\n\t} from '@/stores/navTitle.js'\n\timport {\n\t\tcreateProjects,\n\t\tgetProjects,\n\t\tgetProjectDetail,\n\t\tupdateProject,\n\t\tdeleteProject,\n\t\tgetProjectDocuments,\n\t\tpickProjectFile,\n\t\tpickProjectImage,\n\t\tuploadProjectFile,\n\t\tdownloadProjectFile,\n\t\tremoveProjectFile,\n\t\tbatchUploadProjectFiles,\n\t\tgetTaskStatus\n\t} from '@/api/project.js'\n\n\t// 设置头部导航栏title\n\tconst navTitle = navTitleStore()\n\tonShow(() => navTitle.setTitle('项目管理'))\n\n\n\t// 数据状态\n\tconst projects = ref([])\n\tconst activeProjectId = ref(null)\n\tconst activeProject = ref(null)\n\tconst documents = ref([])\n\n\t// 模态框状态\n\tconst showAddProjectModal = ref(false) // 增加项目\n\tconst showEditProjectModal = ref(false) // 修改项目\n\tconst showUploadModal = ref(false) // 文件上传\n\n\t// 表单数据\n\tconst newProjectForm = reactive({\n\t\tname: '',\n\t\tdescription: '',\n\t\tnotes: '',\n\t\tmember_ids: []\n\t})\n\n\tconst editProjectForm = reactive({\n\t\tid: null,\n\t\tname: '',\n\t\tdescription: '',\n\t\tnotes: '',\n\t\tmember_ids: []\n\t})\n\n\t// 文件上传相关\n\tconst selectedFile = ref(null)\n\tconst uploadProgress = ref(0)\n\tconst isDragging = ref(false) // 拖拽状态\n\n\t// 批量上传相关\n\tconst selectedFiles = ref([])\n\tconst batchUploading = ref(false)\n\tconst batchProgress = ref(0)\n\tconst batchTaskId = ref(null)\n\tconst batchCurrent = ref(0)\n\tconst batchTotal = ref(0)\n\tconst batchMessage = ref('')\n\tconst showUploadProgress = ref(false) // 显示上传进度浮窗\n\tlet pollTimer = null\n\n\t// 计算属性：过滤项目列表\n\tconst filteredProjects = computed(() => {\n\t\treturn projects.value.filter(project => !project.is_deleted)\n\t})\n\t\n\t// 项目总数\n\tconst  projectTotal = ref(\"\")\n\t\n\t// 初始化加载数据\n\tconst loadProjects = async () => {\n\t\ttry {\n\t\t\tconst response = await getProjects()\n\t\t\tprojects.value = response\n\t\t\t\n\t\t\tconst total = response.length\n\t\t\tuni.setStorageSync('project_total_count', total) \n\t\t\tprojectTotal.value = total // 获取项目总数\n\t\t\t// console.log('项目列表加载成功，共', total, '个项目')\n\n\t\t\t// 如果有项目，默认选中第一个\n\t\t\tif (response.length > 0 && !activeProjectId.value) {\n\t\t\t\tawait switchProject(response[0].id)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('加载项目列表失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载项目列表失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 加载项目详情\n\tconst loadProjectDetail = async (projectId) => {\n\t\ttry {\n\t\t\tconst response = await getProjectDetail(projectId)\n\t\t\tactiveProject.value = response\n\n\t\t\t// 加载项目文档\n\t\t\tawait loadProjectDocuments(projectId)\n\t\t} catch (error) {\n\t\t\tconsole.error('加载项目详情失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载项目详情失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 加载项目文档\n\tconst loadProjectDocuments = async (projectId) => {\n\t\ttry {\n\t\t\tconst response = await getProjectDocuments(projectId)\n\t\t\tdocuments.value = response.documents || []\n\n\t\t\t// 将文档数据添加到项目对象中\n\t\t\tif (activeProject.value) {\n\t\t\t\tactiveProject.value.documents = documents.value\n\t\t\t\t// console.log(\"文档：\", documents.value)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('加载项目文档失败:', error)\n\t\t}\n\t}\n\n\t// 切换项目\n\tconst switchProject = async (projectId) => {\n\t\tactiveProjectId.value = projectId\n\t\tawait loadProjectDetail(projectId)\n\t}\n\n\t// 新增项目\n\tconst addProject = () => {\n\t\t// 重置表单\n\t\tObject.assign(newProjectForm, {\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tnotes: '',\n\t\t\tmember_ids: []\n\t\t})\n\t\tshowAddProjectModal.value = true\n\t}\n\n\t// 确认新建项目\n\tconst confirmAddProject = async () => {\n\t\ttry {\n\t\t\t// 表单验证\n\t\t\tif (!newProjectForm.name.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入项目名称',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst projectData = {\n\t\t\t\tname: newProjectForm.name.trim(),\n\t\t\t\tdescription: newProjectForm.description.trim(),\n\t\t\t\tnotes: newProjectForm.notes.trim(),\n\t\t\t\tmember_ids: newProjectForm.member_ids\n\t\t\t}\n\n\t\t\t// 调用创建项目接口\n\t\t\tconst response = await createProjects(projectData)\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '项目创建成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\n\t\t\t// 关闭模态框并刷新列表\n\t\t\tcloseAddProjectModal()\n\t\t\tawait loadProjects()\n\n\t\t\t// 切换到新创建的项目\n\t\t\tawait switchProject(response.id)\n\n\t\t} catch (error) {\n\t\t\tconsole.error('创建项目失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '创建项目失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 关闭新建项目窗口\n\tconst closeAddProjectModal = () => {\n\t\tshowAddProjectModal.value = false\n\t}\n\n\t// 编辑项目\n\tconst editProject = async (projectId) => {\n\t\ttry {\n\t\t\tconst project = projects.value.find(p => p.id === projectId)\n\t\t\tif (!project) return\n\n\t\t\tObject.assign(editProjectForm, {\n\t\t\t\tid: project.id,\n\t\t\t\tname: project.name,\n\t\t\t\tdescription: project.description || '',\n\t\t\t\tnotes: project.notes || '',\n\t\t\t\tmember_ids: []\n\t\t\t})\n\n\t\t\tshowEditProjectModal.value = true\n\t\t} catch (error) {\n\t\t\tconsole.error('编辑项目失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '编辑项目失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 确认编辑项目\n\tconst confirmEditProject = async () => {\n\t\ttry {\n\t\t\tif (!editProjectForm.name.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入项目名称',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst updateData = {\n\t\t\t\tname: editProjectForm.name.trim(),\n\t\t\t\tdescription: editProjectForm.description.trim(),\n\t\t\t\tnotes: editProjectForm.notes.trim()\n\t\t\t}\n\n\t\t\t// 调用更新项目接口\n\t\t\tawait updateProject(editProjectForm.id, updateData)\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '项目更新成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\n\t\t\t// 关闭模态框并刷新数据\n\t\t\tcloseEditProjectModal()\n\t\t\tawait loadProjects()\n\t\t\tawait loadProjectDetail(editProjectForm.id)\n\n\t\t} catch (error) {\n\t\t\tconsole.error('更新项目失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '更新项目失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 关闭编辑项目窗口\n\tconst closeEditProjectModal = () => {\n\t\tshowEditProjectModal.value = false\n\t}\n\n\t// 删除项目\n\tconst delProject = async (projectId) => {\n\t\ttry {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认删除',\n\t\t\t\tcontent: '确定要删除这个项目吗？删除后30天内可以恢复。',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tawait deleteProject(projectId)\n\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '项目删除成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// 重新加载项目列表\n\t\t\t\t\t\tawait loadProjects()\n\n\t\t\t\t\t\t// 如果删除的是当前选中的项目，清空选中状态\n\t\t\t\t\t\tif (activeProjectId.value === projectId) {\n\t\t\t\t\t\t\tactiveProjectId.value = null\n\t\t\t\t\t\t\tactiveProject.value = null\n\t\t\t\t\t\t\tdocuments.value = []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tconsole.error('删除项目失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '删除项目失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t// 文件上传相关\n\tconst uploadFile = () => {\n\t\tif (!activeProjectId.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先选择项目',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tselectedFile.value = null\n\t\tselectedFiles.value = []\n\t\tuploadProgress.value = 0\n\t\tisDragging.value = false\n\t\tshowUploadModal.value = true\n\t}\n\n\t// 获取文件扩展名\n\tconst getFileExtension = (filename) => {\n\t\tif (!filename) return ''\n\t\tconst parts = filename.split('.')\n\t\treturn parts.length > 1 ? '.' + parts.pop().toLowerCase() : ''\n\t}\n\n\t// ========== 统一文件选择 ==========\n\n\t// 统一的文件选择入口\n\tconst chooseFiles = () => {\n\t\t// #ifdef H5\n\t\tchooseFilesH5()\n\t\t// #endif\n\n\t\t// #ifdef MP-WEIXIN\n\t\tchooseFilesWechat()\n\t\t// #endif\n\t}\n\n\t// H5 版本：支持多选\n\tconst chooseFilesH5 = () => {\n\t\t// #ifdef H5\n\t\tconst input = document.createElement('input')\n\t\tinput.type = 'file'\n\t\tinput.multiple = true\n\t\tinput.accept = '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.md,.txt,.jpg,.jpeg,.png,.gif'\n\n\t\tinput.onchange = (e) => {\n\t\t\tconst files = Array.from(e.target.files)\n\t\t\thandleSelectedFiles(files)\n\t\t}\n\n\t\tinput.click()\n\t\t// #endif\n\t}\n\n\t// 微信小程序版本：最多9个\n\tconst chooseFilesWechat = () => {\n\t\t// #ifdef MP-WEIXIN\n\t\tuni.chooseMessageFile({\n\t\t\tcount: 9,\n\t\t\ttype: 'all',\n\t\t\textension: ['.pdf', '.doc', '.docx', '.xls', '.xlsx', '.ppt', '.pptx', '.md', '.txt', '.jpg',\n\t\t\t\t'.jpeg', '.png'\n\t\t\t],\n\t\t\tsuccess: (res) => {\n\t\t\t\tconst files = res.tempFiles.map(file => ({\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\tpath: file.path,\n\t\t\t\t\ttype: file.name.split('.').pop().toLowerCase(),\n\t\t\t\t\tfile: file\n\t\t\t\t}))\n\t\t\t\thandleSelectedFiles(files)\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.error('选择文件失败:', err)\n\t\t\t}\n\t\t})\n\t\t// #endif\n\t}\n\n\t// 统一处理选择的文件\n\tconst handleSelectedFiles = (files) => {\n\t\tif (!files || files.length === 0) return\n\n\t\t// 检查累加后的总数量\n\t\tconst currentCount = selectedFiles.value.length\n\t\tconst newCount = files.length\n\t\tconst totalCount = currentCount + newCount\n\n\t\tif (totalCount > 50) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `最多选择50个文件，当前已选${currentCount}个`,\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 验证文件大小\n\t\tconst maxSize = 100 * 1024 * 1024\n\t\tconst invalidFiles = files.filter(f => f.size > maxSize)\n\t\tif (invalidFiles.length > 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `有${invalidFiles.length}个文件超过100MB`,\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 转换为统一格式\n\t\tlet newFiles = []\n\n\t\t// #ifdef H5\n\t\tnewFiles = files.map(file => ({\n\t\t\tname: file.name,\n\t\t\tsize: file.size,\n\t\t\ttype: file.name.split('.').pop().toLowerCase(),\n\t\t\tfile: file\n\t\t}))\n\t\t// #endif\n\n\t\t// #ifdef MP-WEIXIN\n\t\t// 小程序的文件已经在 chooseFilesWechat 中转换好了\n\t\tnewFiles = files\n\t\t// #endif\n\n\t\t// 合并新旧文件\n\t\tconst allFiles = [...selectedFiles.value, ...newFiles]\n\n\t\t// 去重（根据文件名 + 大小）\n\t\tconst uniqueFiles = allFiles.filter((file, index, self) =>\n\t\t\tindex === self.findIndex(f =>\n\t\t\t\tf.name === file.name && f.size === file.size\n\t\t\t)\n\t\t)\n\n\t\t// 如果有重复文件，提示用户\n\t\tconst duplicateCount = allFiles.length - uniqueFiles.length\n\t\tif (duplicateCount > 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `已过滤${duplicateCount}个重复文件`,\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1500\n\t\t\t})\n\t\t}\n\n\t\tselectedFiles.value = uniqueFiles\n\n\t\tconsole.log('已选择文件:', selectedFiles.value.length, '个')\n\t}\n\n\t// 删除单个文件\n\tconst removeFile = (index) => {\n\t\tselectedFiles.value.splice(index, 1)\n\t\tuni.showToast({\n\t\t\ttitle: '已移除',\n\t\t\ticon: 'success',\n\t\t\tduration: 1000\n\t\t})\n\t}\n\n\t// 清空所有文件\n\tconst clearAllFiles = () => {\n\t\tif (selectedFiles.value.length === 0) return\n\n\t\tuni.showModal({\n\t\t\ttitle: '确认清空',\n\t\t\tcontent: `确定要清空所有已选文件吗？（共${selectedFiles.value.length}个）`,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tselectedFiles.value = []\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已清空',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// ========== 拖拽上传（仅H5） ==========\n\n\t// 拖拽进入\n\tconst handleDragOver = (e) => {\n\t\t// #ifdef H5\n\t\tisDragging.value = true\n\t\t// #endif\n\t}\n\n\t// 拖拽离开\n\tconst handleDragLeave = (e) => {\n\t\t// #ifdef H5\n\t\tisDragging.value = false\n\t\t// #endif\n\t}\n\n\t// 拖拽放下\n\tconst handleDrop = (e) => {\n\t\t// #ifdef H5\n\t\tisDragging.value = false\n\n\t\tconst files = Array.from(e.dataTransfer.files)\n\t\thandleSelectedFiles(files)\n\t\t// #endif\n\t}\n\n\t// 确认上传文件\n\tconst confirmUpload = async () => {\n\t\t// 检查是否有选择文件\n\t\tif (selectedFiles.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先选择文件',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 保存文件列表（因为关闭弹窗会清空）\n\t\tconst filesToUpload = [...selectedFiles.value]\n\t\tconst totalFiles = filesToUpload.length\n\n\t\t// 立即关闭弹窗\n\t\tshowUploadModal.value = false\n\t\tselectedFile.value = null\n\t\tselectedFiles.value = []\n\t\tuploadProgress.value = 0\n\n\t\t// 单个文件：直接上传\n\t\tif (totalFiles === 1) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '上传中...',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\ttry {\n\t\t\t\tawait uploadProjectFile(activeProjectId.value, filesToUpload[0])\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '上传成功',\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t\tawait loadProjectDocuments(activeProjectId.value)\n\t\t\t} catch (e) {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '上传失败',\n\t\t\t\t\tcontent: e.message || '文件上传失败，请重试',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\t// 多个文件：批量上传\n\t\tshowUploadProgress.value = true\n\t\tbatchUploading.value = true\n\t\tbatchProgress.value = 0\n\t\tbatchCurrent.value = 0\n\t\tbatchTotal.value = totalFiles\n\t\tbatchMessage.value = '准备上传...'\n\n\t\ttry {\n\t\t\t// 调用批量上传接口\n\t\t\tconst result = await batchUploadProjectFiles(activeProjectId.value, filesToUpload)\n\n\t\t\tbatchTaskId.value = result.task_id\n\t\t\tbatchMessage.value = '正在处理文件...'\n\n\t\t\t// 开始轮询任务状态\n\t\t\tstartPollingTaskStatus()\n\n\t\t} catch (e) {\n\t\t\tbatchUploading.value = false\n\t\t\tshowUploadProgress.value = false\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '上传失败',\n\t\t\t\tcontent: e.message || '批量上传失败，请重试',\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t}\n\t}\n\n\t// 开始轮询任务状态\n\tconst startPollingTaskStatus = () => {\n\t\tif (pollTimer) {\n\t\t\tclearInterval(pollTimer)\n\t\t}\n\n\t\tpollTimer = setInterval(async () => {\n\t\t\ttry {\n\t\t\t\tconst status = await getTaskStatus(batchTaskId.value)\n\n\t\t\t\tbatchProgress.value = status.progress\n\t\t\t\tbatchCurrent.value = status.current\n\t\t\t\tbatchTotal.value = status.total\n\t\t\t\tbatchMessage.value = status.message\n\n\t\t\t\t// 任务完成或失败，停止轮询\n\t\t\t\tif (status.status === 'success' || status.status === 'failed') {\n\t\t\t\t\tstopPollingTaskStatus()\n\t\t\t\t\tbatchUploading.value = false\n\n\t\t\t\t\t// 刷新文件列表\n\t\t\t\t\tawait loadProjectDocuments(activeProjectId.value)\n\n\t\t\t\t\t// 显示详细结果\n\t\t\t\t\tif (status.status === 'success') {\n\t\t\t\t\t\tconst successCount = status.success_count || 0\n\t\t\t\t\t\tconst failedCount = status.failed_count || 0\n\t\t\t\t\t\tconst total = status.total || 0\n\n\t\t\t\t\t\tconsole.log('成功数量:', successCount, '失败数量:', failedCount, '总数:', total) // 调试日志\n\n\t\t\t\t\t\tlet content = ''\n\t\t\t\t\t\tif (failedCount === 0) {\n\t\t\t\t\t\t\tcontent = `全部上传成功！共 ${successCount} 个文件`\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontent = `上传完成！\\n成功：${successCount} 个\\n失败：${failedCount} 个`\n\t\t\t\t\t\t\tif (status.failed_files && status.failed_files.length > 0) {\n\t\t\t\t\t\t\t\tcontent += `\\n\\n失败文件：\\n${status.failed_files.slice(0, 3).join('\\n')}`\n\t\t\t\t\t\t\t\tif (status.failed_files.length > 3) {\n\t\t\t\t\t\t\t\t\tcontent += `\\n...等${status.failed_files.length}个文件`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '上传结果',\n\t\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tconfirmText: '知道了'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '上传失败',\n\t\t\t\t\t\t\tcontent: status.message || '文件上传失败，请重试',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\t// 延迟关闭进度浮窗\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tshowUploadProgress.value = false\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('轮询任务状态失败:', e)\n\t\t\t\tstopPollingTaskStatus()\n\t\t\t\tbatchUploading.value = false\n\t\t\t\tshowUploadProgress.value = false\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '错误',\n\t\t\t\t\tcontent: '查询上传状态失败，请刷新页面查看结果',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t})\n\t\t\t}\n\t\t}, 3000) // 每3秒轮询一次\n\t}\n\n\t// 停止轮询\n\tconst stopPollingTaskStatus = () => {\n\t\tif (pollTimer) {\n\t\t\tclearInterval(pollTimer)\n\t\t\tpollTimer = null\n\t\t}\n\t}\n\n\t// 关闭上传窗口\n\tconst closeUploadModal = () => {\n\t\tshowUploadModal.value = false\n\t\tselectedFile.value = null\n\t\tselectedFiles.value = []\n\t\tuploadProgress.value = 0\n\t}\n\n\t// 关闭上传进度浮窗\n\tconst closeUploadProgress = () => {\n\t\tif (batchUploading.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '文件上传中，请稍候...',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tstopPollingTaskStatus()\n\t\tshowUploadProgress.value = false\n\t\tbatchProgress.value = 0\n\t\tbatchTaskId.value = null\n\t\tbatchCurrent.value = 0\n\t\tbatchTotal.value = 0\n\t\tbatchMessage.value = ''\n\t}\n\n\t// 下载项目文档\n\tconst downloadDocument = async (doc) => {\n\t\t// #ifdef H5\n\t\tuni.showLoading({\n\t\t\ttitle: '准备下载...',\n\t\t\tmask: true\n\t\t})\n\t\ttry {\n\t\t\tconst blob = await downloadProjectFile(activeProjectId.value, doc.document_id)\n\t\t\tconst url = URL.createObjectURL(blob)\n\t\t\tconst link = document.createElement('a')\n\t\t\tlink.href = url\n\t\t\tlink.download = doc.filename\n\t\t\tlink.click()\n\t\t\tURL.revokeObjectURL(url)\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t\t// #endif\n\n\t\t// #ifdef MP-WEIXIN\n\t\tuni.showLoading({\n\t\t\ttitle: '下载中...',\n\t\t\tmask: true\n\t\t})\n\t\ttry {\n\t\t\tconst tempFilePath = await downloadProjectFile(activeProjectId.value, doc.document_id)\n\t\t\tuni.hideLoading()\n\n\t\t\t// 尝试打开文档\n\t\t\tuni.openDocument({\n\t\t\t\tfilePath: tempFilePath,\n\t\t\t\tshowMenu: true,\n\t\t\t\tfileType: doc.file_extension.replace('.', ''),\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '打开成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log('打开文档失败:', err)\n\t\t\t\t\t// 如果打开失败，提示用户文件已下载\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '文件已下载，但当前文件类型不支持预览。文件已保存到微信文件中。',\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t}\n\t\t// #endif\n\t}\n\n\t// 删除项目文档\n\tconst deleteDocument = async (documentId) => {\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: '删除后 30 天内可恢复',\n\t\t\tsuccess: async (res) => {\n\t\t\t\tif (!res.confirm) return\n\t\t\t\ttry {\n\t\t\t\t\tawait removeProjectFile(activeProjectId.value, documentId)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已删除',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\tawait loadProjectDocuments(activeProjectId.value)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// 辅助函数\n\tconst getDocumentIcon = (ext) => {\n\t\tconst map = {\n\t\t\t'.pdf': '/static/fileType/pdf.png',\n\t\t\t'.doc': '/static/fileType/word.png',\n\t\t\t'.docx': '/static/fileType/word.png',\n\t\t\t'.xls': '/static/fileType/excel.png',\n\t\t\t'.xlsx': '/static/fileType/excel.png',\n\t\t\t'.png': '/static/fileType/picture.png',\n\t\t\t'.jpg': '/static/fileType/picture.png',\n\t\t\t'.jpeg': '/static/fileType/picture.png',\n\t\t\t'.md': '/static/fileType/md.png',\n\t\t\t'.txt': '/static/fileType/txt.png',\n\t\t}\n\t\treturn map[ext.toLowerCase()] || '/static/fileType/file.png'\n\t}\n\n\t// 比特 → B/KB/MB/GB\n\tconst fmtSize = b => {\n\t\tif (!b) return '0 B'\n\t\tconst k = 1024\n\t\tconst units = ['B', 'KB', 'MB', 'GB']\n\t\tlet i = 0\n\t\twhile (b >= k && i < units.length - 1) {\n\t\t\tb /= k;\n\t\t\ti++\n\t\t}\n\t\treturn `${b.toFixed(i ? 1 : 0)} ${units[i]}`\n\t}\n\n\n\t// 组件挂载时加载数据\n\tonMounted(() => {\n\t\tloadProjects()\n\t})\n</script>\n\n<style lang=\"scss\" scoped>\n\t.projects {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 32rpx;\n\t\tmin-height: 100vh;\n\t\tpadding: 32rpx;\n\t\tbackground: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n\t}\n\n\t.projects__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tgap: 24rpx;\n\t}\n\n\t.projects__title-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t\tflex: 1;\n\t}\n\n\t.projects__title {\n\t\tfont-size: 48rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #0f172a;\n\t\tline-height: 1.2;\n\t}\n\n\t.projects__subtitle {\n\t\tfont-size: 28rpx;\n\t\tcolor: #64748b;\n\t\tline-height: 1.4;\n\t}\n\n\t.projects__header-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t}\n\n\t/* 主要内容区域 */\n\t.projects__content {\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\tflex: 1;\n\t}\n\n\t/* 面板通用样式 */\n\t.projects__list-panel {\n\t\twidth: 510rpx;\n\t\tmin-width: 400rpx;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 24rpx;\n\t\tbox-shadow: 0 4rpx 24rpx rgba(15, 23, 42, 0.08);\n\t\tborder: 1rpx solid #f1f5f9;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.projects__detail-panel {\n\t\tflex: 1;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 24rpx;\n\t\tbox-shadow: 0 4rpx 24rpx rgba(15, 23, 42, 0.08);\n\t\tborder: 1rpx solid #f1f5f9;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.projects__panel-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tmargin-bottom: 24rpx;\n\t\tgap: 16rpx;\n\t}\n\n\t.projects__panel-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t}\n\n\t.projects__detail-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t}\n\n\t.projects__detail-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t}\n\n\n\n\t/* 按钮样式 */\n\t.projects__button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 8rpx;\n\t\tpadding: 0 20rpx;\n\t\theight: 64rpx;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t\tborder: none;\n\t\ttransition: all 0.3s ease;\n\t\twhite-space: nowrap;\n\t}\n\n\t.projects__button:active {\n\t\ttransform: translateY(2rpx);\n\t}\n\n\t.projects__button--primary {\n\t\tbackground: #3b82f6;\n\t\tcolor: #ffffff;\n\t\tbox-shadow: 0 4rpx 6rpx rgba(59, 130, 246, 0.3);\n\t}\n\n\t.projects__button--primary:active {\n\t\tbox-shadow: 0 2rpx 8rpx rgba(59, 130, 246, 0.4);\n\t}\n\n\t.projects__button--primary:disabled {\n\t\tbackground: #cbd5e1;\n\t\tbox-shadow: none;\n\t\ttransform: none;\n\t}\n\n\t.projects__button--secondary {\n\t\tbackground: transparent;\n\t\tcolor: #3b82f6;\n\t\tborder: 2rpx solid #3b82f6;\n\t}\n\n\t.projects__button--secondary:active {\n\t\tbackground: rgba(59, 130, 246, 0.1);\n\t}\n\n\t.projects__button--outline {\n\t\tbackground: transparent;\n\t\tcolor: #64748b;\n\t\tborder: 2rpx solid #e2e8f0;\n\t}\n\n\t.projects__button--outline:active {\n\t\tbackground: #f8fafc;\n\t}\n\n\t.projects__button--outline:disabled {\n\t\tcolor: #cbd5e1;\n\t\tborder-color: #cbd5e1;\n\t\ttransform: none;\n\t}\n\n\t/* 项目列表样式 */\n\t.projects__scroll {\n\t\tflex: 1;\n\t}\n\n\t.projects__item {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 16rpx;\n\t\tpadding: 24rpx;\n\t\tborder-radius: 16rpx;\n\t\tbackground: #f8fafc;\n\t\tborder: 2rpx solid transparent;\n\t\tmargin-bottom: 16rpx;\n\t\ttransition: all 0.3s ease;\n\t\tposition: relative;\n\t\tmargin-top: 10rpx;\n\t}\n\n\t.projects__item:active {\n\t\ttransform: translateY(2rpx);\n\t\tbackground: #f1f5f9;\n\t}\n\n\t.projects__item--active {\n\t\tbackground: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.04));\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(59, 130, 246, 0.12);\n\t}\n\n\t.projects__item--delayed {\n\t\tborder-left: 4rpx solid #ef4444;\n\t}\n\n\t.projects__item-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-radius: 8rpx;\n\t\tbackground: rgba(59, 130, 246, 0.1);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t\tmargin-top: 4rpx;\n\t}\n\n\t.projects__item--active .projects__item-icon {\n\t\tbackground: rgba(59, 130, 246, 0.2);\n\t}\n\n\t.projects__item-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.projects__item-header {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tgap: 8rpx;\n\t}\n\n\t.projects__item-name {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t\tline-height: 1.3;\n\t\tflex: 1;\n\t}\n\n\t.projects__item-badge {\n\t\tfont-size: 20rpx;\n\t\tpadding: 6rpx 12rpx;\n\t\tborder-radius: 6rpx;\n\t\tfont-weight: 500;\n\t\twhite-space: nowrap;\n\t}\n\n\t.projects__item-badge--planning {\n\t\tbackground: rgba(100, 116, 139, 0.1);\n\t\tcolor: #64748b;\n\t}\n\n\t.projects__item-badge--in-progress {\n\t\tbackground: rgba(59, 130, 246, 0.1);\n\t\tcolor: #3b82f6;\n\t}\n\n\t.projects__item-badge--completed {\n\t\tbackground: rgba(16, 185, 129, 0.1);\n\t\tcolor: #059669;\n\t}\n\n\t.projects__item-badge--delayed {\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tcolor: #dc2626;\n\t}\n\n\t.projects__item-desc {\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t\tline-height: 1.4;\n\t}\n\n\t/* 进度条样式 */\n\t.projects__progress {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t}\n\n\t.projects__progress-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.projects__progress-text {\n\t\tfont-size: 22rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t.projects__progress-percent {\n\t\tfont-size: 22rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 600;\n\t}\n\n\t.projects__progress-bar {\n\t\theight: 8rpx;\n\t\tbackground: #e2e8f0;\n\t\tborder-radius: 4rpx;\n\t\toverflow: hidden;\n\t}\n\n\t.projects__progress-fill {\n\t\theight: 100%;\n\t\tborder-radius: 4rpx;\n\t\ttransition: width 0.3s ease;\n\t}\n\n\t.projects__progress-fill--planning {\n\t\tbackground: #64748b;\n\t}\n\n\t.projects__progress-fill--in-progress {\n\t\tbackground: #3b82f6;\n\t}\n\n\t.projects__progress-fill--completed {\n\t\tbackground: #10b981;\n\t}\n\n\t.projects__progress-fill--delayed {\n\t\tbackground: #ef4444;\n\t}\n\n\t.projects__item-meta {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t}\n\n\t.projects__item-meta-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4rpx;\n\t}\n\n\t.projects__item-meta-text {\n\t\tfont-size: 22rpx;\n\t\tcolor: #94a3b8;\n\t}\n\n\t.projects__item-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\t// opacity: 0;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\n\t.projects__item:active .projects__item-actions {\n\t\t// opacity: 1;\n\t}\n\n\t.projects__item-action {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 6rpx;\n\t\ttransition: all 0.2s ease;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.projects__item-action:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t/* 详情内容样式 */\n\t.projects__detail-scroll {\n\t\tflex: 1;\n\t}\n\n\t.projects__detail-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t}\n\n\t.projects__section {\n\t\tbackground: #f8fafc;\n\t\tborder-radius: 12rpx;\n\t\tpadding: 20rpx;\n\t\tborder: 1rpx solid #e2e8f0;\n\t}\n\n\t.projects__section-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.projects__section-title {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t}\n\n\t.projects__section-count {\n\t\tfont-size: 22rpx;\n\t\tcolor: #64748b;\n\t\tmargin-left: auto;\n\t}\n\n\t/* 项目概览网格 */\n\t.projects__overview-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(250rpx, 1fr));\n\t\tgap: 16rpx;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.projects__overview-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4rpx;\n\t}\n\n\t.projects__overview-label {\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t\tfont-weight: 500;\n\t}\n\n\t.projects__overview-value {\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 600;\n\t}\n\n\t.projects__overview-desc {\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t\tline-height: 1.5;\n\t}\n\n\t/* 进度详情 */\n\t.projects__progress-detail {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 32rpx;\n\t}\n\n\t.projects__progress-visual {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.projects__progress-circle {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: conic-gradient(#3b82f6 0% var(--progress), #e2e8f0 var(--progress) 100%);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\t}\n\n\t.projects__progress-circle::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\twidth: 100rpx;\n\t\theight: 100rpx;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 50%;\n\t}\n\n\t.projects__progress-circle-text {\n\t\tfont-size: 24rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #0f172a;\n\t\tposition: relative;\n\t\tz-index: 1;\n\t}\n\n\t.projects__progress-stats {\n\t\tflex: 1;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(2, 1fr);\n\t\tgap: 16rpx;\n\t}\n\n\t.projects__progress-stat {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4rpx;\n\t}\n\n\t.projects__progress-stat-label {\n\t\tfont-size: 22rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t.projects__progress-stat-value {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #0f172a;\n\t}\n\n\t/* 任务列表 */\n\t.projects__tasks-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.projects__task-item {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 12rpx;\n\t\tpadding: 16rpx;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 8rpx;\n\t\tborder: 1rpx solid #e2e8f0;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.projects__task-item:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t.projects__task-item--completed {\n\t\topacity: 0.7;\n\t}\n\n\t.projects__task-checkbox {\n\t\tpadding: 4rpx;\n\t\tborder-radius: 6rpx;\n\t\ttransition: all 0.2s ease;\n\t\tmargin-top: 4rpx;\n\t}\n\n\t.projects__task-checkbox:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t.projects__task-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 6rpx;\n\t}\n\n\t.projects__task-header {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tgap: 8rpx;\n\t}\n\n\t.projects__task-title {\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t\tflex: 1;\n\t\ttext-decoration: var(--text-decoration, none);\n\t}\n\n\t.projects__task-item--completed .projects__task-title {\n\t\t--text-decoration: line-through;\n\t\tcolor: #94a3b8;\n\t}\n\n\t.projects__task-badge {\n\t\tfont-size: 20rpx;\n\t\tpadding: 4rpx 8rpx;\n\t\tborder-radius: 4rpx;\n\t\tfont-weight: 500;\n\t\twhite-space: nowrap;\n\t}\n\n\t.projects__task-badge--low {\n\t\tbackground: rgba(16, 185, 129, 0.1);\n\t\tcolor: #059669;\n\t}\n\n\t.projects__task-badge--medium {\n\t\tbackground: rgba(245, 158, 11, 0.1);\n\t\tcolor: #d97706;\n\t}\n\n\t.projects__task-badge--high {\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tcolor: #dc2626;\n\t}\n\n\t.projects__task-desc {\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t\tline-height: 1.4;\n\t}\n\n\t.projects__task-item--completed .projects__task-desc {\n\t\tcolor: #cbd5e1;\n\t}\n\n\t.projects__task-meta {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t}\n\n\t.projects__task-meta-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 4rpx;\n\t}\n\n\t.projects__task-meta-text {\n\t\tfont-size: 22rpx;\n\t\tcolor: #94a3b8;\n\t}\n\n\t.projects__task-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\topacity: 0;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\n\t.projects__task-item:active .projects__task-actions {\n\t\topacity: 1;\n\t}\n\n\t.projects__task-action {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 6rpx;\n\t\ttransition: all 0.2s ease;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.projects__task-action:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t/* 文档列表 */\n\t.projects__documents-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.projects__document-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tpadding: 16rpx;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 8rpx;\n\t\tborder: 1rpx solid #e2e8f0;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.projects__document-item:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t.projects__document-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-radius: 6rpx;\n\t\tbackground: rgba(238, 238, 246, 0.1);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.projects__document-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4rpx;\n\t\tmin-width: 0;\n\t\t/* 允许内容收缩 */\n\t}\n\n\t.projects__document-name {\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 500;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\t/* 文本溢出显示省略号 */\n\t}\n\n\t.projects__document-meta {\n\t\tfont-size: 22rpx;\n\t\tcolor: #94a3b8;\n\t}\n\n\t.projects__document-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tflex-shrink: 0;\n\t\t/* 防止按钮被挤压 */\n\t\t// opacity: 0;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\n\t.projects__document-item:active .projects__document-actions {\n\t\t// opacity: 1;\n\t}\n\n\t.projects__document-action {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 6rpx;\n\t\ttransition: all 0.2s ease;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.projects__document-action:active {\n\t\tbackground: #f1f5f9;\n\t}\n\n\t/* 空状态样式 */\n\t.projects__empty,\n\t.projects__empty-detail,\n\t.projects__empty-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 16rpx;\n\t\tpadding: 80rpx 32rpx;\n\t\tcolor: #cbd5e1;\n\t\ttext-align: center;\n\t}\n\n\t.projects__empty-section {\n\t\tpadding: 40rpx 32rpx;\n\t}\n\n\t.projects__empty-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #64748b;\n\t\tfont-weight: 600;\n\t}\n\n\t.projects__empty-subtext {\n\t\tfont-size: 24rpx;\n\t\tcolor: #94a3b8;\n\t\tline-height: 1.4;\n\t}\n\n\t.projects__empty-section-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #94a3b8;\n\t}\n\n\t/* 新增模态框样式 */\n\t.modal-overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: rgba(15, 23, 42, 0.6);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 1000;\n\t\tpadding: 32rpx;\n\t}\n\n\t.modal-container {\n\t\tbackground: #ffffff;\n\t\tborder-radius: 20rpx;\n\t\twidth: 100%;\n\t\tmax-width: 1000rpx;\n\t\tmax-height: 80vh;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 20rpx 60rpx rgba(15, 23, 42, 0.2);\n\t\tanimation: modalSlideIn 0.3s ease;\n\t}\n\n\t@keyframes modalSlideIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(-40rpx) scale(0.95);\n\t\t}\n\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0) scale(1);\n\t\t}\n\t}\n\n\t.modal-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 32rpx 32rpx 0;\n\t\tmargin-bottom: 24rpx;\n\t}\n\n\t.modal-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t}\n\n\t.modal-content {\n\t\tpadding: 0 32rpx;\n\t\tmax-height: 60vh;\n\t\toverflow-y: auto;\n\t}\n\n\t.form-group {\n\t\tmargin-bottom: 24rpx;\n\t}\n\n\t.form-label {\n\t\tdisplay: block;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t\tcolor: #0f172a;\n\t\tmargin-bottom: 8rpx;\n\t}\n\n\t.form-input {\n\t\twidth: 95%;\n\t\theight: 80rpx;\n\t\tpadding: 0 20rpx;\n\t\tborder: 2rpx solid #e2e8f0;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tbackground: #ffffff;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.form-input:focus {\n\t\tborder-color: #3b82f6;\n\t\toutline: none;\n\t}\n\n\t.form-textarea {\n\t\twidth: 95%;\n\t\tmin-height: 50rpx;\n\t\tpadding: 20rpx;\n\t\tborder: 2rpx solid #e2e8f0;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tbackground: #ffffff;\n\t\ttransition: all 0.2s ease;\n\t\tresize: none;\n\t}\n\n\t.form-textarea:focus {\n\t\tborder-color: #3b82f6;\n\t\toutline: none;\n\t}\n\n\t.upload-area {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 80rpx 32rpx;\n\t\tborder: 2rpx dashed #cbd5e1;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #f8fafc;\n\t\ttransition: all 0.3s ease;\n\t\ttext-align: center;\n\t\tcursor: pointer;\n\t}\n\n\t.upload-area:active {\n\t\tborder-color: #3b82f6;\n\t\tbackground: rgba(59, 130, 246, 0.05);\n\t}\n\n\t/* 拖拽状态 */\n\t.upload-area--dragging {\n\t\tborder-color: #10b981;\n\t\tbackground: rgba(16, 185, 129, 0.08);\n\t\tborder-width: 3rpx;\n\t\ttransform: scale(1.02);\n\t}\n\n\t.upload-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 500;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.upload-subtext {\n\t\tfont-size: 22rpx;\n\t\tcolor: #94a3b8;\n\t\tmargin-top: 8rpx;\n\t}\n\n\t.upload-hint {\n\t\tdisplay: block;\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t\tmargin-top: 16rpx;\n\t\ttext-align: center;\n\t}\n\n\t.selected-file {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tpadding: 20rpx;\n\t\tbackground: #f1f5f9;\n\t\tborder-radius: 12rpx;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.file-name {\n\t\tflex: 1;\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 500;\n\t}\n\n\t.file-size {\n\t\tfont-size: 22rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t/* 批量上传进度样式 */\n\t.batch-upload-progress {\n\t\tpadding: 40rpx 32rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t\talign-items: center;\n\t}\n\n\t.progress-info {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.progress-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 600;\n\t}\n\n\t.progress-count {\n\t\tfont-size: 26rpx;\n\t\tcolor: #3b82f6;\n\t\tfont-weight: 600;\n\t}\n\n\t.progress-bar-container {\n\t\twidth: 100%;\n\t\theight: 16rpx;\n\t\tbackground: #e2e8f0;\n\t\tborder-radius: 8rpx;\n\t\toverflow: hidden;\n\t}\n\n\t.progress-bar-fill {\n\t\theight: 100%;\n\t\tbackground: linear-gradient(90deg, #3b82f6, #8b5cf6);\n\t\tborder-radius: 8rpx;\n\t\ttransition: width 0.3s ease;\n\t}\n\n\t.progress-percent {\n\t\tfont-size: 32rpx;\n\t\tcolor: #3b82f6;\n\t\tfont-weight: 700;\n\t}\n\n\t/* 已选文件列表样式 */\n\t.selected-files-list {\n\t\tmargin-top: 24rpx;\n\t\tborder: 2rpx solid #e2e8f0;\n\t\tborder-radius: 12rpx;\n\t\toverflow: hidden;\n\t\tbackground: #f8fafc;\n\t}\n\n\t.selected-files-header {\n\t\tpadding: 20rpx;\n\t\tbackground: #ffffff;\n\t\tborder-bottom: 1rpx solid #e2e8f0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t}\n\n\t.selected-files-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 4rpx;\n\t}\n\n\t.selected-files-title {\n\t\tfont-size: 26rpx;\n\t\tcolor: #0f172a;\n\t\tfont-weight: 600;\n\t}\n\n\t.selected-files-size {\n\t\tfont-size: 22rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t.clear-all-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 6rpx;\n\t\tpadding: 12rpx 20rpx;\n\t\theight: auto;\n\t\tline-height: 1;\n\t\tbackground: #fef2f2;\n\t\tcolor: #ef4444;\n\t\tborder: 1rpx solid #fecaca;\n\t\tborder-radius: 8rpx;\n\t\tfont-size: 22rpx;\n\t\tfont-weight: 500;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.clear-all-btn:active {\n\t\tbackground: #fee2e2;\n\t\ttransform: scale(0.98);\n\t}\n\n\t.selected-files-scroll {\n\t\tmax-height: 400rpx;\n\t}\n\n\t.selected-file-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tpadding: 16rpx 20rpx;\n\t\tbackground: #ffffff;\n\t\tborder-bottom: 1rpx solid #f1f5f9;\n\t\ttransition: background 0.2s ease;\n\t}\n\n\t.selected-file-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.selected-file-item:active {\n\t\tbackground: #f8fafc;\n\t}\n\n\t.file-item-name {\n\t\tflex: 1;\n\t\tfont-size: 24rpx;\n\t\tcolor: #0f172a;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.file-item-size {\n\t\tfont-size: 22rpx;\n\t\tcolor: #94a3b8;\n\t\tflex-shrink: 0;\n\t}\n\n\t.file-item-remove {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: #f1f5f9;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t\ttransition: all 0.2s ease;\n\t\tcursor: pointer;\n\t}\n\n\t.file-item-remove:active {\n\t\tbackground: #fee2e2;\n\t\ttransform: scale(0.95);\n\t}\n\n\t/* 上传进度浮窗样式 */\n\t.upload-progress-float {\n\t\tposition: fixed;\n\t\tbottom: 40rpx;\n\t\tright: 40rpx;\n\t\tz-index: 999;\n\t\tanimation: slideInUp 0.3s ease;\n\t}\n\n\t@keyframes slideInUp {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(40rpx);\n\t\t}\n\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\n\t.progress-float-container {\n\t\tbackground: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\tbox-shadow: 0 8rpx 32rpx rgba(15, 23, 42, 0.15);\n\t\tborder: 1rpx solid #e2e8f0;\n\t\twidth: 500rpx;\n\t\toverflow: hidden;\n\t}\n\n\t.progress-float-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 20rpx 24rpx;\n\t\tborder-bottom: 1rpx solid #f1f5f9;\n\t\tbackground: #f8fafc;\n\t}\n\n\t.progress-float-title {\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t}\n\n\t.progress-float-content {\n\t\tpadding: 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 16rpx;\n\t}\n\n\t.progress-message {\n\t\tfont-size: 24rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t.modal-actions {\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\tpadding: 24rpx 32rpx;\n\t\tborder-top: 1rpx solid #e2e8f0;\n\t\tmargin-top: 24rpx;\n\t}\n\n\t.modal-button {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tline-height: 80rpx;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t\tborder: none;\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.modal-button--cancel {\n\t\tbackground: transparent;\n\t\tcolor: #64748b;\n\t\tborder: 2rpx solid #e2e8f0;\n\t}\n\n\t.modal-button--cancel:active {\n\t\tbackground: #f8fafc;\n\t}\n\n\t.modal-button--confirm {\n\t\tbackground: linear-gradient(135deg, #3b82f6, #2563eb);\n\t\tcolor: #ffffff;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(59, 130, 246, 0.3);\n\t}\n\n\t.modal-button--confirm:active {\n\t\tbox-shadow: 0 2rpx 8rpx rgba(59, 130, 246, 0.4);\n\t\ttransform: translateY(2rpx);\n\t}\n\n\t.modal-button--confirm:disabled {\n\t\tbackground: #cbd5e1;\n\t\tbox-shadow: none;\n\t\ttransform: none;\n\t}\n\n\t/* 响应式设计 */\n\t@media (max-width: 1023px) {\n\t\t.projects {\n\t\t\tpadding: 24rpx;\n\t\t\tgap: 24rpx;\n\t\t}\n\n\t\t.projects__content {\n\t\t\tflex-direction: column;\n\t\t}\n\n\t\t.projects__list-panel {\n\t\t\twidth: 93%;\n\t\t\tmin-width: auto;\n\t\t}\n\n\t\t.projects__header {\n\t\t\tflex-direction: column;\n\t\t\talign-items: stretch;\n\t\t\tgap: 16rpx;\n\t\t}\n\n\t\t.projects__header-actions {\n\t\t\tjustify-content: flex-start;\n\t\t}\n\n\n\t\t.projects__panel-header {\n\t\t\t// flex-direction: column;\n\t\t\talign-items: stretch;\n\t\t\tgap: 16rpx;\n\t\t}\n\n\t\t.projects__detail-actions {\n\t\t\tjustify-content: flex-start;\n\t\t}\n\n\t\t.projects__progress-detail {\n\t\t\tflex-direction: column;\n\t\t\talign-items: stretch;\n\t\t\tgap: 24rpx;\n\t\t}\n\n\t\t.projects__progress-stats {\n\t\t\tgrid-template-columns: repeat(4, 1fr);\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.projects__header-actions {\n\t\t\tflex-direction: column;\n\t\t\talign-items: stretch;\n\t\t}\n\n\t\t.projects__overview-grid {\n\t\t\tgrid-template-columns: 1fr;\n\t\t}\n\n\t\t.projects__progress-stats {\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t}\n\n\n\t}\n\n\t/* 桌面端悬停效果 */\n\t@media (min-width: 768px) {\n\t\t.projects__item:hover {\n\t\t\ttransform: translateY(-2rpx);\n\t\t\tbox-shadow: 0 8rpx 24rpx rgba(15, 23, 42, 0.12);\n\t\t}\n\n\t\t.projects__item:hover .projects__item-actions {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.projects__task-item:hover {\n\t\t\tbackground: #f1f5f9;\n\t\t\ttransform: translateY(-1rpx);\n\t\t}\n\n\t\t.projects__task-item:hover .projects__task-actions {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.projects__document-item:hover {\n\t\t\tbackground: #f1f5f9;\n\t\t\ttransform: translateY(-1rpx);\n\t\t}\n\n\t\t.projects__document-item:hover .projects__document-actions {\n\t\t\t// opacity: 1;\n\t\t}\n\n\t\t.projects__button--primary:hover {\n\t\t\tbox-shadow: 0 6rpx 20rpx rgba(59, 130, 246, 0.4);\n\t\t}\n\n\t\t.projects__button--secondary:hover {\n\t\t\tbackground: rgba(59, 130, 246, 0.1);\n\t\t}\n\n\t\t.projects__button--outline:hover {\n\t\t\tbackground: #f8fafc;\n\t\t}\n\n\t\t.projects__filter-tab:hover {\n\t\t\tbackground: rgba(255, 255, 255, 0.5);\n\t\t}\n\n\t\t.projects__item-action:hover {\n\t\t\tbackground: #f1f5f9;\n\t\t}\n\n\t\t.projects__task-action:hover {\n\t\t\tbackground: #f1f5f9;\n\t\t}\n\n\t\t.projects__document-action:hover {\n\t\t\tbackground: #f1f5f9;\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/project/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","ref","reactive","computed","getProjects","uni","getProjectDetail","getProjectDocuments","createProjects","updateProject","deleteProject","uploadProjectFile","batchUploadProjectFiles","getTaskStatus","downloadProjectFile","removeProjectFile","onMounted"],"mappings":"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"}