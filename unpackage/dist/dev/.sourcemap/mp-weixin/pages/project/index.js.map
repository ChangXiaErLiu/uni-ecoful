{"version":3,"file":"index.js","sources":["pages/project/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvamVjdC9pbmRleC52dWU"],"sourcesContent":["<template>\r\n\t<AppLayout current=\"pages/projects/index\">\r\n\t\t<view class=\"projects\">\r\n\t\t\t<!-- 页面头部 -->\r\n\t\t\t<view class=\"projects__header\">\r\n\t\t\t\t<view class=\"projects__title-section\">\r\n\t\t\t\t\t<text class=\"projects__title\">项目管理</text>\r\n\t\t\t\t\t<text class=\"projects__subtitle\">统筹环保项目执行，确保按时高质量完成</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 主要内容区域 -->\r\n\t\t\t<view class=\"projects__content\">\r\n\t\t\t\t<!-- 左侧项目列表 -->\r\n\t\t\t\t<view class=\"projects__list-panel\">\r\n\t\t\t\t\t<view class=\"projects__panel-header\">\r\n\t\t\t\t\t\t<text class=\"projects__panel-title\">项目列表</text>\r\n\t\t\t\t\t\t<button class=\"projects__button projects__button--primary\" @tap=\"addProject\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t<text>新建项目</text>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<scroll-view class=\"projects__scroll\"> <!-- scroll-y -->\r\n\t\t\t\t\t\t<view v-for=\"project in filteredProjects\" :key=\"project.id\" class=\"projects__item\" :class=\"{ \r\n\t\t\t\t\t\t\t'projects__item--active': project.id === activeProjectId\r\n\t\t\t\t\t\t\t}\" @tap=\"() => switchProject(project.id)\">\r\n\t\t\t\t\t\t\t<view class=\"projects__item-icon\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"20\" color=\"#43A761\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"projects__item-content\">\r\n\t\t\t\t\t\t\t\t<view class=\"projects__item-header\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"projects__item-name\">{{ project.name }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text class=\"projects__item-desc\">{{ project.description }}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"projects__item-desc\">{{ project.notes }}</text>\r\n\t\t\t\t\t\t\t\t<view class=\"projects__item-meta\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"projects__item-meta-item\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"person\" size=\"14\" color=\"#94a3b8\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"projects__item-meta-text\">{{ project.owner.username }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"projects__item-meta-item\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"14\" color=\"#94a3b8\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"projects__item-meta-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ project.created_at.slice(0, 10) }}\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"projects__item-actions\">\r\n\t\t\t\t\t\t\t\t<!-- 编辑按钮 -->\r\n\t\t\t\t\t\t\t\t<view class=\"projects__item-action\" @tap.stop=\"() => editProject(project.id)\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"compose\" size=\"16\" color=\"#64748b\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 删除按钮 -->\r\n\t\t\t\t\t\t\t\t<view class=\"projects__item-action\" @tap.stop=\"() => delProject(project.id)\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ef4444\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 空状态 -->\r\n\t\t\t\t\t\t<view v-if=\"filteredProjects.length === 0\" class=\"projects__empty\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"60\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t<text class=\"projects__empty-text\">暂无项目</text>\r\n\t\t\t\t\t\t\t<text class=\"projects__empty-subtext\">点击上方按钮创建第一个项目</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右侧项目详情 -->\r\n\t\t\t\t<view class=\"projects__detail-panel\">\r\n\t\t\t\t\t<view class=\"projects__panel-header\">\r\n\t\t\t\t\t\t<view class=\"projects__detail-header\">\r\n\t\t\t\t\t\t\t<text class=\"projects__panel-title\">文档列表</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"projects__detail-actions\">\r\n\t\t\t\t\t\t\t<button class=\"projects__button projects__button--primary\" @tap=\"uploadFile\"\r\n\t\t\t\t\t\t\t\t:disabled=\"!activeProject\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t<text>上传项目文件</text>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<scroll-view scroll-y class=\"projects__detail-scroll\">\r\n\t\t\t\t\t\t<view v-if=\"activeProject\" class=\"projects__detail-content\">\r\n\t\t\t\t\t\t\t<!-- 项目文档 -->\r\n\t\t\t\t\t\t\t<view class=\"projects__section\">\r\n\t\t\t\t\t\t\t\t<view class=\"projects__section-header\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"18\" color=\"#8b5cf6\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"projects__section-title\">项目文档</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"projects__section-count\">{{ activeProject.documents?.length || 0 }}\r\n\t\t\t\t\t\t\t\t\t\t个文档</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"activeProject.documents && activeProject.documents.length > 0\"\r\n\t\t\t\t\t\t\t\t\tclass=\"projects__documents-list\">\r\n\t\t\t\t\t\t\t\t\t<view v-for=\"document in activeProject.documents\" :key=\"document.id\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"projects__document-item\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-icon\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"getDocumentIcon(document.file_extension)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width:20px;height:20px;\" />\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"projects__document-name\">{{ document.filename }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"projects__document-meta\">{{ fmtSize(document.size_bytes) }} ·\r\n\t\t\t\t\t\t\t\t\t\t\t\t上传时间: {{ document.updated_at.slice(0, 10) }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 下载按钮 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-action\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"() => downloadDocument(document)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download\" size=\"16\" color=\"#64748b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 删除按钮 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"projects__document-action\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"() => deleteDocument(document.document_id)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ef4444\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 空项目状态 -->\r\n\t\t\t\t\t\t\t\t<view v-else class=\"projects__empty-section\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"32\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"projects__empty-section-text\">暂无文档</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 未选择项目状态 -->\r\n\t\t\t\t\t\t<view v-else class=\"projects__empty-detail\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"60\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t<text class=\"projects__empty-text\">请选择项目</text>\r\n\t\t\t\t\t\t\t<text class=\"projects__empty-subtext\">点击对应项目查看详情</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 新增项目模态框 -->\r\n\t\t<view v-if=\"showAddProjectModal\" class=\"modal-overlay\">\r\n\t\t\t<view class=\"modal-container\">\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">新建项目</text>\r\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeAddProjectModal\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目名称</text>\r\n\t\t\t\t\t\t<input v-model=\"newProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目背景</text>\r\n\t\t\t\t\t\t<textarea v-model=\"newProjectForm.description\" class=\"form-textarea\" placeholder=\"请输入项目背景\"\r\n\t\t\t\t\t\t\tmaxlength=\"1000\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目备注</text>\r\n\t\t\t\t\t\t<textarea v-model=\"newProjectForm.notes\" class=\"form-textarea\" placeholder=\"请输入项目项目备注\"\r\n\t\t\t\t\t\t\tmaxlength=\"1000\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目成员</text>\r\n\t\t\t\t\t\t<input v-model=\"newProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeAddProjectModal\">取消</button>\r\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmAddProject\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 编辑项目模态框 -->\r\n\t\t<view v-if=\"showEditProjectModal\" class=\"modal-overlay\">\r\n\t\t\t<view class=\"modal-container\">\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">编辑项目</text>\r\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeEditProjectModal\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目名称</text>\r\n\t\t\t\t\t\t<input v-model=\"editProjectForm.name\" class=\"form-input\" placeholder=\"请输入项目名称\" type=\"text\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目背景</text>\r\n\t\t\t\t\t\t<textarea v-model=\"editProjectForm.description\" class=\"form-textarea\" placeholder=\"请输入项目项目背景\"\r\n\t\t\t\t\t\t\tmaxlength=\"200\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">项目备注</text>\r\n\t\t\t\t\t\t<textarea v-model=\"editProjectForm.notes\" class=\"form-textarea\" placeholder=\"请输入项目项目备注\"\r\n\t\t\t\t\t\t\tmaxlength=\"500\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeEditProjectModal\">取消</button>\r\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmEditProject\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 文件上传模态框 -->\r\n\t\t<view v-if=\"showUploadModal\" class=\"modal-overlay\">\r\n\t\t\t<view class=\"modal-container\">\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">上传文件</text>\r\n\t\t\t\t\t<uni-icons type=\"close\" size=\"30\" color=\"#64748b\" @tap=\"closeUploadModal\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t\t<!-- 批量上传按钮（仅H5） -->\r\n\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t<view class=\"upload-area\" @tap=\"chooseMultipleFiles\">\r\n\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"48\" color=\"#8b5cf6\" />\r\n\t\t\t\t\t\t<text class=\"upload-text\">批量上传文件</text>\r\n\t\t\t\t\t\t<text class=\"upload-subtext\">支持一次选择多个文件（最多50个）</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\r\n\t\t\t\t\t<!-- 单文件上传 -->\r\n\t\t\t\t\t<view class=\"upload-area\" @tap=\"chooseFile\" style=\"margin-top: 20rpx;\">\r\n\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"48\" color=\"#3b82f6\" />\r\n\t\t\t\t\t\t<text class=\"upload-text\">单个文件上传</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 选图片 -->\r\n\t\t\t\t\t<view class=\"upload-area\" @tap=\"chooseImage\" style=\"margin-top: 20rpx;\">\r\n\t\t\t\t\t\t<uni-icons type=\"image\" size=\"48\" color=\"#10b981\" />\r\n\t\t\t\t\t\t<text class=\"upload-text\">上传图片</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<text class=\"upload-hint\">支持图片、文档等格式，单个文件最大 100 MB</text>\r\n\r\n\t\t\t\t\t<!-- 已选单个文件 -->\r\n\t\t\t\t\t<view v-if=\"selectedFile\" class=\"selected-file\">\r\n\t\t\t\t\t\t<uni-icons type=\"document\" size=\"20\" color=\"#3b82f6\" />\r\n\t\t\t\t\t\t<text class=\"file-name\">{{ selectedFile.name }}</text>\r\n\t\t\t\t\t\t<text class=\"file-size\">{{ fmtSize(selectedFile.size) }}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 已选多个文件 -->\r\n\t\t\t\t\t<view v-if=\"selectedFiles.length > 0\" class=\"selected-files-list\">\r\n\t\t\t\t\t\t<view class=\"selected-files-header\">\r\n\t\t\t\t\t\t\t<text class=\"selected-files-title\">已选择 {{ selectedFiles.length }} 个文件</text>\r\n\t\t\t\t\t\t\t<text class=\"selected-files-size\">总大小: {{ fmtSize(selectedFiles.reduce((sum, f) => sum + f.size, 0)) }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<scroll-view class=\"selected-files-scroll\" scroll-y>\r\n\t\t\t\t\t\t\t<view v-for=\"(file, index) in selectedFiles\" :key=\"index\" class=\"selected-file-item\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"16\" color=\"#3b82f6\" />\r\n\t\t\t\t\t\t\t\t<text class=\"file-item-name\">{{ file.name }}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"file-item-size\">{{ fmtSize(file.size) }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t\t<button class=\"modal-button modal-button--cancel\" @tap=\"closeUploadModal\">取消</button>\r\n\t\t\t\t\t<button class=\"modal-button modal-button--confirm\" @tap=\"confirmUpload\"\r\n\t\t\t\t\t\t:disabled=\"!selectedFile && selectedFiles.length === 0\">上传</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 上传进度浮窗 -->\r\n\t\t<view v-if=\"showUploadProgress\" class=\"upload-progress-float\">\r\n\t\t\t<view class=\"progress-float-container\">\r\n\t\t\t\t<view class=\"progress-float-header\">\r\n\t\t\t\t\t<text class=\"progress-float-title\">文件上传中</text>\r\n\t\t\t\t\t<uni-icons v-if=\"!batchUploading\" type=\"close\" size=\"20\" color=\"#64748b\" @tap=\"closeUploadProgress\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"progress-float-content\">\r\n\t\t\t\t\t<view class=\"progress-info\">\r\n\t\t\t\t\t\t<text class=\"progress-message\">{{ batchMessage }}</text>\r\n\t\t\t\t\t\t<text class=\"progress-count\">{{ batchCurrent }} / {{ batchTotal }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"progress-bar-container\">\r\n\t\t\t\t\t\t<view class=\"progress-bar-fill\" :style=\"{ width: batchProgress + '%' }\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"progress-percent\">{{ batchProgress }}%</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</AppLayout>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tonMounted,\r\n\t\tcomputed\r\n\t} from 'vue'\r\n\timport AppLayout from '@/components/layout/AppLayout.vue'\r\n\r\n\timport {\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tnavTitleStore\r\n\t} from '@/stores/navTitle.js'\r\n\timport {\r\n\t\tcreateProjects,\r\n\t\tgetProjects,\r\n\t\tgetProjectDetail,\r\n\t\tupdateProject,\r\n\t\tdeleteProject,\r\n\t\tgetProjectDocuments,\r\n\t\tpickProjectFile,\r\n\t\tpickProjectImage,\r\n\t\tuploadProjectFile,\r\n\t\tdownloadProjectFile,\r\n\t\tremoveProjectFile,\r\n\t\tbatchUploadProjectFiles,\r\n\t\tgetTaskStatus\r\n\t} from '@/api/project.js'\r\n\r\n\t// 设置头部导航栏title\r\n\tconst navTitle = navTitleStore()\r\n\tonShow(() => navTitle.setTitle('项目管理'))\r\n\r\n\r\n\t// 数据状态\r\n\tconst projects = ref([])\r\n\tconst activeProjectId = ref(null)\r\n\tconst activeProject = ref(null)\r\n\tconst documents = ref([])\r\n\r\n\t// 模态框状态\r\n\tconst showAddProjectModal = ref(false) // 增加项目\r\n\tconst showEditProjectModal = ref(false) // 修改项目\r\n\tconst showUploadModal = ref(false) // 文件上传\r\n\r\n\t// 表单数据\r\n\tconst newProjectForm = reactive({\r\n\t\tname: '',\r\n\t\tdescription: '',\r\n\t\tnotes: '',\r\n\t\tmember_ids: []\r\n\t})\r\n\r\n\tconst editProjectForm = reactive({\r\n\t\tid: null,\r\n\t\tname: '',\r\n\t\tdescription: '',\r\n\t\tnotes: '',\r\n\t\tmember_ids: []\r\n\t})\r\n\r\n\t// 文件上传相关\r\n\tconst selectedFile = ref(null)\r\n\tconst uploadProgress = ref(0)\r\n\t\r\n\t// 批量上传相关\r\n\tconst selectedFiles = ref([])\r\n\tconst batchUploading = ref(false)\r\n\tconst batchProgress = ref(0)\r\n\tconst batchTaskId = ref(null)\r\n\tconst batchCurrent = ref(0)\r\n\tconst batchTotal = ref(0)\r\n\tconst batchMessage = ref('')\r\n\tconst showUploadProgress = ref(false) // 显示上传进度浮窗\r\n\tlet pollTimer = null\r\n\r\n\t// 计算属性：过滤项目列表\r\n\tconst filteredProjects = computed(() => {\r\n\t\treturn projects.value.filter(project => !project.is_deleted)\r\n\t})\r\n\r\n\t// 初始化加载数据\r\n\tconst loadProjects = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await getProjects()\r\n\t\t\tprojects.value = response\r\n\t\t\t// console.log(\"项目：\", response)\r\n\r\n\t\t\t// 如果有项目，默认选中第一个\r\n\t\t\tif (response.length > 0 && !activeProjectId.value) {\r\n\t\t\t\tawait switchProject(response[0].id)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载项目列表失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载项目列表失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 加载项目详情\r\n\tconst loadProjectDetail = async (projectId) => {\r\n\t\ttry {\r\n\t\t\tconst response = await getProjectDetail(projectId)\r\n\t\t\tactiveProject.value = response\r\n\r\n\t\t\t// 加载项目文档\r\n\t\t\tawait loadProjectDocuments(projectId)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载项目详情失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载项目详情失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 加载项目文档\r\n\tconst loadProjectDocuments = async (projectId) => {\r\n\t\ttry {\r\n\t\t\tconst response = await getProjectDocuments(projectId)\r\n\t\t\tdocuments.value = response.documents || []\r\n\r\n\t\t\t// 将文档数据添加到项目对象中\r\n\t\t\tif (activeProject.value) {\r\n\t\t\t\tactiveProject.value.documents = documents.value\r\n\t\t\t\t// console.log(\"文档：\", documents.value)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载项目文档失败:', error)\r\n\t\t}\r\n\t}\r\n\r\n\t// 切换项目\r\n\tconst switchProject = async (projectId) => {\r\n\t\tactiveProjectId.value = projectId\r\n\t\tawait loadProjectDetail(projectId)\r\n\t}\r\n\r\n\t// 新增项目\r\n\tconst addProject = () => {\r\n\t\t// 重置表单\r\n\t\tObject.assign(newProjectForm, {\r\n\t\t\tname: '',\r\n\t\t\tdescription: '',\r\n\t\t\tnotes: '',\r\n\t\t\tmember_ids: []\r\n\t\t})\r\n\t\tshowAddProjectModal.value = true\r\n\t}\r\n\r\n\t// 确认新建项目\r\n\tconst confirmAddProject = async () => {\r\n\t\ttry {\r\n\t\t\t// 表单验证\r\n\t\t\tif (!newProjectForm.name.trim()) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入项目名称',\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst projectData = {\r\n\t\t\t\tname: newProjectForm.name.trim(),\r\n\t\t\t\tdescription: newProjectForm.description.trim(),\r\n\t\t\t\tnotes: newProjectForm.notes.trim(),\r\n\t\t\t\tmember_ids: newProjectForm.member_ids\r\n\t\t\t}\r\n\r\n\t\t\t// 调用创建项目接口\r\n\t\t\tconst response = await createProjects(projectData)\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '项目创建成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t\t// 关闭模态框并刷新列表\r\n\t\t\tcloseAddProjectModal()\r\n\t\t\tawait loadProjects()\r\n\r\n\t\t\t// 切换到新创建的项目\r\n\t\t\tawait switchProject(response.id)\r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('创建项目失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '创建项目失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 关闭新建项目窗口\r\n\tconst closeAddProjectModal = () => {\r\n\t\tshowAddProjectModal.value = false\r\n\t}\r\n\r\n\t// 编辑项目\r\n\tconst editProject = async (projectId) => {\r\n\t\ttry {\r\n\t\t\tconst project = projects.value.find(p => p.id === projectId)\r\n\t\t\tif (!project) return\r\n\r\n\t\t\tObject.assign(editProjectForm, {\r\n\t\t\t\tid: project.id,\r\n\t\t\t\tname: project.name,\r\n\t\t\t\tdescription: project.description || '',\r\n\t\t\t\tnotes: project.notes || '',\r\n\t\t\t\tmember_ids: []\r\n\t\t\t})\r\n\r\n\t\t\tshowEditProjectModal.value = true\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('编辑项目失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '编辑项目失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 确认编辑项目\r\n\tconst confirmEditProject = async () => {\r\n\t\ttry {\r\n\t\t\tif (!editProjectForm.name.trim()) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入项目名称',\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst updateData = {\r\n\t\t\t\tname: editProjectForm.name.trim(),\r\n\t\t\t\tdescription: editProjectForm.description.trim(),\r\n\t\t\t\tnotes: editProjectForm.notes.trim()\r\n\t\t\t}\r\n\r\n\t\t\t// 调用更新项目接口\r\n\t\t\tawait updateProject(editProjectForm.id, updateData)\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '项目更新成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t\t// 关闭模态框并刷新数据\r\n\t\t\tcloseEditProjectModal()\r\n\t\t\tawait loadProjects()\r\n\t\t\tawait loadProjectDetail(editProjectForm.id)\r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('更新项目失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '更新项目失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 关闭编辑项目窗口\r\n\tconst closeEditProjectModal = () => {\r\n\t\tshowEditProjectModal.value = false\r\n\t}\r\n\r\n\t// 删除项目\r\n\tconst delProject = async (projectId) => {\r\n\t\ttry {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确认删除',\r\n\t\t\t\tcontent: '确定要删除这个项目吗？删除后30天内可以恢复。',\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tawait deleteProject(projectId)\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '项目删除成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// 重新加载项目列表\r\n\t\t\t\t\t\tawait loadProjects()\r\n\r\n\t\t\t\t\t\t// 如果删除的是当前选中的项目，清空选中状态\r\n\t\t\t\t\t\tif (activeProjectId.value === projectId) {\r\n\t\t\t\t\t\t\tactiveProjectId.value = null\r\n\t\t\t\t\t\t\tactiveProject.value = null\r\n\t\t\t\t\t\t\tdocuments.value = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('删除项目失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '删除项目失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 文件上传相关\r\n\tconst uploadFile = () => {\r\n\t\tif (!activeProjectId.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先选择项目',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tselectedFile.value = null\r\n\t\tuploadProgress.value = 0\r\n\t\tshowUploadModal.value = true\r\n\t}\r\n\r\n\t// 获取文件扩展名\r\n\tconst getFileExtension = (filename) => {\r\n\t\tif (!filename) return ''\r\n\t\tconst parts = filename.split('.')\r\n\t\treturn parts.length > 1 ? '.' + parts.pop().toLowerCase() : ''\r\n\t}\r\n\r\n\t// 选择文件（单个）\r\n\tconst chooseFile = () => {\r\n\t\tpickProjectFile()\r\n\t\t\t.then(file => {\r\n\t\t\t\tif (file) selectedFile.value = file\r\n\t\t\t})\r\n\t\t\t.catch(() => {})\r\n\t}\r\n\t\r\n\t// 选择多个文件（批量上传）\r\n\tconst chooseMultipleFiles = () => {\r\n\t\tconst isH5 = () => process.env.UNI_PLATFORM === 'h5'\r\n\t\t\r\n\t\t// H5 使用原生 input 支持多选\r\n\t\tif (isH5()) {\r\n\t\t\tconst input = document.createElement('input')\r\n\t\t\tinput.type = 'file'\r\n\t\t\tinput.multiple = true\r\n\t\t\tinput.accept = '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.md,.txt,.jpg,.jpeg,.png'\r\n\t\t\t\r\n\t\t\tinput.onchange = (e) => {\r\n\t\t\t\tconst files = Array.from(e.target.files)\r\n\t\t\t\tif (files.length === 0) return\r\n\t\t\t\t\r\n\t\t\t\t// 验证文件数量\r\n\t\t\t\tif (files.length > 50) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '最多选择50个文件',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 验证文件大小\r\n\t\t\t\tconst maxSize = 100 * 1024 * 1024\r\n\t\t\t\tconst invalidFiles = files.filter(f => f.size > maxSize)\r\n\t\t\t\tif (invalidFiles.length > 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `有${invalidFiles.length}个文件超过100MB`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 转换为统一格式\r\n\t\t\t\tselectedFiles.value = files.map(file => ({\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\ttype: file.name.split('.').pop().toLowerCase(),\r\n\t\t\t\t\tfile: file\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tinput.click()\r\n\t\t} else {\r\n\t\t\t// 微信小程序暂不支持批量上传\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '小程序暂不支持批量上传',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 选图片\r\n\tconst chooseImage = () => {\r\n\t\tpickProjectImage().then(file => {\r\n\t\t\tif (file) selectedFile.value = file\r\n\t\t}).catch(() => {})\r\n\t}\r\n\r\n\t// 确认上传文件（单个或批量）\r\n\tconst confirmUpload = async () => {\r\n\t\t// 批量上传\r\n\t\tif (selectedFiles.value.length > 0) {\r\n\t\t\t// 保存文件列表（因为关闭弹窗会清空）\r\n\t\t\tconst filesToUpload = [...selectedFiles.value]\r\n\t\t\tconst totalFiles = filesToUpload.length\r\n\t\t\t\r\n\t\t\t// 立即关闭弹窗\r\n\t\t\tshowUploadModal.value = false\r\n\t\t\tselectedFile.value = null\r\n\t\t\tselectedFiles.value = []\r\n\t\t\tuploadProgress.value = 0\r\n\t\t\t\r\n\t\t\t// 显示上传进度浮窗\r\n\t\t\tshowUploadProgress.value = true\r\n\t\t\tbatchUploading.value = true\r\n\t\t\tbatchProgress.value = 0\r\n\t\t\tbatchCurrent.value = 0\r\n\t\t\tbatchTotal.value = totalFiles\r\n\t\t\tbatchMessage.value = '准备上传...'\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t// 调用批量上传接口\r\n\t\t\t\tconst result = await batchUploadProjectFiles(activeProjectId.value, filesToUpload)\r\n\t\t\t\t\r\n\t\t\t\tbatchTaskId.value = result.task_id\r\n\t\t\t\tbatchMessage.value = '正在处理文件...'\r\n\t\t\t\t\r\n\t\t\t\t// 开始轮询任务状态\r\n\t\t\t\tstartPollingTaskStatus()\r\n\t\t\t\t\r\n\t\t\t} catch (e) {\r\n\t\t\t\tbatchUploading.value = false\r\n\t\t\t\tshowUploadProgress.value = false\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '上传失败',\r\n\t\t\t\t\tcontent: e.message || '批量上传失败，请重试',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\t// 单个上传\r\n\t\tif (!selectedFile.value) return\r\n\t\t\r\n\t\tconst fileToUpload = selectedFile.value\r\n\t\t\r\n\t\t// 立即关闭弹窗\r\n\t\tcloseUploadModal()\r\n\t\t\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '上传中...',\r\n\t\t\tmask: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tawait uploadProjectFile(activeProjectId.value, fileToUpload)\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '上传成功',\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\tduration: 2000\r\n\t\t\t})\r\n\t\t\tawait loadProjectDocuments(activeProjectId.value) // 刷新列表\r\n\t\t} catch (e) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '上传失败',\r\n\t\t\t\tcontent: e.message || '文件上传失败，请重试',\r\n\t\t\t\tshowCancel: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\t\r\n\t// 开始轮询任务状态\r\n\tconst startPollingTaskStatus = () => {\r\n\t\tif (pollTimer) {\r\n\t\t\tclearInterval(pollTimer)\r\n\t\t}\r\n\t\t\r\n\t\tpollTimer = setInterval(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst status = await getTaskStatus(batchTaskId.value)\r\n\t\t\t\t\r\n\t\t\t\tbatchProgress.value = status.progress\r\n\t\t\t\tbatchCurrent.value = status.current\r\n\t\t\t\tbatchTotal.value = status.total\r\n\t\t\t\tbatchMessage.value = status.message\r\n\t\t\t\t\r\n\t\t\t\t// 任务完成或失败，停止轮询\r\n\t\t\t\tif (status.status === 'success' || status.status === 'failed') {\r\n\t\t\t\t\tstopPollingTaskStatus()\r\n\t\t\t\t\tbatchUploading.value = false\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 刷新文件列表\r\n\t\t\t\t\tawait loadProjectDocuments(activeProjectId.value)\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 显示详细结果\r\n\t\t\t\t\tif (status.status === 'success') {\r\n\t\t\t\t\t\tconst successCount = status.success_count || 0\r\n\t\t\t\t\t\tconst failedCount = status.failed_count || 0\r\n\t\t\t\t\t\tconst total = status.total || 0\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('成功数量:', successCount, '失败数量:', failedCount, '总数:', total) // 调试日志\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet content = ''\r\n\t\t\t\t\t\tif (failedCount === 0) {\r\n\t\t\t\t\t\t\tcontent = `全部上传成功！共 ${successCount} 个文件`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcontent = `上传完成！\\n成功：${successCount} 个\\n失败：${failedCount} 个`\r\n\t\t\t\t\t\t\tif (status.failed_files && status.failed_files.length > 0) {\r\n\t\t\t\t\t\t\t\tcontent += `\\n\\n失败文件：\\n${status.failed_files.slice(0, 3).join('\\n')}`\r\n\t\t\t\t\t\t\t\tif (status.failed_files.length > 3) {\r\n\t\t\t\t\t\t\t\t\tcontent += `\\n...等${status.failed_files.length}个文件`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '上传结果',\r\n\t\t\t\t\t\t\tcontent: content,\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\tcontent: status.message || '文件上传失败，请重试',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 延迟关闭进度浮窗\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tshowUploadProgress.value = false\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('轮询任务状态失败:', e)\r\n\t\t\t\tstopPollingTaskStatus()\r\n\t\t\t\tbatchUploading.value = false\r\n\t\t\t\tshowUploadProgress.value = false\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '错误',\r\n\t\t\t\t\tcontent: '查询上传状态失败，请刷新页面查看结果',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}, 3000) // 每3秒轮询一次\r\n\t}\r\n\t\r\n\t// 停止轮询\r\n\tconst stopPollingTaskStatus = () => {\r\n\t\tif (pollTimer) {\r\n\t\t\tclearInterval(pollTimer)\r\n\t\t\tpollTimer = null\r\n\t\t}\r\n\t}\r\n\r\n\t// 关闭上传窗口\r\n\tconst closeUploadModal = () => {\r\n\t\tshowUploadModal.value = false\r\n\t\tselectedFile.value = null\r\n\t\tselectedFiles.value = []\r\n\t\tuploadProgress.value = 0\r\n\t}\r\n\t\r\n\t// 关闭上传进度浮窗\r\n\tconst closeUploadProgress = () => {\r\n\t\tif (batchUploading.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '文件上传中，请稍候...',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tstopPollingTaskStatus()\r\n\t\tshowUploadProgress.value = false\r\n\t\tbatchProgress.value = 0\r\n\t\tbatchTaskId.value = null\r\n\t\tbatchCurrent.value = 0\r\n\t\tbatchTotal.value = 0\r\n\t\tbatchMessage.value = ''\r\n\t}\r\n\r\n\t// 下载项目文档\r\n\tconst downloadDocument = async (doc) => {\r\n\t\t// #ifdef H5\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '准备下载...',\r\n\t\t\tmask: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tconst blob = await downloadProjectFile(activeProjectId.value, doc.document_id)\r\n\t\t\tconst url = URL.createObjectURL(blob)\r\n\t\t\tconst link = document.createElement('a')\r\n\t\t\tlink.href = url\r\n\t\t\tlink.download = doc.filename\r\n\t\t\tlink.click()\r\n\t\t\tURL.revokeObjectURL(url)\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t\t// #endif\r\n\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '下载中...',\r\n\t\t\tmask: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tconst tempFilePath = await downloadProjectFile(activeProjectId.value, doc.document_id)\r\n\t\t\tuni.hideLoading()\r\n\t\t\t\r\n\t\t\t// 尝试打开文档\r\n\t\t\tuni.openDocument({\r\n\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\tshowMenu: true,\r\n\t\t\t\tfileType: doc.file_extension.replace('.', ''),\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '打开成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log('打开文档失败:', err)\r\n\t\t\t\t\t// 如果打开失败，提示用户文件已下载\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '文件已下载，但当前文件类型不支持预览。文件已保存到微信文件中。',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t}\r\n\t\t// #endif\r\n\t}\r\n\r\n\t// 删除项目文档\r\n\tconst deleteDocument = async (documentId) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: '删除后 30 天内可恢复',\r\n\t\t\tsuccess: async (res) => {\r\n\t\t\t\tif (!res.confirm) return\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait removeProjectFile(activeProjectId.value, documentId)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已删除',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tawait loadProjectDocuments(activeProjectId.value)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '删除失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 辅助函数\r\n\tconst getDocumentIcon = (ext) => {\r\n\t\tconst map = {\r\n\t\t\t'.pdf': '/static/fileType/pdf.png',\r\n\t\t\t'.doc': '/static/fileType/word.png',\r\n\t\t\t'.docx': '/static/fileType/word.png',\r\n\t\t\t'.xls': '/static/fileType/excel.png',\r\n\t\t\t'.xlsx': '/static/fileType/excel.png',\r\n\t\t\t'.png': '/static/fileType/picture.png',\r\n\t\t\t'.jpg': '/static/fileType/picture.png',\r\n\t\t\t'.jpeg': '/static/fileType/picture.png',\r\n\t\t\t'.md': '/static/fileType/md.png',\r\n\t\t\t'.txt': '/static/fileType/txt.png',\r\n\t\t}\r\n\t\treturn map[ext.toLowerCase()] || '/static/fileType/file.png'\r\n\t}\r\n\r\n\t// 比特 → B/KB/MB/GB\r\n\tconst fmtSize = b => {\r\n\t\tif (!b) return '0 B'\r\n\t\tconst k = 1024\r\n\t\tconst units = ['B', 'KB', 'MB', 'GB']\r\n\t\tlet i = 0\r\n\t\twhile (b >= k && i < units.length - 1) {\r\n\t\t\tb /= k;\r\n\t\t\ti++\r\n\t\t}\r\n\t\treturn `${b.toFixed(i ? 1 : 0)} ${units[i]}`\r\n\t}\r\n\r\n\r\n\t// 组件挂载时加载数据\r\n\tonMounted(() => {\r\n\t\tloadProjects()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.projects {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 32rpx;\r\n\t\tmin-height: 100vh;\r\n\t\tpadding: 32rpx;\r\n\t\tbackground: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n\t}\r\n\r\n\t.projects__header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.projects__title-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.projects__title {\r\n\t\tfont-size: 48rpx;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #0f172a;\r\n\t\tline-height: 1.2;\r\n\t}\r\n\r\n\t.projects__subtitle {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #64748b;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.projects__header-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t/* 主要内容区域 */\r\n\t.projects__content {\r\n\t\tdisplay: flex;\r\n\t\tgap: 32rpx;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t/* 面板通用样式 */\r\n\t.projects__list-panel {\r\n\t\twidth: 510rpx;\r\n\t\tmin-width: 400rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 4rpx 24rpx rgba(15, 23, 42, 0.08);\r\n\t\tborder: 1rpx solid #f1f5f9;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.projects__detail-panel {\r\n\t\tflex: 1;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 4rpx 24rpx rgba(15, 23, 42, 0.08);\r\n\t\tborder: 1rpx solid #f1f5f9;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.projects__panel-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.projects__panel-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t.projects__detail-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.projects__detail-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\r\n\r\n\t/* 按钮样式 */\r\n\t.projects__button {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\theight: 64rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 500;\r\n\t\tborder: none;\r\n\t\ttransition: all 0.3s ease;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.projects__button:active {\r\n\t\ttransform: translateY(2rpx);\r\n\t}\r\n\r\n\t.projects__button--primary {\r\n\t\tbackground: linear-gradient(135deg, #3b82f6, #2563eb);\r\n\t\tcolor: #ffffff;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(59, 130, 246, 0.3);\r\n\t}\r\n\r\n\t.projects__button--primary:active {\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(59, 130, 246, 0.4);\r\n\t}\r\n\r\n\t.projects__button--primary:disabled {\r\n\t\tbackground: #cbd5e1;\r\n\t\tbox-shadow: none;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t.projects__button--secondary {\r\n\t\tbackground: transparent;\r\n\t\tcolor: #3b82f6;\r\n\t\tborder: 2rpx solid #3b82f6;\r\n\t}\r\n\r\n\t.projects__button--secondary:active {\r\n\t\tbackground: rgba(59, 130, 246, 0.1);\r\n\t}\r\n\r\n\t.projects__button--outline {\r\n\t\tbackground: transparent;\r\n\t\tcolor: #64748b;\r\n\t\tborder: 2rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.projects__button--outline:active {\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\r\n\t.projects__button--outline:disabled {\r\n\t\tcolor: #cbd5e1;\r\n\t\tborder-color: #cbd5e1;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t/* 项目列表样式 */\r\n\t.projects__scroll {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.projects__item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tgap: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder: 2rpx solid transparent;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tposition: relative;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.projects__item:active {\r\n\t\ttransform: translateY(2rpx);\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t.projects__item--active {\r\n\t\tbackground: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.04));\r\n\t\tborder-color: #3b82f6;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(59, 130, 246, 0.12);\r\n\t}\r\n\r\n\t.projects__item--delayed {\r\n\t\tborder-left: 4rpx solid #ef4444;\r\n\t}\r\n\r\n\t.projects__item-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground: rgba(59, 130, 246, 0.1);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tflex-shrink: 0;\r\n\t\tmargin-top: 4rpx;\r\n\t}\r\n\r\n\t.projects__item--active .projects__item-icon {\r\n\t\tbackground: rgba(59, 130, 246, 0.2);\r\n\t}\r\n\r\n\t.projects__item-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.projects__item-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.projects__item-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t\tline-height: 1.3;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.projects__item-badge {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 6rpx 12rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tfont-weight: 500;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.projects__item-badge--planning {\r\n\t\tbackground: rgba(100, 116, 139, 0.1);\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.projects__item-badge--in-progress {\r\n\t\tbackground: rgba(59, 130, 246, 0.1);\r\n\t\tcolor: #3b82f6;\r\n\t}\r\n\r\n\t.projects__item-badge--completed {\r\n\t\tbackground: rgba(16, 185, 129, 0.1);\r\n\t\tcolor: #059669;\r\n\t}\r\n\r\n\t.projects__item-badge--delayed {\r\n\t\tbackground: rgba(239, 68, 68, 0.1);\r\n\t\tcolor: #dc2626;\r\n\t}\r\n\r\n\t.projects__item-desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t/* 进度条样式 */\r\n\t.projects__progress {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.projects__progress-info {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.projects__progress-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.projects__progress-percent {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.projects__progress-bar {\r\n\t\theight: 8rpx;\r\n\t\tbackground: #e2e8f0;\r\n\t\tborder-radius: 4rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.projects__progress-fill {\r\n\t\theight: 100%;\r\n\t\tborder-radius: 4rpx;\r\n\t\ttransition: width 0.3s ease;\r\n\t}\r\n\r\n\t.projects__progress-fill--planning {\r\n\t\tbackground: #64748b;\r\n\t}\r\n\r\n\t.projects__progress-fill--in-progress {\r\n\t\tbackground: #3b82f6;\r\n\t}\r\n\r\n\t.projects__progress-fill--completed {\r\n\t\tbackground: #10b981;\r\n\t}\r\n\r\n\t.projects__progress-fill--delayed {\r\n\t\tbackground: #ef4444;\r\n\t}\r\n\r\n\t.projects__item-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.projects__item-meta-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\r\n\t.projects__item-meta-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t.projects__item-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\t// opacity: 0;\r\n\t\ttransition: opacity 0.3s ease;\r\n\t}\r\n\r\n\t.projects__item:active .projects__item-actions {\r\n\t\t// opacity: 1;\r\n\t}\r\n\r\n\t.projects__item-action {\r\n\t\tpadding: 8rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.projects__item-action:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t/* 详情内容样式 */\r\n\t.projects__detail-scroll {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.projects__detail-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.projects__section {\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 1rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.projects__section-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.projects__section-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t.projects__section-count {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #64748b;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t/* 项目概览网格 */\r\n\t.projects__overview-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fit, minmax(250rpx, 1fr));\r\n\t\tgap: 16rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.projects__overview-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\r\n\t.projects__overview-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.projects__overview-value {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.projects__overview-desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t/* 进度详情 */\r\n\t.projects__progress-detail {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 32rpx;\r\n\t}\r\n\r\n\t.projects__progress-visual {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.projects__progress-circle {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: conic-gradient(#3b82f6 0% var(--progress), #e2e8f0 var(--progress) 100%);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.projects__progress-circle::before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.projects__progress-circle-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #0f172a;\r\n\t\tposition: relative;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.projects__progress-stats {\r\n\t\tflex: 1;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.projects__progress-stat {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\r\n\t.projects__progress-stat-label {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.projects__progress-stat-value {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t/* 任务列表 */\r\n\t.projects__tasks-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.projects__task-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 8rpx;\r\n\t\tborder: 1rpx solid #e2e8f0;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.projects__task-item:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t.projects__task-item--completed {\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t.projects__task-checkbox {\r\n\t\tpadding: 4rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tmargin-top: 4rpx;\r\n\t}\r\n\r\n\t.projects__task-checkbox:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t.projects__task-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 6rpx;\r\n\t}\r\n\r\n\t.projects__task-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.projects__task-title {\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t\tflex: 1;\r\n\t\ttext-decoration: var(--text-decoration, none);\r\n\t}\r\n\r\n\t.projects__task-item--completed .projects__task-title {\r\n\t\t--text-decoration: line-through;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t.projects__task-badge {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4rpx 8rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t\tfont-weight: 500;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.projects__task-badge--low {\r\n\t\tbackground: rgba(16, 185, 129, 0.1);\r\n\t\tcolor: #059669;\r\n\t}\r\n\r\n\t.projects__task-badge--medium {\r\n\t\tbackground: rgba(245, 158, 11, 0.1);\r\n\t\tcolor: #d97706;\r\n\t}\r\n\r\n\t.projects__task-badge--high {\r\n\t\tbackground: rgba(239, 68, 68, 0.1);\r\n\t\tcolor: #dc2626;\r\n\t}\r\n\r\n\t.projects__task-desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.projects__task-item--completed .projects__task-desc {\r\n\t\tcolor: #cbd5e1;\r\n\t}\r\n\r\n\t.projects__task-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.projects__task-meta-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\r\n\t.projects__task-meta-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t.projects__task-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\topacity: 0;\r\n\t\ttransition: opacity 0.3s ease;\r\n\t}\r\n\r\n\t.projects__task-item:active .projects__task-actions {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.projects__task-action {\r\n\t\tpadding: 8rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.projects__task-action:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t/* 文档列表 */\r\n\t.projects__documents-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.projects__document-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 8rpx;\r\n\t\tborder: 1rpx solid #e2e8f0;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.projects__document-item:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t.projects__document-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tbackground: rgba(238, 238, 246, 0.1);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.projects__document-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 4rpx;\r\n\t\tmin-width: 0;\r\n\t\t/* 允许内容收缩 */\r\n\t}\r\n\r\n\t.projects__document-name {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 500;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\t/* 文本溢出显示省略号 */\r\n\t}\r\n\r\n\t.projects__document-meta {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t.projects__document-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tflex-shrink: 0;\r\n\t\t/* 防止按钮被挤压 */\r\n\t\t// opacity: 0;\r\n\t\ttransition: opacity 0.3s ease;\r\n\t}\r\n\r\n\t.projects__document-item:active .projects__document-actions {\r\n\t\t// opacity: 1;\r\n\t}\r\n\r\n\t.projects__document-action {\r\n\t\tpadding: 8rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.projects__document-action:active {\r\n\t\tbackground: #f1f5f9;\r\n\t}\r\n\r\n\t/* 空状态样式 */\r\n\t.projects__empty,\r\n\t.projects__empty-detail,\r\n\t.projects__empty-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 16rpx;\r\n\t\tpadding: 80rpx 32rpx;\r\n\t\tcolor: #cbd5e1;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.projects__empty-section {\r\n\t\tpadding: 40rpx 32rpx;\r\n\t}\r\n\r\n\t.projects__empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #64748b;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.projects__empty-subtext {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #94a3b8;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.projects__empty-section-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t/* 新增模态框样式 */\r\n\t.modal-overlay {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground: rgba(15, 23, 42, 0.6);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tz-index: 1000;\r\n\t\tpadding: 32rpx;\r\n\t}\r\n\r\n\t.modal-container {\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1000rpx;\r\n\t\tmax-height: 80vh;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 20rpx 60rpx rgba(15, 23, 42, 0.2);\r\n\t\tanimation: modalSlideIn 0.3s ease;\r\n\t}\r\n\r\n\t@keyframes modalSlideIn {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(-40rpx) scale(0.95);\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0) scale(1);\r\n\t\t}\r\n\t}\r\n\r\n\t.modal-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 32rpx 32rpx 0;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.modal-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t.modal-content {\r\n\t\tpadding: 0 32rpx;\r\n\t\tmax-height: 60vh;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.form-group {\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.form-label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #0f172a;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\r\n\t.form-input {\r\n\t\twidth: 95%;\r\n\t\theight: 80rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder: 2rpx solid #e2e8f0;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tbackground: #ffffff;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.form-input:focus {\r\n\t\tborder-color: #3b82f6;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.form-textarea {\r\n\t\twidth: 95%;\r\n\t\tmin-height: 160rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 2rpx solid #e2e8f0;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tbackground: #ffffff;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tresize: none;\r\n\t}\r\n\r\n\t.form-textarea:focus {\r\n\t\tborder-color: #3b82f6;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.upload-area {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 80rpx 32rpx;\r\n\t\tborder: 2rpx dashed #cbd5e1;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\ttransition: all 0.3s ease;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.upload-area:active {\r\n\t\tborder-color: #3b82f6;\r\n\t\tbackground: rgba(59, 130, 246, 0.05);\r\n\t}\r\n\r\n\t.upload-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-top: 16rpx;\r\n\t}\r\n\r\n\t.upload-subtext {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #94a3b8;\r\n\t\tmargin-top: 8rpx;\r\n\t}\r\n\r\n\t.upload-hint {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t\tmargin-top: 16rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.selected-file {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f1f5f9;\r\n\t\tborder-radius: 12rpx;\r\n\t\tmargin-top: 16rpx;\r\n\t}\r\n\r\n\t.file-name {\r\n\t\tflex: 1;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.file-size {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t/* 批量上传进度样式 */\r\n\t.batch-upload-progress {\r\n\t\tpadding: 40rpx 32rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.progress-info {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.progress-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.progress-count {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #3b82f6;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.progress-bar-container {\r\n\t\twidth: 100%;\r\n\t\theight: 16rpx;\r\n\t\tbackground: #e2e8f0;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.progress-bar-fill {\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(90deg, #3b82f6, #8b5cf6);\r\n\t\tborder-radius: 8rpx;\r\n\t\ttransition: width 0.3s ease;\r\n\t}\r\n\r\n\t.progress-percent {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #3b82f6;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t/* 已选文件列表样式 */\r\n\t.selected-files-list {\r\n\t\tmargin-top: 24rpx;\r\n\t\tborder: 2rpx solid #e2e8f0;\r\n\t\tborder-radius: 12rpx;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\r\n\t.selected-files-header {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-bottom: 1rpx solid #e2e8f0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.selected-files-title {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #0f172a;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.selected-files-size {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.selected-files-scroll {\r\n\t\tmax-height: 400rpx;\r\n\t}\r\n\r\n\t.selected-file-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 16rpx 20rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t}\r\n\r\n\t.selected-file-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.file-item-name {\r\n\t\tflex: 1;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #0f172a;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.file-item-size {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #94a3b8;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t/* 上传进度浮窗样式 */\r\n\t.upload-progress-float {\r\n\t\tposition: fixed;\r\n\t\tbottom: 40rpx;\r\n\t\tright: 40rpx;\r\n\t\tz-index: 999;\r\n\t\tanimation: slideInUp 0.3s ease;\r\n\t}\r\n\r\n\t@keyframes slideInUp {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(40rpx);\r\n\t\t}\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t.progress-float-container {\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 8rpx 32rpx rgba(15, 23, 42, 0.15);\r\n\t\tborder: 1rpx solid #e2e8f0;\r\n\t\twidth: 500rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.progress-float-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 20rpx 24rpx;\r\n\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\r\n\t.progress-float-title {\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t.progress-float-content {\r\n\t\tpadding: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.progress-message {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #64748b;\r\n\t}\r\n\r\n\t.modal-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 16rpx;\r\n\t\tpadding: 24rpx 32rpx;\r\n\t\tborder-top: 1rpx solid #e2e8f0;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.modal-button {\r\n\t\tflex: 1;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 500;\r\n\t\tborder: none;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.modal-button--cancel {\r\n\t\tbackground: transparent;\r\n\t\tcolor: #64748b;\r\n\t\tborder: 2rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.modal-button--cancel:active {\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\r\n\t.modal-button--confirm {\r\n\t\tbackground: linear-gradient(135deg, #3b82f6, #2563eb);\r\n\t\tcolor: #ffffff;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(59, 130, 246, 0.3);\r\n\t}\r\n\r\n\t.modal-button--confirm:active {\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(59, 130, 246, 0.4);\r\n\t\ttransform: translateY(2rpx);\r\n\t}\r\n\r\n\t.modal-button--confirm:disabled {\r\n\t\tbackground: #cbd5e1;\r\n\t\tbox-shadow: none;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t/* 响应式设计 */\r\n\t@media (max-width: 1023px) {\r\n\t\t.projects {\r\n\t\t\tpadding: 24rpx;\r\n\t\t\tgap: 24rpx;\r\n\t\t}\r\n\r\n\t\t.projects__content {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.projects__list-panel {\r\n\t\t\twidth: 93%;\r\n\t\t\tmin-width: auto;\r\n\t\t}\r\n\r\n\t\t.projects__header {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: stretch;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.projects__header-actions {\r\n\t\t\tjustify-content: flex-start;\r\n\t\t}\r\n\r\n\r\n\t\t.projects__panel-header {\r\n\t\t\t// flex-direction: column;\r\n\t\t\talign-items: stretch;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.projects__detail-actions {\r\n\t\t\tjustify-content: flex-start;\r\n\t\t}\r\n\r\n\t\t.projects__progress-detail {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: stretch;\r\n\t\t\tgap: 24rpx;\r\n\t\t}\r\n\r\n\t\t.projects__progress-stats {\r\n\t\t\tgrid-template-columns: repeat(4, 1fr);\r\n\t\t}\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.projects__header-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: stretch;\r\n\t\t}\r\n\r\n\t\t.projects__overview-grid {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t}\r\n\r\n\t\t.projects__progress-stats {\r\n\t\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\t/* 桌面端悬停效果 */\r\n\t@media (min-width: 768px) {\r\n\t\t.projects__item:hover {\r\n\t\t\ttransform: translateY(-2rpx);\r\n\t\t\tbox-shadow: 0 8rpx 24rpx rgba(15, 23, 42, 0.12);\r\n\t\t}\r\n\r\n\t\t.projects__item:hover .projects__item-actions {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t.projects__task-item:hover {\r\n\t\t\tbackground: #f1f5f9;\r\n\t\t\ttransform: translateY(-1rpx);\r\n\t\t}\r\n\r\n\t\t.projects__task-item:hover .projects__task-actions {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t.projects__document-item:hover {\r\n\t\t\tbackground: #f1f5f9;\r\n\t\t\ttransform: translateY(-1rpx);\r\n\t\t}\r\n\r\n\t\t.projects__document-item:hover .projects__document-actions {\r\n\t\t\t// opacity: 1;\r\n\t\t}\r\n\r\n\t\t.projects__button--primary:hover {\r\n\t\t\tbox-shadow: 0 6rpx 20rpx rgba(59, 130, 246, 0.4);\r\n\t\t}\r\n\r\n\t\t.projects__button--secondary:hover {\r\n\t\t\tbackground: rgba(59, 130, 246, 0.1);\r\n\t\t}\r\n\r\n\t\t.projects__button--outline:hover {\r\n\t\t\tbackground: #f8fafc;\r\n\t\t}\r\n\r\n\t\t.projects__filter-tab:hover {\r\n\t\t\tbackground: rgba(255, 255, 255, 0.5);\r\n\t\t}\r\n\r\n\t\t.projects__item-action:hover {\r\n\t\t\tbackground: #f1f5f9;\r\n\t\t}\r\n\r\n\t\t.projects__task-action:hover {\r\n\t\t\tbackground: #f1f5f9;\r\n\t\t}\r\n\r\n\t\t.projects__document-action:hover {\r\n\t\t\tbackground: #f1f5f9;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/project/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","ref","reactive","computed","getProjects","uni","getProjectDetail","getProjectDocuments","createProjects","updateProject","deleteProject","pickProjectFile","pickProjectImage","batchUploadProjectFiles","uploadProjectFile","getTaskStatus","downloadProjectFile","removeProjectFile","onMounted"],"mappings":"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"}