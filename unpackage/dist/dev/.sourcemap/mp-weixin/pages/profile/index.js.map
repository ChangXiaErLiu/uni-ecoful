{"version":3,"file":"index.js","sources":["pages/profile/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9pbmRleC52dWU"],"sourcesContent":["<!-- 个人中心界面 -->\n<template>\n\t<AppLayout current=\"pages/profile/index\">\n\t\t<view class=\"profile\">\n\t\t\t<!-- 用户信息头部 -->\n\t\t\t<view class=\"profile__header\">\n\t\t\t\t<view class=\"profile__avatar-section\">\n\t\t\t\t\t<view><img src=\"@/static/avatars/user.jpg\" class=\"profile__avatar\" alt=\"\" /></view>\n\t\t\t\t\t<view class=\"profile__info\">\n\t\t\t\t\t\t<text class=\"profile__name\">{{ userStore.userName }}</text>\n\t\t\t\t\t\t<text class=\"profile__role\">{{ userStore.companyName }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 账号信息卡片 -->\n\t\t\t<view class=\"profile__card\">\n\t\t\t\t<view class=\"profile__card-header\">\n\t\t\t\t\t<uni-icons type=\"contact\" size=\"20\" color=\"#276019\"></uni-icons>\n\t\t\t\t\t<text class=\"profile__card-title\">账号信息</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"profile__card-content\">\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"bindMobile\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"phone\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">手机号</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-value\">{{ userStore.phoneNum }}</text>\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"handleWechatBind\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"weixin\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">微信绑定</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-value profile__card-value--bound\">已绑定</text>\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"profile__card-row\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">最近登录</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-value\">2025-10-23 12:30</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 安全设置卡片 -->\n\t\t\t<view class=\"profile__card\">\n\t\t\t\t<view class=\"profile__card-header\">\n\t\t\t\t\t<uni-icons type=\"locked\" size=\"20\" color=\"#276019\"></uni-icons>\n\t\t\t\t\t<text class=\"profile__card-title\">安全设置</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"profile__card-content\">\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"manageDevices\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"phone\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">登录设备管理</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-desc\">查看并管理设备</text>\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"viewLogs\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">操作日志</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-desc\">记录重要操作</text>\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"handleChangePassword\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"locked-filled\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">修改密码</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 系统功能卡片 -->\n\t\t\t<view class=\"profile__card\">\n\t\t\t\t<view class=\"profile__card-header\">\n\t\t\t\t\t<uni-icons type=\"info\" size=\"20\" color=\"#276019\"></uni-icons>\n\t\t\t\t\t<text class=\"profile__card-title\">系统功能</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"profile__card-content\">\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"handleAbout\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"info\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">关于系统</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<text class=\"profile__card-version\">v1.1.0</text>\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"profile__card-row\" @tap=\"handleFeedback\">\n\t\t\t\t\t\t<view class=\"profile__card-left\">\n\t\t\t\t\t\t\t<uni-icons type=\"help\" size=\"18\" color=\"#64748b\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"profile__card-label\">意见反馈</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"profile__card-right\">\n\t\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#94a3b8\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 退出登录 -->\n\t\t\t<view class=\"profile__actions\">\n\t\t\t\t<button class=\"profile__logout-btn\" @tap=\"handleLogout\">退出登录</button>\n\t\t\t</view>\n\n\t\t\t<!-- 底部安全区域 -->\n\t\t\t<view class=\"safe-area-bottom\"></view>\n\t\t</view>\n\t</AppLayout>\n</template>\n\n<script setup>\n\timport {\n\t\tonMounted,\n\t\tref\n\t} from 'vue'\n\timport AppLayout from '@/components/layout/AppLayout.vue'\n\timport {\n\t\tonShow\n\t} from '@dcloudio/uni-app'\n\timport {\n\t\tnavTitleStore\n\t} from '@/stores/navTitle.js'\n\timport {\n\t\tuseUserStore\n\t} from '@/stores/user.js'\n\n\t//设置头部导航栏title\n\tconst navTitle = navTitleStore()\n\tonShow(() => navTitle.setTitle('个人中心'))\n\n\t// 获取用户信息\n\tconst userStore = useUserStore()\n\n\t/* 每次进入“我的”都拿最新资料（H5 与小程序通用） */\n\tonShow(async () => {\n\t\t// 必须有 token 才拉（守卫已保证，但防御性判断）\n\t\tif (!userStore.token) return\n\n\t\ttry {\n\t\t\tawait userStore.fetchUserInfo()\n\t\t} catch (e) {\n\t\t\t// 网络失败也不妨碍展示本地旧数据\n\t\t\tconsole.warn('获取最新用户信息失败', e)\n\t\t}\n\t})\n\n\tfunction bindMobile() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/changePhone'\n\t\t})\n\t}\n\n\tfunction handleWechatBind() {\n\t\tuni.showActionSheet({\n\t\t\titemList: ['解绑微信', '取消'],\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.tapIndex === 0) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '确认解绑',\n\t\t\t\t\t\tcontent: '解绑后将无法使用微信登录',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '解绑成功',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction handlePhoto() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/operationLogs'\n\t\t})\n\t}\n\n\tfunction handleReport() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/changePassword'\n\t\t})\n\t}\n\n\n\tfunction handleChangePassword() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/changePassword'\n\t\t})\n\t}\n\n\n\tfunction manageDevices() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/devices'\n\t\t})\n\t}\n\n\tfunction viewLogs() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/operationLogs'\n\t\t})\n\t}\n\n\tfunction handleAbout() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/about'\n\t\t})\n\t}\n\n\tfunction handleFeedback() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/profile/feedback'\n\t\t})\n\t}\n\n\t// 退出登录\n\tfunction handleLogout() {\n\t\tconst userStore = useUserStore()\n\t\tuni.showModal({\n\t\t\ttitle: '确认退出',\n\t\t\tcontent: '您确定要退出登录吗？',\n\t\t\tsuccess: async (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '退出中...'\n\t\t\t\t\t})\n\t\t\t\t\tawait userStore.logout()\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t// 清除登录状态\n\t\t\t\t\t\tuni.removeStorageSync('token')\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: '/pages/auth/login'\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.profile {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t\tbackground-color: #f5f7fa;\n\t\tpadding: 32rpx;\n\t\theight: 96vh;\n\t}\n\n\t/* 用户信息头部 */\n\t.profile__header {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tpadding: 30rpx;\n\t\tborder-radius: 24rpx;\n\t\tcolor: black;\n\t\tbackground-color: white;\n\t}\n\n\t.profile__avatar-section {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 24rpx;\n\t\tflex: 1;\n\t}\n\n\t.profile__avatar {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 20%;\n\t\tdisplay: flex;\n\t\tborder: 1rpx solid rgba(255, 255, 255, 0.3);\n\t}\n\n\t.profile__info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t\tflex: 1;\n\t}\n\n\t.profile__name {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: 700;\n\n\t}\n\n\t.profile__role {\n\t\tfont-size: 28rpx;\n\t\tborder-radius: 20rpx;\n\t\talign-self: flex-start;\n\t}\n\n\t.profile__desc {\n\t\tfont-size: 26rpx;\n\t\tcolor: rgba(255, 255, 255, 0.8);\n\t\tline-height: 1.4;\n\t}\n\n\t.profile__button {\n\t\tpadding: 0 32rpx;\n\t\theight: 64rpx;\n\t\tborder-radius: 32rpx;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t\tborder: none;\n\t\tbackground: rgba(255, 255, 255, 0.2);\n\t\tcolor: #ffffff;\n\t\twhite-space: nowrap;\n\t}\n\n\t.profile__button--primary {\n\t\tbackground: rgba(255, 255, 255, 0.9);\n\t\tcolor: #276019;\n\t\tfont-weight: 600;\n\t}\n\n\t/* 卡片样式 */\n\t.profile__card {\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 20rpx;\n\t\t// overflow: hidden;\n\t}\n\n\t.profile__card-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tpadding: 32rpx 32rpx 24rpx;\n\t\tborder-bottom: 1rpx solid #f1f5f9;\n\t}\n\n\t.profile__card-title {\n\t\tfont-size: 30rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #0f172a;\n\t}\n\n\t.profile__card-content {\n\t\tpadding: 0;\n\t}\n\n\t.profile__card-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 28rpx 32rpx;\n\t\tborder-bottom: 1rpx solid #f8fafc;\n\t\ttransition: background-color 0.2s;\n\t}\n\n\t.profile__card-row:active {\n\t\tbackground-color: #f8fafc;\n\t}\n\n\t.profile__card-row:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.profile__card-left {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tflex: 1;\n\t}\n\n\t.profile__card-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #334155;\n\t\tfont-weight: 500;\n\t}\n\n\t.profile__card-right {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t}\n\n\t.profile__card-value {\n\t\tfont-size: 28rpx;\n\t\tcolor: #64748b;\n\t}\n\n\t.profile__card-value--bound {\n\t\tcolor: #276019;\n\t\tfont-weight: 500;\n\t}\n\n\t.profile__card-desc {\n\t\tfont-size: 26rpx;\n\t\tcolor: #94a3b8;\n\t}\n\n\t.profile__card-version {\n\t\tfont-size: 26rpx;\n\t\tcolor: #64748b;\n\t\tbackground: #f1f5f9;\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 12rpx;\n\t}\n\n\t/* Picker 样式 */\n\t.profile__picker {\n\t\tpadding: 16rpx 24rpx;\n\t\tborder-radius: 16rpx;\n\t\tbackground-color: #f8fafc;\n\t\tcolor: #276019;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tmin-width: 200rpx;\n\t\ttext-align: right;\n\t}\n\n\t/* 退出登录 */\n\t.profile__logout-btn {\n\t\twidth: 100%;\n\t\tbackground: green;\n\t\tcolor: white;\n\t\tborder: none;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 2rpx;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t}\n\n\t.profile__logout-btn:active {\n\t\topacity: 0.9;\n\t\ttransform: scale(0.98);\n\t}\n\n\t/* 安全区域 */\n\t.safe-area-bottom {\n\t\theight: env(safe-area-inset-bottom);\n\t\tmin-height: 0rpx;\n\t}\n\n\t/* 响应式适配 */\n\t@media (max-width: 1023px) {\n\t\t.profile__header {\n\t\t\tflex-direction: column;\n\t\t\talign-items: stretch;\n\t\t}\n\n\t\t.profile__button {\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t.profile__cards {\n\t\t\tflex-direction: column;\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/profile/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","useUserStore","uni","res","userStore"],"mappings":";;;;;;;;;;;;;AA+IC,MAAM,YAAY,MAAW;;;;AAY7B,UAAM,WAAWA,gBAAAA,cAAe;AAChCC,kBAAAA,OAAO,MAAM,SAAS,SAAS,MAAM,CAAC;AAGtC,UAAM,YAAYC,YAAAA,aAAc;AAGhCD,kBAAAA,OAAO,YAAY;AAElB,UAAI,CAAC,UAAU;AAAO;AAEtB,UAAI;AACH,cAAM,UAAU,cAAe;AAAA,MAC/B,SAAQ,GAAG;AAEXE,sBAAAA,MAAA,MAAA,QAAA,kCAAa,cAAc,CAAC;AAAA,MAC5B;AAAA,IACH,CAAE;AAED,aAAS,aAAa;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,mBAAmB;AAC3BA,oBAAAA,MAAI,gBAAgB;AAAA,QACnB,UAAU,CAAC,QAAQ,IAAI;AAAA,QACvB,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,aAAa,GAAG;AACvBA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS;AAAA,cACT,SAAS,CAACC,SAAQ;AACjB,oBAAIA,KAAI,SAAS;AAChBD,gCAAAA,MAAI,UAAU;AAAA,oBACb,OAAO;AAAA,oBACP,MAAM;AAAA,kBACf,CAAS;AAAA,gBACD;AAAA,cACD;AAAA,YACP,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAeD,aAAS,uBAAuB;AAC/BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAGD,aAAS,gBAAgB;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,WAAW;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,cAAc;AACtBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,iBAAiB;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAGD,aAAS,eAAe;AACvB,YAAME,aAAYH,YAAAA,aAAc;AAChCC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACvB,cAAI,IAAI,SAAS;AAChBA,0BAAAA,MAAI,YAAY;AAAA,cACf,OAAO;AAAA,YACb,CAAM;AACD,kBAAME,WAAU,OAAQ;AACxB,uBAAW,MAAM;AAChBF,4BAAAA,MAAI,YAAa;AAEjBA,4BAAG,MAAC,kBAAkB,OAAO;AAC7BA,4BAAAA,MAAI,SAAS;AAAA,gBACZ,KAAK;AAAA,cACZ,CAAO;AAAA,YACD,GAAE,GAAI;AAAA,UACP;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5QF,GAAG,WAAW,eAAe;"}