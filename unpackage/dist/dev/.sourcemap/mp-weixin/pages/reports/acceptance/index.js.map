{"version":3,"file":"index.js","sources":["pages/reports/acceptance/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVwb3J0cy9hY2NlcHRhbmNlL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n\t<app-layout current=\"pages/reports/acceptance/index\">\n\t\t<view class=\"acceptance-page\">\n\t\t\t<!-- 步骤导航 -->\n\t\t\t<view class=\"acceptance-steps\">\n\t\t\t\t<view class=\"steps-container\">\n\t\t\t\t\t<template v-if=\"isMobile\">\n\t\t\t\t\t\t<uni-data-select v-model=\"currentStep\" :localdata=\"stepSelectOptions\" placeholder=\"选择步骤\"\n\t\t\t\t\t\t\tclass=\"mobile-step-select\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<view class=\"desktop-steps\" role=\"tablist\">\n\t\t\t\t\t\t\t<view v-for=\"(step, index) in stepNames\" :key=\"index\" class=\"step-item\" :class=\"{\n                  'step-item--active': currentStep === index,\n                  'step-item--completed': stepDone(index)\n                }\" role=\"tab\" :aria-selected=\"currentStep === index\" @tap=\"currentStep = index\">\n\t\t\t\t\t\t\t\t<view class=\"step-indicator\">\n\t\t\t\t\t\t\t\t\t<text v-if=\"stepDone(index)\" class=\"step-check\">✓</text>\n\t\t\t\t\t\t\t\t\t<text v-else class=\"step-number\">{{ index + 1 }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"step-label\">{{ step }}</text>\n\t\t\t\t\t\t\t\t<view v-if=\"index < stepNames.length - 1\" class=\"step-connector\" />\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</template>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 主要内容区域 -->\n\t\t\t<view class=\"acceptance-content\">\n\t\t\t\t<scroll-view class=\"content-scroll\" scroll-y>\n\t\t\t\t\t<!-- 步骤1: 选择项目 -->\n\t\t\t\t\t<view v-show=\"currentStep === 0\" class=\"content-section\">\n\t\t\t\t\t\t<view class=\"section-card\">\n\t\t\t\t\t\t\t<view class=\"section-header\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"20\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t<text class=\"section-title\">选择项目</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"section-body\">\n\t\t\t\t\t\t\t\t<!-- 项目选择 -->\n\t\t\t\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t\t\t\t<text class=\"form-label\">请选择要进行竣工验收的项目</text>\n\t\t\t\t\t\t\t\t\t<text class=\"form-tip\">项目文件已在项目管理模块上传并自动处理</text>\n\n\t\t\t\t\t\t\t\t\t<!-- 自定义项目选择器触发按钮 -->\n\t\t\t\t\t\t\t\t\t<view class=\"project-selector\" @tap=\"openProjectPicker\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"selector-content\">\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectedProject\" class=\"selected-project\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"20\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"project-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"project-name\">{{ selectedProject.name }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"selectedProject.description\" class=\"project-desc\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ selectedProject.description }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"placeholder\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"20\" color=\"#9ca3af\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"placeholder-text\">请选择项目</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"down\" size=\"16\" color=\"#6b7280\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 项目文件列表（只读） -->\n\t\t\t\t\t\t\t\t<view v-if=\"selectedProjectId && projectFiles.length > 0\" class=\"subsection\">\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"paperclip\" size=\"18\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">项目文件列表（{{ projectFiles.length }} 个文件）</text>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<view class=\"file-list\">\n\t\t\t\t\t\t\t\t\t\t<view v-for=\"file in projectFiles\" :key=\"file.document_id\" class=\"file-item\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"getFileIcon(file.file_extension)\" size=\"20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-details\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"file-name\">{{ file.filename }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"file-meta\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ formatFileSize(file.size_bytes) }} ·\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ formatFileStatus(file.status) }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-status\">\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"status-badge\" :class=\"getStatusClass(file.status)\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ getStatusText(file.status) }}\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 空状态提示 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"selectedProjectId && projectFiles.length === 0\" class=\"empty-state\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"48\" color=\"#cbd5e1\" />\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">该项目暂无文件</text>\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">请先在项目管理模块上传文件</text>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"simulateExtract\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedProjectId || projectFiles.length === 0\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"search\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t<text>提取项目基本信息</text>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<!-- 清除缓存按钮（只在有缓存数据时显示） -->\n\t\t\t\t\t\t\t\t\t<button v-if=\"baseTable.length > 0\" class=\"btn btn--ghost\" @tap=\"clearProjectCache\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t\t\t\t\t\t<text>清除缓存</text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 项目信息表和标识牌信息 -->\n\t\t\t\t\t\t\t\t<view v-if=\"baseTable.length\" class=\"subsection\">\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">项目信息表</text>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"openAddBase\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button v-if=\"selectMode\" class=\"btn btn--danger\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedIds.length\" @tap=\"removeSelected\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t<text>删除选中（{{ selectedIds.length }}）</text>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"toggleSelectMode\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"selectMode ? 'clear' : 'checkbox'\" size=\"16\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#155e3b\" />\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ selectMode ? '取消' : '选择删除' }}</text>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<!-- 项目信息表 -->\n\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(item, idx) in baseTable\" :key=\"item.id\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- 污染物表格特殊渲染 -->\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.id === 'pollutants_emission' && item.type === 'table'\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"pollutants-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants_baseinfo_row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.label }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 污染物表格 -->\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-table\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格头部 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-header\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">污染物类型</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">产生时间</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">污染物名称</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">污染因子</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">污染治理措施\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">排放去向\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">执行标准\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格内容 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-body\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 水污染物 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.水污染物 && item.value.水污染物.length\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(water, index) in item.value.水污染物\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'water-' + index\" class=\"pollutants-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">水污染物\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.产生环节 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染物名称 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染因子 || '未提取到污染因子' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染治理措施 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.排放去向 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.执行标准 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 大气污染物 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.大气污染物 && item.value.大气污染物.length\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(air, index) in item.value.大气污染物\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'air-' + index\" class=\"pollutants-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">大气污染物\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.产生环节 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染物名称 || '未提取到污染物名称' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染因子 || '未提取到污染因子' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染治理措施 || '未提取到污染治理措施' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.排放去向 || '大气环境' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.执行标准 || '未提取到执行标准' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 噪声 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.噪声 && item.value.噪声.length\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(noise, index) in item.value.噪声\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'noise-' + index\" class=\"pollutants-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">噪声</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.产生环节 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染物名称 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染因子 || '未提取到污染因子' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染治理措施 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.排放去向 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.执行标准 || '未提取到相关信息' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 选择模式下的复选框 -->\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"pollutants-select\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t<!-- 废物表格（固废 + 危废）-->\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.id === 'pollutants_emission' && item.type === 'table'\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"pollutants-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants_baseinfo_row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t固体废物产生情况\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 危废污染物表格 -->\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-table\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格头部 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-header\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">废物类型</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">产生时间</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">废物来源</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">废物名称</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">危险特性\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">危险废物类别\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">污染治理措施\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格内容 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-body\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 固体废物 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.固体废物 && item.value.固体废物.length\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(solid, index) in item.value.固体废物\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'solid-' + index\" class=\"pollutants-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">固体废物\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.产生环节 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物来源 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物名称 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险特性 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险废物类别 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.污染治理措施 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 危险废物 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.危险废物 && item.value.危险废物.length\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(solid, index) in item.value.危险废物\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'hazard-' + index\" class=\"pollutants-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">危险废物\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.value.危险废物.产生环节 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物来源 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物名称 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险特性 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险废物类别 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.污染治理措施 || '无' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 选择模式下的复选框 -->\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"pollutants-select\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t<!-- 除污染物外基本信息 -->\n\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"baseinfo__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.label }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--  如果是提取的数据，显示绿色小标签 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"form-item__input\" v-model=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" :clearable=\"true\" />\n\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"form-item__select\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<!-- 标识牌信息生成 -->\n\t\t\t\t\t\t\t\t\t<view class=\"subsection\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#fb923c\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">排污标识牌（下载与业主确认排污口信息）</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => { generateSignboard(); showSignboard = true }\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text>标识牌信息</text>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboard\" class=\"btn btn--primary\" @tap=\"downBiaoShi\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text>下载</text>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboard\" class=\"btn btn--primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"currentStep = 1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"redo-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text>生成监测方案</text>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t<!-- 标识牌信息列表 -->\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"showSignboard\" class=\"data-table\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\n\t\t\t\t\t\t\t\t\t\t\t\t<template v-for=\"(sec, si) in signboard.sections\" :key=\"'s'+si\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row table-row--simple\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-td table-td--section\">{{ sec.block }}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 只有噪声才可以新增 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"sec.block == '噪声'\" class=\"pw-ico icon-btn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => addSignItem(si)\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 按组渲染，每组 3 条，除了危废以外 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(group, gi) in groupItems(sec.items, sec.block)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'g'+si+'-'+gi\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 普通 3 条 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(it, ii) in group\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'r'+si+'-'+gi+'-'+ii\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.title\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"内容标题\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.content\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 删除按钮：只有「非危险废物」才显示 -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"sec.block !== '危险废物'\" class=\"form-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"margin-bottom:12px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"justify-content:flex-end;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeGroup(sec, gi)\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 步骤1: 监测方案 -->\n\t\t\t\t\t<view v-show=\"currentStep === 1\" class=\"content-section\">\n\t\t\t\t\t\t<view class=\"section-card\">\n\t\t\t\t\t\t\t<view class=\"section-header\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"20\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t<text class=\"section-title\">监测方案</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"section-body\">\n\t\t\t\t\t\t\t\t<view class=\"empty-state\">\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"48\" color=\"#cbd5e1\" />\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">AI帮您制定监测方案</text>\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">请点击下方按钮为您生成智能检测方案</text>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"saveMonitorPlan\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"refresh-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t<text>生成监测方案</text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<!-- 生成后可点 -->\n\t\t\t\t\t\t\t\t\t<button v-if=\"canDownload\" class=\"btn btn--primary\" @tap=\"downloadPlan\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-download-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t<text>下载监测方案</text>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<view v-if=\"plan\" class=\"paln-preview\">\n\t\t\t\t\t\t\t\t\t<view class=\"preview-header\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmark-circle\" size=\"18\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"preview-title\">环保验收监测方案已为您已生成，请点击下载！</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"preview-content\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"preview-text\">环保验收监测方案已生成，包含以下内容：</text>\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-sections\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 项目基本情况</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 环保设施建设情况</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 污染物详细情况</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 方案已生成，请点击下载</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\n\t\t\t\t\t   \n\t\t\t\t\t     <!-- 步骤2: 提资单比对 -->\n\t\t\t\t\t     <view v-show=\"currentStep === 2\" class=\"content-section\">\n\t\t\t\t\t       <view class=\"section-card\">\n\t\t\t\t\t         <view class=\"section-header\">\n\t\t\t\t\t           <uni-icons type=\"list\" size=\"20\" color=\"#166534\" />\n\t\t\t\t\t           <text class=\"section-title\">提资单比对</text>\n\t\t\t\t\t         </view>\n\t\t\t\t\t         \n\t\t\t\t\t         <view class=\"section-body\">\n\t\t\t\t\t           <!-- 环保资料提交管理系统界面 -->\n\t\t\t\t\t           <view class=\"tizidan-container\">\n\t\t\t\t\t             <!-- 顶部描述 -->\n\t\t\t\t\t             <view class=\"tizidan-header\">\n\t\t\t\t\t               <text class=\"tizidan-title\">环保资料提交管理系统</text>\n\t\t\t\t\t               <text class=\"tizidan-subtitle\">请按要求提交相关环保资料</text>\n\t\t\t\t\t             </view>\n\t\t\t\t\t   \n\t\t\t\t\t             <!-- 加载失败提示 -->\n\t\t\t\t\t             <view v-if=\"tizidanItems.length === 0\" class=\"empty-state\">\n\t\t\t\t\t               <uni-icons type=\"refresh\" size=\"48\" color=\"#cbd5e1\" />\n\t\t\t\t\t               <text class=\"empty-text\">加载失败，请重新刷新！</text>\n\t\t\t\t\t               <button class=\"btn btn--primary\" @tap=\"fetchTizidanData\">\n\t\t\t\t\t                 <uni-icons type=\"refresh\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t                 <text>重新加载</text>\n\t\t\t\t\t               </button>\n\t\t\t\t\t             </view>\n\t\t\t\t\t   \n\t\t\t\t\t             <!-- 正常内容 -->\n\t\t\t\t\t             <view v-else class=\"tizidan-content\">\n\t\t\t\t\t               <!-- 将提资单项分组显示 -->\n\t\t\t\t\t               \n\t\t\t\t\t               <!-- 1、项目历史以来环评报告及批复 -->\n\t\t\t\t\t               <view class=\"tizidan-section\">\n\t\t\t\t\t                 <view class=\"tizidan-section-header\">\n\t\t\t\t\t                   <text class=\"tizidan-section-number\">1.</text>\n\t\t\t\t\t                   <text class=\"tizidan-section-title\">项目历史以来环评报告及批复</text>\n\t\t\t\t\t                 </view>\n\t\t\t\t\t                 \n\t\t\t\t\t                 <!-- 找到这个组的所有项目 -->\n\t\t\t\t\t                 <template v-for=\"item in getItemsByLevel1('项目历史以来环评报告及批复')\" :key=\"item.record_id\">\n\t\t\t\t\t                   <view class=\"tizidan-item-card\">\n\t\t\t\t\t                     <view class=\"tizidan-item-header\">\n\t\t\t\t\t                       <view class=\"tizidan-item-left\">\n\t\t\t\t\t                         <text class=\"tizidan-item-number\">{{ getItemNumber(item) }}</text>\n\t\t\t\t\t                         <view class=\"tizidan-item-content\">\n\t\t\t\t\t                           <text class=\"tizidan-item-title\">{{ getItemTitle(item) }}</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 复选框：本项目是否需要 -->\n\t\t\t\t\t                       <view class=\"tizidan-checkbox-group\">\n\t\t\t\t\t                         <checkbox-group @change=\"() => toggleRequired(item)\">\n\t\t\t\t\t                           <label class=\"checkbox-label\">\n\t\t\t\t\t                             <checkbox :checked=\"item.required\" color=\"#166534\" style=\"transform:scale(0.9)\" />\n\t\t\t\t\t                             <text class=\"checkbox-text\">本项目是否需要</text>\n\t\t\t\t\t                           </label>\n\t\t\t\t\t                         </checkbox-group>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目需要时显示内容 -->\n\t\t\t\t\t                     <view v-if=\"item.required\" class=\"tizidan-item-body\">\n\t\t\t\t\t                       <view class=\"tizidan-item-actions\">\n\t\t\t\t\t                         <view class=\"tizidan-file-count\" v-if=\"getItemFiles(item).length > 0\">\n\t\t\t\t\t                           <uni-icons type=\"paperclip\" size=\"14\" color=\"#166534\" />\n\t\t\t\t\t                           <text class=\"file-count-text\">{{ getItemFiles(item).length }}个文件</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         <button class=\"btn btn--small\" @click=\"uploadTizidanFile(item.record_id, getFileKey(item))\">\n\t\t\t\t\t                           <uni-icons type=\"cloud-upload\" size=\"14\" color=\"#ffffff\" />\n\t\t\t\t\t                           <text>{{ item.submitted ? '重新上传' : '上传' }}</text>\n\t\t\t\t\t                         </button>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 已上传文件列表 -->\n\t\t\t\t\t                       <view v-if=\"getItemFiles(item).length > 0\" class=\"tizidan-file-list\">\n\t\t\t\t\t                         <view v-for=\"(file, fileIndex) in getItemFiles(item)\" :key=\"fileIndex\" class=\"tizidan-file-item\">\n\t\t\t\t\t                           <view class=\"tizidan-file-info\">\n\t\t\t\t\t                             <uni-icons type=\"paperclip\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t                             <text class=\"tizidan-file-name\">{{ file.name }}</text>\n\t\t\t\t\t                             <text class=\"tizidan-file-size\">{{ formatFileSize(file.size) }}</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                           <button class=\"btn btn--icon\" @click=\"deleteTizidanFile(item.record_id, getFileKey(item), fileIndex)\">\n\t\t\t\t\t                             <uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t                           </button>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目不需要时显示禁用状态 -->\n\t\t\t\t\t                     <view v-else class=\"tizidan-item-disabled\">\n\t\t\t\t\t                       <uni-icons type=\"minus-circle\" size=\"18\" color=\"#9ca3af\" />\n\t\t\t\t\t                       <text class=\"disabled-text\">此项目无需提交</text>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                   </view>\n\t\t\t\t\t                 </template>\n\t\t\t\t\t               </view>\n\t\t\t\t\t   \n\t\t\t\t\t               <!-- 2、项目相关环保验收资料 -->\n\t\t\t\t\t               <view class=\"tizidan-section\">\n\t\t\t\t\t                 <view class=\"tizidan-section-header\">\n\t\t\t\t\t                   <text class=\"tizidan-section-number\">2.</text>\n\t\t\t\t\t                   <text class=\"tizidan-section-title\">项目相关环保验收资料</text>\n\t\t\t\t\t                 </view>\n\t\t\t\t\t                 \n\t\t\t\t\t                 <!-- 找到这个组的所有项目 -->\n\t\t\t\t\t                 <template v-for=\"item in getItemsByLevel1('项目相关环保验收资料')\" :key=\"item.record_id\">\n\t\t\t\t\t                   <view class=\"tizidan-item-card\">\n\t\t\t\t\t                     <view class=\"tizidan-item-header\">\n\t\t\t\t\t                       <view class=\"tizidan-item-left\">\n\t\t\t\t\t                         <text class=\"tizidan-item-number\">{{ getItemNumber(item) }}</text>\n\t\t\t\t\t                         <view class=\"tizidan-item-content\">\n\t\t\t\t\t                           <text class=\"tizidan-item-title\">{{ getItemTitle(item) }}</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 复选框：本项目是否需要 -->\n\t\t\t\t\t                       <view class=\"tizidan-checkbox-group\">\n\t\t\t\t\t                         <checkbox-group @change=\"() => toggleRequired(item)\">\n\t\t\t\t\t                           <label class=\"checkbox-label\">\n\t\t\t\t\t                             <checkbox :checked=\"item.required\" color=\"#166534\" style=\"transform:scale(0.9)\" />\n\t\t\t\t\t                             <text class=\"checkbox-text\">本项目是否需要</text>\n\t\t\t\t\t                           </label>\n\t\t\t\t\t                         </checkbox-group>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目需要时显示内容 -->\n\t\t\t\t\t                     <view v-if=\"item.required\" class=\"tizidan-item-body\">\n\t\t\t\t\t                       <view class=\"tizidan-item-actions\">\n\t\t\t\t\t                         <view class=\"tizidan-file-count\" v-if=\"item.files && item.files.length > 0\">\n\t\t\t\t\t                           <uni-icons type=\"paperclip\" size=\"14\" color=\"#166534\" />\n\t\t\t\t\t                           <text class=\"file-count-text\">{{ item.files.length }}个文件</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         <button class=\"btn btn--small\" @click=\"uploadTizidanFile(item.record_id, null)\">\n\t\t\t\t\t                           <uni-icons type=\"cloud-upload\" size=\"14\" color=\"#ffffff\" />\n\t\t\t\t\t                           <text>{{ item.submitted ? '重新上传' : '上传' }}</text>\n\t\t\t\t\t                         </button>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 已上传文件列表 -->\n\t\t\t\t\t                       <view v-if=\"item.files && item.files.length > 0\" class=\"tizidan-file-list\">\n\t\t\t\t\t                         <view v-for=\"(file, fileIndex) in item.files\" :key=\"fileIndex\" class=\"tizidan-file-item\">\n\t\t\t\t\t                           <view class=\"tizidan-file-info\">\n\t\t\t\t\t                             <uni-icons type=\"paperclip\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t                             <text class=\"tizidan-file-name\">{{ file.name }}</text>\n\t\t\t\t\t                             <text class=\"tizidan-file-size\">{{ formatFileSize(file.size) }}</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                           <button class=\"btn btn--icon\" @click=\"deleteTizidanFile(item.record_id, null, fileIndex)\">\n\t\t\t\t\t                             <uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t                           </button>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目不需要时显示禁用状态 -->\n\t\t\t\t\t                     <view v-else class=\"tizidan-item-disabled\">\n\t\t\t\t\t                       <uni-icons type=\"minus-circle\" size=\"18\" color=\"#9ca3af\" />\n\t\t\t\t\t                       <text class=\"disabled-text\">此项目无需提交</text>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                   </view>\n\t\t\t\t\t                 </template>\n\t\t\t\t\t               </view>\n\t\t\t\t\t   \n\t\t\t\t\t               <!-- 3、（房地产项目提供）房地产相关证件 -->\n\t\t\t\t\t               <view class=\"tizidan-section\">\n\t\t\t\t\t                 <view class=\"tizidan-section-header\">\n\t\t\t\t\t                   <text class=\"tizidan-section-number\">3.</text>\n\t\t\t\t\t                   <text class=\"tizidan-section-title\">（房地产项目提供）房地产相关证件</text>\n\t\t\t\t\t                 </view>\n\t\t\t\t\t                 \n\t\t\t\t\t                 <!-- 找到这个组的所有项目 -->\n\t\t\t\t\t                 <template v-for=\"item in getItemsByLevel1('（房地产项目提供）房地产相关证件')\" :key=\"item.record_id\">\n\t\t\t\t\t                   <view class=\"tizidan-item-card\">\n\t\t\t\t\t                     <view class=\"tizidan-item-header\">\n\t\t\t\t\t                       <view class=\"tizidan-item-left\">\n\t\t\t\t\t                         <text class=\"tizidan-item-number\">{{ getItemNumber(item) }}</text>\n\t\t\t\t\t                         <view class=\"tizidan-item-content\">\n\t\t\t\t\t                           <text class=\"tizidan-item-title\">{{ getItemTitle(item) }}</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 复选框：本项目是否需要 -->\n\t\t\t\t\t                       <view class=\"tizidan-checkbox-group\">\n\t\t\t\t\t                         <checkbox-group @change=\"() => toggleRequired(item)\">\n\t\t\t\t\t                           <label class=\"checkbox-label\">\n\t\t\t\t\t                             <checkbox :checked=\"item.required\" color=\"#166534\" style=\"transform:scale(0.9)\" />\n\t\t\t\t\t                             <text class=\"checkbox-text\">本项目是否需要</text>\n\t\t\t\t\t                           </label>\n\t\t\t\t\t                         </checkbox-group>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目需要时显示内容 -->\n\t\t\t\t\t                     <view v-if=\"item.required\" class=\"tizidan-item-body\">\n\t\t\t\t\t                       <view class=\"tizidan-item-actions\">\n\t\t\t\t\t                         <view class=\"tizidan-file-count\" v-if=\"getItemFiles(item).length > 0\">\n\t\t\t\t\t                           <uni-icons type=\"paperclip\" size=\"14\" color=\"#166534\" />\n\t\t\t\t\t                           <text class=\"file-count-text\">{{ getItemFiles(item).length }}个文件</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         <button class=\"btn btn--small\" @click=\"uploadTizidanFile(item.record_id, getFileKey(item))\">\n\t\t\t\t\t                           <uni-icons type=\"cloud-upload\" size=\"14\" color=\"#ffffff\" />\n\t\t\t\t\t                           <text>{{ getSubmittedStatus(item) ? '重新上传' : '上传' }}</text>\n\t\t\t\t\t                         </button>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 已上传文件列表 -->\n\t\t\t\t\t                       <view v-if=\"getItemFiles(item).length > 0\" class=\"tizidan-file-list\">\n\t\t\t\t\t                         <view v-for=\"(file, fileIndex) in getItemFiles(item)\" :key=\"fileIndex\" class=\"tizidan-file-item\">\n\t\t\t\t\t                           <view class=\"tizidan-file-info\">\n\t\t\t\t\t                             <uni-icons type=\"paperclip\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t                             <text class=\"tizidan-file-name\">{{ file.name }}</text>\n\t\t\t\t\t                             <text class=\"tizidan-file-size\">{{ formatFileSize(file.size) }}</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                           <button class=\"btn btn--icon\" @click=\"deleteTizidanFile(item.record_id, getFileKey(item), fileIndex)\">\n\t\t\t\t\t                             <uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t                           </button>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <!-- 当项目不需要时显示禁用状态 -->\n\t\t\t\t\t                     <view v-else class=\"tizidan-item-disabled\">\n\t\t\t\t\t                       <uni-icons type=\"minus-circle\" size=\"18\" color=\"#9ca3af\" />\n\t\t\t\t\t                       <text class=\"disabled-text\">此项目无需提交</text>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                   </view>\n\t\t\t\t\t                 </template>\n\t\t\t\t\t               </view>\n\t\t\t\t\t   \n\t\t\t\t\t               <!-- 4-9项 - 统一布局的普通项 -->\n\t\t\t\t\t               <template v-for=\"level1Name in ['污染治理设施设计方案', '厂区总平面图及各层平面图（CAD版本）', \n\t\t\t\t\t                          '厂区排水设计图（CAD版本）', '排污许可证', '排水许可证', '危废处置协议及相应处置资质']\" \n\t\t\t\t\t                         :key=\"level1Name\">\n\t\t\t\t\t                 <view v-if=\"hasItemsByLevel1(level1Name)\" class=\"tizidan-section\">\n\t\t\t\t\t                   <view class=\"tizidan-section-header\">\n\t\t\t\t\t                     <text class=\"tizidan-section-number\">{{ getSectionNumber(level1Name) }}.</text>\n\t\t\t\t\t                     <text class=\"tizidan-section-title\">{{ level1Name }}</text>\n\t\t\t\t\t                   </view>\n\t\t\t\t\t                   \n\t\t\t\t\t                   <!-- 找到这个组的所有项目 -->\n\t\t\t\t\t                   <template v-for=\"item in getItemsByLevel1(level1Name)\" :key=\"item.record_id\">\n\t\t\t\t\t                     <view class=\"tizidan-item-card\">\n\t\t\t\t\t                       <view class=\"tizidan-item-header\">\n\t\t\t\t\t                         <view class=\"tizidan-item-left\">\n\t\t\t\t\t                           <text class=\"tizidan-item-number\">{{ getItemNumber(item) }}</text>\n\t\t\t\t\t                           <view class=\"tizidan-item-content\">\n\t\t\t\t\t                             <text class=\"tizidan-item-title\">{{ getItemTitle(item) }}</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         \n\t\t\t\t\t                         <!-- 复选框：本项目是否需要 -->\n\t\t\t\t\t                         <view class=\"tizidan-checkbox-group\">\n\t\t\t\t\t                           <checkbox-group @change=\"() => toggleRequired(item)\">\n\t\t\t\t\t                             <label class=\"checkbox-label\">\n\t\t\t\t\t                               <checkbox :checked=\"item.required\" color=\"#166534\" style=\"transform:scale(0.9)\" />\n\t\t\t\t\t                               <text class=\"checkbox-text\">本项目是否需要</text>\n\t\t\t\t\t                             </label>\n\t\t\t\t\t                           </checkbox-group>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 当项目需要时显示内容 -->\n\t\t\t\t\t                       <view v-if=\"item.required\" class=\"tizidan-item-body\">\n\t\t\t\t\t                         <view class=\"tizidan-item-actions\">\n\t\t\t\t\t                           <view class=\"tizidan-file-count\" v-if=\"item.files && item.files.length > 0\">\n\t\t\t\t\t                             <uni-icons type=\"paperclip\" size=\"14\" color=\"#166534\" />\n\t\t\t\t\t                             <text class=\"file-count-text\">{{ item.files.length }}个文件</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                           <button class=\"btn btn--small\" @click=\"uploadTizidanFile(item.record_id, null)\">\n\t\t\t\t\t                             <uni-icons type=\"cloud-upload\" size=\"14\" color=\"#ffffff\" />\n\t\t\t\t\t                             <text>{{ item.submitted ? '重新上传' : '上传' }}</text>\n\t\t\t\t\t                           </button>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         \n\t\t\t\t\t                         <!-- 已上传文件列表 -->\n\t\t\t\t\t                         <view v-if=\"item.files && item.files.length > 0\" class=\"tizidan-file-list\">\n\t\t\t\t\t                           <view v-for=\"(file, fileIndex) in item.files\" :key=\"fileIndex\" class=\"tizidan-file-item\">\n\t\t\t\t\t                             <view class=\"tizidan-file-info\">\n\t\t\t\t\t                               <uni-icons type=\"paperclip\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t                               <text class=\"tizidan-file-name\">{{ file.name }}</text>\n\t\t\t\t\t                               <text class=\"tizidan-file-size\">{{ formatFileSize(file.size) }}</text>\n\t\t\t\t\t                             </view>\n\t\t\t\t\t                             <button class=\"btn btn--icon\" @click=\"deleteTizidanFile(item.record_id, null, fileIndex)\">\n\t\t\t\t\t                               <uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t                             </button>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 当项目不需要时显示禁用状态 -->\n\t\t\t\t\t                       <view v-else class=\"tizidan-item-disabled\">\n\t\t\t\t\t                         <uni-icons type=\"minus-circle\" size=\"18\" color=\"#9ca3af\" />\n\t\t\t\t\t                         <text class=\"disabled-text\">此项目无需提交</text>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                   </template>\n\t\t\t\t\t                 </view>\n\t\t\t\t\t               </template>\n\t\t\t\t\t   \n\t\t\t\t\t               <!-- 10、其他需要提供的资料 -->\n\t\t\t\t\t               <view v-if=\"hasItemsByLevel1('其他需要提供的资料')\" class=\"tizidan-section\">\n\t\t\t\t\t                 <view class=\"tizidan-section-header\">\n\t\t\t\t\t                   <text class=\"tizidan-section-number\">10.</text>\n\t\t\t\t\t                   <text class=\"tizidan-section-title\">其他需要提供的资料</text>\n\t\t\t\t\t                 </view>\n\t\t\t\t\t                 \n\t\t\t\t\t                 <!-- 找到这个组的所有项目 -->\n\t\t\t\t\t                 <template v-for=\"item in getItemsByLevel1('其他需要提供的资料')\" :key=\"item.record_id\">\n\t\t\t\t\t                   <view class=\"tizidan-item-card\">\n\t\t\t\t\t                     <view class=\"tizidan-item-header\">\n\t\t\t\t\t                       <view class=\"tizidan-item-left\">\n\t\t\t\t\t                         <text class=\"tizidan-item-number\">{{ getItemNumber(item) }}</text>\n\t\t\t\t\t                         <view class=\"tizidan-item-content\">\n\t\t\t\t\t                           <text class=\"tizidan-item-title\">{{ getItemTitle(item) }}</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 复选框：本项目是否需要 -->\n\t\t\t\t\t                       <view class=\"tizidan-checkbox-group\">\n\t\t\t\t\t                         <checkbox-group @change=\"() => toggleRequired(item)\">\n\t\t\t\t\t                           <label class=\"checkbox-label\">\n\t\t\t\t\t                             <checkbox :checked=\"item.required\" color=\"#166534\" style=\"transform:scale(0.9)\" />\n\t\t\t\t\t                             <text class=\"checkbox-text\">本项目是否需要</text>\n\t\t\t\t\t                           </label>\n\t\t\t\t\t                         </checkbox-group>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <view v-if=\"item.required\" class=\"tizidan-item-body\">\n\t\t\t\t\t                       <!-- 输入框 -->\n\t\t\t\t\t                       <view class=\"tizidan-other-input\">\n\t\t\t\t\t                         <uni-easyinput \n\t\t\t\t\t                           v-model=\"item.customText\" \n\t\t\t\t\t                           placeholder=\"请输入其他需要提供的资料（以防万一以上资料不满足特殊项目要求）\" \n\t\t\t\t\t                           type=\"textarea\"\n\t\t\t\t\t                           :maxlength=\"500\"\n\t\t\t\t\t                           :clearable=\"true\"\n\t\t\t\t\t                           :autoHeight=\"true\"\n\t\t\t\t\t                           class=\"custom-textarea\"\n\t\t\t\t\t                         />\n\t\t\t\t\t                         <button class=\"btn btn--primary\" @click=\"submitOtherMaterials(item.record_id)\">\n\t\t\t\t\t                           提交\n\t\t\t\t\t                         </button>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <view class=\"tizidan-item-actions\">\n\t\t\t\t\t                         <view class=\"tizidan-file-count\" v-if=\"item.files && item.files.length > 0\">\n\t\t\t\t\t                           <uni-icons type=\"paperclip\" size=\"14\" color=\"#166534\" />\n\t\t\t\t\t                           <text class=\"file-count-text\">{{ item.files.length }}个文件</text>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                         <button class=\"btn btn--small\" @click=\"uploadTizidanFile(item.record_id, null)\">\n\t\t\t\t\t                           <uni-icons type=\"cloud-upload\" size=\"14\" color=\"#ffffff\" />\n\t\t\t\t\t                           <text>{{ item.submitted ? '重新上传' : '上传' }}</text>\n\t\t\t\t\t                         </button>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                       \n\t\t\t\t\t                       <!-- 已上传文件列表 -->\n\t\t\t\t\t                       <view v-if=\"item.files && item.files.length > 0\" class=\"tizidan-file-list\">\n\t\t\t\t\t                         <view v-for=\"(file, fileIndex) in item.files\" :key=\"fileIndex\" class=\"tizidan-file-item\">\n\t\t\t\t\t                           <view class=\"tizidan-file-info\">\n\t\t\t\t\t                             <uni-icons type=\"paperclip\" size=\"16\" color=\"#166534\" />\n\t\t\t\t\t                             <text class=\"tizidan-file-name\">{{ file.name }}</text>\n\t\t\t\t\t                             <text class=\"tizidan-file-size\">{{ formatFileSize(file.size) }}</text>\n\t\t\t\t\t                           </view>\n\t\t\t\t\t                           <button class=\"btn btn--icon\" @click=\"deleteTizidanFile(item.record_id, null, fileIndex)\">\n\t\t\t\t\t                             <uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\n\t\t\t\t\t                           </button>\n\t\t\t\t\t                         </view>\n\t\t\t\t\t                       </view>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                     \n\t\t\t\t\t                     <view v-else class=\"tizidan-item-disabled\">\n\t\t\t\t\t                       <uni-icons type=\"minus-circle\" size=\"18\" color=\"#9ca3af\" />\n\t\t\t\t\t                       <text class=\"disabled-text\">此项目无需提交</text>\n\t\t\t\t\t                     </view>\n\t\t\t\t\t                   </view>\n\t\t\t\t\t                 </template>\n\t\t\t\t\t               </view>\n\t\t\t\t\t             </view>\n\t\t\t\t\t           </view>\n\t\t\t\t\t   \n\t\t\t\t\t           <!-- 底部按钮 -->\n\t\t\t\t\t           <view class=\"tizidan-footer\">\n\t\t\t\t\t             <view class=\"footer-content\">\n\t\t\t\t\t               <text class=\"footer-text\">请确保所有需要的资料完整准确提交</text>\n\t\t\t\t\t               <button class=\"btn btn--primary\" @tap=\"downloadTizidanFile\" :disabled=\"!selectedProjectId\">\n\t\t\t\t\t                 <uni-icons type=\"download-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t                 <text>下载验收报告提资单</text>\n\t\t\t\t\t               </button>\n\t\t\t\t\t             </view>\n\t\t\t\t\t           </view>\n\t\t\t\t\t         </view>\n\t\t\t\t\t       </view>\n\t\t\t\t\t     </view>\n\t\t\t\t\t   \n\t\t\t\t\t\n\t\t\t\t\t<!-- 步骤3: 现场踏勘比对 -->\n\t\t\t\t\t<view v-show=\"currentStep === 3\" class=\"content-section\">\n\t\t\t\t\t\t<FieldSurveyContainer \n\t\t\t\t\t\t\t:userId=\"user_id\" \n\t\t\t\t\t\t\t:projectId=\"project_id\" \n\t\t\t\t\t\t\t:signboard=\"signboard\"\n\t\t\t\t\t\t\t:baseTable=\"baseTable\" \n\t\t\t\t\t\t\t:datasheet=\"datasheet\"\n\t\t\t\t\t\t\t@generate-signboard=\"generateSignboard\" \n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 步骤4: 竣工验收报告 -->\n\t\t\t\t\t<view v-show=\"currentStep === 4\" class=\"content-section\">\n\t\t\t\t\t\t<view class=\"section-card\">\n\t\t\t\t\t\t\t<view class=\"section-header\">\n\t\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"20\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t<text class=\"section-title\">竣工验收报告</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"section-body\">\n\t\t\t\t\t\t\t\t<view class=\"report-generation\">\n\t\t\t\t\t\t\t\t\t<view class=\"generation-options\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\">请选择要生成的报告类型</text>\n\t\t\t\t\t\t\t\t\t\t\t<radio-group class=\"radio-group\" @change=\"onReportTypeChange\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"radio-item\" v-for=\"type in reportTypes\" :key=\"type.value\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<radio :value=\"type.value\" :checked=\"reportType === type.value\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"radio-text\">{{ type.text }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</radio-group>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\" v-if=\"reportType === 'withData'\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\"> 上传监测报告</text>\n\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"testReportFiles\" fileMediatype=\"all\"\n\t\t\t\t\t\t\t\t\t\t\t\t:auto-upload=\"false\" :limit=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t</uni-file-picker>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<view class=\"generation-actions\">\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateAcceptanceReport\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"refresh-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t<text>生成验收报告</text>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<!-- 生成后可点 -->\n\t\t\t\t\t\t\t\t\t\t<button v-if=\"canDownloadReport\" class=\"btn btn--primary\"\n\t\t\t\t\t\t\t\t\t\t\t@tap=\"downAcceptanceReport\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-download-filled\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t\t\t\t\t\t\t<text>下载竣工验收报告</text>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t\t<view v-if=\"reportGenerated\" class=\"report-preview\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-header\">\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmarkempty\" size=\"18\" color=\"#166534\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-title\">{{previewTitle}}</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-content\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-text\">竣工验收报告已生成，包含以下内容：</text>\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"preview-sections\">\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 项目基本情况</text>\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 环保设施建设情况</text>\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 监测结果分析</text>\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 验收结论</text>\n\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"reportType === 'withData'\" class=\"section-item\">•\n\t\t\t\t\t\t\t\t\t\t\t\t\t检测数据附件</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\n\t\t\t<!-- 底部导航 -->\n\t\t\t<view class=\"acceptance-navigation\">\n\t\t\t\t<view class=\"nav-buttons\">\n\t\t\t\t\t<button class=\"btn btn--ghost\" :disabled=\"currentStep === 0\" @tap=\"prevStep\">\n\t\t\t\t\t\t<uni-icons type=\"left\" size=\"16\" color=\"#5b6b7b\" />\n\t\t\t\t\t\t<text>上一步</text>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"btn btn--primary\" :disabled=\"currentStep === stepNames.length - 1\" @tap=\"nextStep\">\n\t\t\t\t\t\t<text>下一步</text>\n\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#ffffff\" />\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</app-layout>\n\n\t<!-- 新增项目基本信息弹窗 -->\n\t<uni-popup ref=\"newBaseInfoPopup\" type=\"center\">\n\t\t<view class=\"modal\">\n\t\t\t<view class=\"modal-header\">\n\t\t\t\t<text class=\"modal-title\">新增项目基本信息</text>\n\t\t\t</view>\n\t\t\t<view class=\"modal-body\">\n\t\t\t\t<text class=\"modal-description\">请在下方输入信息名称</text>\n\t\t\t\t<uni-easyinput v-model=\"newBaseInfoLabel\" placeholder=\"如：项目名称/单位名称\" />\n\t\t\t</view>\n\t\t\t<view class=\"modal-actions\">\n\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"closeBaseInfo\">取消</button>\n\t\t\t\t<button class=\"btn btn--primary\" @tap=\"confirmAddBaseInfo\">确定</button>\n\t\t\t</view>\n\t\t</view>\n\t</uni-popup>\n\n\t<!-- 任务进度弹窗 -->\n\t<TaskProgressModal ref=\"taskProgressModal\" :title=\"taskProgressTitle\" :progress=\"taskProgress\"\n\t\t:statusText=\"taskStatusText\" :state=\"taskState\" :cancelable=\"false\" />\n\n\t<!-- 项目选择弹窗 -->\n\t<uni-popup ref=\"projectPickerPopup\" type=\"center\" :mask-click=\"true\">\n\t\t<view class=\"project-picker-modal\">\n\t\t\t<view class=\"picker-header\">\n\t\t\t\t<text class=\"picker-title\">选择项目</text>\n\t\t\t\t<view class=\"picker-close\" @tap=\"closeProjectPicker\">\n\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#6b7280\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 搜索框 -->\n\t\t\t<view class=\"picker-search\">\n\t\t\t\t<uni-easyinput v-model=\"projectSearchKeyword\" placeholder=\"搜索项目名称...\" prefixIcon=\"search\"\n\t\t\t\t\t:clearable=\"true\" @input=\"onSearchInput\" />\n\t\t\t</view>\n\n\t\t\t<!-- 项目统计 -->\n\t\t\t<view class=\"picker-stats\">\n\t\t\t\t<text class=\"stats-text\">\n\t\t\t\t\t共 {{ filteredProjects.length }} 个项目\n\t\t\t\t\t<text v-if=\"projectSearchKeyword\" class=\"stats-highlight\">\n\t\t\t\t\t\t（搜索结果）\n\t\t\t\t\t</text>\n\t\t\t\t</text>\n\t\t\t</view>\n\n\t\t\t<!-- 项目列表 -->\n\t\t\t<scroll-view class=\"picker-list\" scroll-y>\n\t\t\t\t<view v-for=\"project in filteredProjects\" :key=\"project.id\" class=\"picker-item\"\n\t\t\t\t\t:class=\"{ 'picker-item--active': selectedProjectId === project.id }\" @tap=\"selectProject(project)\">\n\t\t\t\t\t<view class=\"picker-item-icon\">\n\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"22\"\n\t\t\t\t\t\t\t:color=\"selectedProjectId === project.id ? '#166534' : '#6b7280'\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"picker-item-content\">\n\t\t\t\t\t\t<text class=\"picker-item-name\">{{ project.name }}</text>\n\t\t\t\t\t\t<text v-if=\"project.description\" class=\"picker-item-desc\">\n\t\t\t\t\t\t\t{{ project.description }}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<view v-if=\"project.folder_name\" class=\"picker-item-meta\">\n\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"14\" color=\"#9ca3af\" />\n\t\t\t\t\t\t\t<text class=\"meta-text\">{{ project.folder_name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"picker-item-action\">\n\t\t\t\t\t\t<view v-if=\"selectedProjectId === project.id\" class=\"selected-badge\">\n\t\t\t\t\t\t\t<uni-icons type=\"checkmarkempty\" size=\"18\" color=\"#ffffff\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<uni-icons v-else type=\"right\" size=\"16\" color=\"#d1d5db\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 空状态 -->\n\t\t\t\t<view v-if=\"filteredProjects.length === 0\" class=\"picker-empty\">\n\t\t\t\t\t<uni-icons type=\"search\" size=\"48\" color=\"#cbd5e1\" />\n\t\t\t\t\t<text class=\"picker-empty-text\">\n\t\t\t\t\t\t{{ projectSearchKeyword ? '未找到匹配的项目' : '暂无项目' }}\n\t\t\t\t\t</text>\n\t\t\t\t\t<text v-if=\"projectSearchKeyword\" class=\"picker-empty-tip\">\n\t\t\t\t\t\t试试其他关键词或清空搜索\n\t\t\t\t\t</text>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t</uni-popup>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\treactive,\n\t\tcomputed,\n\t\tnextTick,\n\t\twatch,\n\t\tonUnmounted\n\t} from 'vue'\n\timport {\n\t\tusePlatformInfo\n\t} from '@/utils/platform'\n\timport AppLayout from '@/components/layout/AppLayout.vue'\n\timport {\n\t\tonShow,\n\t\tonLoad\n\t} from '@dcloudio/uni-app'\n\timport TaskProgressModal from '@/components/message-pop-up/TaskProgressModal.vue'\n\timport FieldSurveyContainer from '@/components/field-survey/FieldSurveyContainer.vue'\n\timport { useFieldSurveyData } from '@/composables/useFieldSurveyData.js'\n\timport {\n\t\tnavTitleStore\n\t} from '@/stores/navTitle.js'\n\timport {\n\t\trunTask,\n\t\ttransformExtractResult,\n\t\tdownloadSignboardWord,\n\t\tgenerateMonitorPlan,\n\t\tdownloadMonitorPlan,\n\t\tgenerateReport,\n\t\tdownloadReport\n\t} from '@/api/acceptance.js'\n\n\t//手机端头部页面标题\n\tconst navTitle = navTitleStore()\n\tonShow(() => navTitle.setTitle('环评项目竣工验收'))\n\n\t//手机页面规定\n\tconst {\n\t\tisMobile\n\t} = usePlatformInfo()\n\n\t// 任务进度弹窗相关状态\n\tconst taskProgressModal = ref(null)\n\tconst taskProgressTitle = ref('信息提取中')\n\tconst taskProgress = ref(0)\n\tconst taskStatusText = ref('正在初始化...')\n\tconst taskState = ref('running')\n\n\n\t// 每个步骤定义--------------------------\n\t// 步骤标题\n\tconst stepNames = ['资料上传与基本信息', '监测方案', '提资单比对', '现场踏勘比对', '竣工验收报告']\n\n\t// 默认从第一步开始(0)\n\tconst currentStep = ref(0)\n\n\t// 手机端步骤选择\n\tconst stepNamesDisplay = computed(() => stepNames.map((n, i) => stepDone(i) ? (n + ' ✓') : n))\n\tconst stepSelectOptions = computed(() => stepNames.map((n, i) => ({\n\t\ttext: stepDone(i) ? (n + ' ✓') : n,\n\t\tvalue: i\n\t})))\n\n\t// 步骤更改时\n\tfunction onStepChange(e) {\n\t\tconst idx = Number(e?.currentIndex ?? e?.detail?.currentIndex ?? 0);\n\t\tif (!Number.isNaN(idx)) currentStep.value = idx\n\t}\n\n\t// 上一步按钮\n\tfunction prevStep() {\n\t\tif (currentStep.value > 0) currentStep.value -= 1\n\t}\n\t// 下一步按钮\n\tfunction nextStep() {\n\t\tif (currentStep.value < stepNames.length - 1) currentStep.value += 1\n\t}\n\n\t// 步骤完成值\n\tconst extractionOk = ref(false)\n\n\t// 所有步骤的完成度\n\tfunction stepDone(i) {\n\t\tswitch (i) {\n\t\t\tcase 0:\n\t\t\t\treturn extractionOk.value;\n\t\t\tcase 1:\n\t\t\t\treturn datasheet.value.length > 0;\n\t\t\tcase 2:\n\t\t\t\treturn tizidanItems.value.some(item => item.submitted);\n\t\t\tcase 3:\n\t\t\t\treturn fieldSurveyData.fieldworkComparison.value.length > 0;\n\t\t\tcase 4:\n\t\t\t\treturn reportGenerated.value;\n\t\t\tdefault:\n\t\t\t\treturn false\n\t\t}\n\t}\n\n\t// 以下提取项目基本信息模块的方法-------------------------\n\n\t// 项目选择相关\n\tconst selectedProjectId = ref(null) // 选中的项目ID\n\tconst selectedProject = ref(null) // 选中的项目对象\n\tconst projectList = ref([]) // 完整项目列表\n\tconst projectFiles = ref([]) // 项目文件列表\n\tconst projectSearchKeyword = ref('') // 搜索关键词\n\tconst projectPickerPopup = ref(null) // 弹窗引用\n\n\t// 文件状态轮询相关\n\tconst pollingTimer = ref(null) // 轮询定时器\n\tconst isPolling = ref(false) // 是否正在轮询\n\tconst pollingCount = ref(0) // 轮询次数\n\tconst MAX_POLLING_COUNT = 100 // 最多轮询100次（约5分钟）\n\tconst POLLING_INTERVAL = 3000 // 轮询间隔（3秒）\n\n\t// 过滤后的项目列表（根据搜索关键词）\n\tconst filteredProjects = computed(() => {\n\t\tif (!projectSearchKeyword.value) {\n\t\t\treturn projectList.value\n\t\t}\n\t\tconst keyword = projectSearchKeyword.value.toLowerCase().trim()\n\t\treturn projectList.value.filter(project => {\n\t\t\tconst name = (project.name || '').toLowerCase()\n\t\t\tconst desc = (project.description || '').toLowerCase()\n\t\t\tconst folder = (project.folder_name || '').toLowerCase()\n\t\t\treturn name.includes(keyword) || desc.includes(keyword) || folder.includes(keyword)\n\t\t})\n\t})\n\n\t// 打开项目选择器弹窗\n\tfunction openProjectPicker() {\n\t\tif (projectList.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '暂无项目，请先创建项目',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tprojectSearchKeyword.value = '' // 清空搜索\n\t\tprojectPickerPopup.value?.open()\n\t}\n\n\t// 关闭项目选择器弹窗\n\tfunction closeProjectPicker() {\n\t\tprojectPickerPopup.value?.close()\n\t}\n\n\t// 选择项目\n\tasync function selectProject(project) {\n\t\tselectedProjectId.value = project.id\n\t\tselectedProject.value = project\n\n\t\t// 保存到 uni.setStorageSync，跨平台兼容\n\t\ttry {\n\t\t\tuni.setStorageSync('acceptance_project_id', project.id)\n\t\t\tuni.setStorageSync('acceptance_project_info', JSON.stringify({\n\t\t\t\tid: project.id,\n\t\t\t\tname: project.name,\n\t\t\t\tdescription: project.description,\n\t\t\t\tfolder_name: project.folder_name\n\t\t\t}))\n\t\t} catch (e) {\n\t\t\tconsole.warn('⚠️ 保存项目选择失败:', e)\n\t\t}\n\n\t\t// 关闭弹窗\n\t\tcloseProjectPicker()\n\n\t\t// 停止之前的轮询（如果有）\n\t\tstopPolling()\n\n\t\t// 加载项目文件列表\n\t\tawait loadProjectFiles(project.id)\n\n\t\t// 加载完成后，检查是否需要启动轮询\n\t\tstartPollingFileStatus(project.id)\n\n\t\t// 加载该项目的缓存数据\n\t\tloadProjectCache(project.id)\n\n\t\t// 显示成功提示\n\t\tuni.showToast({\n\t\t\ttitle: `已选择：${project.name}`,\n\t\t\ticon: 'success',\n\t\t\tduration: 1500\n\t\t})\n\t}\n\n\t// 搜索输入处理\n\tfunction onSearchInput(e) {\n\t\t// 实时搜索，无需额外处理\n\t\tconsole.log('搜索关键词:', projectSearchKeyword.value)\n\t}\n\n\t// ========== 文件状态轮询功能 ==========\n\n\t// 检查是否有文件正在处理\n\tfunction hasProcessingFiles() {\n\t\treturn projectFiles.value.some(file =>\n\t\t\t!['indexed', 'failed'].includes(file.status)\n\t\t)\n\t}\n\n\t// 开始轮询文件状态\n\tfunction startPollingFileStatus(projectId) {\n\t\t// 如果没有文件在处理，不需要轮询\n\t\tif (!hasProcessingFiles()) {\n\t\t\t// console.log('✅ 所有文件已处理完成，无需轮询')\n\t\t\treturn\n\t\t}\n\n\t\t// 防止重复轮询\n\t\tif (isPolling.value) {\n\t\t\tconsole.log('⚠️ 已在轮询中，跳过')\n\t\t\treturn\n\t\t}\n\n\t\tisPolling.value = true\n\t\tpollingCount.value = 0\n\n\t\tconst processingCount = projectFiles.value.filter(f =>\n\t\t\t!['indexed', 'failed'].includes(f.status)\n\t\t).length\n\n\t\t// console.log(`🔄 开始轮询项目 ${projectId} 的文件状态...`)\n\t\t// console.log(`   还有 ${processingCount} 个文件正在处理`)\n\n\t\tpollingTimer.value = setInterval(async () => {\n\t\t\tpollingCount.value++\n\n\t\t\t// 超过最大次数，停止轮询\n\t\t\tif (pollingCount.value > MAX_POLLING_COUNT) {\n\t\t\t\tconsole.log('⏰ 达到最大轮询次数，停止轮询')\n\t\t\t\tstopPolling()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '文件处理超时，请手动刷新',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// 静默重新加载文件列表（不显示 loading）\n\t\t\t\tawait loadProjectFiles(projectId, true)\n\n\t\t\t\t// 检查是否所有文件都处理完成\n\t\t\t\tif (!hasProcessingFiles()) {\n\t\t\t\t\tconsole.log('✅ 所有文件处理完成，停止轮询')\n\t\t\t\t\tstopPolling()\n\n\t\t\t\t\t// 显示成功提示\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '文件处理完成',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// 统计处理中的文件\n\t\t\t\t\tconst processing = projectFiles.value.filter(f =>\n\t\t\t\t\t\t!['indexed', 'failed'].includes(f.status)\n\t\t\t\t\t)\n\t\t\t\t\t// console.log(`🔄 [轮询 ${pollingCount.value}] 还有 ${processing.length} 个文件正在处理...`)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('❌ 轮询文件状态失败:', error)\n\t\t\t\t// 不停止轮询，继续尝试\n\t\t\t}\n\t\t}, POLLING_INTERVAL)\n\t}\n\n\t// 停止轮询\n\tfunction stopPolling() {\n\t\tif (pollingTimer.value) {\n\t\t\tclearInterval(pollingTimer.value)\n\t\t\tpollingTimer.value = null\n\t\t}\n\t\tisPolling.value = false\n\t\tpollingCount.value = 0\n\t\t// console.log('⏹️ 轮询已停止')\n\t}\n\n\t// 加载项目列表\n\tasync function loadProjects() {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\tgetProjects\n\t\t\t} = await import('@/api/project.js')\n\t\t\tconst response = await getProjects()\n\n\t\t\tprojectList.value = response || []\n\n\t\t\t// console.log('项目列表加载成功:', projectList.value.length, '个项目')\n\t\t} catch (error) {\n\t\t\tconsole.error('加载项目列表失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载项目列表失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t}\n\n\n\n\t// 加载项目文件列表\n\tasync function loadProjectFiles(projectId, silent = false) {\n\t\ttry {\n\t\t\t// 非静默模式显示 loading\n\t\t\tif (!silent) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '加载文件列表...',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetProjectDocuments\n\t\t\t} = await import('@/api/project.js')\n\t\t\tconst response = await getProjectDocuments(projectId)\n\n\t\t\t// 确保 projectFiles 始终是数组\n\t\t\t// 后端可能返回 { documents: [...], total: 10 } 或直接返回数组\n\t\t\tif (Array.isArray(response)) {\n\t\t\t\tprojectFiles.value = response\n\t\t\t} else if (response && Array.isArray(response.documents)) {\n\t\t\t\tprojectFiles.value = response.documents\n\t\t\t} else {\n\t\t\t\tprojectFiles.value = []\n\t\t\t}\n\n\t\t\t// console.log('项目文件列表:', projectFiles.value)\n\n\t\t\tif (!silent) {\n\t\t\t\tuni.hideLoading()\n\n\t\t\t\tif (projectFiles.value.length === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '该项目暂无文件',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('加载项目文件失败:', error)\n\t\t\tif (!silent) {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '加载文件列表失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t\tprojectFiles.value = [] // 确保出错时也是数组\n\t\t}\n\t}\n\n\t// 文件图标映射\n\tfunction getFileIcon(extension) {\n\t\tconst ext = (extension || '').toLowerCase().replace('.', '')\n\t\tconst iconMap = {\n\t\t\t'pdf': 'paperplane',\n\t\t\t'doc': 'compose',\n\t\t\t'docx': 'compose',\n\t\t\t'xls': 'bars',\n\t\t\t'xlsx': 'bars',\n\t\t\t'ppt': 'image',\n\t\t\t'pptx': 'image',\n\t\t\t'md': 'compose',\n\t\t\t'txt': 'compose',\n\t\t\t'jpg': 'image',\n\t\t\t'jpeg': 'image',\n\t\t\t'png': 'image',\n\t\t\t'gif': 'image'\n\t\t}\n\t\treturn iconMap[ext] || 'paperclip'\n\t}\n\n\t// 格式化文件大小\n\tfunction formatFileSize(bytes) {\n\t\tif (!bytes) return '0 B'\n\t\tconst k = 1024\n\t\tconst sizes = ['B', 'KB', 'MB', 'GB']\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\t\treturn Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i]\n\t}\n\n\t// 格式化文件状态\n\tfunction formatFileStatus(status) {\n\t\tconst statusMap = {\n\t\t\t'uploaded': '已上传',\n\t\t\t'converting': '转换中',\n\t\t\t'converted': '已转换',\n\t\t\t'vectorizing': '向量化中',\n\t\t\t'indexed': '已索引',\n\t\t\t'failed': '处理失败'\n\t\t}\n\t\treturn statusMap[status] || status\n\t}\n\n\t// 获取状态文本\n\tfunction getStatusText(status) {\n\t\tconst statusMap = {\n\t\t\t'uploaded': '已上传',\n\t\t\t'converting': '转换中',\n\t\t\t'converted': '已转换',\n\t\t\t'vectorizing': '处理中',\n\t\t\t'indexed': '✓ 已就绪',\n\t\t\t'failed': '失败'\n\t\t}\n\t\treturn statusMap[status] || status\n\t}\n\n\t// 获取状态样式类\n\tfunction getStatusClass(status) {\n\t\tconst classMap = {\n\t\t\t'uploaded': 'status-uploaded',\n\t\t\t'converting': 'status-processing',\n\t\t\t'converted': 'status-processing',\n\t\t\t'vectorizing': 'status-processing',\n\t\t\t'indexed': 'status-success',\n\t\t\t'failed': 'status-error'\n\t\t}\n\t\treturn classMap[status] || ''\n\t}\n\n\t// 加载项目缓存数据\n\tfunction loadProjectCache(projectId) {\n\t\tif (!projectId) return\n\n\t\tconst cacheKey = `project_base_info_${projectId}`\n\t\tconst cachedData = uni.getStorageSync(cacheKey)\n\n\t\tif (cachedData) {\n\t\t\ttry {\n\t\t\t\tbaseTable.value = JSON.parse(cachedData)\n\t\t\t\textractionOk.value = true\n\t\t\t\tconsole.log(`✅ 已加载项目 ${projectId} 的缓存数据`)\n\n\t\t\t\t// 自动提取污染治理设施到现场踏勘（从baseTable提取并保存）\n\t\t\t\tfieldSurveyData.extractFacilitiesFromBaseTable(projectId, baseTable.value)\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已加载缓存数据',\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 1500\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('解析缓存数据失败:', error)\n\t\t\t\tbaseTable.value = []\n\t\t\t\textractionOk.value = false\n\t\t\t}\n\t\t} else {\n\t\t\t// 没有缓存，清空数据\n\t\t\tbaseTable.value = []\n\t\t\textractionOk.value = false\n\t\t\tconsole.log(`ℹ️ 项目 ${projectId} 暂无缓存数据`)\n\t\t}\n\t}\n\n\t// 清除当前项目的缓存\n\tfunction clearProjectCache() {\n\t\tif (!selectedProjectId.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先选择项目',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tuni.showModal({\n\t\t\ttitle: '清除缓存',\n\t\t\tcontent: '确定要清除当前项目的所有缓存数据吗？清除后需要重新提取信息。',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\t// 清除项目数据缓存\n\t\t\t\t\tconst cacheKey = `project_base_info_${selectedProjectId.value}`\n\t\t\t\t\tuni.removeStorageSync(cacheKey)\n\n\t\t\t\t\t// 清除项目选择缓存\n\t\t\t\t\tuni.removeStorageSync('acceptance_project_id')\n\t\t\t\t\tuni.removeStorageSync('acceptance_project_info')\n\n\t\t\t\t\t// 清空当前显示的数据\n\t\t\t\t\tbaseTable.value = []\n\t\t\t\t\tsignboard.value = {\n\t\t\t\t\t\tsections: []\n\t\t\t\t\t}\n\t\t\t\t\tshowSignboard.value = false\n\t\t\t\t\textractionOk.value = false\n\n\t\t\t\t\t// 清除项目选择\n\t\t\t\t\tselectedProjectId.value = null\n\t\t\t\t\tselectedProject.value = null\n\t\t\t\t\tprojectFiles.value = []\n\n\t\t\t\t\tconsole.log(`🗑️ 已清除项目缓存和选择`)\n\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '缓存已清除',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t// 页面加载时获取项目列表\n\tonLoad(async () => {\n\t\tawait loadProjects()\n\n\t\t// 尝试恢复上次选择的项目\n\t\ttry {\n\t\t\tconst savedProjectId = uni.getStorageSync('acceptance_project_id')\n\n\t\t\tif (savedProjectId) {\n\t\t\t\tconst project = projectList.value.find(p => p.id === savedProjectId)\n\n\t\t\t\tif (project) {\n\t\t\t\t\tconsole.log('🔄 恢复上次选择的项目:', project.name)\n\t\t\t\t\t// 自动选择该项目（不显示提示，静默恢复）\n\t\t\t\t\tselectedProjectId.value = project.id\n\t\t\t\t\tselectedProject.value = project\n\n\t\t\t\t\t// 加载项目文件列表\n\t\t\t\t\tawait loadProjectFiles(project.id)\n\n\t\t\t\t\t// 启动轮询\n\t\t\t\t\tstartPollingFileStatus(project.id)\n\n\t\t\t\t\t// 加载缓存\n\t\t\t\t\tloadProjectCache(project.id)\n\t\t\t\t} else {\n\t\t\t\t\t// 项目不存在，清除保存的ID\n\t\t\t\t\tconsole.log('⚠️ 上次选择的项目已不存在，清除缓存')\n\t\t\t\t\tuni.removeStorageSync('acceptance_project_id')\n\t\t\t\t\tuni.removeStorageSync('acceptance_project_info')\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.warn('⚠️ 恢复项目选择失败:', e)\n\t\t}\n\t})\n\n\t// 页面卸载时停止轮询\n\tonUnmounted(() => {\n\t\tstopPolling()\n\t\tconsole.log('📄 页面卸载，清理轮询定时器')\n\t})\n\n\t// 监听项目切换，停止旧项目的轮询\n\twatch(selectedProjectId, (newId, oldId) => {\n\t\tif (oldId && newId !== oldId) {\n\t\t\tstopPolling()\n\t\t\tconsole.log('🔄 切换项目，停止旧项目的轮询')\n\t\t}\n\t})\n\n\tconst extracting = ref(false) // 提取状态\n\tconst extractError = ref('') // 提取错误状态\n\n\n\n\t/* 提取信息的进度条 - 智能平滑进度版本（使用自定义弹窗）*/\n\t// 进度平滑处理\n\tlet smoothProgressTimer = null\n\tlet currentDisplayProgress = 0 // 当前显示的进度\n\tlet targetProgress = 0 // 目标进度（后端返回的真实进度）\n\tlet lastTargetProgress = 0 // 上一次的目标进度（用于检测是否真的更新了）\n\tlet lastUpdateTime = 0 // 上次后端真正更新进度的时间\n\n\t// 平滑更新进度条（智能版 - 更新响应式变量）\n\tfunction updateProgressSmooth(newProgress, statusText, state = 'running') {\n\t\t// 检查进度是否真的变化了\n\t\tconst progressChanged = newProgress !== lastTargetProgress\n\n\t\t// 更新目标进度和状态\n\t\ttargetProgress = newProgress\n\t\ttaskStatusText.value = statusText\n\t\ttaskState.value = state\n\n\t\t// 只有进度真的变化了，才更新时间戳\n\t\tif (progressChanged) {\n\t\t\tlastUpdateTime = Date.now()\n\t\t\tlastTargetProgress = newProgress\n\t\t\tconsole.log(`[进度真实更新] ${newProgress}% - ${statusText}`)\n\t\t}\n\n\t\t// 如果没有平滑计时器，启动一个\n\t\tif (!smoothProgressTimer) {\n\t\t\tsmoothProgressTimer = setInterval(() => {\n\t\t\t\tconst now = Date.now()\n\t\t\t\tconst timeSinceLastUpdate = now - lastUpdateTime // 距离上次真实更新的时间（毫秒）\n\n\t\t\t\t// 🎯 核心逻辑：智能增长\n\t\t\t\tif (currentDisplayProgress < targetProgress) {\n\t\t\t\t\t// 情况1：当前进度小于目标进度，快速追赶\n\t\t\t\t\tconst diff = targetProgress - currentDisplayProgress\n\t\t\t\t\tconst step = Math.max(0.5, diff / 10) // 最小0.5%，最大差值的1/10\n\n\t\t\t\t\tcurrentDisplayProgress = Math.min(\n\t\t\t\t\t\tcurrentDisplayProgress + step,\n\t\t\t\t\t\ttargetProgress\n\t\t\t\t\t)\n\t\t\t\t} else if (currentDisplayProgress >= targetProgress && targetProgress < 100) {\n\t\t\t\t\t// 情况2：已经追上目标进度，但任务未完成\n\n\t\t\t\t\t// 如果后端超过5秒没更新（可能卡住了），缓慢增长给用户反馈\n\t\t\t\t\tif (timeSinceLastUpdate > 5000) {\n\t\t\t\t\t\t// 缓慢增长，但不超过目标进度+5%\n\t\t\t\t\t\tconst maxAllowedProgress = Math.min(targetProgress + 5, 99)\n\n\t\t\t\t\t\tif (currentDisplayProgress < maxAllowedProgress) {\n\t\t\t\t\t\t\t// 每次增长0.1%，非常缓慢\n\t\t\t\t\t\t\tcurrentDisplayProgress += 0.1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 更新弹窗显示的进度\n\t\t\t\ttaskProgress.value = Math.floor(currentDisplayProgress)\n\n\t\t\t\t// 如果已经达到目标且目标是100%，停止计时器\n\t\t\t\tif (currentDisplayProgress >= 99.9 && targetProgress >= 100) {\n\t\t\t\t\tclearInterval(smoothProgressTimer)\n\t\t\t\t\tsmoothProgressTimer = null\n\t\t\t\t\tcurrentDisplayProgress = 100\n\t\t\t\t\ttaskProgress.value = 100\n\t\t\t\t\ttaskState.value = 'success'\n\t\t\t\t\ttaskStatusText.value = '信息提取完成'\n\n\t\t\t\t\t// 1秒后关闭弹窗并显示成功提示\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\ttaskProgressModal.value?.close()\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '信息提取完成',\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\t\t\t}, 50) // 每50ms更新一次，保证平滑\n\t\t}\n\t}\n\n\t// 清理进度计时器\n\tfunction clearProgressTimer() {\n\t\tif (smoothProgressTimer) {\n\t\t\tclearInterval(smoothProgressTimer)\n\t\t\tsmoothProgressTimer = null\n\t\t}\n\t\tcurrentDisplayProgress = 0\n\t\ttargetProgress = 0\n\t\tlastTargetProgress = 0\n\t\tlastUpdateTime = 0\n\t\ttaskProgress.value = 0\n\t\ttaskStatusText.value = '正在初始化...'\n\t\ttaskState.value = 'running'\n\t}\n\n\t// 提取信息到项目基本表（使用自定义进度弹窗）\n\tasync function simulateExtract() {\n\t\t// 1. 前置检查：是否选择了项目\n\t\tif (!selectedProjectId.value) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '请先选择一个项目',\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: '知道了'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 2. 检查项目是否有文件\n\t\tif (projectFiles.value.length === 0) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '该项目暂无文件，请先在项目管理模块上传文件',\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: '知道了'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 3. 检查文件是否已索引（至少有一个文件状态为 indexed）\n\t\tconst hasIndexedFiles = projectFiles.value.some(file => file.status === 'indexed')\n\t\tif (!hasIndexedFiles) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '项目文件正在处理中，请稍后再试',\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: '知道了'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\textracting.value = true // 开始提取，按钮显示loading\n\n\t\t// 2. 清理之前的进度状态\n\t\tclearProgressTimer()\n\n\t\t// 3. 初始化弹窗状态并打开\n\t\ttaskProgressTitle.value = '信息提取中'\n\t\ttaskProgress.value = 0\n\t\ttaskStatusText.value = '正在提交任务...'\n\t\ttaskState.value = 'pending'\n\t\ttaskProgressModal.value?.open()\n\n\t\ttry {\n\t\t\tconst result = await runTask({\n\t\t\t\tprojectId: selectedProjectId.value,\n\t\t\t\tprojectFolder: selectedProject.value.folder_name,\n\t\t\t\t// 进度回调函数：每次后端更新进度时调用\n\t\t\t\tonProgress: (progress, statusText, state) => {\n\t\t\t\t\t// 使用平滑进度更新（会自动更新响应式变量）\n\t\t\t\t\tupdateProgressSmooth(progress, statusText, state)\n\t\t\t\t},\n\t\t\t\tpollInterval: 3000, // 每3秒轮询一次\n\t\t\t\ttimeout: 1800000 // 30分钟超时\n\t\t\t})\n\n\t\t\t// 5. 任务完成，确保进度到100%\n\t\t\tupdateProgressSmooth(100, '任务完成', 'success')\n\n\t\t\t// 6. 数据校验：确保后端真的返回了数据\n\t\t\tif (result?.status !== 'success' || !result.result) {\n\t\t\t\tthrow new Error(result?.message || '提取失败：后端未返回有效数据')\n\t\t\t}\n\n\t\t\t// 7. 转换数据并填充表格（核心操作）\n\t\t\tbaseTable.value = transformExtractResult(result.result)\n\n\t\t\t// 8. 缓存到本地（关键！使用项目ID作为key，每个项目独立缓存）\n\t\t\tconst cacheKey = `project_base_info_${selectedProjectId.value}`\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(baseTable.value))\n\t\t\tconsole.log(`✅ 项目 ${selectedProjectId.value} 的数据已缓存`)\n\n\t\t\t// 9. 自动提取污染治理设施到现场踏勘（静默填充）\n\t\t\tfieldSurveyData.extractFacilitiesFromPollutants(baseTable.value)\n\n\t\t\t// 10. 标记提取完成\n\t\t\textractionOk.value = true\n\n\t\t} catch (error) {\n\t\t\t// 错误时清除进度计时器并关闭弹窗\n\t\t\tclearProgressTimer()\n\t\t\ttaskProgressModal.value?.close()\n\n\t\t\t// 10. 错误分类处理，给用户看得懂的提示\n\t\t\tconsole.error('[Extract] 提取失败:', error)\n\n\t\t\tif (error.message.includes('超时') || error.message.includes('timeout')) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提取超时了！',\n\t\t\t\t\tcontent: '任务执行时间过长，可能原因：\\n1. 文档过大（建议<50MB）\\n2. 网络不稳定\\n3. 服务器繁忙\\n\\n建议稍后重试或联系管理员',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '知道了'\n\t\t\t\t})\n\t\t\t} else if (error.message.includes('未提取到')) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提取失败',\n\t\t\t\t\tcontent: '文档中未找到项目信息，请检查：\\n1. 文件是否为完整的环评报告\\n2. 文件内容是否清晰可读\\n3. 文件格式是否正确',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '知道了'\n\t\t\t\t})\n\t\t\t} else if (error.message.includes('已有任务在运行')) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '任务进行中',\n\t\t\t\t\tcontent: '您已有一个信息提取任务正在运行，请等待完成后再提交新任务',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '知道了'\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提取失败',\n\t\t\t\t\tcontent: error.message || '无法从文档中提取项目信息，请稍后重试',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '知道了'\n\t\t\t\t})\n\t\t\t}\n\t\t} finally {\n\t\t\textracting.value = false // 无论成功失败，都要结束loading状态\n\t\t}\n\t}\n\n\t// 新增项目基本信息弹窗\n\tconst newBaseInfoPopup = ref(null)\n\n\t// 新增项目基本信息的标题\n\tconst newBaseInfoLabel = ref('')\n\n\t// 新增项目基本信息\n\tfunction openAddBase() {\n\t\tnewBaseInfoLabel.value = '';\n\t\tnewBaseInfoPopup.value?.open?.()\n\t}\n\n\t// 确认新增项目基本信息\n\tfunction confirmAddBaseInfo() {\n\t\tconst label = (newBaseInfoLabel.value || '').trim();\n\t\tif (!label) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入字段名称',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn\n\t\t}\n\t\tbaseTable.value.push({\n\t\t\tid: Date.now() + Math.random(),\n\t\t\tsection: '',\n\t\t\tlabel,\n\t\t\tvalue: '',\n\t\t\tsource: 'manual',\n\t\t\trequired: false,\n\t\t});\n\t\tnewBaseInfoPopup.value?.close?.()\n\t}\n\n\t// 关闭新增项目基本信息弹窗\n\tfunction closeBaseInfo() {\n\t\tnewBaseInfoPopup.value?.close?.()\n\t}\n\n\n\n\n\n\t// 以下标识牌模块的方法-------------------------\n\t//展示标识牌列表\n\tconst showSignboard = ref(false)\n\n\t// 标识牌模块名称以及列表信息\n\tconst signboard = reactive({\n\t\tsections: [{\n\t\t\t\tblock: '废水',\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: ''\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\tblock: '废气',\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: ''\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\tblock: '噪声',\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: ''\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tblock: '危险废物',\n\t\t\t\titems: [{\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: ''\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t})\n\n\t// 生成标识牌信息(从项目基本信息提取)\n\tfunction generateSignboard() {\n\t\tconst unitName = findBaseValue('建设单位名称') || findBaseValue('单位名称') || '';\n\t\tconst wfName = findBaseValue('危废名称') || findBaseValue('危废') || '';\n\t\tconst emissionData = baseTable.value.find(x => x.id === 'pollutants_emission')?.value;\n\n\t\tif (!emissionData || typeof emissionData !== 'object') {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '未提取到污染物信息',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t// 清空旧数据\n\t\tsignboard.sections.forEach(sec => (sec.items = []));\n\n\t\t// 辅助函数：拆分排污口编号（处理\"DA001、DA002、DA003\"这种情况）\n\t\tfunction splitOutletCodes(codeStr) {\n\t\t\tif (!codeStr) return [];\n\n\t\t\t// 无效的排污口编号列表\n\t\t\tconst invalidCodes = ['/', '信息待补充', ''];\n\n\t\t\treturn codeStr\n\t\t\t\t.split(/[、,，]/) // 按顿号、逗号分隔\n\t\t\t\t.map(c => c.trim()) // 去除空格\n\t\t\t\t.filter(c => c && !invalidCodes.includes(c)); // 过滤无效编号\n\t\t}\n\n\t\t// 辅助函数：按排污口编号分组并合并污染物\n\t\tfunction groupByOutletCode(list, blockType) {\n\t\t\tconst outletMap = new Map(); // key: 排污口编号, value: { pollutants: [], ...otherInfo }\n\n\t\t\tlist.forEach(item => {\n\t\t\t\tconst codes = splitOutletCodes(item['排污口编号']);\n\t\t\t\tconst pollutantName = item['污染物名称'] || '';\n\t\t\t\tconst wryz = item['污染因子'] || '';\n\n\t\t\t\tcodes.forEach(code => {\n\t\t\t\t\tif (!outletMap.has(code)) {\n\t\t\t\t\t\toutletMap.set(code, {\n\t\t\t\t\t\t\tpollutants: [],\n\t\t\t\t\t\t\twryz: [],\n\t\t\t\t\t\t\totherInfo: item // 保存其他信息（如执行标准、排放去向等）\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// 合并污染物名称\n\t\t\t\t\tif (wryz) {\n\t\t\t\t\t\toutletMap.get(code).wryz.push(wryz);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn outletMap;\n\t\t}\n\n\t\t// 废水\n\t\tconst waterList = emissionData['水污染物'] || [];\n\t\tconst waterOutlets = groupByOutletCode(waterList, '废水');\n\t\twaterOutlets.forEach((data, code) => {\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\n\t\t\tsignboard.sections.find(s => s.block === '废水').items.push({\n\t\t\t\ttitle: '单位名称',\n\t\t\t\tcontent: unitName\n\t\t\t}, {\n\t\t\t\ttitle: '排放口编号',\n\t\t\t\tcontent: code\n\t\t\t}, {\n\t\t\t\ttitle: '污染因子',\n\t\t\t\tcontent: wryz\n\t\t\t});\n\t\t});\n\n\t\t// 废气\n\t\tconst gasList = emissionData['大气污染物'] || [];\n\t\tconst gasOutlets = groupByOutletCode(gasList, '废气');\n\t\tgasOutlets.forEach((data, code) => {\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\n\t\t\tsignboard.sections.find(s => s.block === '废气').items.push({\n\t\t\t\ttitle: '单位名称',\n\t\t\t\tcontent: unitName\n\t\t\t}, {\n\t\t\t\ttitle: '排放口编号',\n\t\t\t\tcontent: code\n\t\t\t}, {\n\t\t\t\ttitle: '污染因子',\n\t\t\t\tcontent: wryz\n\t\t\t});\n\t\t});\n\n\t\t// 噪声\n\t\tconst noiseList = emissionData['噪声'] || [];\n\t\tconst noiseOutlets = groupByOutletCode(noiseList, '噪声');\n\t\tnoiseOutlets.forEach((data, code) => {\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\n\t\t\tsignboard.sections.find(s => s.block === '噪声').items.push({\n\t\t\t\ttitle: '单位名称',\n\t\t\t\tcontent: unitName\n\t\t\t}, {\n\t\t\t\ttitle: '排放口编号',\n\t\t\t\tcontent: code\n\t\t\t}, {\n\t\t\t\ttitle: '污染因子',\n\t\t\t\tcontent: '设备噪声'\n\t\t\t});\n\t\t});\n\n\t\t// 辅助函数：提取危险废物类别代码（如 HW49、HW12）\n\t\tfunction extractHazardCodes(str) {\n\t\t\tif (!str) return '';\n\t\t\t// 提取所有 HW 开头的代码\n\t\t\tconst matches = str.match(/HW\\d+/g);\n\t\t\tif (!matches) return '';\n\t\t\t// 去重并用顿号连接\n\t\t\treturn [...new Set(matches)].join('、');\n\t\t}\n\n\t\t// 辅助函数：提取危险特性中文描述（如 毒性、易燃性）\n\t\tfunction extractHazardProperties(str) {\n\t\t\tif (!str) return '';\n\t\t\t// 提取所有括号内的中文\n\t\t\tconst matches = str.match(/（([^）]+)）/g);\n\t\t\tif (!matches) return '';\n\t\t\t// 提取括号内容，去重并用顿号连接\n\t\t\tconst properties = matches.map(m => m.replace(/[（）]/g, ''));\n\t\t\treturn [...new Set(properties)].join('、');\n\t\t}\n\n\t\t// 危险废物\n\t\tconst hazardousWaste = emissionData['危险废物'] || {};\n\t\tconst WFItems = [{\n\t\t\t\ttitle: '主要成分',\n\t\t\t\tcontent: extractHazardCodes(hazardousWaste['危险废物类别']) || 'HW49'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '化学名称',\n\t\t\t\tcontent: hazardousWaste['废物名称'] || '实验室废弃物、实验室废水污泥、医疗废物、废活性炭'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '危险情况',\n\t\t\t\tcontent: extractHazardProperties(hazardousWaste['危险特性']) || '毒性、腐蚀性'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '安全措施',\n\t\t\t\tcontent: '接触时佩戴个人防护用品（全面罩/丁晴手套）'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '废物产生单位',\n\t\t\t\tcontent: unitName\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '地址',\n\t\t\t\tcontent: findBaseValue('建设地点')\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '电话',\n\t\t\t\tcontent: findBaseValue('联系方式')\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '联系人',\n\t\t\t\tcontent: findBaseValue('单位联系人')\n\t\t\t},\n\t\t];\n\t\tsignboard.sections.find(s => s.block === '危险废物').items = WFItems;\n\n\t\tuni.showToast({\n\t\t\ttitle: '已生成标识牌',\n\t\t\ticon: 'success'\n\t\t});\n\t}\n\n\t// 添加一组（3 项）排污标识牌（只允许噪声新增）\n\tfunction addSignItem(sectionIdx) {\n\t\tconst sec = signboard.sections[sectionIdx];\n\t\tconst block = sec.block; // 废水 / 废气 / 噪声\n\t\tconst unitName = findBaseValue('建设单位名称') || findBaseValue('单位名称') || '';\n\n\t\t// 只允许噪声新增\n\t\tif (block !== '噪声') {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '只有噪声可以手动新增',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t/* 计算下一个排放口编号：找到现有编号的最大值 + 1 */\n\t\tlet maxNum = 0;\n\t\t// 每3项为一组，提取所有排放口编号\n\t\tfor (let i = 0; i < sec.items.length; i += 3) {\n\t\t\tconst codeItem = sec.items[i + 1]; // 第2项是排放口编号\n\t\t\tif (codeItem && codeItem.title === '排放口编号') {\n\t\t\t\tconst code = codeItem.content || '';\n\t\t\t\t// 提取编号中的数字部分（如 ZS-01 -> 1, DW001 -> 1）\n\t\t\t\tconst match = code.match(/\\d+/);\n\t\t\t\tif (match) {\n\t\t\t\t\tconst num = parseInt(match[0], 10);\n\t\t\t\t\tif (num > maxNum) maxNum = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 生成新编号\n\t\tlet code = '';\n\t\tif (block === '废水') code = `DW${String(maxNum + 1).padStart(3,'0')}`;\n\t\telse if (block === '废气') code = `DA${String(maxNum + 1).padStart(3,'0')}`;\n\t\telse if (block === '噪声') code = `ZS-${String(maxNum + 1).padStart(2,'0')}`;\n\n\t\t/* 组装一组 */\n\t\tconst group = [{\n\t\t\t\ttitle: '单位名称',\n\t\t\t\tcontent: unitName\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '排放口编号',\n\t\t\t\tcontent: code\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '污染因子',\n\t\t\t\tcontent: '设备噪声'\n\t\t\t}\n\t\t];\n\n\t\t/* 追加到当前块 */\n\t\tsec.items.push(...group);\n\n\t\tuni.showToast({\n\t\t\ttitle: '已添加新排污口',\n\t\t\ticon: 'success'\n\t\t});\n\t}\n\n\t// 按块决定是否 3 条一组\n\tfunction groupItems(items, block) {\n\t\tif (block === '危险废物') return [items]; // 整包\n\t\tconst groups = [];\n\t\tfor (let i = 0; i < items.length; i += 3) {\n\t\t\tgroups.push(items.slice(i, i + 3));\n\t\t}\n\t\treturn groups;\n\t}\n\n\t// 删除指定组标识牌信息（3 条）\n\tfunction removeGroup(section, groupIndex) {\n\t\t// 取本组排放口编号用于提示\n\t\tconst start = groupIndex * 3;\n\t\tconst codeItem = section.items.slice(start, start + 3)\n\t\t\t.find(it => it.title === '排放口编号');\n\t\tconst code = codeItem?.content || '未知编号';\n\n\t\tuni.showModal({\n\t\t\ttitle: '永久删除',\n\t\t\tcontent: `确定删除排污口  ${code}  所有信息吗？`,\n\t\t\tconfirmText: '确定',\n\t\t\tcancelText: '取消',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tsection.items.splice(start, 3);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// 从baseTable中提取基本信息\n\tfunction findBaseValue(label) {\n\t\tconst r = baseTable.value.find(x => x.label === label);\n\t\treturn r ? (r.value || '') : ''\n\t\tconsole.log(\"baseinfo\", baseTable.value)\n\t}\n\n\t// 标识牌下载(数据json交给后端)\n\tfunction downBiaoShi() {\n\t\t// 检查是否选择了项目\n\t\tif (!selectedProjectId.value) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '请先选择一个项目',\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tuni.showLoading({\n\t\t\ttitle: '正在生成文档…'\n\t\t});\n\t\tdownloadSignboardWord(signboard, selectedProjectId.value)\n\t\t\t.then(buf => {\n\t\t\t\tconst fileName = '排污标识牌.docx';\n\t\t\t\t// #ifdef H5\n\t\t\t\tconst blob = new Blob([buf], {\n\t\t\t\t\ttype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n\t\t\t\t});\n\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\tconst a = document.createElement('a');\n\t\t\t\ta.href = url;\n\t\t\t\ta.download = '排污标识牌.docx';\n\t\t\t\tdocument.body.appendChild(a);\n\t\t\t\ta.click();\n\t\t\t\tdocument.body.removeChild(a);\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\t// #endif\n\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t// 微信小程序：先写临时文件再打开预览\n\t\t\t\tconst filePath = `${wx.env.USER_DATA_PATH}/${fileName}`;\n\t\t\t\twx.getFileSystemManager().writeFile({\n\t\t\t\t\tfilePath,\n\t\t\t\t\tdata: buf,\n\t\t\t\t\tencoding: 'binary',\n\t\t\t\t\tsuccess: () => wx.openDocument({\n\t\t\t\t\t\tfilePath,\n\t\t\t\t\t\tfileType: 'docx'\n\t\t\t\t\t}),\n\t\t\t\t\tfail: e => uni.showToast({\n\t\t\t\t\t\ttitle: '保存失败',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\t// #endif\n\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\t// App 端：保存到 downloads 目录\n\t\t\t\tplus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, fs => {\n\t\t\t\t\tconst fileEntry = fs.root.getFile(fileName, {\n\t\t\t\t\t\tcreate: true\n\t\t\t\t\t}, entry => {\n\t\t\t\t\t\tentry.createWriter(writer => {\n\t\t\t\t\t\t\twriter.write(buf);\n\t\t\t\t\t\t\twriter.onwrite = () => uni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已保存到下载目录'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// #endif\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tuni.showModal({\n\t\t\t\t\tcontent: err.message || '生成失败',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t})\n\t\t\t.finally(() => uni.hideLoading());\n\t}\n\n\n\t// 以下监测方案模块的方法-------------------------\n\tconst plan = ref(false)\n\tconst canDownload = ref(false) // 是否已生成监测方案\n\n\t// 生成监测方案\n\tasync function saveMonitorPlan() {\n\t\tif (!selectedProjectId.value) return uni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先选择项目',\n\t\t\tshowCancel: false\n\t\t})\n\t\tif (!extractionOk.value) return uni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先提取项目信息',\n\t\t\tshowCancel: false\n\t\t})\n\n\t\tclearProgressTimer()\n\t\ttaskProgressTitle.value = '监测方案生成中'\n\t\ttaskProgress.value = 0\n\t\ttaskState.value = 'pending'\n\t\ttaskProgressModal.value?.open()\n\n\t\ttry {\n\t\t\tawait generateMonitorPlan({\n\t\t\t\tprojectId: selectedProjectId.value,\n\t\t\t\tonProgress: (p, txt) => updateProgressSmooth(p, txt)\n\t\t\t})\n\t\t\t// 生成完只开下载权限\n\t\t\tcanDownload.value = true\n\t\t\ttaskProgressModal.value?.close()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '生成成功，可下载报告',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t\tplan.value = true\n\t\t} catch (e) {\n\t\t\tclearProgressTimer()\n\t\t\ttaskProgressModal.value?.close()\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '生成失败',\n\t\t\t\tcontent: e.message || '请稍后重试',\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t}\n\t}\n\n\t// 下载监测方案\n\tasync function downloadPlan() {\n\t\tuni.showLoading({\n\t\t\ttitle: '正在下载监测方案…',\n\t\t\tmask: true\n\t\t})\n\t\ttry {\n\t\t\tconst {\n\t\t\t\tab,\n\t\t\t\tfilename\n\t\t\t} = await downloadMonitorPlan(selectedProjectId.value)\n\t\t\tawait saveArrayBuffer(ab, filename) // 各端统一保存\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '已保存：' + filename,\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '下载失败',\n\t\t\t\tcontent: e.message,\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t}\n\t}\n\n\t// 各端保存逻辑\n\tasync function saveArrayBuffer(arrayBuffer, filename) {\n\t\t// #ifdef H5\n\t\tconst blob = new Blob([arrayBuffer], {\n\t\t\ttype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n\t\t})\n\t\tconst url = URL.createObjectURL(blob)\n\t\tconst a = document.createElement('a')\n\t\ta.href = url;\n\t\ta.download = filename\n\t\tdocument.body.appendChild(a);\n\t\ta.click();\n\t\tdocument.body.removeChild(a)\n\t\tURL.revokeObjectURL(url)\n\t\t// #endif\n\n\t\t// #ifdef MP-WEIXIN\n\t\tconst fs = wx.getFileSystemManager()\n\t\tconst filePath = `${wx.env.USER_DATA_PATH}/${filename}`\n\t\tfs.writeFile({\n\t\t\tfilePath,\n\t\t\tdata: arrayBuffer,\n\t\t\tencoding: 'binary',\n\t\t\tsuccess: () => wx.openDocument({\n\t\t\t\tfilePath,\n\t\t\t\tfileType: 'docx'\n\t\t\t}),\n\t\t\tfail: () => uni.showToast({\n\t\t\t\ttitle: '保存失败',\n\t\t\t\ticon: 'error'\n\t\t\t})\n\t\t})\n\t\t// #endif\n\n\t\t// #ifdef APP-PLUS\n\t\tplus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, fs => {\n\t\t\tfs.root.getFile(filename, {\n\t\t\t\tcreate: true\n\t\t\t}, entry => {\n\t\t\t\tentry.createWriter(writer => {\n\t\t\t\t\twriter.write(arrayBuffer)\n\t\t\t\t\twriter.onwrite = () => uni.showToast({\n\t\t\t\t\t\ttitle: '已保存到下载目录'\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t\t// #endif\n\t}\n\n\t// 以下提资单比对的方法-------------------------\n\t//bywilson 获取user_id和project_id从本地缓存uni.getStorageSync\n\t// 获取项目ID\n\tconst project_id = uni.getStorageSync('acceptance_project_id')\n\tconst userInfoStr = uni.getStorageSync('userInfo')\n\tconst userInfo = userInfoStr ? JSON.parse(userInfoStr) : null\n\t// 获取user_id \n\tconst user_id = userInfo?.id || userInfo?.user_id\n\tconsole.log(\"test userid\",user_id)\n\tconsole.log(\"test project_id\",project_id)\n\t// 上传提资单文件\n\tconst eco_baseUrl = \"http://127.0.0.1:8000\"\n\t\t\n\t// 提资单数据\n\tconst tizidanItems = ref([])\n\tconst tizidanRecordMap = ref({}) // 用于存储 record_id 到前端索引的映射\n\t\n\t\n\t// 重置提交状态\n\tfunction resetSubmissionStatus(item) {\n\t  // 重置主提交状态\n\t  item.submitted = false\n\t  \n\t  // 重置各个子提交状态\n\t  const subStatusKeys = ['submitted1_1', 'submitted1_2', 'submitted3_1', 'submitted3_2', 'submitted3_3']\n\t  subStatusKeys.forEach(key => {\n\t    if (item[key] !== undefined) {\n\t      item[key] = false\n\t    }\n\t  })\n\t}\n\t\n\t// 切换\"本项目是否需要\"复选框\n\tasync function toggleRequired(item) {\n\t  if (!item || !item.record_id) {\n\t    console.error('切换复选框失败：item或record_id不存在')\n\t    return\n\t  }\n\t\n\t  try {\n\t    // 切换状态\n\t    const newRequired = !item.required\n\t    item.required = newRequired\n\t\n\t    // 显示加载中\n\t    uni.showLoading({\n\t      title: '保存中...',\n\t      mask: true\n\t    })\n\t\n\t    // 调用后端接口更新数据库\n\t    const response = await new Promise((resolve, reject) => {\n\t      uni.request({\n\t        url: eco_baseUrl + '/api/v1/completion/tzdDetail/update_require',\n\t        method: 'POST',\n\t        header: {\n\t          'Content-Type': 'application/json'\n\t        },\n\t        data: {\n\t          record_id: item.record_id,\n\t          is_require: newRequired ? 1 : 0,\n\t          user_id: user_id,\n\t          project_id: project_id\n\t        },\n\t        success: (res) => {\n\t          console.log('更新is_require成功:', res)\n\t          resolve(res)\n\t        },\n\t        fail: (err) => {\n\t          console.error('更新is_require失败:', err)\n\t          reject(err)\n\t        }\n\t      })\n\t    })\n\t\n\t    if (response.statusCode === 200 && response.data.success) {\n\t      uni.hideLoading()\n\t      uni.showToast({\n\t        title: newRequired ? '已标记为需要' : '已标记为不需要',\n\t        icon: 'success',\n\t        duration: 1500\n\t      })\n\t\n\t      // 如果取消勾选，不需要清空文件，但要隐藏文件上传区域\n\t      // 文件数据保留，只是隐藏显示\n\t    } else {\n\t      throw new Error(response.data?.message || '更新失败')\n\t    }\n\t  } catch (error) {\n\t    console.error('切换复选框失败:', error)\n\t    uni.hideLoading()\n\t    \n\t    // 恢复原来的状态\n\t    item.required = !item.required\n\t    \n\t    uni.showToast({\n\t      title: `保存失败: ${error.message}`,\n\t      icon: 'none',\n\t      duration: 2000\n\t    })\n\t  }\n\t}\n\t// 辅助函数：获取特定子项的 required 状态\n\tfunction getRequiredStatus(items, mainIndex, subType) {\n\t  if (!items[mainIndex]) return false\n\t  \n\t  const item = items[mainIndex]\n\t  const statusKey = `submitted${subType}`\n\t  return item[statusKey] !== undefined ? item.required : false\n\t}\n\t\n\t// 辅助函数：获取特定子项的 files\n\tfunction getFiles(items, mainIndex, subType) {\n\t  if (!items[mainIndex]) return []\n\t  \n\t  const item = items[mainIndex]\n\t  const fileKey = `files${subType}`\n\t  return item[fileKey] || []\n\t}\n\t\n\t\n\t// 辅助函数：获取特定子项的 record_id\n\tfunction getRecordId(items, mainIndex, subType) {\n\t  if (!items[mainIndex]) return null\n\t  \n\t  const item = items[mainIndex]\n\t  // 对于子项，我们使用主项的 record_id\n\t  return item.record_id\n\t}\n\t\n\t// 切换\"本项目是否需要\"复选框（针对子项）\n\tasync function toggleRequiredForItem(items, mainIndex, subType) {\n\t  const item = items[mainIndex]\n\t  if (!item || !item.record_id) {\n\t    console.error('切换复选框失败：item或record_id不存在')\n\t    return\n\t  }\n\t\n\t  try {\n\t    // 切换状态\n\t    const newRequired = !getRequiredStatus(items, mainIndex, subType)\n\t    \n\t    // 更新本地状态\n\t    const statusKey = `submitted${subType}`\n\t    if (item[statusKey] !== undefined) {\n\t      // 如果有子项状态，保持原有的 submitted 状态\n\t      // 这里我们只更新 required 状态\n\t      console.log(`切换子项 ${mainIndex}-${subType} 的required状态为:`, newRequired)\n\t    }\n\t\n\t    // 显示加载中\n\t    uni.showLoading({\n\t      title: '保存中...',\n\t      mask: true\n\t    })\n\t\n\t    // 调用后端接口更新数据库\n\t    const response = await new Promise((resolve, reject) => {\n\t      uni.request({\n\t        url: eco_baseUrl + '/api/v1/completion/tzdDetail/update_require',\n\t        method: 'POST',\n\t        header: {\n\t          'Content-Type': 'application/json'\n\t        },\n\t        data: {\n\t          record_id: item.record_id,\n\t          is_require: newRequired ? 1 : 0,\n\t          user_id: user_id,\n\t          project_id: project_id\n\t        },\n\t        success: (res) => {\n\t          console.log('更新is_require成功:', res)\n\t          resolve(res)\n\t        },\n\t        fail: (err) => {\n\t          console.error('更新is_require失败:', err)\n\t          reject(err)\n\t        }\n\t      })\n\t    })\n\t\n\t    if (response.statusCode === 200 && response.data.success) {\n\t      uni.hideLoading()\n\t      uni.showToast({\n\t        title: newRequired ? '已标记为需要' : '已标记为不需要',\n\t        icon: 'success',\n\t        duration: 1500\n\t      })\n\t\n\t      // 更新本地状态\n\t      // 由于子项的 required 状态存储在同一个记录中，我们需要重新获取数据\n\t      await fetchTizidanData()\n\t    } else {\n\t      throw new Error(response.data?.message || '更新失败')\n\t    }\n\t  } catch (error) {\n\t    console.error('切换复选框失败:', error)\n\t    uni.hideLoading()\n\t    \n\t    uni.showToast({\n\t      title: `保存失败: ${error.message}`,\n\t      icon: 'none',\n\t      duration: 2000\n\t    })\n\t  }\n\t}\n\t\n\t\n\t// 辅助函数：根据level1_name获取所有项目\n\tfunction getItemsByLevel1(level1Name) {\n\t  return tizidanItems.value.filter(item => item.level1_name === level1Name)\n\t}\n\t\n\t// 辅助函数：检查是否有指定level1_name的项目\n\tfunction hasItemsByLevel1(level1Name) {\n\t  return tizidanItems.value.some(item => item.level1_name === level1Name)\n\t}\n\t\n\t// 辅助函数：获取分组编号\n\tfunction getSectionNumber(level1Name) {\n\t  const level1Names = [\n\t    '项目历史以来环评报告及批复',\n\t    '项目相关环保验收资料',\n\t    '（房地产项目提供）房地产相关证件',\n\t    '污染治理设施设计方案',\n\t    '厂区总平面图及各层平面图（CAD版本）',\n\t    '厂区排水设计图（CAD版本）',\n\t    '排污许可证',\n\t    '排水许可证',\n\t    '危废处置协议及相应处置资质',\n\t    '其他需要提供的资料'\n\t  ]\n\t  return level1Names.indexOf(level1Name) + 1\n\t}\n\t\n\t// 辅助函数：获取项目编号\n\tfunction getItemNumber(item) {\n\t  const level1Name = item.level1_name\n\t  const level2Name = item.level2_name || ''\n\t  \n\t  if (level1Name === '项目历史以来环评报告及批复') {\n\t    if (level2Name.includes('环评报告')) return '1-1'\n\t    if (level2Name.includes('批复')) return '1-2'\n\t  } else if (level1Name === '项目相关环保验收资料') {\n\t    return '2'\n\t  } else if (level1Name === '（房地产项目提供）房地产相关证件') {\n\t    if (level2Name.includes('施工证')) return '3-1'\n\t    if (level2Name.includes('规划许可证')) return '3-2'\n\t    if (level2Name.includes('规划验收合格证')) return '3-3'\n\t  } else {\n\t    return getSectionNumber(level1Name)\n\t  }\n\t  \n\t  return getSectionNumber(level1Name)\n\t}\n\t\n\t// 辅助函数：获取项目标题\n\tfunction getItemTitle(item) {\n\t  if (item.level2_name && item.level2_name.trim()) {\n\t    return item.level2_name\n\t  }\n\t  return item.level1_name\n\t}\n\t\n\t// 辅助函数：获取项目文件\n\tfunction getItemFiles(item) {\n\t  const level1Name = item.level1_name\n\t  const level2Name = item.level2_name || ''\n\t  \n\t  // 处理特殊子项的文件\n\t  if (level1Name === '项目历史以来环评报告及批复') {\n\t    if (level2Name.includes('环评报告')) {\n\t      return item.files1_1 || []\n\t    }\n\t    if (level2Name.includes('批复')) {\n\t      return item.files1_2 || []\n\t    }\n\t  } else if (level1Name === '（房地产项目提供）房地产相关证件') {\n\t    if (level2Name.includes('施工证')) {\n\t      return item.files3_1 || []\n\t    }\n\t    if (level2Name.includes('规划许可证')) {\n\t      return item.files3_2 || []\n\t    }\n\t    if (level2Name.includes('规划验收合格证')) {\n\t      return item.files3_3 || []\n\t    }\n\t  }\n\t  \n\t  // 默认返回主文件列表\n\t  return item.files || []\n\t}\n\t\n\t// 辅助函数：获取文件键名\n\tfunction getFileKey(item) {\n\t  const level1Name = item.level1_name\n\t  const level2Name = item.level2_name || ''\n\t  \n\t  if (level1Name === '项目历史以来环评报告及批复') {\n\t    if (level2Name.includes('环评报告')) return '1_1'\n\t    if (level2Name.includes('批复')) return '1_2'\n\t  } else if (level1Name === '（房地产项目提供）房地产相关证件') {\n\t    if (level2Name.includes('施工证')) return '3_1'\n\t    if (level2Name.includes('规划许可证')) return '3_2'\n\t    if (level2Name.includes('规划验收合格证')) return '3_3'\n\t  }\n\t  \n\t  return null\n\t}\n\t\n\t// 辅助函数：获取提交状态\n\tfunction getSubmittedStatus(item) {\n\t  const level1Name = item.level1_name\n\t  const level2Name = item.level2_name || ''\n\t  \n\t  if (level1Name === '项目历史以来环评报告及批复') {\n\t    if (level2Name.includes('环评报告')) {\n\t      return item.submitted1_1 || false\n\t    }\n\t    if (level2Name.includes('批复')) {\n\t      return item.submitted1_2 || false\n\t    }\n\t  } else if (level1Name === '（房地产项目提供）房地产相关证件') {\n\t    if (level2Name.includes('施工证')) {\n\t      return item.submitted3_1 || false\n\t    }\n\t    if (level2Name.includes('规划许可证')) {\n\t      return item.submitted3_2 || false\n\t    }\n\t    if (level2Name.includes('规划验收合格证')) {\n\t      return item.submitted3_3 || false\n\t    }\n\t  }\n\t  \n\t  return item.submitted || false\n\t}\n\t\n\t// 修改上传文件函数，支持子项类型\n\tasync function uploadTizidanFile(recordId, subType = null) {\n\t  if (!recordId) {\n\t    uni.showToast({\n\t      title: '记录ID不存在',\n\t      icon: 'none'\n\t    })\n\t    return\n\t  }\n\t\n\t  // 选择多个文件\n\t  uni.chooseFile({\n\t    count: 9,\n\t    extension: ['.doc', '.docx', '.pdf', '.xls', '.xlsx', '.png', '.jpg', '.jpeg', '.zip', '.rar', '.dwg', '.dxf'],\n\t    success: async (chooseRes) => {\n\t      const tempFiles = chooseRes.tempFiles\n\t      \n\t      // 逐个上传文件\n\t      for (let i = 0; i < tempFiles.length; i++) {\n\t        await uploadSingleFile(recordId, subType, tempFiles[i])\n\t      }\n\t      \n\t      // 重新加载数据\n\t      await fetchTizidanData()\n\t      \n\t      uni.showToast({\n\t        title: `已成功上传${tempFiles.length}个文件`,\n\t        icon: 'success',\n\t        duration: 3000\n\t      })\n\t    },\n\t    fail: (err) => {\n\t      console.error('选择文件失败:', err)\n\t      uni.showToast({\n\t        title: '选择文件失败',\n\t        icon: 'none'\n\t      })\n\t    }\n\t  })\n\t}\n\t\n\t// 修改删除文件函数，支持子项类型\n\tasync function deleteTizidanFile(recordId, subType, fileIndex) {\n\t  // 从当前数据中查找项目\n\t  const item = tizidanItems.value.find(item => item.record_id === recordId)\n\t  if (!item) {\n\t    uni.showToast({\n\t      title: '记录不存在',\n\t      icon: 'none'\n\t    })\n\t    return\n\t  }\n\t\n\t  // 获取文件列表\n\t  const files = getItemFiles(item)\n\t  if (fileIndex >= files.length) {\n\t    uni.showToast({\n\t      title: '文件不存在',\n\t      icon: 'none'\n\t    })\n\t    return\n\t  }\n\t\n\t  const fileName = files[fileIndex].name\n\t\n\t  uni.showModal({\n\t    title: '确认删除',\n\t    content: `确定要删除文件 \"${fileName}\" 吗？删除后不可恢复。`,\n\t    success: async (res) => {\n\t      if (res.confirm) {\n\t        // 调用后端删除接口\n\t        uni.showLoading({\n\t          title: '删除中...'\n\t        })\n\t\n\t        try {\n\t          const response = await new Promise((resolve, reject) => {\n\t            uni.request({\n\t              url: eco_baseUrl + '/api/v1/completion/tzdDetail/delete_file_by_id',\n\t              method: 'POST',\n\t              header: {\n\t                'Content-Type': 'application/json'\n\t              },\n\t              data: {\n\t                record_id: recordId,\n\t                file_name: fileName,\n\t                user_id: user_id,\n\t                project_id: project_id\n\t              },\n\t              success: (res) => resolve(res),\n\t              fail: (err) => reject(err)\n\t            })\n\t          })\n\t\n\t          if (response.statusCode === 200 && response.data.success) {\n\t            // 重新加载数据\n\t            await fetchTizidanData()\n\t            \n\t            uni.showToast({\n\t              title: '文件删除成功',\n\t              icon: 'success'\n\t            })\n\t          } else {\n\t            throw new Error(response.data?.message || '删除失败')\n\t          }\n\t        } catch (error) {\n\t          console.error('删除文件失败:', error)\n\t          uni.showToast({\n\t            title: `删除失败: ${error.message}`,\n\t            icon: 'none'\n\t          })\n\t        } finally {\n\t          uni.hideLoading()\n\t        }\n\t      }\n\t    }\n\t  })\n\t}\n\t\n\t// 获取提资单数据时，确保正确处理子项数据\n\tasync function fetchTizidanData() {\n\t  try {\n\t    uni.showLoading({\n\t      title: '加载中...'\n\t    })\n\t    \n\t    const response = await new Promise((resolve, reject) => {\n\t      uni.request({\n\t        url: eco_baseUrl + '/api/v1/completion/tzdDetail/datasheet',\n\t        method: 'GET',\n\t        data: {\n\t          user_id: user_id,\n\t          project_id: project_id,\n\t        },\n\t        success: (res) => {\n\t          console.log('请求成功:', res)\n\t          resolve(res)\n\t        },\n\t        fail: (err) => {\n\t          console.log('请求失败:', err)\n\t          reject(err)\n\t        }\n\t      })\n\t    })\n\t\n\t    if (response && response.statusCode === 200) {\n\t      const data = response.data\n\t      \n\t      if (!data.items || !Array.isArray(data.items)) {\n\t        throw new Error('数据格式不正确: items 不存在或不是数组')\n\t      }\n\t\n\t      // 直接使用后端返回的数据\n\t      tizidanItems.value = data.items\n\t      \n\t      console.log('提资单数据加载完成:', tizidanItems.value)\n\t      \n\t      uni.showToast({\n\t        title: '数据加载成功',\n\t        icon: 'success'\n\t      })\n\t    } else {\n\t      throw new Error(`请求失败，状态码：${response?.statusCode || '未知'}`)\n\t    }\n\t  } catch (error) {\n\t    console.error('获取提资单数据失败:', error)\n\t    uni.showToast({\n\t      title: '加载失败，请重新刷新！',\n\t      icon: 'none',\n\t      duration: 3000\n\t    })\n\t    tizidanItems.value = []\n\t  } finally {\n\t    uni.hideLoading()\n\t  }\n\t}\n\n\t\n\t// 上传单个文件\n\tasync function uploadSingleFile(recordId, subType, file) {\n\t  uni.showLoading({\n\t    title: '上传文件中...',\n\t    mask: true\n\t  })\n\t\n\t  try {\n\t    // 使用 record_id 进行上传\n\t    const response = await new Promise((resolve, reject) => {\n\t      uni.uploadFile({\n\t        url: eco_baseUrl + '/api/v1/completion/tzdDetail/upload_file_by_id',\n\t        filePath: file.path,\n\t        name: 'file',\n\t        formData: {\n\t          record_id: recordId,\n\t          user_id: user_id,\n\t          project_id: project_id,\n\t        },\n\t        success: (uploadRes) => {\n\t          if (uploadRes.statusCode === 200) {\n\t            try {\n\t              const data = JSON.parse(uploadRes.data)\n\t              resolve(data)\n\t            } catch (e) {\n\t              reject(new Error('解析响应失败'))\n\t            }\n\t          } else {\n\t            reject(new Error(`上传失败，状态码：${uploadRes.statusCode}`))\n\t          }\n\t        },\n\t        fail: (err) => {\n\t          reject(new Error('网络请求失败'))\n\t        }\n\t      })\n\t    })\n\t\n\t    if (!response.success) {\n\t      throw new Error(response.message || '文件上传失败')\n\t    }\n\t    \n\t  } catch (error) {\n\t    console.error(`文件上传失败:`, error)\n\t    uni.showToast({\n\t      title: `文件上传失败: ${error.message}`,\n\t      icon: 'none',\n\t      duration: 3000\n\t    })\n\t  } finally {\n\t    uni.hideLoading()\n\t  }\n\t}\n\t\n\t// 提交其他需要提供的资料\n\tasync function submitOtherMaterials(recordId) {\n\t  // 找到对应的项目\n\t  const itemIndex = tizidanItems.value.findIndex(item => item.record_id === recordId)\n\t  if (itemIndex === -1) {\n\t    uni.showToast({\n\t      title: '项目不存在',\n\t      icon: 'none'\n\t    })\n\t    return \n\t\t}\n\t  \n\t  const item = tizidanItems.value[itemIndex]\n\t  const memoContent = item.customText || ''\n\t  \n\t  if (!memoContent.trim()) {\n\t    uni.showToast({\n\t      title: '请输入其他需要提供的资料',\n\t      icon: 'none'\n\t    })\n\t    return\n\t  }\n\t\n\t  uni.showLoading({\n\t    title: '提交中...',\n\t    mask: true\n\t  })\n\t\n\t  try {\n\t    const response = await new Promise((resolve, reject) => {\n\t      uni.request({\n\t        url: eco_baseUrl + '/api/v1/completion/tzdDetail/update_memo',\n\t        method: 'POST',\n\t        header: {\n\t          'Content-Type': 'application/json'\n\t        },\n\t        data: {\n\t          record_id: recordId,\n\t          memo: memoContent,\n\t          user_id: user_id,\n\t          project_id: project_id\n\t        },\n\t        success: (res) => resolve(res),\n\t        fail: (err) => reject(err)\n\t      })\n\t    })\n\t\n\t    if (response.statusCode === 200) {\n\t      const data = response.data\n\t      if (data.success) {\n\t        // 更新前端的提交状态\n\t        item.submitted = true\n\t        \n\t        // 更新memo字段\n\t        item.memo = memoContent\n\t        \n\t        uni.showToast({\n\t          title: '提交成功',\n\t          icon: 'success',\n\t          duration: 2000\n\t        })\n\t        \n\t        // 重新加载数据以确保状态同步\n\t        setTimeout(() => {\n\t          fetchTizidanData()\n\t        }, 1000)\n\t      } else {\n\t        throw new Error(data.message || '提交失败')\n\t      }\n\t    } else if (response.statusCode === 422) {\n\t      // 处理422错误\n\t      const errorData = response.data || {}\n\t      let errorMsg = '提交失败: 数据格式错误'\n\t      if (errorData.detail) {\n\t        // FastAPI返回的422错误详情\n\t        if (Array.isArray(errorData.detail)) {\n\t          errorMsg = errorData.detail.map(d => d.msg).join('; ')\n\t        } else if (typeof errorData.detail === 'string') {\n\t          errorMsg = errorData.detail\n\t        }\n\t      }\n\t      throw new Error(errorMsg)\n\t    } else {\n\t      throw new Error(`服务器错误: ${response.statusCode}`)\n\t    }\n\t  } catch (error) {\n\t    console.error('提交失败:', error)\n\t    uni.showToast({\n\t      title: `提交失败: ${error.message}`,\n\t      icon: 'none',\n\t      duration: 3000\n\t    })\n\t  } finally {\n\t    uni.hideLoading()\n\t  }\n\t}\n\t\n\t// 提资单数据\n\tconst downloadUrls = ref({\n\t\tTiZiDan_Doc: '',\n\t\tcomparison_list: ''\n\t})\n\t\n\t\n\t// 检查所有文件是否为空\n\tfunction areAllFilesEmpty(item) {\n\t  // 检查主文件列表\n\t  if (item.files && item.files.length > 0) return false\n\t  \n\t  // 检查各个子文件列表\n\t  const subFileKeys = ['files1_1', 'files1_2', 'files3_1', 'files3_2', 'files3_3']\n\t  for (const key of subFileKeys) {\n\t    if (item[key] && item[key].length > 0) return false\n\t  }\n\t  \n\t  return true\n\t}\n\t\n\n\t\n\t// 下载验收报告提资单\n\tasync function downloadTizidanFile() {\n\t\tif (!selectedProjectId.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先选择项目',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\n\t\t// 显示下载中提示\n\t\tuni.showLoading({\n\t\t\ttitle: '正在生成文档…',\n\t\t\tmask: true\n\t\t})\n\n\n\t\ttry {\n\t\t\t// 调用后端下载接口\n\t\t\tconst url =\n\t\t\t\teco_baseUrl+`/api/v1/completion/tzdDetail/download_tzd_doc?user_id=${user_id}&project_id=${project_id}`\n\n\t\t\t// #ifdef H5\n\t\t\t// H5环境：直接打开链接\n\t\t\twindow.open(url, '_blank')\n\t\t\t// #endif\n\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\t// 微信小程序环境：使用uni.downloadFile\n\t\t\tconst downloadTask = uni.downloadFile({\n\t\t\t\turl: url,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\tconst filePath = res.tempFilePath\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: filePath,\n\t\t\t\t\t\t\tsuccess: (saveRes) => {\n\t\t\t\t\t\t\t\tconsole.log('文件保存成功:', saveRes.savedFilePath)\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '文件已保存',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (saveErr) => {\n\t\t\t\t\t\t\t\tconsole.error('保存文件失败:', saveErr)\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '保存失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`下载失败，状态码: ${res.statusCode}`)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tthrow new Error('下载请求失败: ' + (err.errMsg || '未知错误'))\n\t\t\t\t}\n\t\t\t})\n\t\t\t// #endif\n\n\t\t\t// #ifdef APP-PLUS\n\t\t\t// App环境：使用plus.downloader\n\t\t\tconst dtask = plus.downloader.createDownload(url, {}, (d, status) => {\n\t\t\t\tif (status == 200) {\n\t\t\t\t\tconsole.log('下载成功：' + d.filename)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '下载成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('下载失败：' + status)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '下载失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\tdtask.start()\n\t\t\t// #endif\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '开始下载',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\n\t\t} catch (error) {\n\t\t\tconsole.error('下载失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载失败: ' + (error.message || '未知错误'),\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 3000\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\n\t//by wilson 提资单代码在这里结束\n\t\n\t// 添加URL格式化函数，确保URL格式正确\n\tfunction formatDownloadUrl(url) {\n\t\tif (!url) return ''\n\n\t\t// 如果URL是相对路径，添加基础URL\n\t\tif (url.startsWith('/')) {\n\t\t\treturn `{eco_baseUrl}${url}`\n\t\t}\n\n\t\t// 如果URL已经是完整路径，直接返回\n\t\tif (url.startsWith('http://') || url.startsWith('https://')) {\n\t\t\treturn url\n\t\t}\n\t\treturn url\n\t}\n\t\n\n\t// 修改下载文件函数，适配不同平台\n\tasync function downloadFile(url, filename) {\n\t\tif (!url) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载链接不存在',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// 显示下载中提示\n\t\tuni.showLoading({\n\t\t\ttitle: '下载中...',\n\t\t\tmask: true\n\t\t})\n\n\t\ttry {\n\t\t\t// #ifdef H5\n\t\t\t// H5环境：使用a标签下载\n\t\t\tawait downloadFileH5(url, filename)\n\t\t\t// #endif\n\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\t// 微信小程序环境\n\t\t\tawait downloadFileWechat(url, filename)\n\t\t\t// #endif\n\n\t\t\t// #ifdef APP-PLUS\n\t\t\t// App环境\n\t\t\tawait downloadFileApp(url, filename)\n\t\t\t// #endif\n\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\n\t\t} catch (error) {\n\t\t\tuni.hideLoading()\n\t\t\tconsole.error('下载失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '下载失败: ' + (error.message || '未知错误'),\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 3000\n\t\t\t})\n\t\t}\n\t}\n\n\t// H5环境下载\n\tfunction downloadFileH5(url, filename) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tconst a = document.createElement('a')\n\t\t\t\ta.href = url\n\t\t\t\ta.download = filename || 'download'\n\t\t\t\ta.style.display = 'none'\n\n\t\t\t\tdocument.body.appendChild(a)\n\t\t\t\ta.click()\n\t\t\t\tdocument.body.removeChild(a)\n\n\t\t\t\t// H5下载无法准确判断是否成功，延迟一下再resolve\n\t\t\t\tsetTimeout(resolve, 1000)\n\t\t\t} catch (error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\t// 微信小程序环境下载\n\tfunction downloadFileWechat(url, filename) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuni.downloadFile({\n\t\t\t\turl: url,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t// 下载成功，保存到本地\n\t\t\t\t\t\tconst filePath = res.tempFilePath\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: filePath,\n\t\t\t\t\t\t\tsuccess: (saveRes) => {\n\t\t\t\t\t\t\t\tconsole.log('文件保存成功:', saveRes.savedFilePath)\n\t\t\t\t\t\t\t\tresolve(saveRes)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (saveErr) => {\n\t\t\t\t\t\t\t\treject(new Error('保存文件失败: ' + (saveErr.errMsg || '未知错误')))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error(`下载失败，状态码: ${res.statusCode}`))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\treject(new Error('下载请求失败: ' + (err.errMsg || '未知错误')))\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t// App环境下载\n\tfunction downloadFileApp(url, filename) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuni.downloadFile({\n\t\t\t\turl: url,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t// 在App中，下载的文件会保存到系统下载目录\n\t\t\t\t\t\t// 可以提示用户查看下载目录\n\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error(`下载失败，状态码: ${res.statusCode}`))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\treject(new Error('下载请求失败: ' + (err.errMsg || '未知错误')))\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\n\t// 监听步骤变化\n\twatch(currentStep, (newVal) => {\n\t\tif (newVal === 2) {\n\t\t\t// 进入提资单比对步骤时获取数据\n\t\t\tfetchTizidanData()\n\t\t}\n\t})\n\n\tconst baseTable = ref([])\n\tconst datasheet = ref([])\n\t\n\n\t// 选择删除模式\n\tconst selectMode = ref(false)\n\tconst selectedIds = ref([])\n\n\tfunction toggleSelectMode() {\n\t\tselectMode.value = !selectMode.value;\n\t\tif (!selectMode.value) selectedIds.value = []\n\t}\n\n\tfunction toggleSelected(id) {\n\t\tconst arr = selectedIds.value;\n\t\tconst i = arr.indexOf(id);\n\t\tif (i >= 0) arr.splice(i, 1);\n\t\telse arr.push(id)\n\t}\n\n\tfunction removeSelected() {\n\t\tif (!selectedIds.value.length) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '未选择',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tconst names = baseTable.value\n\t\t\t.filter(r => selectedIds.value.includes(r.id))\n\t\t\t.map(r => (r.label || '（未命名）').trim())\n\n\t\tconst preview =\n\t\t\tnames.length === 1 ?\n\t\t\t`确认要删除「${names[0]}」吗？` :\n\t\t\t(() => {\n\t\t\t\tconst max = 8\n\t\t\t\tconst head = names.slice(0, max).map(n => `• ${n}`).join('\\n')\n\t\t\t\tconst tail = names.length > max ? `\\n… 等 ${names.length} 项` : ''\n\t\t\t\treturn `确认要删除以下 ${names.length} 个信息吗？\\n${head}${tail}`\n\t\t\t})()\n\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: preview,\n\t\t\tconfirmText: '删除',\n\t\t\tcancelText: '取消',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tbaseTable.value = baseTable.value.filter(\n\t\t\t\t\t\tr => !selectedIds.value.includes(r.id)\n\t\t\t\t\t)\n\t\t\t\t\tselectedIds.value = []\n\t\t\t\t\tselectMode.value = false\n\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: `已删除 ${names.length} 项`,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\n\t// 以下现场踏勘比对的方法-------------------------\n\t// 现场踏勘模块已拆分到独立组件，使用 useFieldSurveyData composable 管理状态\n\tconst fieldSurveyData = useFieldSurveyData()\n\n\n\t// 以下是竣工验收报告的方法-------------------------\n\tconst reportType = ref('withoutData')\n\tconst testReportFiles = ref([])\n\tconst canDownloadReport = ref(false) // 是否已生成竣工验收报告\n\tconst previewTitle = ref(\"\")\n\n\t//选择有无监测方案报告\n\tconst reportGenerated = ref(false)\n\tconst reportTypes = [{\n\t\t\tvalue: 'withoutData',\n\t\t\ttext: '无检测数据报告'\n\t\t},\n\t\t{\n\t\t\tvalue: 'withData',\n\t\t\ttext: '有检测数据报告'\n\t\t}\n\t]\n\n\t// 切换报告类型\n\tfunction onReportTypeChange(e) {\n\t\treportType.value = e.detail.value\n\t}\n\n\t// 生成竣工验收报告\n\tasync function generateAcceptanceReport() {\n\t\tif (!selectedProjectId.value) return uni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先选择项目',\n\t\t\tshowCancel: false\n\t\t})\n\t\tif (!extractionOk.value) return uni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先提取项目信息',\n\t\t\tshowCancel: false\n\t\t})\n\t\tif (reportType.value === 'withData' && !testReportFiles.value.length) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '有监测数据报告，必须要先上传监测报告',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tclearProgressTimer()\n\t\ttaskProgressTitle.value = '竣工验收报告生成中'\n\t\ttaskProgress.value = 0\n\t\ttaskState.value = 'pending'\n\t\ttaskProgressModal.value?.open()\n\n\t\ttry {\n\t\t\tawait generateReport({\n\t\t\t\tprojectId: selectedProjectId.value,\n\t\t\t\tonProgress: (p, txt) => updateProgressSmooth(p, txt)\n\t\t\t})\n\t\t\t// 生成完只开下载权限\n\t\t\tcanDownloadReport.value = true\n\t\t\ttaskProgressModal.value?.close()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '生成成功，可下载报告',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t\tpreviewTitle.value = '无监测数据的竣工验收报告已生成，请点击下载！'\n\t\t\treportGenerated.value = true\n\t\t} catch (e) {\n\t\t\tclearProgressTimer()\n\t\t\ttaskProgressModal.value?.close()\n\n\t\t\t// 先把后端返回的完整错误打印出来\n\t\t\tconsole.error('生成报告失败', e, e.response?.data)\n\n\t\t\t// 只取人类可读部分\n\t\t\tlet msg = e.message || '请稍后重试'\n\t\t\tif (Array.isArray(e.response?.data?.detail)) {\n\t\t\t\t// FastAPI 422 默认返回 {detail:[{loc:[],msg:'xxx',type:''},...]}\n\t\t\t\tmsg = e.response.data.detail.map(d => d.msg).join('；')\n\t\t\t} else if (typeof e.response?.data === 'string') {\n\t\t\t\tmsg = e.response.data\n\t\t\t}\n\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '生成失败',\n\t\t\t\tcontent: msg,\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t}\n\t}\n\n\t// 下载监测方案\n\tasync function downAcceptanceReport() {\n\t\tuni.showLoading({\n\t\t\ttitle: '正在竣工验收报告…',\n\t\t\tmask: true\n\t\t})\n\t\ttry {\n\t\t\tconst {\n\t\t\t\tab,\n\t\t\t\tfilename\n\t\t\t} = await downloadReport(selectedProjectId.value)\n\t\t\tawait saveArrayBuffer(ab, filename) // 各端统一保存\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '已保存：' + filename,\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '下载失败',\n\t\t\t\tcontent: e.message,\n\t\t\t\tshowCancel: false\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t/* ========== 设计令牌（统一风格） ========== */\n\t$brand: #166534; // 主色（深绿）\n\t$brand-600: #17834a;\n\t$brand-50: #ecfdf5;\n\t$ink: #0f172a; // 标题\n\t$muted: #5b6b7b; // 次文本\n\t$line: #e6eaf0; // 细线\n\t$bg: #f6f8fb; // 背景\n\t$white: #ffffff;\n\t$danger: #d92d20;\n\t$warning: #fb923c;\n\n\t$radius: 14rpx;\n\t$radius-lg: 18rpx;\n\t$shadow-sm: 0 2rpx 10rpx rgba(16, 24, 40, .06);\n\t$shadow-md: 0 6rpx 24rpx rgba(16, 24, 40, .08);\n\n\t/* ========== 页面框架 ========== */\n\t.acceptance-page {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100vh;\n\t\tbackground: $bg;\n\t}\n\n\n\t/* 统一按钮体系 */\n\t.btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tpadding: 0 22rpx;\n\t\theight: 64rpx;\n\t\tfont-size: 24rpx;\n\t\tfont-weight: 500;\n\t\tbackground: $white;\n\t\tcolor: #374151;\n\t\ttransition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;\n\t}\n\n\t:deep(.uni-button.btn.btn--secondary::after) {\n\t\tborder-radius: $radius;\n\t}\n\n\t.btn:active {\n\t\ttransform: translateY(1rpx);\n\t}\n\n\t.btn[disabled] {\n\t\topacity: .6;\n\t\tpointer-events: none;\n\t}\n\n\t.btn--primary {\n\t\tbackground: $brand;\n\t\tcolor: $white;\n\t\tborder-color: $brand;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 101, 52, .22);\n\t}\n\n\t.btn--secondary {\n\t\tbackground: #f8fafc;\n\t\tcolor: #155e3b;\n\t\tborder-color: #dbe3ea;\n\t}\n\n\t.btn--ghost {\n\t\tbackground: $white;\n\t\tcolor: $muted;\n\t\tborder-color: #e9edf2;\n\t}\n\n\t.btn--danger {\n\t\tbackground: $danger;\n\t\tcolor: $white;\n\t\tborder-color: $danger;\n\t}\n\n\t.btn--danger-ghost {\n\t\tbackground: #fef3f2;\n\t\tcolor: $danger;\n\t\tborder-color: #fde2e1;\n\t}\n\n\t/* 步骤导航 */\n\t.acceptance-steps {\n\t\tbackground: $white;\n\t\tborder-bottom: 1rpx solid #f2f4f7;\n\t\tpadding: 18rpx 24rpx;\n\t}\n\n\t.steps-container {\n\t\tmax-width: 1200rpx;\n\t\tmargin: 0 auto;\n\t}\n\n\t.mobile-step-select {\n\t\twidth: 100%;\n\t}\n\n\t.desktop-steps {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t}\n\n\t.step-item {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tpadding: 14rpx 18rpx;\n\t\tborder-radius: $radius;\n\t\tborder: 1rpx solid transparent;\n\t\ttransition: background .2s ease, border-color .2s ease;\n\t}\n\n\t.step-item--active {\n\t\tbackground: #f3faf6;\n\t\tborder-color: #def7ec;\n\t}\n\n\t.step-item--completed .step-indicator {\n\t\tbackground: #10b981;\n\t\tcolor: $white;\n\t}\n\n\t.step-indicator {\n\t\twidth: 44rpx;\n\t\theight: 44rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: #eef2f6;\n\t\tcolor: $muted;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 20rpx;\n\t\tfont-weight: 700;\n\t\tflex-shrink: 0;\n\t}\n\n\t.step-label {\n\t\tfont-size: 26rpx;\n\t\tcolor: #344054;\n\t\tfont-weight: 600;\n\t}\n\n\t.step-connector {\n\t\twidth: 20rpx;\n\t\theight: 2rpx;\n\t\tbackground: #e3e8ef;\n\t\tmargin-left: 4rpx;\n\t\tborder-radius: 1rpx;\n\t}\n\n\t/* 主体 */\n\t.acceptance-content {\n\t\tflex: 1;\n\t\tpadding: 20rpx 24rpx;\n\t\tmin-height: 0;\n\t}\n\n\t.content-scroll {\n\t\theight: 100%;\n\t}\n\n\t.content-section {\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.section-card {\n\t\tbackground: $white;\n\t\tborder-radius: $radius-lg;\n\t\tbox-shadow: $shadow-md;\n\t\tborder: 1rpx solid #eef2f6;\n\t\toverflow: hidden;\n\t}\n\n\t.section-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10rpx;\n\t\tpadding: 24rpx 24rpx 0;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.section-title {\n\t\tfont-size: 32rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 700;\n\t\tletter-spacing: .2rpx;\n\t}\n\n\t.section-body {\n\t\tpadding: 0 24rpx 24rpx;\n\t}\n\n\t/* 自定义项目选择器触发按钮 */\n\t.project-selector {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 24rpx;\n\t\tbackground: $white;\n\t\tborder: 2rpx solid #e5e7eb;\n\t\tborder-radius: $radius;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t\tmin-height: 100rpx;\n\t}\n\n\t.project-selector:active {\n\t\tbackground: #f9fafb;\n\t\tborder-color: $brand;\n\t}\n\n\t.selector-content {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.selected-project {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t}\n\n\t.project-info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 6rpx;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.project-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 600;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.project-desc {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.placeholder {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t}\n\n\t.placeholder-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #9ca3af;\n\t}\n\n\t/* 项目选择器弹窗样式 */\n\t.project-picker-modal {\n\t\twidth: 90vw;\n\t\tmax-width: 700rpx;\n\t\tmax-height: 80vh;\n\t\tbackground: $white;\n\t\tborder-radius: 24rpx;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.15);\n\t}\n\n\t.picker-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 32rpx 32rpx 24rpx;\n\t\tborder-bottom: 2rpx solid #f3f4f6;\n\t\tbackground: linear-gradient(135deg, #f8fafb 0%, #ffffff 100%);\n\t}\n\n\t.picker-title {\n\t\tfont-size: 32rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 700;\n\t}\n\n\t.picker-close {\n\t\twidth: 48rpx;\n\t\theight: 48rpx;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #f3f4f6;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.picker-close:active {\n\t\tbackground: #e5e7eb;\n\t\ttransform: scale(0.95);\n\t}\n\n\t.picker-search {\n\t\tpadding: 24rpx 32rpx;\n\t\tbackground: $white;\n\t\tborder-bottom: 2rpx solid #f3f4f6;\n\t}\n\n\t.picker-stats {\n\t\tpadding: 16rpx 32rpx;\n\t\tbackground: #f9fafb;\n\t\tborder-bottom: 1rpx solid #e5e7eb;\n\t}\n\n\t.stats-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t}\n\n\t.stats-highlight {\n\t\tcolor: $brand;\n\t\tfont-weight: 600;\n\t}\n\n\t.picker-list {\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t\tmax-height: 60vh;\n\t\tpadding: 16rpx 0;\n\t}\n\n\t.picker-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tpadding: 24rpx 32rpx;\n\t\tmargin: 0 16rpx 12rpx;\n\t\tbackground: $white;\n\t\tborder: 2rpx solid #f3f4f6;\n\t\tborder-radius: 16rpx;\n\t\ttransition: all 0.2s ease;\n\t\tcursor: pointer;\n\t}\n\n\t.picker-item:active {\n\t\ttransform: translateY(-2rpx);\n\t\tbox-shadow: 0 8rpx 20rpx rgba(22, 101, 52, 0.08);\n\t}\n\n\t.picker-item--active {\n\t\tbackground: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);\n\t\tborder-color: $brand;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(22, 101, 52, 0.12);\n\t}\n\n\t.picker-item-icon {\n\t\tflex-shrink: 0;\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #f3f4f6;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.picker-item--active .picker-item-icon {\n\t\tbackground: linear-gradient(135deg, $brand 0%, $brand-600 100%);\n\t}\n\n\t.picker-item--active .picker-item-icon uni-icons {\n\t\tcolor: $white !important;\n\t}\n\n\t.picker-item-content {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t}\n\n\t.picker-item-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 600;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.picker-item--active .picker-item-name {\n\t\tcolor: $brand;\n\t}\n\n\t.picker-item-desc {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.picker-item-meta {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tmargin-top: 4rpx;\n\t}\n\n\t.meta-text {\n\t\tfont-size: 22rpx;\n\t\tcolor: #9ca3af;\n\t}\n\n\t.picker-item-action {\n\t\tflex-shrink: 0;\n\t}\n\n\t.selected-badge {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: linear-gradient(135deg, $brand 0%, $brand-600 100%);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 101, 52, 0.3);\n\t}\n\n\t.picker-empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tpadding: 80rpx 32rpx;\n\t\ttext-align: center;\n\t}\n\n\t.picker-empty-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #64748b;\n\t\tfont-weight: 600;\n\t}\n\n\t.picker-empty-tip {\n\t\tfont-size: 24rpx;\n\t\tcolor: #9ca3af;\n\t}\n\n\n\t/* 表单 */\n\t.form-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t\tmargin-bottom: 24rpx;\n\t}\n\n\t.form-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 700;\n\t}\n\n\t.form-tip {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t}\n\n\t.action-row {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.section-actions {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t\tmargin: 12rpx 0 18rpx;\n\t\tflex-wrap: wrap;\n\t}\n\n\t/* 子块标题 */\n\t.subsection {\n\t\tmargin-top: 24rpx;\n\t\tpadding-top: 24rpx;\n\t\tborder-top: 1rpx solid #f1f5f9;\n\t}\n\n\t.subsection-head {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10rpx;\n\t\tmargin-bottom: 14rpx;\n\t}\n\n\t.subsection-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 700;\n\t}\n\n\t/* 表格（桌面网格、移动卡片化） */\n\t.data-table {\n\t\tborder: 1rpx solid #e6ebf1;\n\t\tborder-radius: $radius;\n\t\toverflow: hidden;\n\t}\n\n\t.table-header {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\n\t\tbackground: #f8fafc;\n\t\tborder-bottom: 1rpx solid #e6ebf1;\n\t}\n\n\t.table-header--dense {\n\t\tgrid-template-columns: 160rpx 1fr 140rpx 120rpx 100rpx;\n\t}\n\n\t.table-th {\n\t\tpadding: 18rpx 14rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #475569;\n\t\tfont-weight: 700;\n\t\tborder-right: 1rpx solid #e6ebf1;\n\t}\n\n\t.table-th:last-child {\n\t\tborder-right: none;\n\t}\n\n\t.table-body {\n\t\tbackground: $white;\n\t}\n\n\t.table-row {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\n\t\tborder-bottom: 1rpx solid #f2f4f7;\n\t}\n\n\t.table-row:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.table-row--simple {\n\t\tgrid-template-columns: 1fr 100rpx;\n\t}\n\n\t.table-td {\n\t\tpadding: 16rpx 14rpx;\n\t\tborder-right: 1rpx solid #f7f8fa;\n\t\tmin-height: 76rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.table-td:last-child {\n\t\tborder-right: none;\n\t}\n\n\t.table-td--section {\n\t\tfont-weight: 700;\n\t\tcolor: #0f172a;\n\t}\n\n\t/* 图标按钮（表格内） */\n\t.icon-btn {\n\t\twidth: 44rpx;\n\t\theight: 44rpx;\n\t\tborder-radius: 10rpx;\n\t\tborder: 1rpx solid #edf1f5;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground: $white;\n\t}\n\n\t.icon-btn:active {\n\t\tbackground: #f3f6fa;\n\t}\n\n\t/* 项目文件列表样式 */\n\t.file-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t\tmargin-top: 24rpx;\n\t}\n\n\t.file-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 24rpx;\n\t\tbackground: #f8fafb;\n\t\tborder-radius: 16rpx;\n\t\tborder: 2rpx solid #e5e9ed;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.file-item:hover {\n\t\tbackground: #f3f6f9;\n\t\tborder-color: #d1dce5;\n\t}\n\n\t.file-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.file-details {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.file-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #1f2937;\n\t\tfont-weight: 500;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.file-meta {\n\t\tfont-size: 24rpx;\n\t\tcolor: #6b7280;\n\t}\n\n\t.file-status {\n\t\tflex-shrink: 0;\n\t\tmargin-left: 20rpx;\n\t}\n\n\t.status-badge {\n\t\tdisplay: inline-block;\n\t\tpadding: 8rpx 20rpx;\n\t\tborder-radius: 24rpx;\n\t\tfont-size: 24rpx;\n\t\tfont-weight: 500;\n\t\twhite-space: nowrap;\n\t}\n\n\t.status-uploaded {\n\t\tbackground: #e0f2fe;\n\t\tcolor: #0369a1;\n\t}\n\n\t.status-processing {\n\t\tbackground: #fef3c7;\n\t\tcolor: #d97706;\n\t}\n\n\t.status-success {\n\t\tbackground: #d1fae5;\n\t\tcolor: #065f46;\n\t}\n\n\t.status-error {\n\t\tbackground: #fee2e2;\n\t\tcolor: #dc2626;\n\t}\n\n\t/* 设施卡片列表样式 */\n\t.facility-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t\tmargin-top: 24rpx;\n\t}\n\n\t.facility-card {\n\t\tbackground: #ffffff;\n\t\tborder: 2rpx solid #e5e7eb;\n\t\tborder-radius: 16rpx;\n\t\toverflow: hidden;\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.facility-card:hover {\n\t\tborder-color: #16a34a;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 163, 74, 0.1);\n\t}\n\n\t.facility-card__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 20rpx 24rpx;\n\t\tbackground: #f0fdf4 0%;\n\t\tborder-bottom: 2rpx solid #bbf7d0;\n\t}\n\n\t.facility-card__number {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 12rpx;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(22, 101, 52, 0.1);\n\t}\n\n\t.facility-card__number-text {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #166534;\n\t}\n\n\t.facility-card__delete {\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tborder-radius: 12rpx;\n\t\tbackground: #ffffff;\n\t\tborder: none;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.facility-card__delete:active {\n\t\tbackground: #fee2e2;\n\t\ttransform: scale(0.95);\n\t}\n\n\t.facility-card__body {\n\t\tpadding: 32rpx 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 28rpx;\n\t}\n\n\t.facility-field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.facility-field--half {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.facility-field-row {\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t}\n\n\t.facility-field__label {\n\t\tfont-size: 26rpx;\n\t\tcolor: #475569;\n\t\tfont-weight: 600;\n\t\tline-height: 1.4;\n\t}\n\n\t.facility-field__label::before {\n\t\tcontent: '•';\n\t\tcolor: #16a34a;\n\t\tmargin-right: 8rpx;\n\t\tfont-weight: 700;\n\t}\n\n\t.facility-field__input {\n\t\twidth: 100%;\n\t}\n\n\t.facility-field__picker {\n\t\twidth: 100%;\n\t}\n\n\t/* 响应式优化 */\n\t@media (max-width: 768px) {\n\t\t.facility-field-row {\n\t\t\tflex-direction: column;\n\t\t\tgap: 28rpx;\n\t\t}\n\n\t\t.facility-field--half {\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t.facility-card__body {\n\t\t\tpadding: 24rpx 20rpx;\n\t\t}\n\t}\n\n\t/* 桌面端优化 */\n\t@media (min-width: 768px) {\n\t\t.facility-list {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(auto-fill, minmax(600rpx, 1fr));\n\t\t\tgap: 32rpx;\n\t\t}\n\n\t\t.facility-card:hover {\n\t\t\ttransform: translateY(-4rpx);\n\t\t}\n\t}\n\n\t/* 基本信息表：响应式行 */\n\n\t.form-grid--base {\n\t\tdisplay: grid;\n\t\t// grid-template-columns: 1fr 1fr;\n\t\tgap: 12rpx 16rpx;\n\t}\n\n\t.pollutants_baseinfo_row {\n\t\tpadding: 14rpx;\n\t\tborder-bottom: 1rpx solid #e7ecf2;\n\t}\n\n\t.baseinfo__row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10rpx;\n\t\tbackground: $white;\n\t\tborder: 1rpx solid #e7ecf2;\n\t\tborder-radius: $radius;\n\t\tpadding: 14rpx;\n\t}\n\n\t.form-item__row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10rpx;\n\t\tbackground: $white;\n\t\tborder: 1rpx solid #e7ecf2;\n\t\tborder-radius: $radius;\n\t\tpadding: 14rpx;\n\t}\n\n\t.form-item__label {\n\t\tmin-width: 180rpx;\n\t\tcolor: #334155;\n\t\tfont-weight: 700;\n\t}\n\n\t/* 污染物表格样式 */\n\t.pollutants-container {\n\t\twidth: 100%;\n\t\tmargin-bottom: 24rpx;\n\t\tborder: 1rpx solid #e7ecf2;\n\t\tborder-radius: $radius;\n\t\toverflow: hidden;\n\t\tgrid-column: 1 / -1;\n\t\t/* 让表格占据整行 */\n\t}\n\n\t.pollutants-table {\n\t\twidth: 100%;\n\t\tbackground: #fff;\n\t\ttext-align: center;\n\t}\n\n\t/* 表格头部 */\n\t.pollutants-header {\n\t\tdisplay: flex;\n\t\tbackground: #f8fafc;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tfont-weight: 600;\n\t\tfont-size: 26rpx;\n\t\tcolor: #374151;\n\t}\n\n\t/* 表格行 */\n\t.pollutants-row {\n\t\tdisplay: flex;\n\t\tborder-bottom: 1px solid #f3f4f6;\n\t}\n\n\t.pollutants-row:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t/* 表格列 */\n\t.pollutants-col {\n\t\tpadding: 20rpx 12rpx;\n\t\tword-break: break-word;\n\t\tline-height: 1.5;\n\t\tfont-size: 26rpx;\n\t\tborder-right: 1px solid #f3f4f6;\n\t}\n\n\t.pollutants-col:last-child {\n\t\tborder-right: none;\n\t}\n\n\t/* 列宽度分配 */\n\t.pollutants-col--type {\n\t\tflex: 0.8;\n\t\tmin-width: 120rpx;\n\t\tbackground: #f0f9ff;\n\t\tcolor: #0369a1;\n\t\tfont-weight: 500;\n\t}\n\n\t.pollutants-col--link {\n\t\tflex: 1.2;\n\t\tmin-width: 150rpx;\n\t}\n\n\t.pollutants-col--name {\n\t\tflex: 1;\n\t\tmin-width: 140rpx;\n\t}\n\n\t.pollutants-col--measure {\n\t\tflex: 1.5;\n\t\tmin-width: 180rpx;\n\t}\n\n\t.pollutants-col--direction {\n\t\tflex: 1;\n\t\tmin-width: 140rpx;\n\t}\n\n\t.pollutants-col--standard {\n\t\tflex: 1.2;\n\t\tmin-width: 160rpx;\n\t}\n\n\t/* 表格选择框 */\n\t.pollutants-select {\n\t\tpadding: 20rpx;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground: #fafafa;\n\t}\n\n\n\t/* 小标签的样式 */\n\t.extract-tag {\n\t\tdisplay: inline-block;\n\t\tmargin-left: 8px;\n\t\tpadding: 2px 6px;\n\t\tbackground-color: #52c41a;\n\t\tcolor: #fff;\n\t\tfont-size: 10px;\n\t\tborder-radius: 3px;\n\t\tvertical-align: middle;\n\t}\n\n\t/* 标识牌：左侧标题输入，固定宽度以避免与值重叠 */\n\t.pw-ico {\n\t\twidth: 140rpx;\n\t\theight: 64rpx;\n\t\tborder-radius: 10rpx;\n\t\tborder: 1rpx solid #edf1f5;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground: $white;\n\t\tmargin-left: -100rpx;\n\t\tmargin-top: 24rpx;\n\t}\n\n\t.pw-ico text {\n\t\tfont-size: 22rpx;\n\t}\n\n\n\t.form-item__title {\n\t\twidth: 180rpx;\n\t}\n\n\t.form-item__input {\n\t\tflex: 1;\n\t}\n\n\t.form-item__select {\n\t\twidth: 56rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\n\t/* 空状态 */\n\t.empty-state {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tpadding: 50rpx 24rpx;\n\t\tcolor: #cbd5e1;\n\t\ttext-align: center;\n\t}\n\n\t.empty-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #64748b;\n\t\tfont-weight: 600;\n\t}\n\n\t.empty-tip {\n\t\tfont-size: 24rpx;\n\t\tcolor: #9aa8b6;\n\t}\n\n\t/* 底部导航 */\n\t.acceptance-navigation {\n\t\tbackground: $white;\n\t\tborder-top: 1rpx solid $line;\n\t\tpadding: 18rpx 24rpx;\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(16, 24, 40, .06);\n\t}\n\n\t.nav-buttons {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmax-width: 1200rpx;\n\t\tmargin: 0 auto;\n\t}\n\n\t/* 弹窗 */\n\t.modal {\n\t\tbackground: $white;\n\t\tborder-radius: 20rpx;\n\t\twidth: 86vw;\n\t\tmax-width: 620rpx;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 18rpx 52rpx rgba(15, 23, 42, .18);\n\t}\n\n\t.modal-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 24rpx;\n\t\tborder-bottom: 1rpx solid #eff3f7;\n\t}\n\n\t.modal-title {\n\t\tfont-size: 30rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 700;\n\t}\n\n\t.modal-close {\n\t\twidth: 44rpx;\n\t\theight: 44rpx;\n\t\tborder-radius: 10rpx;\n\t\tbackground: transparent;\n\t\tborder: 1rpx solid #eef2f6;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.modal-body {\n\t\tpadding: 24rpx;\n\t}\n\n\t.modal-description {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t\tmargin-bottom: 14rpx;\n\t\tdisplay: block;\n\t}\n\n\t.draft-textarea {\n\t\twidth: 100%;\n\t\tmin-height: 360rpx;\n\t\tpadding: 16rpx;\n\t\tborder: 1rpx solid #e6ebf1;\n\t\tborder-radius: $radius;\n\t\tfont-size: 26rpx;\n\t\tline-height: 1.5;\n\t\tbackground: #fafafa;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.modal-actions {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t\tpadding: 0 24rpx 24rpx;\n\t\tjustify-content: flex-end;\n\t}\n\n\t.fieldwork-textarea {\n\t\twidth: 100%;\n\t\tmin-height: 200rpx;\n\t\tpadding: 16rpx;\n\t\tborder: 1rpx solid #e6ebf1;\n\t\tborder-radius: $radius;\n\t\tfont-size: 26rpx;\n\t\tline-height: 1.5;\n\t\tbackground: $white;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.update-confirm {\n\t\tpadding: 20rpx;\n\t\tbackground: #f8fafc;\n\t\tborder-radius: $radius;\n\t\tborder: 1rpx solid #e9edf2;\n\t}\n\n\t.update-label {\n\t\tfont-size: 26rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 16rpx;\n\t\tdisplay: block;\n\t}\n\n\t.update-actions {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t}\n\n\t.action-buttons {\n\t\tdisplay: flex;\n\t\tgap: 8rpx;\n\t\tjustify-content: center;\n\t}\n\n\t.report-generation {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t}\n\n\t.generation-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\n\t.option-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.option-label {\n\t\tfont-size: 26rpx;\n\t\tcolor: $ink;\n\t\tfont-weight: 600;\n\t}\n\n\t.radio-group {\n\t\tdisplay: flex;\n\t\tgap: 24rpx;\n\t}\n\n\t.radio-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t}\n\n\t.radio-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: $muted;\n\t}\n\n\t.generation-actions {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.report-preview {\n\t\tpadding: 24rpx;\n\t\tbackground: #f0fdf4;\n\t\tborder-radius: $radius;\n\t\tborder: 1rpx solid #dcfce7;\n\t}\n\n\t.paln-preview {\n\t\tpadding: 24rpx;\n\t\tbackground: #f0fdf4;\n\t\tborder-radius: $radius;\n\t\tborder: 1rpx solid #dcfce7;\n\t\tmargin-top: 20rpx;\n\t}\n\n\t.preview-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.preview-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: $brand;\n\t\tfont-weight: 700;\n\t}\n\n\t.preview-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.preview-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #374151;\n\t}\n\n\t.preview-sections {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t\tpadding-left: 20rpx;\n\t}\n\n\t.section-item {\n\t\tfont-size: 24rpx;\n\t\tcolor: #475569;\n\t}\n\t/* ========== 搜索框样式 ========== */\n\t.search-box {\n\t\tmargin-bottom: 24rpx;\n\t\tpadding: 20rpx;\n\t\tbackground: #f8faf9;\n\t\tborder-radius: 12rpx;\n\t}\n\n\t.search-input {\n\t\twidth: 100%;\n\t}\n\n\t.search-result-text {\n\t\tdisplay: block;\n\t\tmargin-top: 12rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #166534;\n\t\ttext-align: center;\n\t}\n\n\t/* ========== 设施/设备卡片样式 ========== */\n\t.facility-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t\tmargin-top: 24rpx;\n\t}\n\n\t.facility-card {\n\t\tbackground: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\toverflow: hidden;\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.facility-card:hover {\n\t\tbox-shadow: 0 4rpx 20rpx rgba(22, 101, 52, 0.12);\n\t\ttransform: translateY(-2rpx);\n\t}\n\n\t.facility-card__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 20rpx 24rpx;\n\t\tbackground: #15803d;\n\t}\n\n\t.facility-card__number {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tbackground: rgba(255, 255, 255, 0.2);\n\t\tborder-radius: 50%;\n\t\tbackdrop-filter: blur(10rpx);\n\t}\n\n\t.facility-card__number-text {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #ffffff;\n\t}\n\n\t.facility-card__delete {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 56rpx;\n\t\theight: 56rpx;\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.facility-card__delete:hover {\n\t\tbackground: rgba(239, 68, 68, 0.2);\n\t\ttransform: scale(1.1);\n\t}\n\n\t.facility-card__body {\n\t\tpadding: 32rpx 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t}\n\n\t.facility-field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12rpx;\n\t}\n\n\t.facility-field__label {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t\tmargin-bottom: 4rpx;\n\t}\n\n\t.facility-field__input {\n\t\twidth: 100%;\n\t}\n\n\t.facility-field__picker {\n\t\twidth: 100%;\n\t}\n\n\t.facility-field-row {\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\twidth: 100%;\n\t}\n\n\t.facility-field--half {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t/* 移动端适配 */\n\t@media (max-width: 768px) {\n\t\t.facility-list {\n\t\t\tgap: 20rpx;\n\t\t\tmargin-top: 20rpx;\n\t\t}\n\n\t\t.facility-card {\n\t\t\tborder-radius: 12rpx;\n\t\t}\n\n\t\t.facility-card__header {\n\t\t\tpadding: 16rpx 20rpx;\n\t\t}\n\n\t\t.facility-card__number {\n\t\t\twidth: 48rpx;\n\t\t\theight: 48rpx;\n\t\t}\n\n\t\t.facility-card__number-text {\n\t\t\tfont-size: 24rpx;\n\t\t}\n\n\t\t.facility-card__delete {\n\t\t\twidth: 48rpx;\n\t\t\theight: 48rpx;\n\t\t}\n\n\t\t.facility-card__body {\n\t\t\tpadding: 24rpx 20rpx;\n\t\t\tgap: 20rpx;\n\t\t}\n\n\t\t.facility-field {\n\t\t\tgap: 8rpx;\n\t\t}\n\n\t\t.facility-field__label {\n\t\t\tfont-size: 26rpx;\n\t\t}\n\n\t\t.facility-field-row {\n\t\t\tflex-direction: column;\n\t\t\tgap: 20rpx;\n\t\t}\n\n\t\t.facility-field--half {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\t/* 桌面端适配 */\n\t@media (min-width: 961px) {\n\t\t.facility-list {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t\tgap: 32rpx;\n\t\t\tmargin-top: 32rpx;\n\t\t}\n\n\t\t.facility-card {\n\t\t\tborder-radius: 20rpx;\n\t\t}\n\n\t\t.facility-card__header {\n\t\t\tpadding: 24rpx 32rpx;\n\t\t}\n\n\t\t.facility-card__number {\n\t\t\twidth: 64rpx;\n\t\t\theight: 64rpx;\n\t\t}\n\n\t\t.facility-card__number-text {\n\t\t\tfont-size: 32rpx;\n\t\t}\n\n\t\t.facility-card__delete {\n\t\t\twidth: 64rpx;\n\t\t\theight: 64rpx;\n\t\t}\n\n\t\t.facility-card__body {\n\t\t\tpadding: 40rpx 32rpx;\n\t\t\tgap: 28rpx;\n\t\t}\n\n\t\t.facility-field {\n\t\t\tgap: 14rpx;\n\t\t}\n\n\t\t.facility-field__label {\n\t\t\tfont-size: 30rpx;\n\t\t}\n\n\t\t.facility-field-row {\n\t\t\tgap: 20rpx;\n\t\t}\n\t}\n\n\t/* 超大屏幕适配 */\n\t@media (min-width: 1200px) {\n\t\t.facility-list {\n\t\t\tgrid-template-columns: repeat(3, 1fr);\n\t\t\tgap: 40rpx;\n\t\t}\n\n\t\t.facility-card__body {\n\t\t\tpadding: 48rpx 40rpx;\n\t\t}\n\t}\n\t\n\t/* ==========wilson 提资单样式比对样式 ========== */\n\t/* 提资单样式 */\n\t.tizidan-container {\n\t  display: flex;\n\t  flex-direction: column;\n\t  gap: 24rpx;\n\t}\n\t\n\t/* 头部样式 */\n\t.tizidan-header {\n\t  text-align: center;\n\t  margin-bottom: 8rpx;\n\t}\n\t\n\t.tizidan-title {\n\t  display: block;\n\t  font-size: 32rpx;\n\t  color: #166534;\n\t  font-weight: 700;\n\t  margin-bottom: 8rpx;\n\t}\n\t\n\t.tizidan-subtitle {\n\t  display: block;\n\t  font-size: 24rpx;\n\t  color: #64748b;\n\t}\n\t\n\t/* 项目卡片样式 */\n\t.tizidan-item-card {\n\t  background: #ffffff;\n\t  border: 1rpx solid #e5e7eb;\n\t  border-radius: 12rpx;\n\t  padding: 24rpx;\n\t  transition: all 0.2s ease;\n\t}\n\t\n\t.tizidan-item-card:hover {\n\t  border-color: #166534;\n\t  box-shadow: 0 4rpx 12rpx rgba(22, 101, 52, 0.08);\n\t}\n\t\n\t/* 项目头部样式 */\n\t.tizidan-item-header {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  margin-bottom: 20rpx;\n\t}\n\t\n\t.tizidan-item-left {\n\t  display: flex;\n\t  align-items: flex-start;\n\t  gap: 16rpx;\n\t  flex: 1;\n\t}\n\t\n\t.tizidan-item-number {\n\t  font-size: 28rpx;\n\t  font-weight: 700;\n\t  color: #166534;\n\t  min-width: 32rpx;\n\t}\n\t\n\t.tizidan-item-content {\n\t  flex: 1;\n\t  display: flex;\n\t  flex-direction: column;\n\t  gap: 8rpx;\n\t}\n\t\n\t.tizidan-item-title {\n\t  font-size: 28rpx;\n\t  font-weight: 600;\n\t  color: #1f2937;\n\t  line-height: 1.4;\n\t}\n\t\n\t/* 复选框组样式 */\n\t.tizidan-checkbox-group {\n\t  display: flex;\n\t  align-items: center;\n\t}\n\t\n\t.checkbox-label {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 8rpx;\n\t  cursor: pointer;\n\t}\n\t\n\t.checkbox-text {\n\t  font-size: 24rpx;\n\t  color: #64748b;\n\t}\n\t\n\t/* 状态徽章 */\n\t.tizidan-item-status {\n\t  flex-shrink: 0;\n\t}\n\t\n\t.tizidan-status-badge {\n\t  display: inline-block;\n\t  padding: 6rpx 16rpx;\n\t  border-radius: 20rpx;\n\t  font-size: 22rpx;\n\t  font-weight: 500;\n\t}\n\t\n\t.status-submitted {\n\t  background: #d1fae5;\n\t  color: #065f46;\n\t}\n\t\n\t.status-unsubmitted {\n\t  background: #fee2e2;\n\t  color: #dc2626;\n\t}\n\t\n\t/* 禁用状态 */\n\t.tizidan-item-disabled {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 8rpx;\n\t  padding: 16rpx;\n\t  background: #f9fafb;\n\t  border-radius: 8rpx;\n\t  border: 1rpx dashed #d1d5db;\n\t}\n\t\n\t.disabled-text {\n\t  font-size: 24rpx;\n\t  color: #9ca3af;\n\t}\n\t\n\t/* 项目主体样式 */\n\t.tizidan-item-body {\n\t  margin-top: 20rpx;\n\t}\n\t\n\t.tizidan-item-actions {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  margin-bottom: 16rpx;\n\t}\n\t\n\t/* 文件列表样式 */\n\t.tizidan-file-list {\n\t  display: flex;\n\t  flex-direction: column;\n\t  gap: 12rpx;\n\t}\n\t\n\t.tizidan-file-item {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  padding: 12rpx 16rpx;\n\t  background: #ffffff;\n\t  border-radius: 8rpx;\n\t  border: 1rpx solid #e5e7eb;\n\t}\n\t\n\t.tizidan-file-info {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 12rpx;\n\t  flex: 1;\n\t  min-width: 0;\n\t}\n\t\n\t.tizidan-file-name {\n\t  font-size: 24rpx;\n\t  color: #374151;\n\t  overflow: hidden;\n\t  text-overflow: ellipsis;\n\t  white-space: nowrap;\n\t  flex: 1;\n\t}\n\t\n\t.tizidan-file-size {\n\t  font-size: 22rpx;\n\t  color: #9ca3af;\n\t  flex-shrink: 0;\n\t  margin-left: 8rpx;\n\t}\n\t\n\t/* 其他资料输入框 */\n\t.tizidan-other-input {\n\t  margin-bottom: 20rpx;\n\t}\n\t\n\t.custom-textarea {\n\t  width: 100%;\n\t  margin-bottom: 12rpx;\n\t}\n\t\n\t/* 底部样式 */\n\t.tizidan-footer {\n\t  margin-top: 32rpx;\n\t  padding-top: 24rpx;\n\t  border-top: 1rpx solid #e5e7eb;\n\t}\n\t\n\t.footer-content {\n\t  display: flex;\n\t  flex-direction: column;\n\t  align-items: center;\n\t  gap: 16rpx;\n\t}\n\t\n\t.footer-text {\n\t  font-size: 24rpx;\n\t  color: #64748b;\n\t  text-align: center;\n\t}\n\t\n\t/* 小按钮样式 */\n\t.btn.btn--small {\n\t  height: 56rpx;\n\t  padding: 0 20rpx;\n\t  font-size: 22rpx;\n\t  gap: 6rpx;\n\t}\n\t\n\t.btn.btn--icon {\n\t  width: 56rpx;\n\t  height: 56rpx;\n\t  padding: 0;\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: center;\n\t  background: #fef2f2;\n\t  border-color: #fee2e2;\n\t}\n\t\n\t.btn.btn--icon:active {\n\t  background: #fee2e2;\n\t}\n\t\n\t/* 响应式设计 */\n\t@media (max-width: 768px) {\n\t  .tizidan-item-header {\n\t    flex-direction: column;\n\t    align-items: flex-start;\n\t    gap: 12rpx;\n\t  }\n\t  \n\t  .tizidan-item-left {\n\t    width: 100%;\n\t  }\n\t  \n\t  .tizidan-item-status {\n\t    align-self: flex-start;\n\t  }\n\t  \n\t  .tizidan-file-item {\n\t    flex-direction: column;\n\t    align-items: flex-start;\n\t    gap: 12rpx;\n\t  }\n\t  \n\t  .tizidan-file-info {\n\t    width: 100%;\n\t  }\n\t  \n\t  .btn.btn--icon {\n\t    align-self: flex-end;\n\t  }\n\t  \n\t  .footer-content {\n\t    gap: 20rpx;\n\t  }\n\t  \n\t  .footer-text {\n\t    font-size: 22rpx;\n\t  }\n\t}\n\t\n\t@media (min-width: 769px) {\n\t  .tizidan-container {\n\t    max-width: 1200rpx;\n\t    margin: 0 auto;\n\t  }\n\t  \n\t  .tizidan-item-card {\n\t    padding: 28rpx;\n\t  }\n\t  \n\t  .tizidan-item-title {\n\t    font-size: 30rpx;\n\t  }\n\t  \n\t  .footer-content {\n\t    flex-direction: row;\n\t    justify-content: space-between;\n\t    align-items: center;\n\t  }\n\t  \n\t  .footer-text {\n\t    flex: 1;\n\t    text-align: left;\n\t  }\n\t}\n\t\n\t/* 超大屏幕适配 */\n\t@media (min-width: 1200px) {\n\t  .tizidan-item-card {\n\t    padding: 32rpx;\n\t  }\n\t  \n\t  .tizidan-item-title {\n\t    font-size: 32rpx;\n\t  }\n\t}\n\t/* 提资单分组样式 */\n\t.tizidan-section {\n\t  margin-bottom: 32rpx;\n\t  border: 1rpx solid #e5e7eb;\n\t  border-radius: 12rpx;\n\t  overflow: hidden;\n\t  background: #ffffff;\n\t}\n\t\n\t.tizidan-section-header {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 12rpx;\n\t  padding: 20rpx 24rpx;\n\t  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);\n\t  border-bottom: 1rpx solid #dcfce7;\n\t}\n\t\n\t.tizidan-section-number {\n\t  font-size: 28rpx;\n\t  font-weight: 700;\n\t  color: #166534;\n\t  min-width: 32rpx;\n\t}\n\t\n\t.tizidan-section-title {\n\t  font-size: 28rpx;\n\t  font-weight: 600;\n\t  color: #1f2937;\n\t  line-height: 1.4;\n\t}\n\t\n\t/* 子项卡片样式 */\n\t.tizidan-item-card {\n\t  border-top: 1rpx solid #f3f4f6;\n\t  padding: 20rpx 24rpx;\n\t  transition: all 0.2s ease;\n\t}\n\t\n\t.tizidan-item-card:hover {\n\t  background: #f9fafb;\n\t}\n\t\n\t.tizidan-item-header {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  margin-bottom: 16rpx;\n\t}\n\t\n\t.tizidan-item-left {\n\t  display: flex;\n\t  align-items: flex-start;\n\t  gap: 12rpx;\n\t  flex: 1;\n\t}\n\t\n\t.tizidan-item-number {\n\t  font-size: 24rpx;\n\t  font-weight: 600;\n\t  color: #374151;\n\t  min-width: 40rpx;\n\t}\n\t\n\t.tizidan-item-content {\n\t  flex: 1;\n\t  display: flex;\n\t  flex-direction: column;\n\t  gap: 4rpx;\n\t}\n\t\n\t.tizidan-item-title {\n\t  font-size: 26rpx;\n\t  font-weight: 500;\n\t  color: #4b5563;\n\t  line-height: 1.4;\n\t}\n\t\n\t/* 复选框组样式 */\n\t.tizidan-checkbox-group {\n\t  flex-shrink: 0;\n\t  margin-left: 16rpx;\n\t}\n\t\n\t.checkbox-label {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 8rpx;\n\t  cursor: pointer;\n\t}\n\t\n\t.checkbox-text {\n\t  font-size: 24rpx;\n\t  color: #64748b;\n\t  white-space: nowrap;\n\t}\n\t\n\t/* 项目主体样式 */\n\t.tizidan-item-body {\n\t  margin-top: 16rpx;\n\t  padding-top: 16rpx;\n\t  border-top: 1rpx solid #f3f4f6;\n\t}\n\t\n\t/* 文件上传区域 */\n\t.tizidan-item-actions {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  margin-bottom: 16rpx;\n\t}\n\t\n\t.tizidan-file-count {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 6rpx;\n\t  padding: 6rpx 12rpx;\n\t  background: #ecfdf5;\n\t  border-radius: 6rpx;\n\t}\n\t\n\t.file-count-text {\n\t  font-size: 22rpx;\n\t  color: #166534;\n\t}\n\t\n\t/* 文件列表样式 */\n\t.tizidan-file-list {\n\t  display: flex;\n\t  flex-direction: column;\n\t  gap: 12rpx;\n\t}\n\t\n\t.tizidan-file-item {\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: space-between;\n\t  padding: 12rpx 16rpx;\n\t  background: #f9fafb;\n\t  border-radius: 8rpx;\n\t  border: 1rpx solid #e5e7eb;\n\t}\n\t\n\t.tizidan-file-info {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 12rpx;\n\t  flex: 1;\n\t  min-width: 0;\n\t}\n\t\n\t.tizidan-file-name {\n\t  font-size: 24rpx;\n\t  color: #374151;\n\t  overflow: hidden;\n\t  text-overflow: ellipsis;\n\t  white-space: nowrap;\n\t  flex: 1;\n\t}\n\t\n\t.tizidan-file-size {\n\t  font-size: 22rpx;\n\t  color: #9ca3af;\n\t  flex-shrink: 0;\n\t  margin-left: 8rpx;\n\t}\n\t\n\t/* 其他资料输入框 */\n\t.tizidan-other-input {\n\t  margin-bottom: 20rpx;\n\t}\n\t\n\t.custom-textarea {\n\t  width: 100%;\n\t  margin-bottom: 12rpx;\n\t}\n\t\n\t/* 禁用状态 */\n\t.tizidan-item-disabled {\n\t  display: flex;\n\t  align-items: center;\n\t  gap: 8rpx;\n\t  padding: 16rpx;\n\t  background: #f9fafb;\n\t  border-radius: 8rpx;\n\t  border: 1rpx dashed #d1d5db;\n\t}\n\t\n\t.disabled-text {\n\t  font-size: 24rpx;\n\t  color: #9ca3af;\n\t}\n\t\n\t/* 小按钮样式 */\n\t.btn.btn--small {\n\t  height: 56rpx;\n\t  padding: 0 20rpx;\n\t  font-size: 22rpx;\n\t  gap: 6rpx;\n\t}\n\t\n\t.btn.btn--icon {\n\t  width: 56rpx;\n\t  height: 56rpx;\n\t  padding: 0;\n\t  display: flex;\n\t  align-items: center;\n\t  justify-content: center;\n\t  background: #fef2f2;\n\t  border-color: #fee2e2;\n\t}\n\t\n\t.btn.btn--icon:active {\n\t  background: #fee2e2;\n\t}\n\t\n\t/* 底部样式 */\n\t.tizidan-footer {\n\t  margin-top: 32rpx;\n\t  padding-top: 24rpx;\n\t  border-top: 1rpx solid #e5e7eb;\n\t}\n\t\n\t.footer-content {\n\t  display: flex;\n\t  flex-direction: column;\n\t  align-items: center;\n\t  gap: 16rpx;\n\t}\n\t\n\t.footer-text {\n\t  font-size: 24rpx;\n\t  color: #64748b;\n\t  text-align: center;\n\t}\n\t\n\t/* 响应式设计 */\n\t@media (max-width: 768px) {\n\t  .tizidan-item-header {\n\t    flex-direction: column;\n\t    align-items: flex-start;\n\t    gap: 12rpx;\n\t  }\n\t  \n\t  .tizidan-item-left {\n\t    width: 100%;\n\t  }\n\t  \n\t  .tizidan-checkbox-group {\n\t    align-self: flex-start;\n\t    margin-left: 0;\n\t  }\n\t  \n\t  .tizidan-file-item {\n\t    flex-direction: column;\n\t    align-items: flex-start;\n\t    gap: 12rpx;\n\t  }\n\t  \n\t  .tizidan-file-info {\n\t    width: 100%;\n\t  }\n\t  \n\t  .btn.btn--icon {\n\t    align-self: flex-end;\n\t  }\n\t  \n\t  .footer-content {\n\t    gap: 20rpx;\n\t  }\n\t  \n\t  .footer-text {\n\t    font-size: 22rpx;\n\t  }\n\t}\n\t\n\t@media (min-width: 769px) {\n\t  .tizidan-container {\n\t    max-width: 1200rpx;\n\t    margin: 0 auto;\n\t  }\n\t  \n\t  .tizidan-section {\n\t    padding: 0;\n\t  }\n\t  \n\t  .tizidan-section-header {\n\t    padding: 24rpx 32rpx;\n\t  }\n\t  \n\t  .tizidan-section-title {\n\t    font-size: 30rpx;\n\t  }\n\t  \n\t  .footer-content {\n\t    flex-direction: row;\n\t    justify-content: space-between;\n\t    align-items: center;\n\t  }\n\t  \n\t  .footer-text {\n\t    flex: 1;\n\t    text-align: left;\n\t  }\n\t}\n\t\n\t/* 超大屏幕适配 */\n\t@media (min-width: 1200px) {\n\t  .tizidan-section-header {\n\t    padding: 28rpx 36rpx;\n\t  }\n\t  \n\t  .tizidan-section-title {\n\t    font-size: 32rpx;\n\t  }\n\t}\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/reports/acceptance/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","usePlatformInfo","ref","computed","uni","onLoad","onUnmounted","watch","runTask","transformExtractResult","reactive","code","downloadSignboardWord","wx","generateMonitorPlan","downloadMonitorPlan","item","res","useFieldSurveyData","generateReport","downloadReport"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACl8GF,GAAG,WAAW,eAAe;"}