{"version":3,"file":"index.js","sources":["pages/reports/acceptance/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVwb3J0cy9hY2NlcHRhbmNlL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<app-layout current=\"pages/reports/acceptance/index\">\r\n\t\t<view class=\"acceptance-page\">\r\n\t\t\t<!-- 步骤导航 -->\r\n\t\t\t<view class=\"acceptance-steps\">\r\n\t\t\t\t<view class=\"steps-container\">\r\n\t\t\t\t\t<template v-if=\"isMobile\">\r\n\t\t\t\t\t\t<uni-data-select v-model=\"currentStep\" :localdata=\"stepSelectOptions\" placeholder=\"选择步骤\"\r\n\t\t\t\t\t\t\tclass=\"mobile-step-select\" />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<view class=\"desktop-steps\" role=\"tablist\">\r\n\t\t\t\t\t\t\t<view v-for=\"(step, index) in stepNames\" :key=\"index\" class=\"step-item\" :class=\"{\r\n                  'step-item--active': currentStep === index,\r\n                  'step-item--completed': stepDone(index)\r\n                }\" role=\"tab\" :aria-selected=\"currentStep === index\" @tap=\"currentStep = index\">\r\n\t\t\t\t\t\t\t\t<view class=\"step-indicator\">\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"stepDone(index)\" class=\"step-check\">✓</text>\r\n\t\t\t\t\t\t\t\t\t<text v-else class=\"step-number\">{{ index + 1 }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text class=\"step-label\">{{ step }}</text>\r\n\t\t\t\t\t\t\t\t<view v-if=\"index < stepNames.length - 1\" class=\"step-connector\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 主要内容区域 -->\r\n\t\t\t<view class=\"acceptance-content\">\r\n\t\t\t\t<scroll-view class=\"content-scroll\" scroll-y>\r\n\t\t\t\t\t<!-- 步骤1: 资料上传 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 0\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-upload\" size=\"9\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">资料上传</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-label\">请上传环评报告书/报告表/批复文件/其他资料等</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-tip\">支持 PDF、Word、图片等格式，单次上传最多 9 个文件</text>\r\n\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"eiaFiles\" fileMediatype=\"all\" :auto-upload=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:limit=\"100\" @select=\"handleFileSelect\" @delete=\"handleFileDelete\">\r\n\t\t\t\t\t\t\t\t\t</uni-file-picker>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"simulateExtract\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"search\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>提取项目基本信息</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<!-- 项目信息表 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"baseTable.length\" class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">项目信息表</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"openAddField\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button v-if=\"selectMode\" class=\"btn btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedIds.length\" @tap=\"removeSelected\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>删除选中（{{ selectedIds.length }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"toggleSelectMode\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"selectMode ? 'clear' : 'checkbox'\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ selectMode ? '取消' : '选择删除' }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 响应式表单：PC 两列，移动端单列 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(item, idx) in baseTable\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.label }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--  如果是提取的数据，显示绿色小标签 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"form-item__input\" v-model=\"item.value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" :clearable=\"true\" />\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"form-item__select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 标识牌生成 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#fb923c\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">排污标识牌信息（业主确认排污口信息无误）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => { generateSignboard(); showSignboardStep1 = true }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>标识牌信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboardStep1\" class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"downBiaoShi\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>下载</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboardStep1\" class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"currentStep = 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"redo-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>生成检测方案</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"showSignboardStep1\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<template v-for=\"(sec, si) in signboard.sections\" :key=\"'s'+si\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row table-row--simple\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-td table-td--section\">{{ sec.block || '未命名' }}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"pw-ico icon-btn\" @tap=\"() => addSignItem(si)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(it, ii) in sec.items\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'r'+si+'-'+ii\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"form-item__title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"it.title\" placeholder=\"内容标题\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"form-item__input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"it.content\" placeholder=\"请输入具体的值\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeSignItem(si, ii)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤2: 信息表/提资单 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 1\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"clipboard\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">提资单比对清单</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateDatasheet\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>生成比对清单</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"exportDatasheet\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download\" size=\"16\" color=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>导出比对清单</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-if=\"datasheet.length\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"table-header table-header--dense\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w160\">字段</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th\">当前值</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w140\">类型</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">状态</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w80\">操作</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"table-row\" v-for=\"(d, i) in datasheet\" :key=\"d.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w160\" v-model=\"d.label\" placeholder=\"字段名\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td\" v-model=\"d.value\" placeholder=\"值\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-data-select class=\"table-td w140\" v-model=\"d.type\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:localdata=\"datasheetTypeOptions\" placeholder=\"类型\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-data-select class=\"table-td w120\" v-model=\"d.status\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:localdata=\"verifyOptions\" placeholder=\"状态\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td w80\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeDatasheet(i)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">尚未生成提资单</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击上方\"生成提资单\"按钮创建</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤3: 现场踏勘比对 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 2\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">现场踏勘比对</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-label\">现场踏勘记录</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-tip\">记录现场踏勘发现的问题和差异</text>\r\n\t\t\t\t\t\t\t\t\t<textarea class=\"fieldwork-textarea\" v-model=\"fieldworkRecord\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入现场踏勘记录...\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">现场踏勘比对清单</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateFieldworkComparison\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>生成详细比对清单</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"addComparisonItem\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>新增比对项</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"fieldworkComparison.length\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"table-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">比对项目</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th\">环评要求</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th\">现场情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">差异说明</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w80\">操作</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row\" v-for=\"(item, index) in fieldworkComparison\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w120\" v-model=\"item.project\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"项目名称\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td\" v-model=\"item.eiaRequirement\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"环评要求\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td\" v-model=\"item.fieldSituation\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"现场情况\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w120\" v-model=\"item.difference\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"差异说明\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td w80\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeComparisonItem(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">尚未生成现场踏勘比对清单</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击上方按钮生成或新增比对项</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"refresh\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">基本信息更新确认</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"update-confirm\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"update-label\">是否根据现场踏勘结果更新项目基本信息表？</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"update-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"updateBaseInfo(false)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>否，继续下一步</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"updateBaseInfo(true)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>是，更新基本信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤4: 监测方案 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 3\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">监测方案</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"recommendPlan\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"magic\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>智能推荐方案</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"addPlanItem\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>新增监测项</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"downloadMonitorTemplate\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download\" size=\"16\" color=\"#5b6b7b\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>下载模板</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-if=\"plan.length\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"table-header\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">监测因子</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">监测点位</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w140\">监测方法</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">监测频次</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w100\">质控要求</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th\">备注</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"table-th w120\">操作</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"table-row\" v-for=\"(item, index) in plan\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w120\" v-model=\"item.factor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"监测因子\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w120\" v-model=\"item.point\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"监测点位\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w140\" v-model=\"item.method\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"监测方法\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w120\" v-model=\"item.frequency\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"监测频次\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td w100\" v-model=\"item.qaqc\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"质控要求\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"table-td\" v-model=\"item.remark\" placeholder=\"备注\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td w120\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"action-buttons\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn\" @tap=\"() => duplicatePlanItem(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"copy\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn\" @tap=\"() => movePlanItem(index, -1)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"index === 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"arrow-up\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn\" @tap=\"() => movePlanItem(index, 1)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"index === plan.length - 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"arrow-down\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removePlanItem(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">尚未制定监测方案</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击上方按钮智能推荐或新增监测项</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"saveMonitorPlan\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmark\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>保存监测方案</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤5: 竣工验收报告 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 4\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">竣工验收报告</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"report-generation\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"generation-options\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\">报告类型</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<radio-group class=\"radio-group\" @change=\"onReportTypeChange\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"radio-item\" v-for=\"type in reportTypes\" :key=\"type.value\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<radio :value=\"type.value\" :checked=\"reportType === type.value\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"radio-text\">{{ type.text }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</radio-group>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\" v-if=\"reportType === 'withData'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\">上传检测报告</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"testReportFiles\" fileMediatype=\"all\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:auto-upload=\"false\" :limit=\"3\">\r\n\t\t\t\t\t\t\t\t\t\t\t</uni-file-picker>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"generation-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateAcceptanceReport\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>生成验收报告</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"previewReport\"\r\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!reportGenerated\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"16\" color=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>预览报告</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"exportReport\" :disabled=\"!reportGenerated\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download\" size=\"16\" color=\"#5b6b7b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>导出报告</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"reportGenerated\" class=\"report-preview\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmark-circle\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-title\">报告生成完成</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-text\">竣工验收报告已生成，包含以下内容：</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"preview-sections\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 项目基本情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 环保设施建设情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 监测结果分析</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 验收结论</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"reportType === 'withData'\" class=\"section-item\">•\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t检测数据附件</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">尚未生成验收报告</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击上方按钮生成报告</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 底部导航 -->\r\n\t\t\t<view class=\"acceptance-navigation\">\r\n\t\t\t\t<view class=\"nav-buttons\">\r\n\t\t\t\t\t<button class=\"btn btn--ghost\" :disabled=\"currentStep === 0\" @tap=\"prevStep\">\r\n\t\t\t\t\t\t<uni-icons type=\"left\" size=\"16\" color=\"#5b6b7b\" />\r\n\t\t\t\t\t\t<text>上一步</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"btn btn--primary\" :disabled=\"currentStep === stepNames.length - 1\" @tap=\"nextStep\">\r\n\t\t\t\t\t\t<text>下一步</text>\r\n\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</app-layout>\r\n\r\n\t<!-- 新增信息弹窗 -->\r\n\t<uni-popup ref=\"fieldPopup\" type=\"center\">\r\n\t\t<view class=\"modal\">\r\n\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t<text class=\"modal-title\">新增项目基本信息</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"modal-body\">\r\n\t\t\t\t<text class=\"modal-description\">请在下方输入信息名称</text>\r\n\t\t\t\t<uni-easyinput v-model=\"newFieldLabel\" placeholder=\"如：项目名称/单位名称\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"closeFieldPopup\">取消</button>\r\n\t\t\t\t<button class=\"btn btn--primary\" @tap=\"confirmAddField\">确定</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-popup>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tcomputed\r\n\t} from 'vue'\r\n\timport {\r\n\t\tusePlatformInfo\r\n\t} from '@/utils/platform'\r\n\timport AppLayout from '@/components/layout/AppLayout.vue'\r\n\timport {\r\n\t\tonShow,\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tnavTitleStore\r\n\t} from '@/stores/navTitle.js'\r\n\timport {\r\n\t\tuploadFileToBackend,\r\n\t\trebuildIndex,\r\n\t\trunTask,\r\n\t\ttransformExtractResult,\r\n\t} from '@/api/acceptance.js'\r\n\r\n\t//手机端头部页面标题\r\n\tconst navTitle = navTitleStore()\r\n\tonShow(() => navTitle.setTitle('验收报告'))\r\n\r\n\t//手机页面规定\r\n\tconst {\r\n\t\tisMobile\r\n\t} = usePlatformInfo()\r\n\r\n\t// 以下提取项目基本信息模块的方法--------------------------\r\n\t// 限制文件格式\r\n\tconst ALLOWED_EXTS = [\r\n\t\t'pdf', 'doc', 'docx', 'txt', 'md',\r\n\t\t'jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'\r\n\t]\r\n\r\n\t// 最大上传个数\r\n\tconst MAX_FILES = 100\r\n\r\n\t// 上传文件与提取信息\r\n\tconst eiaFiles = ref([])\r\n\tconst uploadedDocuments = ref([]) // 存储已上传的文档ID\r\n\tconst extracting = ref(false) // 提取状态\r\n\tconst extractError = ref('') // 提取错误状态\r\n\r\n\t// 文件类型检查\r\n\tfunction checkFileType(fileName) {\r\n\t\tconst ext = (fileName || '').split('.').pop().toLowerCase()\r\n\t\treturn {\r\n\t\t\tisSupported: ALLOWED_EXTS.includes(ext), // 是否支持解析\r\n\t\t\text,\r\n\t\t\tdisplayName: fileName\r\n\t\t}\r\n\t}\r\n\r\n\t// 统一提示逻辑\r\n\tfunction showUploadResult({\r\n\t\tsuccessCount,\r\n\t\tfailCount,\r\n\t\tsupported,\r\n\t\tnonSupported,\r\n\t\ttotal\r\n\t}) {\r\n\t\tconst hasSupported = supported > 0\r\n\t\tconst hasNonSupported = nonSupported > 0\r\n\r\n\t\tif (failCount === 0 && successCount === total) {\r\n\t\t\t//  修复：根据是否有可解析文件显示不同提示\r\n\t\t\tlet title = `全部上传成功 (${successCount}个)`\r\n\t\t\tif (hasSupported) {\r\n\t\t\t\ttitle = `上传成功: ${supported}个文档已解析, ${nonSupported}个附件`\r\n\t\t\t} else if (hasNonSupported) {\r\n\t\t\t\ttitle = `${successCount}个文件已上传（暂不支持自动解析）`\r\n\t\t\t}\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle,\r\n\t\t\t\ticon: hasSupported ? 'success' : 'none',\r\n\t\t\t\tduration: 2500\r\n\t\t\t})\r\n\t\t} else if (failCount === total) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `全部上传失败 (${failCount}个)`,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `完成: 成功${successCount}, 失败${failCount}`,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 进度条提示\r\n\tlet uploadProgressTimer = null // 上传假进度计时器\r\n\tlet currentUploadPercent = 0 // 当前上传百分比\r\n\r\n\t// 进度条\r\n\tfunction startUploadFakeProgress(totalTime = 150000) {\r\n\t\tcurrentUploadPercent = 0\r\n\t\tconst step = 100 / (totalTime / 100) // 每 100ms 涨多少\r\n\t\tuploadProgressTimer = setInterval(() => {\r\n\t\t\tcurrentUploadPercent += step\r\n\t\t\tif (currentUploadPercent >= 100) {\r\n\t\t\t\tcurrentUploadPercent = 100\r\n\t\t\t\tclearInterval(uploadProgressTimer)\r\n\t\t\t\tuploadProgressTimer = null\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: `请稍等，正在解析文档，解析进度： ${Math.floor(currentUploadPercent)}%`,\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t}, 100)\r\n\t}\r\n\r\n\t// 上传文件并解析\r\n\tasync function handleFileSelect(e) {\r\n\t  const selectedFiles = e.tempFiles || (e.tempFile ? [e.tempFile] : [])\r\n\t  if (!selectedFiles?.length) return\r\n\t\r\n\t  const remaining = MAX_FILES - eiaFiles.value.length\r\n\t  if (remaining <= 0) {\r\n\t    uni.showToast({ title: `最多只能上传${MAX_FILES}个文件`, icon: 'none' })\r\n\t    return\r\n\t  }\r\n\t\r\n\t  const unsupportedFiles = []\r\n\t  const supportedFiles = selectedFiles\r\n\t    .filter(file => {\r\n\t      const ext = (file.name || file.filename || '').split('.').pop().toLowerCase()\r\n\t      const isAllowed = ALLOWED_EXTS.includes(ext)\r\n\t      if (!isAllowed) unsupportedFiles.push(file.name || file.filename)\r\n\t      return isAllowed\r\n\t    })\r\n\t    .slice(0, remaining)\r\n\t\r\n\t  if (unsupportedFiles.length > 0) {\r\n\t    const names = unsupportedFiles.slice(0, 3).join(', ')\r\n\t    const more = unsupportedFiles.length > 3 ? ` 等${unsupportedFiles.length}个` : '文件'\r\n\t    uni.showModal({\r\n\t      title: '不支持的文件格式',\r\n\t      content: `以下${more}不支持上传：\\n${names}${unsupportedFiles.length > 3 ? '...' : ''}`,\r\n\t      showCancel: false,\r\n\t      confirmText: '知道了'\r\n\t    })\r\n\t  }\r\n\t\r\n\t  if (supportedFiles.length > 0) {\r\n\t    eiaFiles.value = [...eiaFiles.value, ...supportedFiles]\r\n\t  }\r\n\t  if (supportedFiles.length === 0) return\r\n\t\r\n\t  /* ✅ 第 1 处：启动假进度（2.5 分钟） */\r\n\t  startUploadFakeProgress(150000)\r\n\t\r\n\t  const stats = {\r\n\t    successCount: 0,\r\n\t    failCount: 0,\r\n\t    supported: 0,\r\n\t    nonSupported: 0,\r\n\t    total: supportedFiles.length\r\n\t  }\r\n\t\r\n\t  for (let i = 0; i < supportedFiles.length; i++) {\r\n\t    const file = supportedFiles[i]\r\n\t    try {\r\n\t      /* ✅ 第 2 处：循环里不再改标题，让假进度管 */\r\n\t      const result = await uploadFileToBackend(file)\r\n\t      uploadedDocuments.value.push(result.document_id)\r\n\t      stats.successCount++\r\n\t\r\n\t      const ext = (result.filename || file.name || '').split('.').pop().toLowerCase()\r\n\t      const parseableExts = ['pdf', 'doc', 'docx', 'txt', 'md',\r\n\t        'jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp']\r\n\t      if (parseableExts.includes(ext)) {\r\n\t        stats.supported++\r\n\t        console.log(`文件已上传并支持解析: ${result.filename}`)\r\n\t      } else {\r\n\t        stats.nonSupported++\r\n\t        console.log(`文件已上传（暂不支持解析）: ${result.filename}`)\r\n\t      }\r\n\t    } catch (error) {\r\n\t      stats.failCount++\r\n\t      console.error(`❌ 文件 ${i + 1} 上传失败:`, error)\r\n\t      if (supportedFiles.length === 1) {\r\n\t        /* ✅ 第 3 处：单文件失败也要清进度 */\r\n\t        clearInterval(uploadProgressTimer)\r\n\t        uploadProgressTimer = null\r\n\t        uni.hideLoading()\r\n\t        uni.showToast({ title: error.message || '上传失败', icon: 'none' })\r\n\t        return\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  /* ✅ 最后：无论成功失败都清进度 */\r\n\t  clearInterval(uploadProgressTimer)\r\n\t  uploadProgressTimer = null\r\n\t  uni.hideLoading()\r\n\t  showUploadResult(stats)\r\n\t\r\n\t  if (stats.supported > 0) {\r\n\t    console.log(`[AutoIndex] 检测到 ${stats.supported} 个可解析文件，开始自动索引...`)\r\n\t    await handleAutoIndexBuild(stats.supported)\r\n\t  }\r\n\t}\r\n\t// 抽离的索引构建函数\r\n\tasync function handleAutoIndexBuild(supportedCount) {\r\n\t\t// 使用正确的参数名\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: `正在解析 ${supportedCount} 个文档中，请稍候，大概需要1-2分钟哦~`,\r\n\t\t\tmask: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\t//  传递 hideLoading: true\r\n\t\t\tconst result = await rebuildIndex({\r\n\t\t\t\thideLoading: true\r\n\t\t\t})\r\n\r\n\t\t\tuni.hideLoading()\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `已自动解析 ${supportedCount} 个文档`,\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\tduration: 2500\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log('[AutoIndex] 成功:', result)\r\n\t\t\tconsole.log(`向量片段: ${result.vector_store_chunks}`)\r\n\t\t\tconsole.log(`BM25片段: ${result.bm25_index_chunks}`)\r\n\r\n\t\t} catch (error) {\r\n\t\t\t//  错误时也隐藏 loading\r\n\t\t\tuni.hideLoading()\r\n\r\n\t\t\tconsole.error('[AutoIndex] 失败:', error)\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '自动解析失败',\r\n\t\t\t\tcontent: '文档已上传，但索引构建失败。\\n\\n错误：' + (error.message || '未知错误'),\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '知道了'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 同步删除两个列表\r\n\tfunction handleFileDelete(e) {\r\n\t\tconst {\r\n\t\t\tindex,\r\n\t\t\ttempFile\r\n\t\t} = e // uni-file-picker 会返回 index 和 tempFile\r\n\r\n\t\t// 从 uploadedDocuments 删除对应文档ID\r\n\t\tif (uploadedDocuments.value[index]) {\r\n\t\t\tuploadedDocuments.value.splice(index, 1)\r\n\t\t}\r\n\r\n\t\t// 同时从 eiaFiles 删除（保持 v-model 同步）\r\n\t\tif (eiaFiles.value[index]) {\r\n\t\t\teiaFiles.value.splice(index, 1)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/* 提取信息的进度条 */\r\n\t// 1. 先声明一个计时器句柄\r\n\tlet progressTimer = null\r\n\tlet currentPercent = 0\r\n\r\n\t// 2. 开始\"假进度\"\r\n\tfunction startFakeProgress() {\r\n\t\tcurrentPercent = 0\r\n\t\tprogressTimer = setInterval(() => {\r\n\t\t\tcurrentPercent += 2 // 每 80ms +2%，50 次后 100%\r\n\t\t\tif (currentPercent >= 100) {\r\n\t\t\t\tclearInterval(progressTimer)\r\n\t\t\t\tprogressTimer = null\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// ✅ 关键：实时改 loading 文字\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: `正在提取项目信息，提取进度： ${currentPercent}%`,\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\t\t}, 200)\r\n\t}\r\n\r\n\r\n\t// 提取信息到项目基本表\r\n\tasync function simulateExtract() {\r\n\t\t// 1. 前置检查：没上传文件直接弹窗\r\n\t\tif (uploadedDocuments.value.length === 0) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '请先上传环评报告文件',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '知道了'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\textracting.value = true // 开始提取，按钮显示loading\r\n\t\tstartFakeProgress()\r\n\t\t// 2. 显示loading，带预估时间（大文件用户不慌张）\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '请稍作等待，正在提取项目信息，预计2~3分钟哦',\r\n\t\t\tmask: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\t// 3. 调用后端，超时设为15分钟（900000毫秒），避免大文件超时\r\n\t\t\tconst result = await runTask('task1', {\r\n\t\t\t\thideLoading: true, // 我们用uni.showLoading，所以这里隐藏\r\n\t\t\t\ttimeout: 900000 // 15分钟，足够解析100页PDF\r\n\t\t\t})\r\n\r\n\t\t\tuni.hideLoading()\r\n\r\n\t\t\t// 4. 数据校验：确保后端真的返回了数据\r\n\t\t\tif (result?.status !== 'success' || !result.result) { // ✅ 修复：用 !==\r\n\t\t\t\tthrow new Error(result?.message || '提取失败：后端未返回有效数据')\r\n\t\t\t}\r\n\r\n\t\t\t// 5. 转换数据并填充表格（核心操作）\r\n\t\t\tbaseTable.value = transformExtractResult(result.result)\r\n\r\n\t\t\t// 6. 成功提示\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `成功提取 ${Object.keys(result.result).length} 条信息`,\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\tduration: 2500\r\n\t\t\t})\r\n\r\n\t\t\t// 7. 缓存到本地（关键！刷新页面不丢失）\r\n\t\t\tuni.setStorageSync('project_base_info', JSON.stringify(baseTable.value))\r\n\r\n\t\t\tconsole.log('[Extract] 提取成功:', result)\r\n\t\t\tconsole.log('[Debug] baseTable:', baseTable.value) // ✅ 调试日志\r\n\r\n\t\t} catch (error) {\r\n\t\t\tuni.hideLoading()\r\n\r\n\t\t\t// 8. 错误分类处理，给用户看得懂的提示\r\n\t\t\tconsole.error('[Extract] 提取失败:', error)\r\n\r\n\t\t\tif (error.message.includes('超时')) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取超时',\r\n\t\t\t\t\tcontent: '文档过大或网络较慢，建议：\\n1. 拆分成多个文件上传\\n2. 检查网络连接\\n3. 联系管理员',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t} else if (error.message.includes('未提取到')) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取失败',\r\n\t\t\t\t\tcontent: '文档中未找到项目信息，请检查：\\n1. 文件是否为完整的环评报告\\n2. 文件内容是否清晰可读',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取失败',\r\n\t\t\t\t\tcontent: error.message || '无法从文档中提取项目信息，请稍后重试',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\textracting.value = false // 无论成功失败，都要结束loading状态\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t// 步骤定义 - 按照验收流程\r\n\tconst stepNames = ['资料上传与基本信息', '监测方案', '提资单比对', '现场踏勘比对', '竣工验收报告']\r\n\tconst currentStep = ref(0)\r\n\tconst stepNamesDisplay = computed(() => stepNames.map((n, i) => stepDone(i) ? (n + ' ✓') : n))\r\n\tconst stepSelectOptions = computed(() => stepNames.map((n, i) => ({\r\n\t\ttext: stepDone(i) ? (n + ' ✓') : n,\r\n\t\tvalue: i\r\n\t})))\r\n\r\n\tfunction onStepChange(e) {\r\n\t\tconst idx = Number(e?.currentIndex ?? e?.detail?.currentIndex ?? 0);\r\n\t\tif (!Number.isNaN(idx)) currentStep.value = idx\r\n\t}\r\n\r\n\tfunction prevStep() {\r\n\t\tif (currentStep.value > 0) currentStep.value -= 1\r\n\t}\r\n\r\n\tfunction nextStep() {\r\n\t\tif (currentStep.value < stepNames.length - 1) currentStep.value += 1\r\n\t}\r\n\r\n\tconst extractionOk = ref(false)\r\n\tconst showSignboardStep1 = ref(false)\r\n\r\n\t// 校验与完成度\r\n\tfunction stepDone(i) {\r\n\t\tswitch (i) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn extractionOk.value;\r\n\t\t\tcase 1:\r\n\t\t\t\treturn datasheet.value.length > 0;\r\n\t\t\tcase 2:\r\n\t\t\t\treturn fieldworkComparison.value.length > 0;\r\n\t\t\tcase 3:\r\n\t\t\t\treturn plan.value.length > 0;\r\n\t\t\tcase 4:\r\n\t\t\t\treturn reportGenerated.value;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tconst draftPopup = ref(null)\r\n\tconst draftMode = ref('export')\r\n\tconst draftText = ref('')\r\n\r\n\tconst fieldPopup = ref(null)\r\n\tconst newFieldLabel = ref('')\r\n\r\n\tfunction openExportDraft() {\r\n\t\ttry {\r\n\t\t\tdraftMode.value = 'export';\r\n\t\t\tdraftText.value = JSON.stringify({\r\n\t\t\t\tstep: currentStep.value\r\n\t\t\t}, null, 2);\r\n\t\t\tdraftPopup.value?.open?.()\r\n\t\t} catch (e) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '导出失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction openImportDraft() {\r\n\t\tdraftMode.value = 'import';\r\n\t\tdraftText.value = '';\r\n\t\tdraftPopup.value?.open?.()\r\n\t}\r\n\r\n\tfunction closeDraftPopup() {\r\n\t\tdraftPopup.value?.close?.()\r\n\t}\r\n\r\n\tfunction copyExportDraft() {\r\n\t\ttry {\r\n\t\t\t/* #ifdef H5 */\r\n\t\t\tnavigator.clipboard?.writeText?.(draftText.value || '');\r\n\t\t\t/* #endif */\r\n\t\t\t/* #ifndef H5 */\r\n\t\t\tuni.setClipboardData({\r\n\t\t\t\tdata: draftText.value || ''\r\n\t\t\t});\r\n\t\t\t/* #endif */\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '已复制',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\tdraftPopup.value?.close?.()\r\n\t\t} catch (e) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '复制失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearDraft() {\r\n\t\teiaFiles.value = [];\r\n\t\textractionOk.value = false;\r\n\t\tcurrentStep.value = 0;\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已清空',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction exportDocx() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '导出Word（占位）',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction exportPdf() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '导出PDF（占位）',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction openAddField() {\r\n\t\tnewFieldLabel.value = '';\r\n\t\tfieldPopup.value?.open?.()\r\n\t}\r\n\r\n\tfunction closeFieldPopup() {\r\n\t\tfieldPopup.value?.close?.()\r\n\t}\r\n\r\n\tfunction confirmAddField() {\r\n\t\tconst label = (newFieldLabel.value || '').trim();\r\n\t\tif (!label) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入字段名称',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\t\tbaseTable.value.push({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tsection: '',\r\n\t\t\tlabel,\r\n\t\t\tvalue: '',\r\n\t\t\tsource: 'manual',\r\n\t\t\trequired: false,\r\n\t\t});\r\n\t\tfieldPopup.value?.close?.()\r\n\t}\r\n\r\n\t// 1. 信息表/提资单------------\r\n\tconst verifyOptions = [{\r\n\t\ttext: '待核对',\r\n\t\tvalue: 'pending'\r\n\t}, {\r\n\t\ttext: '已核对',\r\n\t\tvalue: 'verified'\r\n\t}, {\r\n\t\ttext: '需补充',\r\n\t\tvalue: 'require'\r\n\t}]\r\n\tconst baseTable = ref([])\r\n\tconst datasheet = ref([])\r\n\tconst datasheetTypeOptions = [{\r\n\t\ttext: '需再次提资',\r\n\t\tvalue: 'requireMore'\r\n\t}, {\r\n\t\ttext: '需业主核对',\r\n\t\tvalue: 'ownerConfirm'\r\n\t}]\r\n\r\n\tfunction generateDatasheet() {\r\n\t\tconst list = baseTable.value.filter(r => (r.required && !r.value) || r.status !== 'verified').map(r => ({\r\n\t\t\tid: r.id,\r\n\t\t\tlabel: r.label || '未命名',\r\n\t\t\tvalue: r.value || '',\r\n\t\t\ttype: r.required && !r.value ? 'requireMore' : 'ownerConfirm',\r\n\t\t}));\r\n\t\tdatasheet.value = list;\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `已生成提资单（${list.length}项）`,\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removeDatasheet(i) {\r\n\t\tdatasheet.value.splice(i, 1)\r\n\t}\r\n\r\n\tfunction exportDatasheet() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '待对接：导出提资单',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\t// 选择删除模式\r\n\tconst selectMode = ref(false)\r\n\tconst selectedIds = ref([])\r\n\r\n\tfunction toggleSelectMode() {\r\n\t\tselectMode.value = !selectMode.value;\r\n\t\tif (!selectMode.value) selectedIds.value = []\r\n\t}\r\n\r\n\tfunction toggleSelected(id) {\r\n\t\tconst arr = selectedIds.value;\r\n\t\tconst i = arr.indexOf(id);\r\n\t\tif (i >= 0) arr.splice(i, 1);\r\n\t\telse arr.push(id)\r\n\t}\r\n\r\n\tfunction removeSelected() {\r\n\t\tif (!selectedIds.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '未选择',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst names = baseTable.value\r\n\t\t\t.filter(r => selectedIds.value.includes(r.id))\r\n\t\t\t.map(r => (r.label || '（未命名）').trim())\r\n\r\n\t\tconst preview =\r\n\t\t\tnames.length === 1 ?\r\n\t\t\t`确认要删除「${names[0]}」吗？` :\r\n\t\t\t(() => {\r\n\t\t\t\tconst max = 8\r\n\t\t\t\tconst head = names.slice(0, max).map(n => `• ${n}`).join('\\n')\r\n\t\t\t\tconst tail = names.length > max ? `\\n… 等 ${names.length} 项` : ''\r\n\t\t\t\treturn `确认要删除以下 ${names.length} 个信息吗？\\n${head}${tail}`\r\n\t\t\t})()\r\n\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: preview,\r\n\t\t\tconfirmText: '删除',\r\n\t\t\tcancelText: '取消',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tbaseTable.value = baseTable.value.filter(\r\n\t\t\t\t\t\tr => !selectedIds.value.includes(r.id)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tselectedIds.value = []\r\n\t\t\t\t\tselectMode.value = false\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `已删除 ${names.length} 项`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 2. 现场踏勘比对------------------------\r\n\tconst fieldworkRecord = ref('')\r\n\tconst fieldworkComparison = ref([])\r\n\r\n\tfunction generateFieldworkComparison() {\r\n\t\t// 基于提资单和基本信息生成现场踏勘比对清单\r\n\t\tconst comparison = datasheet.value.map(item => ({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tproject: item.label,\r\n\t\t\teiaRequirement: item.value || '待确认',\r\n\t\t\tfieldSituation: '',\r\n\t\t\tdifference: '待现场核实'\r\n\t\t}))\r\n\r\n\t\tfieldworkComparison.value = comparison\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `已生成比对清单（${comparison.length}项）`,\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction addComparisonItem() {\r\n\t\tfieldworkComparison.value.push({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tproject: '',\r\n\t\t\teiaRequirement: '',\r\n\t\t\tfieldSituation: '',\r\n\t\t\tdifference: ''\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removeComparisonItem(index) {\r\n\t\tfieldworkComparison.value.splice(index, 1)\r\n\t}\r\n\r\n\tfunction updateBaseInfo(shouldUpdate) {\r\n\t\tif (shouldUpdate) {\r\n\t\t\t// 根据现场踏勘结果更新基本信息\r\n\t\t\tfieldworkComparison.value.forEach(comparison => {\r\n\t\t\t\tconst baseItem = baseTable.value.find(item => item.label === comparison.project)\r\n\t\t\t\tif (baseItem && comparison.fieldSituation) {\r\n\t\t\t\t\tbaseItem.value = comparison.fieldSituation\r\n\t\t\t\t\tbaseItem.status = 'verified'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '基本信息已更新',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 进入下一步：监测方案\r\n\t\tcurrentStep.value = 3\r\n\t}\r\n\r\n\t// 3. 监测方案\r\n\tconst plan = ref([])\r\n\r\n\tfunction recommendPlan() {\r\n\t\tconst hasWW = baseTable.value.some(item =>\r\n\t\t\titem.label.includes('废水') || item.label.includes('污水')\r\n\t\t)\r\n\t\tconst hasWA = baseTable.value.some(item =>\r\n\t\t\titem.label.includes('废气') || item.label.includes('烟气')\r\n\t\t)\r\n\t\tconst hasNoise = baseTable.value.some(item =>\r\n\t\t\titem.label.includes('噪声')\r\n\t\t)\r\n\r\n\t\tconst now = Date.now();\r\n\t\tplan.value = []\r\n\r\n\t\tif (hasWW) {\r\n\t\t\tplan.value.push({\r\n\t\t\t\tid: now + 1,\r\n\t\t\t\tfactor: 'COD',\r\n\t\t\t\tpoint: '废水总排口',\r\n\t\t\t\tmethod: 'GB/T 11914-2020',\r\n\t\t\t\tfrequency: '3天×2次/天',\r\n\t\t\t\tqaqc: '平行/空白',\r\n\t\t\t\tremark: '化学需氧量'\r\n\t\t\t})\r\n\t\t\tplan.value.push({\r\n\t\t\t\tid: now + 2,\r\n\t\t\t\tfactor: '氨氮',\r\n\t\t\t\tpoint: '废水总排口',\r\n\t\t\t\tmethod: 'HJ 535-2009',\r\n\t\t\t\tfrequency: '3天×2次/天',\r\n\t\t\t\tqaqc: '平行',\r\n\t\t\t\tremark: ''\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (hasWA) {\r\n\t\t\tplan.value.push({\r\n\t\t\t\tid: now + 3,\r\n\t\t\t\tfactor: '颗粒物',\r\n\t\t\t\tpoint: '废气排放口',\r\n\t\t\t\tmethod: 'HJ 836-2017',\r\n\t\t\t\tfrequency: '2天×3次/天',\r\n\t\t\t\tqaqc: '平行',\r\n\t\t\t\tremark: ''\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (hasNoise) {\r\n\t\t\tplan.value.push({\r\n\t\t\t\tid: now + 4,\r\n\t\t\t\tfactor: '噪声',\r\n\t\t\t\tpoint: '厂界四角',\r\n\t\t\t\tmethod: 'GB 12348-2008',\r\n\t\t\t\tfrequency: '昼/夜各1次',\r\n\t\t\t\tqaqc: '',\r\n\t\t\t\tremark: '连续2天'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (plan.value.length === 0) {\r\n\t\t\tplan.value.push({\r\n\t\t\t\tid: now + 5,\r\n\t\t\t\tfactor: '常规监测',\r\n\t\t\t\tpoint: '主要产污环节',\r\n\t\t\t\tmethod: '按标准执行',\r\n\t\t\t\tfrequency: '1天×2次',\r\n\t\t\t\tqaqc: '质控样',\r\n\t\t\t\tremark: '请根据实际情况调整'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `已推荐${plan.value.length}项监测方案`,\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction addPlanItem() {\r\n\t\tplan.value.push({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tfactor: '',\r\n\t\t\tpoint: '',\r\n\t\t\tmethod: '',\r\n\t\t\tfrequency: '',\r\n\t\t\tqaqc: '',\r\n\t\t\tremark: ''\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removePlanItem(i) {\r\n\t\tplan.value.splice(i, 1)\r\n\t}\r\n\r\n\tfunction duplicatePlanItem(i) {\r\n\t\ttry {\r\n\t\t\tconst src = plan.value[i];\r\n\t\t\tplan.value.splice(i + 1, 0, {\r\n\t\t\t\t...JSON.parse(JSON.stringify(src)),\r\n\t\t\t\tid: Date.now() + Math.random()\r\n\t\t\t})\r\n\t\t} catch (e) {}\r\n\t}\r\n\r\n\tfunction movePlanItem(i, dir) {\r\n\t\tif (i + dir < 0 || i + dir >= plan.value.length) return;\r\n\t\tconst it = plan.value.splice(i, 1)[0];\r\n\t\tplan.value.splice(i + dir, 0, it)\r\n\t}\r\n\r\n\tfunction downloadMonitorTemplate() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '监测方案模板下载成功',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction saveMonitorPlan() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '监测方案已保存',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\t// 4. 竣工验收报告\r\n\tconst reportType = ref('withoutData')\r\n\tconst testReportFiles = ref([])\r\n\tconst reportGenerated = ref(false)\r\n\tconst reportTypes = [{\r\n\t\t\tvalue: 'withoutData',\r\n\t\t\ttext: '无检测数据报告'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'withData',\r\n\t\t\ttext: '有检测数据报告'\r\n\t\t}\r\n\t]\r\n\r\n\tfunction onReportTypeChange(e) {\r\n\t\treportType.value = e.detail.value\r\n\t}\r\n\r\n\tfunction generateAcceptanceReport() {\r\n\t\t// 验证必要数据\r\n\t\tif (!baseTable.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先完成项目基本信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (reportType.value === 'withData' && !testReportFiles.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请上传检测报告',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 模拟生成报告\r\n\t\tsetTimeout(() => {\r\n\t\t\treportGenerated.value = true\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '验收报告生成成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t}, 1500)\r\n\t}\r\n\r\n\tfunction previewReport() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '报告预览功能待开发',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction exportReport() {\r\n\t\tconst typeText = reportType.value === 'withData' ? '有检测数据' : '无检测数据'\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `${typeText}报告导出成功`,\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\t// 标识牌相关\r\n\tconst signboard = reactive({\r\n\t\tsections: [{\r\n\t\t\t\tblock: '废水',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '单位名称',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tblock: '废气',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '单位名称',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tblock: '噪声',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '单位名称',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t}, {\r\n\t\t\t\tblock: '危险污染物',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '单位名称',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t]\r\n\t})\r\n\r\n\tfunction generateSignboard() {\r\n\t\tconst unit = findBaseValue('单位名称') || findBaseValue('项目名称') || '';\r\n\t\tsignboard.sections.forEach(sec => {\r\n\t\t\tconst item = sec.items.find(i => i.title.includes('单位名称'));\r\n\t\t\tif (item) item.content = unit\r\n\t\t});\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已生成标识牌文案',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction addSignItem(i) {\r\n\t\tsignboard.sections[i].items.push({\r\n\t\t\ttitle: '',\r\n\t\t\tcontent: ''\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removeSignItem(i, j) {\r\n\t\tsignboard.sections[i].items.splice(j, 1)\r\n\t}\r\n\r\n\tfunction findBaseValue(label) {\r\n\t\tconst r = baseTable.value.find(x => x.label === label);\r\n\t\treturn r ? (r.value || '') : ''\r\n\t}\r\n\r\n\t// 完成度计算\r\n\tconst completionPercent = computed(() => {\r\n\t\tlet totalSteps = stepNames.length\r\n\t\tlet completedSteps = stepNames.reduce((count, _, index) => {\r\n\t\t\treturn count + (stepDone(index) ? 1 : 0)\r\n\t\t}, 0)\r\n\r\n\t\treturn Math.round((completedSteps / totalSteps) * 100)\r\n\t})\r\n\r\n\t// 在页面加载时，恢复基本信息表缓存\r\n\tonLoad(() => {\r\n\t\tconst cached = uni.getStorageSync('project_base_info')\r\n\t\tif (cached) {\r\n\t\t\ttry {\r\n\t\t\t\tbaseTable.value = JSON.parse(cached)\r\n\t\t\t\tconsole.log('[Cache] 恢复缓存的项目信息，共', baseTable.value.length, '条')\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn('[Cache] 缓存数据解析失败:', e)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* ========== 设计令牌（统一风格） ========== */\r\n\t$brand: #166534; // 主色（深绿）\r\n\t$brand-600: #17834a;\r\n\t$brand-50: #ecfdf5;\r\n\t$ink: #0f172a; // 标题\r\n\t$muted: #5b6b7b; // 次文本\r\n\t$line: #e6eaf0; // 细线\r\n\t$bg: #f6f8fb; // 背景\r\n\t$white: #ffffff;\r\n\t$danger: #d92d20;\r\n\t$warning: #fb923c;\r\n\r\n\t$radius: 14rpx;\r\n\t$radius-lg: 18rpx;\r\n\t$shadow-sm: 0 2rpx 10rpx rgba(16, 24, 40, .06);\r\n\t$shadow-md: 0 6rpx 24rpx rgba(16, 24, 40, .08);\r\n\r\n\t/* ========== 页面框架 ========== */\r\n\t.acceptance-page {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: $bg;\r\n\t}\r\n\r\n\r\n\t/* 统一按钮体系 */\r\n\t.btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 0 22rpx;\r\n\t\theight: 64rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\tbackground: $white;\r\n\t\tcolor: #374151;\r\n\t\ttransition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;\r\n\t}\r\n\r\n\t:deep(.uni-button.btn.btn--secondary::after) {\r\n\t\tborder-radius: $radius;\r\n\t}\r\n\r\n\t.btn:active {\r\n\t\ttransform: translateY(1rpx);\r\n\t}\r\n\r\n\t.btn[disabled] {\r\n\t\topacity: .6;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.btn--primary {\r\n\t\tbackground: $brand;\r\n\t\tcolor: $white;\r\n\t\tborder-color: $brand;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 101, 52, .22);\r\n\t}\r\n\r\n\t.btn--secondary {\r\n\t\tbackground: #f8fafc;\r\n\t\tcolor: #155e3b;\r\n\t\tborder-color: #dbe3ea;\r\n\t}\r\n\r\n\t.btn--ghost {\r\n\t\tbackground: $white;\r\n\t\tcolor: $muted;\r\n\t\tborder-color: #e9edf2;\r\n\t}\r\n\r\n\t.btn--danger {\r\n\t\tbackground: $danger;\r\n\t\tcolor: $white;\r\n\t\tborder-color: $danger;\r\n\t}\r\n\r\n\t.btn--danger-ghost {\r\n\t\tbackground: #fef3f2;\r\n\t\tcolor: $danger;\r\n\t\tborder-color: #fde2e1;\r\n\t}\r\n\r\n\t/* 步骤导航 */\r\n\t.acceptance-steps {\r\n\t\tbackground: $white;\r\n\t\tborder-bottom: 1rpx solid #f2f4f7;\r\n\t\tpadding: 18rpx 24rpx;\r\n\t}\r\n\r\n\t.steps-container {\r\n\t\tmax-width: 1200rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.mobile-step-select {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.desktop-steps {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.step-item {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 14rpx 18rpx;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid transparent;\r\n\t\ttransition: background .2s ease, border-color .2s ease;\r\n\t}\r\n\r\n\t.step-item--active {\r\n\t\tbackground: #f3faf6;\r\n\t\tborder-color: #def7ec;\r\n\t}\r\n\r\n\t.step-item--completed .step-indicator {\r\n\t\tbackground: #10b981;\r\n\t\tcolor: $white;\r\n\t}\r\n\r\n\t.step-indicator {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #eef2f6;\r\n\t\tcolor: $muted;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: 700;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.step-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #344054;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.step-connector {\r\n\t\twidth: 20rpx;\r\n\t\theight: 2rpx;\r\n\t\tbackground: #e3e8ef;\r\n\t\tmargin-left: 4rpx;\r\n\t\tborder-radius: 1rpx;\r\n\t}\r\n\r\n\t/* 主体 */\r\n\t.acceptance-content {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx 24rpx;\r\n\t\tmin-height: 0;\r\n\t}\r\n\r\n\t.content-scroll {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.content-section {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.section-card {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: $radius-lg;\r\n\t\tbox-shadow: $shadow-md;\r\n\t\tborder: 1rpx solid #eef2f6;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.section-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tpadding: 24rpx 24rpx 0;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t\tletter-spacing: .2rpx;\r\n\t}\r\n\r\n\t.section-body {\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t}\r\n\r\n\t/* 表单 */\r\n\t.form-group {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.form-label {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.form-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t}\r\n\r\n\t.action-row {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tmargin-top: 16rpx;\r\n\t}\r\n\r\n\t.section-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tmargin: 12rpx 0 18rpx;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t/* 子块标题 */\r\n\t.subsection {\r\n\t\tmargin-top: 24rpx;\r\n\t\tpadding-top: 24rpx;\r\n\t\tborder-top: 1rpx solid #f1f5f9;\r\n\t}\r\n\r\n\t.subsection-head {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-bottom: 14rpx;\r\n\t}\r\n\r\n\t.subsection-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t/* 表格（桌面网格、移动卡片化） */\r\n\t.data-table {\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.table-header {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-bottom: 1rpx solid #e6ebf1;\r\n\t}\r\n\r\n\t.table-header--dense {\r\n\t\tgrid-template-columns: 160rpx 1fr 140rpx 120rpx 100rpx;\r\n\t}\r\n\r\n\t.table-th {\r\n\t\tpadding: 18rpx 14rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #475569;\r\n\t\tfont-weight: 700;\r\n\t\tborder-right: 1rpx solid #e6ebf1;\r\n\t}\r\n\r\n\t.table-th:last-child {\r\n\t\tborder-right: none;\r\n\t}\r\n\r\n\t.table-body {\r\n\t\tbackground: $white;\r\n\t}\r\n\r\n\t.table-row {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\r\n\t\tborder-bottom: 1rpx solid #f2f4f7;\r\n\t}\r\n\r\n\t.table-row:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.table-row--simple {\r\n\t\tgrid-template-columns: 1fr 100rpx;\r\n\t}\r\n\r\n\t.table-td {\r\n\t\tpadding: 16rpx 14rpx;\r\n\t\tborder-right: 1rpx solid #f7f8fa;\r\n\t\tmin-height: 76rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.table-td:last-child {\r\n\t\tborder-right: none;\r\n\t}\r\n\r\n\t.table-td--section {\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t/* 图标按钮（表格内） */\r\n\t.icon-btn {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tborder: 1rpx solid #edf1f5;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: $white;\r\n\t}\r\n\r\n\t.icon-btn:active {\r\n\t\tbackground: #f3f6fa;\r\n\t}\r\n\r\n\t/* 基本信息表：响应式行 */\r\n\t.form-grid--base {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 1fr;\r\n\t\tgap: 12rpx 16rpx;\r\n\t}\r\n\r\n\t.form-item__row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tbackground: $white;\r\n\t\tborder: 1rpx solid #e7ecf2;\r\n\t\tborder-radius: $radius;\r\n\t\tpadding: 14rpx;\r\n\t}\r\n\r\n\t.form-item__label {\r\n\t\tmin-width: 180rpx;\r\n\t\tcolor: #334155;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t/* 小标签的样式 */\r\n\t.extract-tag {\r\n\t\tdisplay: inline-block;\r\n\t\tmargin-left: 8px;\r\n\t\tpadding: 2px 6px;\r\n\t\tbackground-color: #52c41a;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 10px;\r\n\t\tborder-radius: 3px;\r\n\t\tvertical-align: middle;\r\n\t}\r\n\r\n\t/* 标识牌：左侧标题输入，固定宽度以避免与值重叠 */\r\n\t.pw-ico {\r\n\t\twidth: 140rpx;\r\n\t\theight: 64rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tborder: 1rpx solid #edf1f5;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: $white;\r\n\t\tmargin-left: -100rpx;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.pw-ico text {\r\n\t\tfont-size: 22rpx;\r\n\t}\r\n\r\n\r\n\t.form-item__title {\r\n\t\twidth: 180rpx;\r\n\t}\r\n\r\n\t.form-item__input {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.form-item__select {\r\n\t\twidth: 56rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t/* 空状态 */\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 50rpx 24rpx;\r\n\t\tcolor: #cbd5e1;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #64748b;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.empty-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #9aa8b6;\r\n\t}\r\n\r\n\t/* 底部导航 */\r\n\t.acceptance-navigation {\r\n\t\tbackground: $white;\r\n\t\tborder-top: 1rpx solid $line;\r\n\t\tpadding: 18rpx 24rpx;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(16, 24, 40, .06);\r\n\t}\r\n\r\n\t.nav-buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmax-width: 1200rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t/* 弹窗 */\r\n\t.modal {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: 20rpx;\r\n\t\twidth: 86vw;\r\n\t\tmax-width: 620rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 18rpx 52rpx rgba(15, 23, 42, .18);\r\n\t}\r\n\r\n\t.modal-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1rpx solid #eff3f7;\r\n\t}\r\n\r\n\t.modal-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.modal-close {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbackground: transparent;\r\n\t\tborder: 1rpx solid #eef2f6;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.modal-body {\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.modal-description {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t\tmargin-bottom: 14rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.draft-textarea {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 360rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 1.5;\r\n\t\tbackground: #fafafa;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.modal-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.fieldwork-textarea {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 200rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 1.5;\r\n\t\tbackground: $white;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.update-confirm {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid #e9edf2;\r\n\t}\r\n\r\n\t.update-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.update-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.action-buttons {\r\n\t\tdisplay: flex;\r\n\t\tgap: 8rpx;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.report-generation {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.generation-options {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.option-group {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.option-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.radio-group {\r\n\t\tdisplay: flex;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.radio-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.radio-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t}\r\n\r\n\t.generation-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.report-preview {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f0fdf4;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid #dcfce7;\r\n\t}\r\n\r\n\t.preview-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.preview-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $brand;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.preview-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.preview-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #374151;\r\n\t}\r\n\r\n\t.preview-sections {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t}\r\n\r\n\t.section-item {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #475569;\r\n\t}\r\n\r\n\t/* 宽度工具类 */\r\n\t.w80 {\r\n\t\tmin-width: 120rpx;\r\n\t\tmax-width: 120rpx;\r\n\t}\r\n\r\n\t.w100 {\r\n\t\tmin-width: 140rpx;\r\n\t\tmax-width: 140rpx;\r\n\t}\r\n\r\n\t.w120 {\r\n\t\tmin-width: 160rpx;\r\n\t\tmax-width: 160rpx;\r\n\t}\r\n\r\n\t.w140 {\r\n\t\tmin-width: 200rpx;\r\n\t\tmax-width: 200rpx;\r\n\t}\r\n\r\n\t.w160 {\r\n\t\tmin-width: 260rpx;\r\n\t\tmax-width: 260rpx;\r\n\t}\r\n\r\n\t.w200 {\r\n\t\tmin-width: 320rpx;\r\n\t\tmax-width: 320rpx;\r\n\t}\r\n\r\n\t/* 响应式（小屏） */\r\n\t@media (max-width: 768px) {\r\n\t\t.pw-ico {\r\n\t\t\twidth: 140rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tborder: none;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbackground: $white;\r\n\t\t\tmargin: 5rpx 0 0rpx 0;\r\n\r\n\t\t}\r\n\r\n\t\t.pw-ico text {\r\n\t\t\tfont-size: 22rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-content {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-left,\r\n\t\t.toolbar-right {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.toolbar-buttons {\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tpadding-bottom: 6rpx;\r\n\t\t}\r\n\r\n\t\t.acceptance-content {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.section-header {\r\n\t\t\tpadding: 20rpx 20rpx 0;\r\n\t\t}\r\n\r\n\t\t.section-body {\r\n\t\t\tpadding: 0 20rpx 20rpx;\r\n\t\t}\r\n\r\n\t\t.form-grid--base {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tgap: 10rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__label {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__title {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t}\r\n\r\n\t\t/* 表格卡片化：自动加标签（无须改模板） */\r\n\t\t.table-header {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.table-row {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t\t\tpadding: 10rpx 8rpx;\r\n\t\t\tgap: 0;\r\n\t\t}\r\n\r\n\t\t.table-td {\r\n\t\t\tposition: relative;\r\n\t\t\tpadding: 14rpx 14rpx 14rpx 120rpx;\r\n\t\t\tborder-right: none;\r\n\t\t\tborder-bottom: 1rpx solid #f7f8fa;\r\n\t\t\tmin-height: 64rpx;\r\n\t\t}\r\n\r\n\t\t.table-td:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\r\n\t\t/* 用 nth-child 给出列标题（与 header 顺序一致） */\r\n\t\t.table-row .table-td:nth-child(1)::before {\r\n\t\t\tcontent: '字段';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(2)::before {\r\n\t\t\tcontent: '当前值';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(3)::before {\r\n\t\t\tcontent: '类型';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(4)::before {\r\n\t\t\tcontent: '状态';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(5)::before {\r\n\t\t\tcontent: '操作';\r\n\t\t}\r\n\r\n\t\t.table-td::before {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 14rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #6b7a8a;\r\n\t\t\tfont-weight: 600;\r\n\t\t\twidth: 96rpx;\r\n\t\t\ttext-align-last: justify;\r\n\t\t}\r\n\r\n\t\t/* 简化型行（标识牌）不需要五列标签 */\r\n\t\t.table-row--simple .table-td {\r\n\t\t\tpadding: 14rpx;\r\n\t\t}\r\n\r\n\t\t.table-row--simple .table-td::before {\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.acceptance-navigation {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.modal {\r\n\t\t\twidth: 92vw;\r\n\t\t}\r\n\r\n\t\t.update-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.generation-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.radio-group {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 12rpx;\r\n\t\t}\r\n\r\n\t\t.action-buttons {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* 桌面端：移除突兀 hover 色，保持轻影与对比 */\r\n\t@media (min-width: 769px) {\r\n\t\t.btn--primary:hover {\r\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(22, 101, 52, .28);\r\n\t\t}\r\n\r\n\t\t.btn--secondary:hover {\r\n\t\t\tbackground: #eef6f2;\r\n\t\t\tborder-color: #d7efe4;\r\n\t\t}\r\n\r\n\t\t.btn--ghost:hover {\r\n\t\t\tbackground: #f7f9fb;\r\n\t\t}\r\n\r\n\t\t.btn--danger:hover {\r\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(217, 45, 32, .25);\r\n\t\t}\r\n\r\n\t\t.step-item:hover {\r\n\t\t\tbackground: #f7fafc;\r\n\t\t}\r\n\r\n\t\t.icon-btn:hover {\r\n\t\t\tbackground: #f3f6fa;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/reports/acceptance/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","usePlatformInfo","ref","uni","uploadFileToBackend","rebuildIndex","runTask","transformExtractResult","computed","reactive","onLoad"],"mappings":"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"}