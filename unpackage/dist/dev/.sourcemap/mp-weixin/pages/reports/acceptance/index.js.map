{"version":3,"file":"index.js","sources":["pages/reports/acceptance/index.vue","../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVwb3J0cy9hY2NlcHRhbmNlL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<app-layout current=\"pages/reports/acceptance/index\">\r\n\t\t<view class=\"acceptance-page\">\r\n\t\t\t<!-- 步骤导航 -->\r\n\t\t\t<view class=\"acceptance-steps\">\r\n\t\t\t\t<view class=\"steps-container\">\r\n\t\t\t\t\t<template v-if=\"isMobile\">\r\n\t\t\t\t\t\t<uni-data-select v-model=\"currentStep\" :localdata=\"stepSelectOptions\" placeholder=\"选择步骤\"\r\n\t\t\t\t\t\t\tclass=\"mobile-step-select\" />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<view class=\"desktop-steps\" role=\"tablist\">\r\n\t\t\t\t\t\t\t<view v-for=\"(step, index) in stepNames\" :key=\"index\" class=\"step-item\" :class=\"{\r\n                  'step-item--active': currentStep === index,\r\n                  'step-item--completed': stepDone(index)\r\n                }\" role=\"tab\" :aria-selected=\"currentStep === index\" @tap=\"currentStep = index\">\r\n\t\t\t\t\t\t\t\t<view class=\"step-indicator\">\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"stepDone(index)\" class=\"step-check\">✓</text>\r\n\t\t\t\t\t\t\t\t\t<text v-else class=\"step-number\">{{ index + 1 }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text class=\"step-label\">{{ step }}</text>\r\n\t\t\t\t\t\t\t\t<view v-if=\"index < stepNames.length - 1\" class=\"step-connector\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 主要内容区域 -->\r\n\t\t\t<view class=\"acceptance-content\">\r\n\t\t\t\t<scroll-view class=\"content-scroll\" scroll-y>\r\n\t\t\t\t\t<!-- 步骤1: 选择项目 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 0\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">选择项目</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<!-- 项目选择 -->\r\n\t\t\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-label\">请选择要进行竣工验收的项目</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-tip\">项目文件已在项目管理模块上传并自动处理</text>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 自定义项目选择器触发按钮 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"project-selector\" @tap=\"openProjectPicker\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"selector-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectedProject\" class=\"selected-project\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"project-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"project-name\">{{ selectedProject.name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"selectedProject.description\" class=\"project-desc\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ selectedProject.description }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"placeholder\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"20\" color=\"#9ca3af\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"placeholder-text\">请选择项目</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"down\" size=\"16\" color=\"#6b7280\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<!-- 项目文件列表（只读） -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"selectedProjectId && projectFiles.length > 0\" class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"paperclip\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">项目文件列表（{{ projectFiles.length }} 个文件）</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"file-list\">\r\n\t\t\t\t\t\t\t\t\t\t<view v-for=\"file in projectFiles\" :key=\"file.document_id\" class=\"file-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"getFileIcon(file.file_extension)\" size=\"20\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-details\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"file-name\">{{ file.filename }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"file-meta\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ formatFileSize(file.size_bytes) }} ·\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ formatFileStatus(file.status) }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"file-status\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"status-badge\" :class=\"getStatusClass(file.status)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ getStatusText(file.status) }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<!-- 空状态提示 -->\r\n\t\t\t\t\t\t\t\t<view v-else-if=\"selectedProjectId && projectFiles.length === 0\" class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"folder-add\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">该项目暂无文件</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">请先在项目管理模块上传文件</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"simulateExtract\"\r\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedProjectId || projectFiles.length === 0\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"search\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>提取项目基本信息</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 清除缓存按钮（只在有缓存数据时显示） -->\r\n\t\t\t\t\t\t\t\t\t<button v-if=\"baseTable.length > 0\" class=\"btn btn--ghost\" @tap=\"clearProjectCache\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#dc2626\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>清除缓存</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<!-- 项目信息表和标识牌信息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"baseTable.length\" class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">项目信息表</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"openAddBase\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button v-if=\"selectMode\" class=\"btn btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedIds.length\" @tap=\"removeSelected\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>删除选中（{{ selectedIds.length }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"toggleSelectMode\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"selectMode ? 'clear' : 'checkbox'\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ selectMode ? '取消' : '选择删除' }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 项目信息表 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(item, idx) in baseTable\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 污染物表格特殊渲染 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.id === 'pollutants_emission' && item.type === 'table'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"pollutants-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants_baseinfo_row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.label }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 污染物表格 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格头部 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">污染物类型</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">产生时间</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">污染物名称</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">污染因子</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">污染治理措施\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">排放去向\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">执行标准\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格内容 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 水污染物 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.水污染物 && item.value.水污染物.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(water, index) in item.value.水污染物\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'water-' + index\" class=\"pollutants-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">水污染物\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.产生环节 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染物名称 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染因子 || '未提取到污染因子' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.污染治理措施 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.排放去向 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ water.执行标准 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 大气污染物 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.大气污染物 && item.value.大气污染物.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(air, index) in item.value.大气污染物\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'air-' + index\" class=\"pollutants-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">大气污染物\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.产生环节 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染物名称 || '未提取到污染物名称' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染因子 || '未提取到污染因子' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.污染治理措施 || '未提取到污染治理措施' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.排放去向 || '大气环境' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ air.执行标准 || '未提取到执行标准' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 噪声 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.噪声 && item.value.噪声.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(noise, index) in item.value.噪声\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'noise-' + index\" class=\"pollutants-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">噪声</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.产生环节 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染物名称 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染因子 || '未提取到污染因子' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.污染治理措施 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.排放去向 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--standard\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ noise.执行标准 || '未提取到相关信息' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 选择模式下的复选框 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"pollutants-select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 废物表格（固废 + 危废）-->\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.id === 'pollutants_emission' && item.type === 'table'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"pollutants-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants_baseinfo_row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t固体废物产生情况\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 危废污染物表格 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格头部 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">废物类型</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">产生时间</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">废物来源</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">废物名称</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">危险特性\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">危险废物类别\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">污染治理措施\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 表格内容 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 固体废物 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.固体废物 && item.value.固体废物.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(solid, index) in item.value.固体废物\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'solid-' + index\" class=\"pollutants-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">固体废物\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.产生环节 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物来源 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物名称 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险特性 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险废物类别 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.污染治理措施 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 危险废物 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.value.危险废物 && item.value.危险废物.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(solid, index) in item.value.危险废物\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'hazard-' + index\" class=\"pollutants-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--type\">危险废物\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.value.危险废物.产生环节 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物来源 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.废物名称 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--measure\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险特性 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.危险废物类别 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"pollutants-col pollutants-col--direction\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ solid.污染治理措施 || '无' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- 选择模式下的复选框 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"pollutants-select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 除污染物外基本信息 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"baseinfo__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ item.label }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--  如果是提取的数据，显示绿色小标签 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"item.source === 'extracted'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"extract-tag\">已提取</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput class=\"form-item__input\" v-model=\"item.value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" :clearable=\"true\" />\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectMode\" class=\"form-item__select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox :checked=\"selectedIds.includes(item.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelected(item.id)\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 标识牌信息生成 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#fb923c\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">排污标识牌（下载与业主确认排污口信息）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => { generateSignboard(); showSignboard = true }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>标识牌信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboard\" class=\"btn btn--primary\" @tap=\"downBiaoShi\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>下载</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"showSignboard\" class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"currentStep = 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"redo-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text>生成监测方案</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<!-- 标识牌信息列表 -->\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"showSignboard\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<template v-for=\"(sec, si) in signboard.sections\" :key=\"'s'+si\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row table-row--simple\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-td table-td--section\">{{ sec.block }}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 只有噪声才可以新增 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"sec.block == '噪声'\" class=\"pw-ico icon-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => addSignItem(si)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 按组渲染，每组 3 条，除了危废以外 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(group, gi) in groupItems(sec.items, sec.block)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'g'+si+'-'+gi\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 普通 3 条 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(it, ii) in group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'r'+si+'-'+gi+'-'+ii\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"内容标题\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.content\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 删除按钮：只有「非危险废物」才显示 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"sec.block !== '危险废物'\" class=\"form-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"margin-bottom:12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"justify-content:flex-end;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeGroup(sec, gi)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤1: 监测方案 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 1\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">监测方案</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">AI帮您制定监测方案</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">请点击下方按钮为您生成智能检测方案</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"action-row\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"saveMonitorPlan\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>生成监测方案</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<!-- 生成后可点 -->\r\n\t\t\t\t\t\t\t\t\t<button v-if=\"canDownload\" class=\"btn btn--secondary\" @tap=\"downloadPlan\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t<text>下载报告</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-if=\"plan\" class=\"paln-preview\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"preview-header\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmark-circle\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"preview-title\">环保验收监测方案已为您已生成！</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"preview-content\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"preview-text\">环保验收监测方案已生成，包含以下内容：</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-sections\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 项目基本情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 环保设施建设情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 污染物详细情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 方案已下载，到文件保存位置查看</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t<!-- 步骤2: 提资单比对 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 2\" class=\"content-section\">\r\n\t\t\t\t\t\t<!-- 环保资料提交管理系统界面 -->\r\n\t\t\t\t\t\t<view class=\"tizidan-container\">\r\n\t\t\t\t\t\t\t<view class=\"tizidan-header\">\r\n\t\t\t\t\t\t\t\t<text class=\"tizidan-title\">环保资料提交管理系统</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tizidan-subtitle\">请按要求提交相关环保资料</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 加载失败提示 -->\r\n\t\t\t\t\t\t\t<view v-if=\"tizidanItems.length === 0\" class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"refresh\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t<text class=\"empty-text\">加载失败，请重新刷新！</text>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"fetchTizidanData\">\r\n\t\t\t\t\t\t\t\t\t<uni-icons type=\"refresh\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t<text>重新加载</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 正常内容 -->\r\n\t\t\t\t\t\t\t<view v-else class=\"tizidan-content\">\r\n\t\t\t\t\t\t\t\t<view v-for=\"(item, index) in tizidanItems\" :key=\"index\" class=\"tizidan-item-card\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"tizidan-item-content\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"tizidan-item-number\">{{ index + 1 }}.</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"tizidan-item-text\">{{ item.text }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"tizidan-item-status\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"tizidan-status-text\"\r\n\t\t\t\t\t\t\t\t\t\t\t:class=\"item.submitted ? 'tizidan-submitted' : 'tizidan-unsubmitted'\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ item.submitted ? '已提交' : '未提交' }}\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button v-if=\"!item.submitted\" class=\"tizidan-submit-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"submitTizidanItem(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t提交\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"tizidan-footer\">\r\n\t\t\t\t\t\t\t\t<text class=\"tizidan-footer-text\">请确保所有资料完整准确</text>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"downloadFile(downloadUrls.acceptance_report, '验收报告提资单.docx')\"\r\n\t\t\t\t\t\t\t\t\t:disabled=\"!downloadUrls.acceptance_report\">\r\n\t\t\t\t\t\t\t\t\t下载验收报告提资单\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"downloadFile(downloadUrls.comparison_list, '建设内容详细对比清单.docx')\"\r\n\t\t\t\t\t\t\t\t\t:disabled=\"!downloadUrls.comparison_list\">\r\n\t\t\t\t\t\t\t\t\t下载建设内容详细对比清单\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤3: 现场踏勘比对 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 3\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">现场踏勘比对</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-label\">现场踏勘记录</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"form-tip\">记录现场踏勘发现的问题和差异</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- Tab切换 -->\r\n\t\t\t\t\t\t\t\t<view class=\"reconnoitre-tabs\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"tabs-container\">\r\n\t\t\t\t\t\t\t\t\t\t<view v-for=\"(tab, index) in tabs\" :key=\"index\" class=\"tab-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t:class=\"{ 'tab-item--active': currentTab === index }\"\r\n\t\t\t\t\t\t\t\t\t\t\t@tap=\"handleTabChange(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"tab-label\">{{ tab }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 现场踏勘四个功能 -->\r\n\t\t\t\t\t\t\t\t<view class=\"reconnoitre-content\">\r\n\t\t\t\t\t\t\t\t\t<scroll-view class=\"content-scroll\" scroll-y>\r\n\t\t\t\t\t\t\t\t\t\t<!-- Tab 0: 主要建设内容 -->\r\n\t\t\t\t\t\t\t\t\t\t<view v-show=\"currentTab === 0\" class=\"content-section\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-title\">主要建设内容</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"openAddMainContent\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"selectModeMain\" class=\"btn btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!selectedMainIds.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"removeSelectedMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>删除选中（{{ selectedMainIds.length }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"toggleSelectModeMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"selectModeMain ? 'clear' : 'checkbox'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"16\" color=\"#155e3b\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>{{ selectModeMain ? '取消' : '选择删除' }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"mainContentTable.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\" v-for=\"(item, idx) in mainContentTable\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"baseinfo__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"form-item__label\">{{ item.label }}</text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 图片类型字段 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"item.type === 'image'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-item__image-upload\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"item.value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileMediatype=\"image\" mode=\"grid\" :limit=\"9\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-upload=\"false\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 普通文本字段 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-else class=\"form-item__input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"item.value\" placeholder=\"请输入具体的值\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"true\" />\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"selectModeMain\" class=\"form-item__select\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"selectedMainIds.includes(item.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => toggleSelectedMain(item.id)\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">暂无建设内容</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击新增按钮添加建设内容</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t<!-- Tab 1: 设备列表情况 -->\r\n\t\t\t\t\t\t\t\t\t\t<view v-show=\"currentTab === 1\" class=\"content-section\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-title\">设备列表情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"addEquipment\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增设备</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"fetchEquipmentData\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"loadingEquipment\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:type=\"loadingEquipment ? 'spinner-cycle' : 'refresh'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>{{ loadingEquipment ? '加载中...' : '刷新数据' }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 加载状态 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"loadingEquipment\" class=\"loading-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"48\" color=\"#166534\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"loading-icon\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"loading-text\">正在加载设备数据...</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 错误状态 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else-if=\"fetchEquipmentError\" class=\"error-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"close-circle\" size=\"48\" color=\"#dc2626\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"error-text\">加载失败: {{ fetchEquipmentError }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--secondary\" @tap=\"fetchEquipmentData\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>重新加载</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 数据表格 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else-if=\"equipmentList.length\" class=\"data-table-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<scroll-view class=\"data-table-scroll\" scroll-x>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-name\">设备名称</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-quantity\">数量</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-remark\">备注</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-images\">图片</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-actions\">操作</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in equipmentList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.name\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"设备名称\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-quantity\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.quantity\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"数量\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-remark\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.remark\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"备注\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-images\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"item.images\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileMediatype=\"image\" mode=\"grid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:limit=\"3\" :auto-upload=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"file-picker\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeEquipment(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">暂无设备信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击新增按钮添加设备，或刷新数据从接口获取</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t<!-- Tab 2: 污染物设施情况 -->\r\n\t\t\t\t\t\t\t\t\t\t<view v-show=\"currentTab === 2\" class=\"content-section\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"flag\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-title\">污染物设施情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"addPollutionFacility\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增设施</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"pollutionFacilityList.length\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"data-table-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<scroll-view class=\"data-table-scroll\" scroll-x>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-name\">设施名称</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-quantity\">数量</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-remark\">备注</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-images\">图片</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"table-th device-actions\">操作</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in pollutionFacilityList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.name\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"设施名称\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-quantity\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.quantity\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"数量\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-remark\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"item.remark\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"备注\" :clearable=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-input\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-images\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"item.images\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileMediatype=\"image\" mode=\"grid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:limit=\"3\" :auto-upload=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"file-picker\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-td device-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removePollutionFacility(index)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"flag\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">暂无污染物设施信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击新增按钮添加设施</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t<!-- Tab 3: 排污口情况 -->\r\n\t\t\t\t\t\t\t\t\t\t<view v-show=\"currentTab === 3\" class=\"content-section\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"water\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-title\">排污口情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <button class=\"btn btn--primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => { generateSignboard(); showSignboard = true }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"eye-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>排污口信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <button class=\"btn btn--primary\" @tap=\"generateOutletInfo\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>生成排污口信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 排污口标识牌信息列表 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"showSignboard\" class=\"data-table\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template v-for=\"(sec, si) in signboard.sections\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'s'+si\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"table-row table-row--simple\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table-td table-td--section\">{{ sec.block }}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 只有噪声才可以新增 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"sec.block == '噪声'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"pw-ico icon-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => addSignItem(si)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text>新增</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-grid form-grid--base\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 按组渲染，每组 3 条，除了危废以外 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(group, gi) in groupItems(sec.items, sec.block)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'g'+si+'-'+gi\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 普通 3 条 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"(it, ii) in group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"'r'+si+'-'+gi+'-'+ii\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"内容标题\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-easyinput v-model=\"it.content\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入具体的值\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- 删除按钮：只有「非危险废物」才显示 -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"sec.block !== '危险废物'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"margin-bottom:12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"form-item__row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"justify-content:flex-end;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"icon-btn icon-btn--danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"() => removeGroup(sec, gi)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"#d92d20\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"water\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-text\">排污口信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"empty-tip\">点击生成按钮获取排污口信息</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"subsection\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"subsection-head\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"subsection-title\">现场踏勘比对清单</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"section-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateFieldworkComparison\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"gear\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>生成详细比对清单</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 步骤4: 竣工验收报告 -->\r\n\t\t\t\t\t<view v-show=\"currentStep === 4\" class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-card\">\r\n\t\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"document\" size=\"20\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t<text class=\"section-title\">竣工验收报告</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"section-body\">\r\n\t\t\t\t\t\t\t\t<view class=\"report-generation\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"generation-options\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\">报告类型</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<radio-group class=\"radio-group\" @change=\"onReportTypeChange\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"radio-item\" v-for=\"type in reportTypes\" :key=\"type.value\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<radio :value=\"type.value\" :checked=\"reportType === type.value\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"radio-text\">{{ type.text }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</radio-group>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"option-group\" v-if=\"reportType === 'withData'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"option-label\"> 上传监测报告</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-file-picker v-model=\"testReportFiles\" fileMediatype=\"all\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:auto-upload=\"false\" :limit=\"3\">\r\n\t\t\t\t\t\t\t\t\t\t\t</uni-file-picker>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"generation-actions\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn--primary\" @tap=\"generateAcceptanceReport\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"cloud-download-filled\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text>生成验收报告</text>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"reportGenerated\" class=\"report-preview\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t<uni-icons type=\"checkmark-circle\" size=\"18\" color=\"#166534\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-title\">报告生成完成</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"preview-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"preview-text\">竣工验收报告已生成，包含以下内容：</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"preview-sections\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 项目基本情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 环保设施建设情况</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 监测结果分析</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"section-item\">• 验收结论</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"reportType === 'withData'\" class=\"section-item\">•\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t检测数据附件</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 底部导航 -->\r\n\t\t\t<view class=\"acceptance-navigation\">\r\n\t\t\t\t<view class=\"nav-buttons\">\r\n\t\t\t\t\t<button class=\"btn btn--ghost\" :disabled=\"currentStep === 0\" @tap=\"prevStep\">\r\n\t\t\t\t\t\t<uni-icons type=\"left\" size=\"16\" color=\"#5b6b7b\" />\r\n\t\t\t\t\t\t<text>上一步</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"btn btn--primary\" :disabled=\"currentStep === stepNames.length - 1\" @tap=\"nextStep\">\r\n\t\t\t\t\t\t<text>下一步</text>\r\n\t\t\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#ffffff\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</app-layout>\r\n\r\n\t<!-- 新增项目基本信息弹窗 -->\r\n\t<uni-popup ref=\"newBaseInfoPopup\" type=\"center\">\r\n\t\t<view class=\"modal\">\r\n\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t<text class=\"modal-title\">新增项目基本信息</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"modal-body\">\r\n\t\t\t\t<text class=\"modal-description\">请在下方输入信息名称</text>\r\n\t\t\t\t<uni-easyinput v-model=\"newBaseInfoLabel\" placeholder=\"如：项目名称/单位名称\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t<button class=\"btn btn--ghost\" @tap=\"closeBaseInfo\">取消</button>\r\n\t\t\t\t<button class=\"btn btn--primary\" @tap=\"confirmAddBaseInfo\">确定</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-popup>\r\n\r\n\t<!-- 任务进度弹窗 -->\r\n\t<TaskProgressModal ref=\"taskProgressModal\" :title=\"taskProgressTitle\" :progress=\"taskProgress\"\r\n\t\t:statusText=\"taskStatusText\" :state=\"taskState\" :cancelable=\"false\" />\r\n\r\n\t<!-- 项目选择弹窗 -->\r\n\t<uni-popup ref=\"projectPickerPopup\" type=\"center\" :mask-click=\"true\">\r\n\t\t<view class=\"project-picker-modal\">\r\n\t\t\t<view class=\"picker-header\">\r\n\t\t\t\t<text class=\"picker-title\">选择项目</text>\r\n\t\t\t\t<view class=\"picker-close\" @tap=\"closeProjectPicker\">\r\n\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#6b7280\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<view class=\"picker-search\">\r\n\t\t\t\t<uni-easyinput v-model=\"projectSearchKeyword\" placeholder=\"搜索项目名称...\" prefixIcon=\"search\"\r\n\t\t\t\t\t:clearable=\"true\" @input=\"onSearchInput\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 项目统计 -->\r\n\t\t\t<view class=\"picker-stats\">\r\n\t\t\t\t<text class=\"stats-text\">\r\n\t\t\t\t\t共 {{ filteredProjects.length }} 个项目\r\n\t\t\t\t\t<text v-if=\"projectSearchKeyword\" class=\"stats-highlight\">\r\n\t\t\t\t\t\t（搜索结果）\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 项目列表 -->\r\n\t\t\t<scroll-view class=\"picker-list\" scroll-y>\r\n\t\t\t\t<view v-for=\"project in filteredProjects\" :key=\"project.id\" class=\"picker-item\"\r\n\t\t\t\t\t:class=\"{ 'picker-item--active': selectedProjectId === project.id }\" @tap=\"selectProject(project)\">\r\n\t\t\t\t\t<view class=\"picker-item-icon\">\r\n\t\t\t\t\t\t<uni-icons type=\"folder\" size=\"22\"\r\n\t\t\t\t\t\t\t:color=\"selectedProjectId === project.id ? '#166534' : '#6b7280'\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"picker-item-content\">\r\n\t\t\t\t\t\t<text class=\"picker-item-name\">{{ project.name }}</text>\r\n\t\t\t\t\t\t<text v-if=\"project.description\" class=\"picker-item-desc\">\r\n\t\t\t\t\t\t\t{{ project.description }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<view v-if=\"project.folder_name\" class=\"picker-item-meta\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"14\" color=\"#9ca3af\" />\r\n\t\t\t\t\t\t\t<text class=\"meta-text\">{{ project.folder_name }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"picker-item-action\">\r\n\t\t\t\t\t\t<view v-if=\"selectedProjectId === project.id\" class=\"selected-badge\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"checkmarkempty\" size=\"18\" color=\"#ffffff\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<uni-icons v-else type=\"right\" size=\"16\" color=\"#d1d5db\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 空状态 -->\r\n\t\t\t\t<view v-if=\"filteredProjects.length === 0\" class=\"picker-empty\">\r\n\t\t\t\t\t<uni-icons type=\"search\" size=\"48\" color=\"#cbd5e1\" />\r\n\t\t\t\t\t<text class=\"picker-empty-text\">\r\n\t\t\t\t\t\t{{ projectSearchKeyword ? '未找到匹配的项目' : '暂无项目' }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t\t<text v-if=\"projectSearchKeyword\" class=\"picker-empty-tip\">\r\n\t\t\t\t\t\t试试其他关键词或清空搜索\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</uni-popup>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tcomputed,\r\n\t\tnextTick,\r\n\t\twatch,\r\n\t\tonUnmounted\r\n\t} from 'vue'\r\n\timport {\r\n\t\tusePlatformInfo\r\n\t} from '@/utils/platform'\r\n\timport AppLayout from '@/components/layout/AppLayout.vue'\r\n\timport {\r\n\t\tonShow,\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\r\n\timport TaskProgressModal from '@/components/message-pop-up/TaskProgressModal.vue'\r\n\timport {\r\n\t\tnavTitleStore\r\n\t} from '@/stores/navTitle.js'\r\n\timport {\r\n\t\trunTask,\r\n\t\ttransformExtractResult,\r\n\t\tdownloadSignboardWord,\r\n\t\tgenerateMonitorPlan,\r\n\t\tdownloadMonitorPlan\r\n\t} from '@/api/acceptance.js'\r\n\r\n\t//手机端头部页面标题\r\n\tconst navTitle = navTitleStore()\r\n\tonShow(() => navTitle.setTitle('环评项目竣工验收'))\r\n\r\n\t//手机页面规定\r\n\tconst {\r\n\t\tisMobile\r\n\t} = usePlatformInfo()\r\n\r\n\t// 任务进度弹窗相关状态\r\n\tconst taskProgressModal = ref(null)\r\n\tconst taskProgressTitle = ref('信息提取中')\r\n\tconst taskProgress = ref(0)\r\n\tconst taskStatusText = ref('正在初始化...')\r\n\tconst taskState = ref('running')\r\n\r\n\r\n\t// 每个步骤定义--------------------------\r\n\t// 步骤标题\r\n\tconst stepNames = ['资料上传与基本信息', '监测方案', '提资单比对', '现场踏勘比对', '竣工验收报告']\r\n\r\n\t// 默认从第一步开始(0)\r\n\tconst currentStep = ref(0)\r\n\r\n\t// 手机端步骤选择\r\n\tconst stepNamesDisplay = computed(() => stepNames.map((n, i) => stepDone(i) ? (n + ' ✓') : n))\r\n\tconst stepSelectOptions = computed(() => stepNames.map((n, i) => ({\r\n\t\ttext: stepDone(i) ? (n + ' ✓') : n,\r\n\t\tvalue: i\r\n\t})))\r\n\r\n\t// 步骤更改时\r\n\tfunction onStepChange(e) {\r\n\t\tconst idx = Number(e?.currentIndex ?? e?.detail?.currentIndex ?? 0);\r\n\t\tif (!Number.isNaN(idx)) currentStep.value = idx\r\n\t}\r\n\r\n\t// 上一步按钮\r\n\tfunction prevStep() {\r\n\t\tif (currentStep.value > 0) currentStep.value -= 1\r\n\t}\r\n\t// 下一步按钮\r\n\tfunction nextStep() {\r\n\t\tif (currentStep.value < stepNames.length - 1) currentStep.value += 1\r\n\t}\r\n\r\n\t// 步骤完成值\r\n\tconst extractionOk = ref(false)\r\n\r\n\t// 所有步骤的完成度\r\n\tfunction stepDone(i) {\r\n\t\tswitch (i) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn extractionOk.value;\r\n\t\t\tcase 1:\r\n\t\t\t\treturn datasheet.value.length > 0;\r\n\t\t\tcase 2:\r\n\t\t\t\treturn tizidanItems.value.some(item => item.submitted);\r\n\t\t\tcase 3:\r\n\t\t\t\treturn fieldworkComparison.value.length > 0;\r\n\t\t\tcase 4:\r\n\t\t\t\treturn reportGenerated.value;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\t// 以下提取项目基本信息模块的方法-------------------------\r\n\r\n\t// 项目选择相关\r\n\tconst selectedProjectId = ref(null) // 选中的项目ID\r\n\tconst selectedProject = ref(null) // 选中的项目对象\r\n\tconst projectList = ref([]) // 完整项目列表\r\n\tconst projectFiles = ref([]) // 项目文件列表\r\n\tconst projectSearchKeyword = ref('') // 搜索关键词\r\n\tconst projectPickerPopup = ref(null) // 弹窗引用\r\n\r\n\t// 文件状态轮询相关\r\n\tconst pollingTimer = ref(null) // 轮询定时器\r\n\tconst isPolling = ref(false) // 是否正在轮询\r\n\tconst pollingCount = ref(0) // 轮询次数\r\n\tconst MAX_POLLING_COUNT = 100 // 最多轮询100次（约5分钟）\r\n\tconst POLLING_INTERVAL = 3000 // 轮询间隔（3秒）\r\n\r\n\t// 过滤后的项目列表（根据搜索关键词）\r\n\tconst filteredProjects = computed(() => {\r\n\t\tif (!projectSearchKeyword.value) {\r\n\t\t\treturn projectList.value\r\n\t\t}\r\n\t\tconst keyword = projectSearchKeyword.value.toLowerCase().trim()\r\n\t\treturn projectList.value.filter(project => {\r\n\t\t\tconst name = (project.name || '').toLowerCase()\r\n\t\t\tconst desc = (project.description || '').toLowerCase()\r\n\t\t\tconst folder = (project.folder_name || '').toLowerCase()\r\n\t\t\treturn name.includes(keyword) || desc.includes(keyword) || folder.includes(keyword)\r\n\t\t})\r\n\t})\r\n\r\n\t// 打开项目选择器弹窗\r\n\tfunction openProjectPicker() {\r\n\t\tif (projectList.value.length === 0) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '暂无项目，请先创建项目',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tprojectSearchKeyword.value = '' // 清空搜索\r\n\t\tprojectPickerPopup.value?.open()\r\n\t}\r\n\r\n\t// 关闭项目选择器弹窗\r\n\tfunction closeProjectPicker() {\r\n\t\tprojectPickerPopup.value?.close()\r\n\t}\r\n\r\n\t// 选择项目\r\n\tasync function selectProject(project) {\r\n\t\tselectedProjectId.value = project.id\r\n\t\tselectedProject.value = project\r\n\t\tconsole.log('选择项目:', project.name)\r\n\r\n\t\t// 保存到 localStorage，刷新后自动恢复\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem('acceptance_selected_project_id', project.id.toString())\r\n\t\t\tconsole.log('✅ 已保存项目选择到本地存储')\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn('⚠️ 保存项目选择失败:', e)\r\n\t\t}\r\n\r\n\t\t// 关闭弹窗\r\n\t\tcloseProjectPicker()\r\n\r\n\t\t// 停止之前的轮询（如果有）\r\n\t\tstopPolling()\r\n\r\n\t\t// 加载项目文件列表\r\n\t\tawait loadProjectFiles(project.id)\r\n\r\n\t\t// 加载完成后，检查是否需要启动轮询\r\n\t\tstartPollingFileStatus(project.id)\r\n\r\n\t\t// 加载该项目的缓存数据\r\n\t\tloadProjectCache(project.id)\r\n\r\n\t\t// 显示成功提示\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `已选择：${project.name}`,\r\n\t\t\ticon: 'success',\r\n\t\t\tduration: 1500\r\n\t\t})\r\n\t}\r\n\r\n\t// 搜索输入处理\r\n\tfunction onSearchInput(e) {\r\n\t\t// 实时搜索，无需额外处理\r\n\t\tconsole.log('搜索关键词:', projectSearchKeyword.value)\r\n\t}\r\n\r\n\t// ========== 文件状态轮询功能 ==========\r\n\r\n\t// 检查是否有文件正在处理\r\n\tfunction hasProcessingFiles() {\r\n\t\treturn projectFiles.value.some(file =>\r\n\t\t\t!['indexed', 'failed'].includes(file.status)\r\n\t\t)\r\n\t}\r\n\r\n\t// 开始轮询文件状态\r\n\tfunction startPollingFileStatus(projectId) {\r\n\t\t// 如果没有文件在处理，不需要轮询\r\n\t\tif (!hasProcessingFiles()) {\r\n\t\t\t// console.log('✅ 所有文件已处理完成，无需轮询')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 防止重复轮询\r\n\t\tif (isPolling.value) {\r\n\t\t\tconsole.log('⚠️ 已在轮询中，跳过')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tisPolling.value = true\r\n\t\tpollingCount.value = 0\r\n\r\n\t\tconst processingCount = projectFiles.value.filter(f =>\r\n\t\t\t!['indexed', 'failed'].includes(f.status)\r\n\t\t).length\r\n\r\n\t\t// console.log(`🔄 开始轮询项目 ${projectId} 的文件状态...`)\r\n\t\t// console.log(`   还有 ${processingCount} 个文件正在处理`)\r\n\r\n\t\tpollingTimer.value = setInterval(async () => {\r\n\t\t\tpollingCount.value++\r\n\r\n\t\t\t// 超过最大次数，停止轮询\r\n\t\t\tif (pollingCount.value > MAX_POLLING_COUNT) {\r\n\t\t\t\tconsole.log('⏰ 达到最大轮询次数，停止轮询')\r\n\t\t\t\tstopPolling()\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '文件处理超时，请手动刷新',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\t// 静默重新加载文件列表（不显示 loading）\r\n\t\t\t\tawait loadProjectFiles(projectId, true)\r\n\r\n\t\t\t\t// 检查是否所有文件都处理完成\r\n\t\t\t\tif (!hasProcessingFiles()) {\r\n\t\t\t\t\tconsole.log('✅ 所有文件处理完成，停止轮询')\r\n\t\t\t\t\tstopPolling()\r\n\r\n\t\t\t\t\t// 显示成功提示\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '文件处理完成',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 统计处理中的文件\r\n\t\t\t\t\tconst processing = projectFiles.value.filter(f =>\r\n\t\t\t\t\t\t!['indexed', 'failed'].includes(f.status)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t// console.log(`🔄 [轮询 ${pollingCount.value}] 还有 ${processing.length} 个文件正在处理...`)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('❌ 轮询文件状态失败:', error)\r\n\t\t\t\t// 不停止轮询，继续尝试\r\n\t\t\t}\r\n\t\t}, POLLING_INTERVAL)\r\n\t}\r\n\r\n\t// 停止轮询\r\n\tfunction stopPolling() {\r\n\t\tif (pollingTimer.value) {\r\n\t\t\tclearInterval(pollingTimer.value)\r\n\t\t\tpollingTimer.value = null\r\n\t\t}\r\n\t\tisPolling.value = false\r\n\t\tpollingCount.value = 0\r\n\t\t// console.log('⏹️ 轮询已停止')\r\n\t}\r\n\r\n\t// 加载项目列表\r\n\tasync function loadProjects() {\r\n\t\ttry {\r\n\t\t\tconst {\r\n\t\t\t\tgetProjects\r\n\t\t\t} = await import('@/api/project.js')\r\n\t\t\tconst response = await getProjects()\r\n\r\n\t\t\tprojectList.value = response || []\r\n\r\n\t\t\t// console.log('项目列表加载成功:', projectList.value.length, '个项目')\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载项目列表失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载项目列表失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// 加载项目文件列表\r\n\tasync function loadProjectFiles(projectId, silent = false) {\r\n\t\ttry {\r\n\t\t\t// 非静默模式显示 loading\r\n\t\t\tif (!silent) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载文件列表...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tconst {\r\n\t\t\t\tgetProjectDocuments\r\n\t\t\t} = await import('@/api/project.js')\r\n\t\t\tconst response = await getProjectDocuments(projectId)\r\n\r\n\t\t\t// 确保 projectFiles 始终是数组\r\n\t\t\t// 后端可能返回 { documents: [...], total: 10 } 或直接返回数组\r\n\t\t\tif (Array.isArray(response)) {\r\n\t\t\t\tprojectFiles.value = response\r\n\t\t\t} else if (response && Array.isArray(response.documents)) {\r\n\t\t\t\tprojectFiles.value = response.documents\r\n\t\t\t} else {\r\n\t\t\t\tprojectFiles.value = []\r\n\t\t\t}\r\n\r\n\t\t\t// console.log('项目文件列表:', projectFiles.value)\r\n\r\n\t\t\tif (!silent) {\r\n\t\t\t\tuni.hideLoading()\r\n\r\n\t\t\t\tif (projectFiles.value.length === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '该项目暂无文件',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载项目文件失败:', error)\r\n\t\t\tif (!silent) {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载文件列表失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tprojectFiles.value = [] // 确保出错时也是数组\r\n\t\t}\r\n\t}\r\n\r\n\t// 文件图标映射\r\n\tfunction getFileIcon(extension) {\r\n\t\tconst ext = (extension || '').toLowerCase().replace('.', '')\r\n\t\tconst iconMap = {\r\n\t\t\t'pdf': 'paperplane',\r\n\t\t\t'doc': 'compose',\r\n\t\t\t'docx': 'compose',\r\n\t\t\t'xls': 'bars',\r\n\t\t\t'xlsx': 'bars',\r\n\t\t\t'ppt': 'image',\r\n\t\t\t'pptx': 'image',\r\n\t\t\t'md': 'compose',\r\n\t\t\t'txt': 'compose',\r\n\t\t\t'jpg': 'image',\r\n\t\t\t'jpeg': 'image',\r\n\t\t\t'png': 'image',\r\n\t\t\t'gif': 'image'\r\n\t\t}\r\n\t\treturn iconMap[ext] || 'paperclip'\r\n\t}\r\n\r\n\t// 格式化文件大小\r\n\tfunction formatFileSize(bytes) {\r\n\t\tif (!bytes) return '0 B'\r\n\t\tconst k = 1024\r\n\t\tconst sizes = ['B', 'KB', 'MB', 'GB']\r\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\r\n\t\treturn Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i]\r\n\t}\r\n\r\n\t// 格式化文件状态\r\n\tfunction formatFileStatus(status) {\r\n\t\tconst statusMap = {\r\n\t\t\t'uploaded': '已上传',\r\n\t\t\t'converting': '转换中',\r\n\t\t\t'converted': '已转换',\r\n\t\t\t'vectorizing': '向量化中',\r\n\t\t\t'indexed': '已索引',\r\n\t\t\t'failed': '处理失败'\r\n\t\t}\r\n\t\treturn statusMap[status] || status\r\n\t}\r\n\r\n\t// 获取状态文本\r\n\tfunction getStatusText(status) {\r\n\t\tconst statusMap = {\r\n\t\t\t'uploaded': '已上传',\r\n\t\t\t'converting': '转换中',\r\n\t\t\t'converted': '已转换',\r\n\t\t\t'vectorizing': '处理中',\r\n\t\t\t'indexed': '✓ 已就绪',\r\n\t\t\t'failed': '失败'\r\n\t\t}\r\n\t\treturn statusMap[status] || status\r\n\t}\r\n\r\n\t// 获取状态样式类\r\n\tfunction getStatusClass(status) {\r\n\t\tconst classMap = {\r\n\t\t\t'uploaded': 'status-uploaded',\r\n\t\t\t'converting': 'status-processing',\r\n\t\t\t'converted': 'status-processing',\r\n\t\t\t'vectorizing': 'status-processing',\r\n\t\t\t'indexed': 'status-success',\r\n\t\t\t'failed': 'status-error'\r\n\t\t}\r\n\t\treturn classMap[status] || ''\r\n\t}\r\n\r\n\t// 加载项目缓存数据\r\n\tfunction loadProjectCache(projectId) {\r\n\t\tif (!projectId) return\r\n\r\n\t\tconst cacheKey = `project_base_info_${projectId}`\r\n\t\tconst cachedData = uni.getStorageSync(cacheKey)\r\n\r\n\t\tif (cachedData) {\r\n\t\t\ttry {\r\n\t\t\t\tbaseTable.value = JSON.parse(cachedData)\r\n\t\t\t\textractionOk.value = true\r\n\t\t\t\tconsole.log(`✅ 已加载项目 ${projectId} 的缓存数据`)\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已加载缓存数据',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t})\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('解析缓存数据失败:', error)\r\n\t\t\t\tbaseTable.value = []\r\n\t\t\t\textractionOk.value = false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// 没有缓存，清空数据\r\n\t\t\tbaseTable.value = []\r\n\t\t\textractionOk.value = false\r\n\t\t\tconsole.log(`ℹ️ 项目 ${projectId} 暂无缓存数据`)\r\n\t\t}\r\n\t}\r\n\r\n\t// 清除当前项目的缓存\r\n\tfunction clearProjectCache() {\r\n\t\tif (!selectedProjectId.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先选择项目',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '清除缓存',\r\n\t\t\tcontent: '确定要清除当前项目的缓存数据吗？清除后需要重新提取信息。',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tconst cacheKey = `project_base_info_${selectedProjectId.value}`\r\n\t\t\t\t\tuni.removeStorageSync(cacheKey)\r\n\r\n\t\t\t\t\t// 清空当前显示的数据\r\n\t\t\t\t\tbaseTable.value = []\r\n\t\t\t\t\textractionOk.value = false\r\n\r\n\t\t\t\t\tconsole.log(`🗑️ 已清除项目 ${selectedProjectId.value} 的缓存`)\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '缓存已清除',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 页面加载时获取项目列表\r\n\tonLoad(async () => {\r\n\t\tawait loadProjects()\r\n\r\n\t\t// 尝试恢复上次选择的项目\r\n\t\ttry {\r\n\t\t\tconst savedProjectId = localStorage.getItem('acceptance_selected_project_id')\r\n\r\n\t\t\tif (savedProjectId) {\r\n\t\t\t\tconst projectId = parseInt(savedProjectId)\r\n\t\t\t\tconst project = projectList.value.find(p => p.id === projectId)\r\n\r\n\t\t\t\tif (project) {\r\n\t\t\t\t\t// console.log('🔄 恢复上次选择的项目:', project.name)\r\n\t\t\t\t\t// 自动选择该项目（不显示提示，静默恢复）\r\n\t\t\t\t\tselectedProjectId.value = project.id\r\n\t\t\t\t\tselectedProject.value = project\r\n\r\n\t\t\t\t\t// 加载项目文件列表\r\n\t\t\t\t\tawait loadProjectFiles(project.id)\r\n\r\n\t\t\t\t\t// 启动轮询\r\n\t\t\t\t\tstartPollingFileStatus(project.id)\r\n\r\n\t\t\t\t\t// 加载缓存\r\n\t\t\t\t\tloadProjectCache(project.id)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 项目不存在，清除保存的ID\r\n\t\t\t\t\t// console.log('⚠️ 上次选择的项目已不存在，清除保存的ID')\r\n\t\t\t\t\tlocalStorage.removeItem('acceptance_selected_project_id')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn('⚠️ 恢复项目选择失败:', e)\r\n\t\t}\r\n\t})\r\n\r\n\t// 页面卸载时停止轮询\r\n\tonUnmounted(() => {\r\n\t\tstopPolling()\r\n\t\tconsole.log('📄 页面卸载，清理轮询定时器')\r\n\t})\r\n\r\n\t// 监听项目切换，停止旧项目的轮询\r\n\twatch(selectedProjectId, (newId, oldId) => {\r\n\t\tif (oldId && newId !== oldId) {\r\n\t\t\tstopPolling()\r\n\t\t\tconsole.log('🔄 切换项目，停止旧项目的轮询')\r\n\t\t}\r\n\t})\r\n\r\n\tconst extracting = ref(false) // 提取状态\r\n\tconst extractError = ref('') // 提取错误状态\r\n\r\n\r\n\r\n\t/* 提取信息的进度条 - 智能平滑进度版本（使用自定义弹窗）*/\r\n\t// 进度平滑处理\r\n\tlet smoothProgressTimer = null\r\n\tlet currentDisplayProgress = 0 // 当前显示的进度\r\n\tlet targetProgress = 0 // 目标进度（后端返回的真实进度）\r\n\tlet lastTargetProgress = 0 // 上一次的目标进度（用于检测是否真的更新了）\r\n\tlet lastUpdateTime = 0 // 上次后端真正更新进度的时间\r\n\r\n\t// 平滑更新进度条（智能版 - 更新响应式变量）\r\n\tfunction updateProgressSmooth(newProgress, statusText, state = 'running') {\r\n\t\t// 检查进度是否真的变化了\r\n\t\tconst progressChanged = newProgress !== lastTargetProgress\r\n\r\n\t\t// 更新目标进度和状态\r\n\t\ttargetProgress = newProgress\r\n\t\ttaskStatusText.value = statusText\r\n\t\ttaskState.value = state\r\n\r\n\t\t// 只有进度真的变化了，才更新时间戳\r\n\t\tif (progressChanged) {\r\n\t\t\tlastUpdateTime = Date.now()\r\n\t\t\tlastTargetProgress = newProgress\r\n\t\t\tconsole.log(`[进度真实更新] ${newProgress}% - ${statusText}`)\r\n\t\t}\r\n\r\n\t\t// 如果没有平滑计时器，启动一个\r\n\t\tif (!smoothProgressTimer) {\r\n\t\t\tsmoothProgressTimer = setInterval(() => {\r\n\t\t\t\tconst now = Date.now()\r\n\t\t\t\tconst timeSinceLastUpdate = now - lastUpdateTime // 距离上次真实更新的时间（毫秒）\r\n\r\n\t\t\t\t// 🎯 核心逻辑：智能增长\r\n\t\t\t\tif (currentDisplayProgress < targetProgress) {\r\n\t\t\t\t\t// 情况1：当前进度小于目标进度，快速追赶\r\n\t\t\t\t\tconst diff = targetProgress - currentDisplayProgress\r\n\t\t\t\t\tconst step = Math.max(0.5, diff / 10) // 最小0.5%，最大差值的1/10\r\n\r\n\t\t\t\t\tcurrentDisplayProgress = Math.min(\r\n\t\t\t\t\t\tcurrentDisplayProgress + step,\r\n\t\t\t\t\t\ttargetProgress\r\n\t\t\t\t\t)\r\n\t\t\t\t} else if (currentDisplayProgress >= targetProgress && targetProgress < 100) {\r\n\t\t\t\t\t// 情况2：已经追上目标进度，但任务未完成\r\n\r\n\t\t\t\t\t// 如果后端超过5秒没更新（可能卡住了），缓慢增长给用户反馈\r\n\t\t\t\t\tif (timeSinceLastUpdate > 5000) {\r\n\t\t\t\t\t\t// 缓慢增长，但不超过目标进度+5%\r\n\t\t\t\t\t\tconst maxAllowedProgress = Math.min(targetProgress + 5, 99)\r\n\r\n\t\t\t\t\t\tif (currentDisplayProgress < maxAllowedProgress) {\r\n\t\t\t\t\t\t\t// 每次增长0.1%，非常缓慢\r\n\t\t\t\t\t\t\tcurrentDisplayProgress += 0.1\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t`[缓慢增长] 后端卡在 ${targetProgress}%，前端显示 ${Math.floor(currentDisplayProgress)}%`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 更新弹窗显示的进度\r\n\t\t\t\ttaskProgress.value = Math.floor(currentDisplayProgress)\r\n\r\n\t\t\t\t// 如果已经达到目标且目标是100%，停止计时器\r\n\t\t\t\tif (currentDisplayProgress >= 99.9 && targetProgress >= 100) {\r\n\t\t\t\t\tclearInterval(smoothProgressTimer)\r\n\t\t\t\t\tsmoothProgressTimer = null\r\n\t\t\t\t\tcurrentDisplayProgress = 100\r\n\t\t\t\t\ttaskProgress.value = 100\r\n\t\t\t\t\ttaskState.value = 'success'\r\n\t\t\t\t\ttaskStatusText.value = '信息提取完成'\r\n\r\n\t\t\t\t\t// 1秒后关闭弹窗并显示成功提示\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\ttaskProgressModal.value?.close()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '信息提取完成',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t}, 50) // 每50ms更新一次，保证平滑\r\n\t\t}\r\n\t}\r\n\r\n\t// 清理进度计时器\r\n\tfunction clearProgressTimer() {\r\n\t\tif (smoothProgressTimer) {\r\n\t\t\tclearInterval(smoothProgressTimer)\r\n\t\t\tsmoothProgressTimer = null\r\n\t\t}\r\n\t\tcurrentDisplayProgress = 0\r\n\t\ttargetProgress = 0\r\n\t\tlastTargetProgress = 0\r\n\t\tlastUpdateTime = 0\r\n\t\ttaskProgress.value = 0\r\n\t\ttaskStatusText.value = '正在初始化...'\r\n\t\ttaskState.value = 'running'\r\n\t}\r\n\r\n\t// 提取信息到项目基本表（使用自定义进度弹窗）\r\n\tasync function simulateExtract() {\r\n\t\t// 1. 前置检查：是否选择了项目\r\n\t\tif (!selectedProjectId.value) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '请先选择一个项目',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '知道了'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 2. 检查项目是否有文件\r\n\t\tif (projectFiles.value.length === 0) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '该项目暂无文件，请先在项目管理模块上传文件',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '知道了'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 3. 检查文件是否已索引（至少有一个文件状态为 indexed）\r\n\t\tconst hasIndexedFiles = projectFiles.value.some(file => file.status === 'indexed')\r\n\t\tif (!hasIndexedFiles) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '项目文件正在处理中，请稍后再试',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '知道了'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\textracting.value = true // 开始提取，按钮显示loading\r\n\r\n\t\t// 2. 清理之前的进度状态\r\n\t\tclearProgressTimer()\r\n\r\n\t\t// 3. 初始化弹窗状态并打开\r\n\t\ttaskProgressTitle.value = '信息提取中'\r\n\t\ttaskProgress.value = 0\r\n\t\ttaskStatusText.value = '正在提交任务...'\r\n\t\ttaskState.value = 'pending'\r\n\t\ttaskProgressModal.value?.open()\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await runTask({\r\n\t\t\t\tprojectId: selectedProjectId.value,\r\n\t\t\t\tprojectFolder: selectedProject.value.folder_name,\r\n\t\t\t\t// 进度回调函数：每次后端更新进度时调用\r\n\t\t\t\tonProgress: (progress, statusText, state) => {\r\n\t\t\t\t\t// 使用平滑进度更新（会自动更新响应式变量）\r\n\t\t\t\t\tupdateProgressSmooth(progress, statusText, state)\r\n\t\t\t\t},\r\n\t\t\t\tpollInterval: 3000, // 每3秒轮询一次\r\n\t\t\t\ttimeout: 1800000 // 30分钟超时\r\n\t\t\t})\r\n\r\n\t\t\t// 5. 任务完成，确保进度到100%\r\n\t\t\tupdateProgressSmooth(100, '任务完成', 'success')\r\n\r\n\t\t\t// 6. 数据校验：确保后端真的返回了数据\r\n\t\t\tif (result?.status !== 'success' || !result.result) {\r\n\t\t\t\tthrow new Error(result?.message || '提取失败：后端未返回有效数据')\r\n\t\t\t}\r\n\r\n\t\t\t// 7. 转换数据并填充表格（核心操作）\r\n\t\t\tbaseTable.value = transformExtractResult(result.result)\r\n\r\n\t\t\t// 8. 缓存到本地（关键！使用项目ID作为key，每个项目独立缓存）\r\n\t\t\tconst cacheKey = `project_base_info_${selectedProjectId.value}`\r\n\t\t\tuni.setStorageSync(cacheKey, JSON.stringify(baseTable.value))\r\n\t\t\tconsole.log(`✅ 项目 ${selectedProjectId.value} 的数据已缓存`)\r\n\r\n\t\t\t// 9. 标记提取完成\r\n\t\t\textractionOk.value = true\r\n\r\n\t\t} catch (error) {\r\n\t\t\t// 错误时清除进度计时器并关闭弹窗\r\n\t\t\tclearProgressTimer()\r\n\t\t\ttaskProgressModal.value?.close()\r\n\r\n\t\t\t// 10. 错误分类处理，给用户看得懂的提示\r\n\t\t\tconsole.error('[Extract] 提取失败:', error)\r\n\r\n\t\t\tif (error.message.includes('超时') || error.message.includes('timeout')) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取超时了！',\r\n\t\t\t\t\tcontent: '任务执行时间过长，可能原因：\\n1. 文档过大（建议<50MB）\\n2. 网络不稳定\\n3. 服务器繁忙\\n\\n建议稍后重试或联系管理员',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t} else if (error.message.includes('未提取到')) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取失败',\r\n\t\t\t\t\tcontent: '文档中未找到项目信息，请检查：\\n1. 文件是否为完整的环评报告\\n2. 文件内容是否清晰可读\\n3. 文件格式是否正确',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t} else if (error.message.includes('已有任务在运行')) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '任务进行中',\r\n\t\t\t\t\tcontent: '您已有一个信息提取任务正在运行，请等待完成后再提交新任务',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提取失败',\r\n\t\t\t\t\tcontent: error.message || '无法从文档中提取项目信息，请稍后重试',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\textracting.value = false // 无论成功失败，都要结束loading状态\r\n\t\t}\r\n\t}\r\n\r\n\t// 新增项目基本信息弹窗\r\n\tconst newBaseInfoPopup = ref(null)\r\n\r\n\t// 新增项目基本信息的标题\r\n\tconst newBaseInfoLabel = ref('')\r\n\r\n\t// 新增项目基本信息\r\n\tfunction openAddBase() {\r\n\t\tnewBaseInfoLabel.value = '';\r\n\t\tnewBaseInfoPopup.value?.open?.()\r\n\t}\r\n\r\n\t// 确认新增项目基本信息\r\n\tfunction confirmAddBaseInfo() {\r\n\t\tconst label = (newBaseInfoLabel.value || '').trim();\r\n\t\tif (!label) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入字段名称',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\t\tbaseTable.value.push({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tsection: '',\r\n\t\t\tlabel,\r\n\t\t\tvalue: '',\r\n\t\t\tsource: 'manual',\r\n\t\t\trequired: false,\r\n\t\t});\r\n\t\tnewBaseInfoPopup.value?.close?.()\r\n\t}\r\n\r\n\t// 关闭新增项目基本信息弹窗\r\n\tfunction closeBaseInfo() {\r\n\t\tnewBaseInfoPopup.value?.close?.()\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t// 以下标识牌模块的方法-------------------------\r\n\t//展示标识牌列表\r\n\tconst showSignboard = ref(false)\r\n\r\n\t// 标识牌模块名称以及列表信息\r\n\tconst signboard = reactive({\r\n\t\tsections: [{\r\n\t\t\t\tblock: '废水',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tblock: '废气',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tblock: '噪声',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t}, {\r\n\t\t\t\tblock: '危险废物',\r\n\t\t\t\titems: [{\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t]\r\n\t})\r\n\r\n\t// 生成标识牌信息(从项目基本信息提取)\r\n\tfunction generateSignboard() {\r\n\t\tconst unitName = findBaseValue('建设单位名称') || findBaseValue('单位名称') || '';\r\n\t\tconst wfName = findBaseValue('危废名称') || findBaseValue('危废') || '';\r\n\t\tconst emissionData = baseTable.value.find(x => x.id === 'pollutants_emission')?.value;\r\n\r\n\t\tif (!emissionData || typeof emissionData !== 'object') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '未提取到污染物信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 清空旧数据\r\n\t\tsignboard.sections.forEach(sec => (sec.items = []));\r\n\r\n\t\t// 辅助函数：拆分排污口编号（处理\"DA001、DA002、DA003\"这种情况）\r\n\t\tfunction splitOutletCodes(codeStr) {\r\n\t\t\tif (!codeStr) return [];\r\n\r\n\t\t\t// 无效的排污口编号列表\r\n\t\t\tconst invalidCodes = ['/', '信息待补充', ''];\r\n\r\n\t\t\treturn codeStr\r\n\t\t\t\t.split(/[、,，]/) // 按顿号、逗号分隔\r\n\t\t\t\t.map(c => c.trim()) // 去除空格\r\n\t\t\t\t.filter(c => c && !invalidCodes.includes(c)); // 过滤无效编号\r\n\t\t}\r\n\r\n\t\t// 辅助函数：按排污口编号分组并合并污染物\r\n\t\tfunction groupByOutletCode(list, blockType) {\r\n\t\t\tconst outletMap = new Map(); // key: 排污口编号, value: { pollutants: [], ...otherInfo }\r\n\r\n\t\t\tlist.forEach(item => {\r\n\t\t\t\tconst codes = splitOutletCodes(item['排污口编号']);\r\n\t\t\t\tconst pollutantName = item['污染物名称'] || '';\r\n\t\t\t\tconst wryz = item['污染因子'] || '';\r\n\r\n\t\t\t\tcodes.forEach(code => {\r\n\t\t\t\t\tif (!outletMap.has(code)) {\r\n\t\t\t\t\t\toutletMap.set(code, {\r\n\t\t\t\t\t\t\tpollutants: [],\r\n\t\t\t\t\t\t\twryz: [],\r\n\t\t\t\t\t\t\totherInfo: item // 保存其他信息（如执行标准、排放去向等）\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 合并污染物名称\r\n\t\t\t\t\tif (wryz) {\r\n\t\t\t\t\t\toutletMap.get(code).wryz.push(wryz);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn outletMap;\r\n\t\t}\r\n\r\n\t\t// 废水\r\n\t\tconst waterList = emissionData['水污染物'] || [];\r\n\t\tconst waterOutlets = groupByOutletCode(waterList, '废水');\r\n\t\twaterOutlets.forEach((data, code) => {\r\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\r\n\t\t\tsignboard.sections.find(s => s.block === '废水').items.push({\r\n\t\t\t\ttitle: '单位名称',\r\n\t\t\t\tcontent: unitName\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\tcontent: code\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '污染因子',\r\n\t\t\t\tcontent: wryz\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 废气\r\n\t\tconst gasList = emissionData['大气污染物'] || [];\r\n\t\tconst gasOutlets = groupByOutletCode(gasList, '废气');\r\n\t\tgasOutlets.forEach((data, code) => {\r\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\r\n\t\t\tsignboard.sections.find(s => s.block === '废气').items.push({\r\n\t\t\t\ttitle: '单位名称',\r\n\t\t\t\tcontent: unitName\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\tcontent: code\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '污染因子',\r\n\t\t\t\tcontent: wryz\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 噪声\r\n\t\tconst noiseList = emissionData['噪声'] || [];\r\n\t\tconst noiseOutlets = groupByOutletCode(noiseList, '噪声');\r\n\t\tnoiseOutlets.forEach((data, code) => {\r\n\t\t\tconst wryz = [...new Set(data.wryz)].join('、'); // 去重并合并\r\n\t\t\tsignboard.sections.find(s => s.block === '噪声').items.push({\r\n\t\t\t\ttitle: '单位名称',\r\n\t\t\t\tcontent: unitName\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\tcontent: code\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '污染因子',\r\n\t\t\t\tcontent: '设备噪声'\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 辅助函数：提取危险废物类别代码（如 HW49、HW12）\r\n\t\tfunction extractHazardCodes(str) {\r\n\t\t\tif (!str) return '';\r\n\t\t\t// 提取所有 HW 开头的代码\r\n\t\t\tconst matches = str.match(/HW\\d+/g);\r\n\t\t\tif (!matches) return '';\r\n\t\t\t// 去重并用顿号连接\r\n\t\t\treturn [...new Set(matches)].join('、');\r\n\t\t}\r\n\r\n\t\t// 辅助函数：提取危险特性中文描述（如 毒性、易燃性）\r\n\t\tfunction extractHazardProperties(str) {\r\n\t\t\tif (!str) return '';\r\n\t\t\t// 提取所有括号内的中文\r\n\t\t\tconst matches = str.match(/（([^）]+)）/g);\r\n\t\t\tif (!matches) return '';\r\n\t\t\t// 提取括号内容，去重并用顿号连接\r\n\t\t\tconst properties = matches.map(m => m.replace(/[（）]/g, ''));\r\n\t\t\treturn [...new Set(properties)].join('、');\r\n\t\t}\r\n\r\n\t\t// 危险废物\r\n\t\tconst hazardousWaste = emissionData['危险废物'] || {};\r\n\t\tconst WFItems = [{\r\n\t\t\t\ttitle: '主要成分',\r\n\t\t\t\tcontent: extractHazardCodes(hazardousWaste['危险废物类别']) || 'HW49'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '化学名称',\r\n\t\t\t\tcontent: hazardousWaste['废物名称'] || '实验室废弃物、实验室废水污泥、医疗废物、废活性炭'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '危险情况',\r\n\t\t\t\tcontent: extractHazardProperties(hazardousWaste['危险特性']) || '毒性、腐蚀性'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '安全措施',\r\n\t\t\t\tcontent: '接触时佩戴个人防护用品（全面罩/丁晴手套）'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '废物产生单位',\r\n\t\t\t\tcontent: unitName\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '地址',\r\n\t\t\t\tcontent: findBaseValue('建设地点')\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '电话',\r\n\t\t\t\tcontent: findBaseValue('联系方式')\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '联系人',\r\n\t\t\t\tcontent: findBaseValue('单位联系人')\r\n\t\t\t},\r\n\t\t];\r\n\t\tsignboard.sections.find(s => s.block === '危险废物').items = WFItems;\r\n\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已生成标识牌',\r\n\t\t\ticon: 'success'\r\n\t\t});\r\n\t}\r\n\r\n\t// 添加一组（3 项）排污标识牌（只允许噪声新增）\r\n\tfunction addSignItem(sectionIdx) {\r\n\t\tconst sec = signboard.sections[sectionIdx];\r\n\t\tconst block = sec.block; // 废水 / 废气 / 噪声\r\n\t\tconst unitName = findBaseValue('建设单位名称') || findBaseValue('单位名称') || '';\r\n\r\n\t\t// 只允许噪声新增\r\n\t\tif (block !== '噪声') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '只有噪声可以手动新增',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t/* 计算下一个排放口编号：找到现有编号的最大值 + 1 */\r\n\t\tlet maxNum = 0;\r\n\t\t// 每3项为一组，提取所有排放口编号\r\n\t\tfor (let i = 0; i < sec.items.length; i += 3) {\r\n\t\t\tconst codeItem = sec.items[i + 1]; // 第2项是排放口编号\r\n\t\t\tif (codeItem && codeItem.title === '排放口编号') {\r\n\t\t\t\tconst code = codeItem.content || '';\r\n\t\t\t\t// 提取编号中的数字部分（如 ZS-01 -> 1, DW001 -> 1）\r\n\t\t\t\tconst match = code.match(/\\d+/);\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tconst num = parseInt(match[0], 10);\r\n\t\t\t\t\tif (num > maxNum) maxNum = num;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 生成新编号\r\n\t\tlet code = '';\r\n\t\tif (block === '废水') code = `DW${String(maxNum + 1).padStart(3,'0')}`;\r\n\t\telse if (block === '废气') code = `DA${String(maxNum + 1).padStart(3,'0')}`;\r\n\t\telse if (block === '噪声') code = `ZS-${String(maxNum + 1).padStart(2,'0')}`;\r\n\r\n\t\t/* 组装一组 */\r\n\t\tconst group = [{\r\n\t\t\t\ttitle: '单位名称',\r\n\t\t\t\tcontent: unitName\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\tcontent: code\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '污染因子',\r\n\t\t\t\tcontent: '设备噪声'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\t/* 追加到当前块 */\r\n\t\tsec.items.push(...group);\r\n\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已添加新排污口',\r\n\t\t\ticon: 'success'\r\n\t\t});\r\n\t}\r\n\r\n\t// 按块决定是否 3 条一组\r\n\tfunction groupItems(items, block) {\r\n\t\tif (block === '危险废物') return [items]; // 整包\r\n\t\tconst groups = [];\r\n\t\tfor (let i = 0; i < items.length; i += 3) {\r\n\t\t\tgroups.push(items.slice(i, i + 3));\r\n\t\t}\r\n\t\treturn groups;\r\n\t}\r\n\r\n\t// 删除指定组标识牌信息（3 条）\r\n\tfunction removeGroup(section, groupIndex) {\r\n\t\t// 取本组排放口编号用于提示\r\n\t\tconst start = groupIndex * 3;\r\n\t\tconst codeItem = section.items.slice(start, start + 3)\r\n\t\t\t.find(it => it.title === '排放口编号');\r\n\t\tconst code = codeItem?.content || '未知编号';\r\n\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '永久删除',\r\n\t\t\tcontent: `确定删除排污口  ${code}  所有信息吗？`,\r\n\t\t\tconfirmText: '确定',\r\n\t\t\tcancelText: '取消',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tsection.items.splice(start, 3);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 从baseTable中提取基本信息\r\n\tfunction findBaseValue(label) {\r\n\t\tconst r = baseTable.value.find(x => x.label === label);\r\n\t\treturn r ? (r.value || '') : ''\r\n\t\tconsole.log(\"baseinfo\", baseTable.value)\r\n\t}\r\n\r\n\t// 标识牌下载(数据json交给后端)\r\n\tfunction downBiaoShi() {\r\n\t\t// 检查是否选择了项目\r\n\t\tif (!selectedProjectId.value) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '请先选择一个项目',\r\n\t\t\t\tshowCancel: false\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '正在生成文档…'\r\n\t\t});\r\n\t\tdownloadSignboardWord(signboard, selectedProjectId.value)\r\n\t\t\t.then(buf => {\r\n\t\t\t\tconst fileName = '排污标识牌.docx';\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tconst blob = new Blob([buf], {\r\n\t\t\t\t\ttype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n\t\t\t\t});\r\n\t\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\t\tconst a = document.createElement('a');\r\n\t\t\t\ta.href = url;\r\n\t\t\t\ta.download = '排污标识牌.docx';\r\n\t\t\t\tdocument.body.appendChild(a);\r\n\t\t\t\ta.click();\r\n\t\t\t\tdocument.body.removeChild(a);\r\n\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t// 微信小程序：先写临时文件再打开预览\r\n\t\t\t\tconst filePath = `${wx.env.USER_DATA_PATH}/${fileName}`;\r\n\t\t\t\twx.getFileSystemManager().writeFile({\r\n\t\t\t\t\tfilePath,\r\n\t\t\t\t\tdata: buf,\r\n\t\t\t\t\tencoding: 'binary',\r\n\t\t\t\t\tsuccess: () => wx.openDocument({\r\n\t\t\t\t\t\tfilePath,\r\n\t\t\t\t\t\tfileType: 'docx'\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tfail: e => uni.showToast({\r\n\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t// App 端：保存到 downloads 目录\r\n\t\t\t\tplus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, fs => {\r\n\t\t\t\t\tconst fileEntry = fs.root.getFile(fileName, {\r\n\t\t\t\t\t\tcreate: true\r\n\t\t\t\t\t}, entry => {\r\n\t\t\t\t\t\tentry.createWriter(writer => {\r\n\t\t\t\t\t\t\twriter.write(buf);\r\n\t\t\t\t\t\t\twriter.onwrite = () => uni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '已保存到下载目录'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: err.message || '生成失败',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => uni.hideLoading());\r\n\t}\r\n\r\n\r\n\t// 以下监测方案模块的方法-------------------------\r\n\tconst plan = ref(false)\r\n\tconst canDownload = ref(false) // 是否已生成监测方案\r\n\r\n\t// 生成监测方案\r\n\tasync function saveMonitorPlan() {\r\n\t\tif (!selectedProjectId.value) return uni.showModal({\r\n\t\t\ttitle: '提示',\r\n\t\t\tcontent: '请先选择项目',\r\n\t\t\tshowCancel: false\r\n\t\t})\r\n\t\tif (!extractionOk.value) return uni.showModal({\r\n\t\t\ttitle: '提示',\r\n\t\t\tcontent: '请先提取项目信息',\r\n\t\t\tshowCancel: false\r\n\t\t})\r\n\r\n\t\tclearProgressTimer()\r\n\t\ttaskProgressTitle.value = '监测方案生成中'\r\n\t\ttaskProgress.value = 0\r\n\t\ttaskState.value = 'pending'\r\n\t\ttaskProgressModal.value?.open()\r\n\r\n\t\ttry {\r\n\t\t\tawait generateMonitorPlan({\r\n\t\t\t\tprojectId: selectedProjectId.value,\r\n\t\t\t\tonProgress: (p, txt) => updateProgressSmooth(p, txt)\r\n\t\t\t})\r\n\t\t\t// 生成完只开下载权限\r\n\t\t\tcanDownload.value = true\r\n\t\t\ttaskProgressModal.value?.close()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '生成成功，可下载报告',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tclearProgressTimer()\r\n\t\t\ttaskProgressModal.value?.close()\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '生成失败',\r\n\t\t\t\tcontent: e.message || '请稍后重试',\r\n\t\t\t\tshowCancel: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 下载监测方案\r\n\tasync function downloadPlan() {\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '正在下载监测方案…',\r\n\t\t\tmask: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tconst {\r\n\t\t\t\tab,\r\n\t\t\t\tfilename\r\n\t\t\t} = await downloadMonitorPlan(selectedProjectId.value)\r\n\t\t\tawait saveArrayBuffer(ab, filename) // 各端统一保存\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '已保存：' + filename,\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '下载失败',\r\n\t\t\t\tcontent: e.message,\r\n\t\t\t\tshowCancel: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 各端保存逻辑\r\n\tasync function saveArrayBuffer(arrayBuffer, filename) {\r\n\t\t// #ifdef H5\r\n\t\tconst blob = new Blob([arrayBuffer], {\r\n\t\t\ttype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n\t\t})\r\n\t\tconst url = URL.createObjectURL(blob)\r\n\t\tconst a = document.createElement('a')\r\n\t\ta.href = url;\r\n\t\ta.download = filename\r\n\t\tdocument.body.appendChild(a);\r\n\t\ta.click();\r\n\t\tdocument.body.removeChild(a)\r\n\t\tURL.revokeObjectURL(url)\r\n\t\t// #endif\r\n\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tconst fs = wx.getFileSystemManager()\r\n\t\tconst filePath = `${wx.env.USER_DATA_PATH}/${filename}`\r\n\t\tfs.writeFile({\r\n\t\t\tfilePath,\r\n\t\t\tdata: arrayBuffer,\r\n\t\t\tencoding: 'binary',\r\n\t\t\tsuccess: () => wx.openDocument({\r\n\t\t\t\tfilePath,\r\n\t\t\t\tfileType: 'docx'\r\n\t\t\t}),\r\n\t\t\tfail: () => uni.showToast({\r\n\t\t\t\ttitle: '保存失败',\r\n\t\t\t\ticon: 'error'\r\n\t\t\t})\r\n\t\t})\r\n\t\t// #endif\r\n\r\n\t\t// #ifdef APP-PLUS\r\n\t\tplus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, fs => {\r\n\t\t\tfs.root.getFile(filename, {\r\n\t\t\t\tcreate: true\r\n\t\t\t}, entry => {\r\n\t\t\t\tentry.createWriter(writer => {\r\n\t\t\t\t\twriter.write(arrayBuffer)\r\n\t\t\t\t\twriter.onwrite = () => uni.showToast({\r\n\t\t\t\t\t\ttitle: '已保存到下载目录'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\t// #endif\r\n\t}\r\n\r\n\t// 以下提资单比对的方法-modify by wilson-------------------------\r\n\t// 提资单数据\r\n\tconst tizidanItems = ref([])\r\n\tconst downloadUrls = ref({\r\n\t\tacceptance_report: '',\r\n\t\tcomparison_list: ''\r\n\t})\r\n\r\n\t// 获取提资单数据\r\n\t// 在 fetchTizidanData 函数中修改下载URL的赋值逻辑\r\n\t// 在 fetchTizidanData 函数中修改URL处理逻辑\r\n\tasync function fetchTizidanData() {\r\n\r\n\t\ttry {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log('开始请求数据...')\r\n\r\n\t\t\t// modify by wilson 使用 Promise  包装 uni.request 以确保正确解析\r\n\t\t\tconst response = await new Promise((resolve, reject) => {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://172.16.1.61:8000/api/v1/completion/datasheet',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmemberId: 3,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('请求成功:', res)\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('请求失败:', err)\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log('完整响应对象:', response)\r\n\t\t\tconsole.log('响应状态码:', response.statusCode)\r\n\t\t\tconsole.log('响应数据:', response.data)\r\n\r\n\t\t\t// 检查返回结果\r\n\t\t\tif (response && response.statusCode === 200) {\r\n\t\t\t\tconsole.log('状态码为200，开始解析数据')\r\n\r\n\t\t\t\t// 确保 data 存在\r\n\t\t\t\tif (!response.data) {\r\n\t\t\t\t\tthrow new Error('响应数据为空')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst data = response.data\r\n\t\t\t\tconsole.log('解析后的数据:', data)\r\n\r\n\t\t\t\t// 确保数据结构正确\r\n\t\t\t\tif (!data.items || !Array.isArray(data.items)) {\r\n\t\t\t\t\tthrow new Error('数据格式不正确: items 不存在或不是数组')\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttizidanItems.value = data.items\r\n\t\t\t\tdownloadUrls.value = data.download_urls || {}\r\n\r\n\t\t\t\tconsole.log('最终设置的数据:', {\r\n\t\t\t\t\titems: tizidanItems.value,\r\n\t\t\t\t\turls: downloadUrls.value\r\n\t\t\t\t})\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '数据加载成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`请求失败，状态码：${response?.statusCode || '未知'}`)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('获取提资单数据失败:', error)\r\n\t\t\t// 显示加载失败提示\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载失败，请重新刷新！',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t})\r\n\t\t\t// 清空数据，显示加载失败状态\r\n\t\t\ttizidanItems.value = []\r\n\t\t\tdownloadUrls.value = {\r\n\t\t\t\tacceptance_report: '',\r\n\t\t\t\tcomparison_list: ''\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tuni.hideLoading()\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\r\n\t\t\tconst response = await new Promise((resolve, reject) => {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://172.16.1.61:8000/api/v1/completion/tzdDetail/datasheet',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmemberId: 3,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('请求成功:', res)\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('请求失败:', err)\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tif (response && response.statusCode === 200) {\r\n\t\t\t\tconst data = response.data\r\n\r\n\t\t\t\tif (!data.items || !Array.isArray(data.items)) {\r\n\t\t\t\t\tthrow new Error('数据格式不正确: items 不存在或不是数组')\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttizidanItems.value = data.items\r\n\t\t\t\tconsole.log(\"test\", data.download_urls)\r\n\t\t\t\t// 处理下载URL，确保格式正确\r\n\t\t\t\tconst downloadUrlsData = data.download_urls || {}\r\n\t\t\t\tdownloadUrls.value = {\r\n\t\t\t\t\tacceptance_report: formatDownloadUrl(downloadUrlsData.tzd_doc),\r\n\t\t\t\t\tcomparison_list: formatDownloadUrl(downloadUrlsData.comparison_list)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log('下载URL设置:', downloadUrls.value)\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '数据加载成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`请求失败，状态码：${response?.statusCode || '未知'}`)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('获取提资单数据失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载失败，请重新刷新！',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t})\r\n\t\t\ttizidanItems.value = []\r\n\t\t\tdownloadUrls.value = {\r\n\t\t\t\tacceptance_report: '',\r\n\t\t\t\tcomparison_list: ''\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tuni.hideLoading()\r\n\t\t}\r\n\t}\r\n\r\n\t// 添加URL格式化函数，确保URL格式正确\r\n\tfunction formatDownloadUrl(url) {\r\n\t\tif (!url) return ''\r\n\r\n\t\t// 如果URL是相对路径，添加基础URL\r\n\t\tif (url.startsWith('/')) {\r\n\t\t\treturn `http://172.16.1.61:8000${url}`\r\n\t\t}\r\n\r\n\t\t// 如果URL已经是完整路径，直接返回\r\n\t\tif (url.startsWith('http://') || url.startsWith('https://')) {\r\n\t\t\treturn url\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\t// 下载提资对比清单\r\n\r\n\t// 修改下载文件函数，适配不同平台\r\n\tasync function downloadFile(url, filename) {\r\n\t\tif (!url) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载链接不存在',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 显示下载中提示\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '下载中...',\r\n\t\t\tmask: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\t// #ifdef H5\r\n\t\t\t// H5环境：使用a标签下载\r\n\t\t\tawait downloadFileH5(url, filename)\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t// 微信小程序环境\r\n\t\t\tawait downloadFileWechat(url, filename)\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\t// App环境\r\n\t\t\tawait downloadFileApp(url, filename)\r\n\t\t\t// #endif\r\n\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t} catch (error) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tconsole.error('下载失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '下载失败: ' + (error.message || '未知错误'),\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// H5环境下载\r\n\tfunction downloadFileH5(url, filename) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst a = document.createElement('a')\r\n\t\t\t\ta.href = url\r\n\t\t\t\ta.download = filename || 'download'\r\n\t\t\t\ta.style.display = 'none'\r\n\r\n\t\t\t\tdocument.body.appendChild(a)\r\n\t\t\t\ta.click()\r\n\t\t\t\tdocument.body.removeChild(a)\r\n\r\n\t\t\t\t// H5下载无法准确判断是否成功，延迟一下再resolve\r\n\t\t\t\tsetTimeout(resolve, 1000)\r\n\t\t\t} catch (error) {\r\n\t\t\t\treject(error)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 微信小程序环境下载\r\n\tfunction downloadFileWechat(url, filename) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t// 下载成功，保存到本地\r\n\t\t\t\t\t\tconst filePath = res.tempFilePath\r\n\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\ttempFilePath: filePath,\r\n\t\t\t\t\t\t\tsuccess: (saveRes) => {\r\n\t\t\t\t\t\t\t\tconsole.log('文件保存成功:', saveRes.savedFilePath)\r\n\t\t\t\t\t\t\t\tresolve(saveRes)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (saveErr) => {\r\n\t\t\t\t\t\t\t\treject(new Error('保存文件失败: ' + (saveErr.errMsg || '未知错误')))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error(`下载失败，状态码: ${res.statusCode}`))\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\treject(new Error('下载请求失败: ' + (err.errMsg || '未知错误')))\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t// App环境下载\r\n\tfunction downloadFileApp(url, filename) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t// 在App中，下载的文件会保存到系统下载目录\r\n\t\t\t\t\t\t// 可以提示用户查看下载目录\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error(`下载失败，状态码: ${res.statusCode}`))\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\treject(new Error('下载请求失败: ' + (err.errMsg || '未知错误')))\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t// 提交提资单项\r\n\tasync function submitTizidanItem(index) {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认提交',\r\n\t\t\tcontent: '您确定要提交此项资料吗？',\r\n\t\t\tsuccess: async (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '提交中...'\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tconsole.log('开始提交项目:', index, tizidanItems.value[index].text)\r\n\r\n\t\t\t\t\t\t// 使用 Promise 包装 uni.request\r\n\t\t\t\t\t\tconst response = await new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: 'http://172.16.1.61:8000/api/v1/completion/submit-item',\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\titem_index: index,\r\n\t\t\t\t\t\t\t\t\titem_text: tizidanItems.value[index].text\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('提交响应:', res)\r\n\t\t\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('提交失败:', err)\r\n\t\t\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tconsole.log('提交完整响应:', response)\r\n\r\n\t\t\t\t\t\t// 检查返回结果\r\n\t\t\t\t\t\tif (response && response.statusCode === 200) {\r\n\t\t\t\t\t\t\tif (response.data && response.data.success) {\r\n\t\t\t\t\t\t\t\t// 更新前端状态\r\n\t\t\t\t\t\t\t\ttizidanItems.value[index].submitted = true\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '提交成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthrow new Error(response.data.message || '提交失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrow new Error(`提交失败，状态码：${response?.statusCode || '未知'}`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('提交失败:', error)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '提交失败，请重试',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// 监听步骤变化\r\n\twatch(currentStep, (newVal) => {\r\n\t\tif (newVal === 2) {\r\n\t\t\t// 进入提资单比对步骤时获取数据\r\n\t\t\tfetchTizidanData()\r\n\t\t}\r\n\t})\r\n\r\n\tconst baseTable = ref([])\r\n\tconst datasheet = ref([])\r\n\tconst datasheetTypeOptions = [{\r\n\t\ttext: '需再次提资',\r\n\t\tvalue: 'requireMore'\r\n\t}, {\r\n\t\ttext: '需业主核对',\r\n\t\tvalue: 'ownerConfirm'\r\n\t}]\r\n\r\n\t// 选择删除模式\r\n\tconst selectMode = ref(false)\r\n\tconst selectedIds = ref([])\r\n\r\n\tfunction toggleSelectMode() {\r\n\t\tselectMode.value = !selectMode.value;\r\n\t\tif (!selectMode.value) selectedIds.value = []\r\n\t}\r\n\r\n\tfunction toggleSelected(id) {\r\n\t\tconst arr = selectedIds.value;\r\n\t\tconst i = arr.indexOf(id);\r\n\t\tif (i >= 0) arr.splice(i, 1);\r\n\t\telse arr.push(id)\r\n\t}\r\n\r\n\tfunction removeSelected() {\r\n\t\tif (!selectedIds.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '未选择',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst names = baseTable.value\r\n\t\t\t.filter(r => selectedIds.value.includes(r.id))\r\n\t\t\t.map(r => (r.label || '（未命名）').trim())\r\n\r\n\t\tconst preview =\r\n\t\t\tnames.length === 1 ?\r\n\t\t\t`确认要删除「${names[0]}」吗？` :\r\n\t\t\t(() => {\r\n\t\t\t\tconst max = 8\r\n\t\t\t\tconst head = names.slice(0, max).map(n => `• ${n}`).join('\\n')\r\n\t\t\t\tconst tail = names.length > max ? `\\n… 等 ${names.length} 项` : ''\r\n\t\t\t\treturn `确认要删除以下 ${names.length} 个信息吗？\\n${head}${tail}`\r\n\t\t\t})()\r\n\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: preview,\r\n\t\t\tconfirmText: '删除',\r\n\t\t\tcancelText: '取消',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tbaseTable.value = baseTable.value.filter(\r\n\t\t\t\t\t\tr => !selectedIds.value.includes(r.id)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tselectedIds.value = []\r\n\t\t\t\t\tselectMode.value = false\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `已删除 ${names.length} 项`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// 以下现场踏勘比对的方法-------------------------\r\n\tconst fieldworkComparison = ref([])\r\n\t// Tab定义\r\n\tconst tabs = ['建设内容', '设备情况', '治理设施', '排污口']\r\n\tconst currentTab = ref(0)\r\n\t// 设备数据加载状态\r\n\tconst loadingEquipment = ref(false)\r\n\tconst fetchEquipmentError = ref('')\r\n\r\n\t// 监听Tab切换\r\n\tfunction handleTabChange(index) {\r\n\t\tcurrentTab.value = index\r\n\t\t// 当切换到设备情况Tab时，自动获取数据\r\n\t\tif (index === 1 && !equipmentList.value.length) {\r\n\t\t\tfetchEquipmentData()\r\n\t\t}\r\n\t}\r\n\t// ========== Tab 0: 主要建设内容 ==========\r\n\tconst mainContentTable = ref([{\r\n\t\t\tid: 'mc_1',\r\n\t\t\tlabel: '项目名称',\r\n\t\t\tvalue: '',\r\n\t\t\ttype: 'text'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'mc_2',\r\n\t\t\tlabel: '建设单位',\r\n\t\t\tvalue: '',\r\n\t\t\ttype: 'text'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'mc_3',\r\n\t\t\tlabel: '建设地点',\r\n\t\t\tvalue: '',\r\n\t\t\ttype: 'text'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'mc_4',\r\n\t\t\tlabel: '建设规模',\r\n\t\t\tvalue: '',\r\n\t\t\ttype: 'text'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'mc_5',\r\n\t\t\tlabel: '主体工程',\r\n\t\t\tvalue: [],\r\n\t\t\ttype: 'image'\r\n\t\t}\r\n\t])\r\n\r\n\tconst selectModeMain = ref(false)\r\n\tconst selectedMainIds = ref([])\r\n\tconst newMainContentPopup = ref(null)\r\n\tconst newMainContentLabel = ref('')\r\n\r\n\tfunction toggleSelectModeMain() {\r\n\t\tselectModeMain.value = !selectModeMain.value\r\n\t\tif (!selectModeMain.value) selectedMainIds.value = []\r\n\t}\r\n\r\n\tfunction toggleSelectedMain(id) {\r\n\t\tconst idx = selectedMainIds.value.indexOf(id)\r\n\t\tif (idx > -1) selectedMainIds.value.splice(idx, 1)\r\n\t\telse selectedMainIds.value.push(id)\r\n\t}\r\n\r\n\tfunction removeSelectedMain() {\r\n\t\tmainContentTable.value = mainContentTable.value.filter(item => !selectedMainIds.value.includes(item.id))\r\n\t\tselectedMainIds.value = []\r\n\t\tselectModeMain.value = false\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '删除成功',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction openAddMainContent() {\r\n\t\tnewMainContentLabel.value = ''\r\n\t\tnewMainContentPopup.value?.open()\r\n\t}\r\n\r\n\tfunction closeMainContent() {\r\n\t\tnewMainContentPopup.value?.close()\r\n\t}\r\n\r\n\tfunction confirmAddMainContent() {\r\n\t\tif (!newMainContentLabel.value.trim()) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入内容名称',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconst newItem = {\r\n\t\t\tid: 'mc_' + Date.now(),\r\n\t\t\tlabel: newMainContentLabel.value,\r\n\t\t\tvalue: '',\r\n\t\t\ttype: 'text'\r\n\t\t}\r\n\t\tmainContentTable.value.push(newItem)\r\n\t\tcloseMainContent()\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '添加成功',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// ========== Tab 1: 设备列表情况 ==========\r\n\tconst equipmentList = ref([])\r\n\r\n\t// 解析设备数据\r\n\tfunction parseEquipmentData(apiData) {\r\n\t\ttry {\r\n\t\t\tconst parsedEquipment = []\r\n\r\n\t\t\t// 检查数据是否有效\r\n\t\t\tif (!apiData || !Array.isArray(apiData) || apiData.length <= 1) {\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\r\n\t\t\t// 跳过表头行（第一行），从索引1开始\r\n\t\t\tfor (let i = 1; i < apiData.length; i++) {\r\n\t\t\t\tconst row = apiData[i]\r\n\r\n\t\t\t\t// 获取column_1字段，这是主要数据字段\r\n\t\t\t\tif (row.column_1) {\r\n\t\t\t\t\t// 使用 '\\\\t' 分隔符分割字符串\r\n\t\t\t\t\tconst columns = row.column_1.split('\\\\t')\r\n\r\n\t\t\t\t\t// 确保有足够的列（至少4列：序号、设备名称、型号、数量）\r\n\t\t\t\t\tif (columns.length >= 4) {\r\n\t\t\t\t\t\t// 设备名称是第二个字段（索引1），数量是第四个字段（索引3）\r\n\t\t\t\t\t\tconst deviceName = columns[1] || ''\r\n\t\t\t\t\t\tconst quantity = columns[3] || ''\r\n\r\n\t\t\t\t\t\t// 只添加有设备名称的数据\r\n\t\t\t\t\t\tif (deviceName.trim()) {\r\n\t\t\t\t\t\t\tparsedEquipment.push({\r\n\t\t\t\t\t\t\t\tid: 'eq_' + Date.now() + '_' + i,\r\n\t\t\t\t\t\t\t\tname: deviceName.trim(),\r\n\t\t\t\t\t\t\t\tquantity: quantity.trim(),\r\n\t\t\t\t\t\t\t\tremark: '', // 接口没有提供备注，留空\r\n\t\t\t\t\t\t\t\timages: []\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(`第${i+1}行数据列数不足:`, columns)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn(`第${i+1}行没有column_1字段:`, row)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn parsedEquipment\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('解析设备数据失败:', error)\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\t// 从接口获取设备数据\r\n\tasync function fetchEquipmentData() {\r\n\t\tloadingEquipment.value = true\r\n\t\tfetchEquipmentError.value = ''\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// modify by wilson 使用 Promise  包装 uni.request 以确保正确解析\r\n\t\t\tconst response = await new Promise((resolve, reject) => {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://127.0.0.1:8000/api/v1/completion/tzdDetail/getDeviceDetail',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmemberId: 3,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('请求成功:', res)\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('请求失败:', err)\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\t// uni.request 返回的是一个数组 [data, statusCode, header]\r\n\t\t\t// 或者直接是response.data（取决于uni-app版本）\r\n\t\t\tlet resData\r\n\r\n\t\t\t// 处理不同版本的返回值\r\n\t\t\tif (Array.isArray(response)) {\r\n\t\t\t\t// 如果是数组格式 [data, statusCode, header]\r\n\t\t\t\tresData = response[0]\r\n\t\t\t} else if (response && response.data) {\r\n\t\t\t\t// 如果是对象格式 {data, statusCode, header}\r\n\t\t\t\tresData = response.data\r\n\t\t\t} else {\r\n\t\t\t\tresData = response\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log('接口返回完整数据:', resData)\r\n\r\n\t\t\t// 根据您提供的JSON结构，数据在resData.data中\r\n\t\t\tif (resData && resData.data) {\r\n\t\t\t\tconst apiData = resData.data\r\n\t\t\t\tconsole.log('设备数据数组:', apiData)\r\n\r\n\t\t\t\tif (apiData && Array.isArray(apiData) && apiData.length > 1) {\r\n\t\t\t\t\tconst parsedData = parseEquipmentData(apiData)\r\n\t\t\t\t\tconsole.log('解析后的设备数据:', parsedData)\r\n\r\n\t\t\t\t\tif (parsedData.length > 0) {\r\n\t\t\t\t\t\t// 清空现有数据，用接口数据替换\r\n\t\t\t\t\t\tequipmentList.value = parsedData\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: `加载成功，共${parsedData.length}条设备数据`,\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfetchEquipmentError.value = '解析到的设备数据为空'\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '设备数据解析为空',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfetchEquipmentError.value = '接口返回的设备数据格式不正确'\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '设备数据格式错误',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfetchEquipmentError.value = resData?.message || '接口返回数据格式异常'\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '获取设备数据失败',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('获取设备数据失败:', error)\r\n\t\t\tfetchEquipmentError.value = error.message || '网络请求失败'\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '网络请求失败，请检查网络连接',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 2000\r\n\t\t\t})\r\n\t\t} finally {\r\n\t\t\tloadingEquipment.value = false\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addEquipment() {\r\n\t\tconst newEquipment = {\r\n\t\t\tid: 'eq_' + Date.now(),\r\n\t\t\tname: '',\r\n\t\t\tquantity: '',\r\n\t\t\tremark: '',\r\n\t\t\timages: []\r\n\t\t}\r\n\t\tequipmentList.value.push(newEquipment)\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已添加新设备',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removeEquipment(index) {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: '确定要删除这条设备记录吗？',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tequipmentList.value.splice(index, 1)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// ========== Tab 2: 污染物设施情况 ==========\r\n\tconst pollutionFacilityList = ref([{\r\n\t\t\tid: 'pf_1',\r\n\t\t\tname: '废水处理站',\r\n\t\t\tquantity: '1',\r\n\t\t\tremark: '处理能力100t/d',\r\n\t\t\timages: []\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'pf_2',\r\n\t\t\tname: '危废暂存间',\r\n\t\t\tquantity: '1',\r\n\t\t\tremark: '面积50㎡',\r\n\t\t\timages: []\r\n\t\t}\r\n\t])\r\n\r\n\tfunction addPollutionFacility() {\r\n\t\tconst newFacility = {\r\n\t\t\tid: 'pf_' + Date.now(),\r\n\t\t\tname: '',\r\n\t\t\tquantity: '',\r\n\t\t\tremark: '',\r\n\t\t\timages: []\r\n\t\t}\r\n\t\tpollutionFacilityList.value.push(newFacility)\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已添加新设施',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removePollutionFacility(index) {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: '确定要删除这条设施记录吗？',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tpollutionFacilityList.value.splice(index, 1)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// ========== Tab 3: 排污口情况 ==========\r\n\tconst outletSignboard = ref({\r\n\t\tsections: []\r\n\t})\r\n\r\n\tfunction generateOutletInfo() {\r\n\t\t// 模拟生成排污口信息（参考验收页面的标识牌结构）\r\n\t\toutletSignboard.value = {\r\n\t\t\tsections: [{\r\n\t\t\t\t\tblock: '废水排放口',\r\n\t\t\t\t\titems: [{\r\n\t\t\t\t\t\t\ttitle: '排放口名称',\r\n\t\t\t\t\t\t\tcontent: 'WS-001'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\t\t\t\tcontent: '生产废水排放口'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '数量',\r\n\t\t\t\t\t\t\tcontent: '1'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '位置',\r\n\t\t\t\t\t\t\tcontent: '市政污水管网'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tblock: '废气排放口',\r\n\t\t\t\t\titems: [{\r\n\t\t\t\t\t\t\ttitle: '排放口编号',\r\n\t\t\t\t\t\t\tcontent: 'FQ-001'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '排放口名称',\r\n\t\t\t\t\t\t\tcontent: '锅炉废气排放口'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '排放高度',\r\n\t\t\t\t\t\t\tcontent: '15米'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tblock: '噪声',\r\n\t\t\t\t\titems: [{\r\n\t\t\t\t\t\t\ttitle: '监测点位',\r\n\t\t\t\t\t\t\tcontent: '厂界东侧'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '主要噪声源',\r\n\t\t\t\t\t\t\tcontent: '生产设备'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '执行标准',\r\n\t\t\t\t\t\t\tcontent: '2类标准'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tblock: '危险废物',\r\n\t\t\t\t\titems: [{\r\n\t\t\t\t\t\t\ttitle: '危废名称',\r\n\t\t\t\t\t\t\tcontent: '废机油'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '危废代码',\r\n\t\t\t\t\t\t\tcontent: 'HW08'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: '暂存位置',\r\n\t\t\t\t\t\t\tcontent: '危废暂存间'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '排污口信息已生成',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\tfunction addOutletItem(sectionIndex) {\r\n\t\tconst section = outletSignboard.value.sections[sectionIndex]\r\n\t\tif (section) {\r\n\t\t\tsection.items.push({\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t}, {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t}, )\r\n\t\t}\r\n\t}\r\n\r\n\tfunction groupOutletItems(items, blockName) {\r\n\t\tif (!items || items.length === 0) return []\r\n\t\t// 危险废物不分组，其他每3个一组\r\n\t\tif (blockName === '危险废物') {\r\n\t\t\treturn [items]\r\n\t\t}\r\n\t\tconst groups = []\r\n\t\tfor (let i = 0; i < items.length; i += 3) {\r\n\t\t\tgroups.push(items.slice(i, i + 3))\r\n\t\t}\r\n\t\treturn groups\r\n\t}\r\n\r\n\tfunction removeOutletGroup(section, groupIndex) {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '确认删除',\r\n\t\t\tcontent: '确定要删除这组信息吗？',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tsection.items.splice(groupIndex * 3, 3)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 基于提资单和基本信息生成现场踏勘比对清单\r\n\tfunction generateFieldworkComparison() {\r\n\t\tconst comparison = datasheet.value.map(item => ({\r\n\t\t\tid: Date.now() + Math.random(),\r\n\t\t\tproject: item.label,\r\n\t\t\teiaRequirement: item.value || '待确认',\r\n\t\t\tfieldSituation: '',\r\n\t\t\tdifference: '待现场核实'\r\n\t\t}))\r\n\r\n\t\tfieldworkComparison.value = comparison\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `已生成比对清单`,\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\t// 以下是竣工验收报告的方法-------------------------\r\n\tconst reportType = ref('withoutData')\r\n\tconst testReportFiles = ref([])\r\n\r\n\t//选择有无监测方案报告\r\n\tconst reportGenerated = ref(false)\r\n\tconst reportTypes = [{\r\n\t\t\tvalue: 'withoutData',\r\n\t\t\ttext: '无检测数据报告'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'withData',\r\n\t\t\ttext: '有检测数据报告'\r\n\t\t}\r\n\t]\r\n\r\n\t// 切换报告类型\r\n\tfunction onReportTypeChange(e) {\r\n\t\treportType.value = e.detail.value\r\n\t}\r\n\r\n\t// 验证有无上传环评报告\r\n\tfunction generateAcceptanceReport() {\r\n\t\t// 验证必要数据\r\n\t\tif (!eiaFiles.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请上传环评报告、批复文件等基本资料',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (reportType.value === 'withData' && !testReportFiles.value.length) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '有监测数据报告，必须要先上传监测报告',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 模拟生成报告\r\n\t\tsetTimeout(() => {\r\n\t\t\treportGenerated.value = true\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '验收报告生成成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t}, 1500)\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* ========== 设计令牌（统一风格） ========== */\r\n\t$brand: #166534; // 主色（深绿）\r\n\t$brand-600: #17834a;\r\n\t$brand-50: #ecfdf5;\r\n\t$ink: #0f172a; // 标题\r\n\t$muted: #5b6b7b; // 次文本\r\n\t$line: #e6eaf0; // 细线\r\n\t$bg: #f6f8fb; // 背景\r\n\t$white: #ffffff;\r\n\t$danger: #d92d20;\r\n\t$warning: #fb923c;\r\n\r\n\t$radius: 14rpx;\r\n\t$radius-lg: 18rpx;\r\n\t$shadow-sm: 0 2rpx 10rpx rgba(16, 24, 40, .06);\r\n\t$shadow-md: 0 6rpx 24rpx rgba(16, 24, 40, .08);\r\n\r\n\t/* ========== 页面框架 ========== */\r\n\t.acceptance-page {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: $bg;\r\n\t}\r\n\r\n\r\n\t/* 统一按钮体系 */\r\n\t.btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 0 22rpx;\r\n\t\theight: 64rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\tbackground: $white;\r\n\t\tcolor: #374151;\r\n\t\ttransition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;\r\n\t}\r\n\r\n\t:deep(.uni-button.btn.btn--secondary::after) {\r\n\t\tborder-radius: $radius;\r\n\t}\r\n\r\n\t.btn:active {\r\n\t\ttransform: translateY(1rpx);\r\n\t}\r\n\r\n\t.btn[disabled] {\r\n\t\topacity: .6;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.btn--primary {\r\n\t\tbackground: $brand;\r\n\t\tcolor: $white;\r\n\t\tborder-color: $brand;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 101, 52, .22);\r\n\t}\r\n\r\n\t.btn--secondary {\r\n\t\tbackground: #f8fafc;\r\n\t\tcolor: #155e3b;\r\n\t\tborder-color: #dbe3ea;\r\n\t}\r\n\r\n\t.btn--ghost {\r\n\t\tbackground: $white;\r\n\t\tcolor: $muted;\r\n\t\tborder-color: #e9edf2;\r\n\t}\r\n\r\n\t.btn--danger {\r\n\t\tbackground: $danger;\r\n\t\tcolor: $white;\r\n\t\tborder-color: $danger;\r\n\t}\r\n\r\n\t.btn--danger-ghost {\r\n\t\tbackground: #fef3f2;\r\n\t\tcolor: $danger;\r\n\t\tborder-color: #fde2e1;\r\n\t}\r\n\r\n\t/* 步骤导航 */\r\n\t.acceptance-steps {\r\n\t\tbackground: $white;\r\n\t\tborder-bottom: 1rpx solid #f2f4f7;\r\n\t\tpadding: 18rpx 24rpx;\r\n\t}\r\n\r\n\t.steps-container {\r\n\t\tmax-width: 1200rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.mobile-step-select {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.desktop-steps {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.step-item {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 14rpx 18rpx;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid transparent;\r\n\t\ttransition: background .2s ease, border-color .2s ease;\r\n\t}\r\n\r\n\t.step-item--active {\r\n\t\tbackground: #f3faf6;\r\n\t\tborder-color: #def7ec;\r\n\t}\r\n\r\n\t.step-item--completed .step-indicator {\r\n\t\tbackground: #10b981;\r\n\t\tcolor: $white;\r\n\t}\r\n\r\n\t.step-indicator {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #eef2f6;\r\n\t\tcolor: $muted;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: 700;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.step-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #344054;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.step-connector {\r\n\t\twidth: 20rpx;\r\n\t\theight: 2rpx;\r\n\t\tbackground: #e3e8ef;\r\n\t\tmargin-left: 4rpx;\r\n\t\tborder-radius: 1rpx;\r\n\t}\r\n\r\n\t/* 主体 */\r\n\t.acceptance-content {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx 24rpx;\r\n\t\tmin-height: 0;\r\n\t}\r\n\r\n\t.content-scroll {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.content-section {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.section-card {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: $radius-lg;\r\n\t\tbox-shadow: $shadow-md;\r\n\t\tborder: 1rpx solid #eef2f6;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.section-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tpadding: 24rpx 24rpx 0;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t\tletter-spacing: .2rpx;\r\n\t}\r\n\r\n\t.section-body {\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t}\r\n\r\n\t/* 自定义项目选择器触发按钮 */\r\n\t.project-selector {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: $white;\r\n\t\tborder: 2rpx solid #e5e7eb;\r\n\t\tborder-radius: $radius;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tmin-height: 100rpx;\r\n\t}\r\n\r\n\t.project-selector:active {\r\n\t\tbackground: #f9fafb;\r\n\t\tborder-color: $brand;\r\n\t}\r\n\r\n\t.selector-content {\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.selected-project {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.project-info {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 6rpx;\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.project-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.project-desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.placeholder {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.placeholder-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\r\n\t/* 项目选择器弹窗样式 */\r\n\t.project-picker-modal {\r\n\t\twidth: 90vw;\r\n\t\tmax-width: 700rpx;\r\n\t\tmax-height: 80vh;\r\n\t\tbackground: $white;\r\n\t\tborder-radius: 24rpx;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.15);\r\n\t}\r\n\r\n\t.picker-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 32rpx 32rpx 24rpx;\r\n\t\tborder-bottom: 2rpx solid #f3f4f6;\r\n\t\tbackground: linear-gradient(135deg, #f8fafb 0%, #ffffff 100%);\r\n\t}\r\n\r\n\t.picker-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.picker-close {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: #f3f4f6;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.picker-close:active {\r\n\t\tbackground: #e5e7eb;\r\n\t\ttransform: scale(0.95);\r\n\t}\r\n\r\n\t.picker-search {\r\n\t\tpadding: 24rpx 32rpx;\r\n\t\tbackground: $white;\r\n\t\tborder-bottom: 2rpx solid #f3f4f6;\r\n\t}\r\n\r\n\t.picker-stats {\r\n\t\tpadding: 16rpx 32rpx;\r\n\t\tbackground: #f9fafb;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t}\r\n\r\n\t.stats-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t}\r\n\r\n\t.stats-highlight {\r\n\t\tcolor: $brand;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.picker-list {\r\n\t\tflex: 1;\r\n\t\tmin-height: 0;\r\n\t\tmax-height: 60vh;\r\n\t\tpadding: 16rpx 0;\r\n\t}\r\n\r\n\t.picker-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t\tpadding: 24rpx 32rpx;\r\n\t\tmargin: 0 16rpx 12rpx;\r\n\t\tbackground: $white;\r\n\t\tborder: 2rpx solid #f3f4f6;\r\n\t\tborder-radius: 16rpx;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.picker-item:active {\r\n\t\ttransform: translateY(-2rpx);\r\n\t\tbox-shadow: 0 8rpx 20rpx rgba(22, 101, 52, 0.08);\r\n\t}\r\n\r\n\t.picker-item--active {\r\n\t\tbackground: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);\r\n\t\tborder-color: $brand;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(22, 101, 52, 0.12);\r\n\t}\r\n\r\n\t.picker-item-icon {\r\n\t\tflex-shrink: 0;\r\n\t\twidth: 56rpx;\r\n\t\theight: 56rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: #f3f4f6;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.picker-item--active .picker-item-icon {\r\n\t\tbackground: linear-gradient(135deg, $brand 0%, $brand-600 100%);\r\n\t}\r\n\r\n\t.picker-item--active .picker-item-icon uni-icons {\r\n\t\tcolor: $white !important;\r\n\t}\r\n\r\n\t.picker-item-content {\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.picker-item-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.picker-item--active .picker-item-name {\r\n\t\tcolor: $brand;\r\n\t}\r\n\r\n\t.picker-item-desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.picker-item-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-top: 4rpx;\r\n\t}\r\n\r\n\t.meta-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\r\n\t.picker-item-action {\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.selected-badge {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: linear-gradient(135deg, $brand 0%, $brand-600 100%);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(22, 101, 52, 0.3);\r\n\t}\r\n\r\n\t.picker-empty {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t\tpadding: 80rpx 32rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.picker-empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #64748b;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.picker-empty-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\r\n\r\n\t/* 表单 */\r\n\t.form-group {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.form-label {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.form-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t}\r\n\r\n\t.action-row {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tmargin-top: 16rpx;\r\n\t}\r\n\r\n\t.section-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tmargin: 12rpx 0 18rpx;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t/* 子块标题 */\r\n\t.subsection {\r\n\t\tmargin-top: 24rpx;\r\n\t\tpadding-top: 24rpx;\r\n\t\tborder-top: 1rpx solid #f1f5f9;\r\n\t}\r\n\r\n\t.subsection-head {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-bottom: 14rpx;\r\n\t}\r\n\r\n\t.subsection-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t/* 表格（桌面网格、移动卡片化） */\r\n\t.data-table {\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.table-header {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-bottom: 1rpx solid #e6ebf1;\r\n\t}\r\n\r\n\t.table-header--dense {\r\n\t\tgrid-template-columns: 160rpx 1fr 140rpx 120rpx 100rpx;\r\n\t}\r\n\r\n\t.table-th {\r\n\t\tpadding: 18rpx 14rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #475569;\r\n\t\tfont-weight: 700;\r\n\t\tborder-right: 1rpx solid #e6ebf1;\r\n\t}\r\n\r\n\t.table-th:last-child {\r\n\t\tborder-right: none;\r\n\t}\r\n\r\n\t.table-body {\r\n\t\tbackground: $white;\r\n\t}\r\n\r\n\t.table-row {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 120rpx 1fr 120rpx 80rpx;\r\n\t\tborder-bottom: 1rpx solid #f2f4f7;\r\n\t}\r\n\r\n\t.table-row:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.table-row--simple {\r\n\t\tgrid-template-columns: 1fr 100rpx;\r\n\t}\r\n\r\n\t.table-td {\r\n\t\tpadding: 16rpx 14rpx;\r\n\t\tborder-right: 1rpx solid #f7f8fa;\r\n\t\tmin-height: 76rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.table-td:last-child {\r\n\t\tborder-right: none;\r\n\t}\r\n\r\n\t.table-td--section {\r\n\t\tfont-weight: 700;\r\n\t\tcolor: #0f172a;\r\n\t}\r\n\r\n\t/* 图标按钮（表格内） */\r\n\t.icon-btn {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tborder: 1rpx solid #edf1f5;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: $white;\r\n\t}\r\n\r\n\t.icon-btn:active {\r\n\t\tbackground: #f3f6fa;\r\n\t}\r\n\r\n\t/* 项目文件列表样式 */\r\n\t.file-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.file-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f8fafb;\r\n\t\tborder-radius: 16rpx;\r\n\t\tborder: 2rpx solid #e5e9ed;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.file-item:hover {\r\n\t\tbackground: #f3f6f9;\r\n\t\tborder-color: #d1dce5;\r\n\t}\r\n\r\n\t.file-info {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.file-details {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.file-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #1f2937;\r\n\t\tfont-weight: 500;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.file-meta {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\r\n\t.file-status {\r\n\t\tflex-shrink: 0;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.status-badge {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 8rpx 20rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t.status-uploaded {\r\n\t\tbackground: #e0f2fe;\r\n\t\tcolor: #0369a1;\r\n\t}\r\n\r\n\t.status-processing {\r\n\t\tbackground: #fef3c7;\r\n\t\tcolor: #d97706;\r\n\t}\r\n\r\n\t.status-success {\r\n\t\tbackground: #d1fae5;\r\n\t\tcolor: #065f46;\r\n\t}\r\n\r\n\t.status-error {\r\n\t\tbackground: #fee2e2;\r\n\t\tcolor: #dc2626;\r\n\t}\r\n\r\n\r\n\t/* 基本信息表：响应式行 */\r\n\r\n\t.form-grid--base {\r\n\t\tdisplay: grid;\r\n\t\t// grid-template-columns: 1fr 1fr;\r\n\t\tgap: 12rpx 16rpx;\r\n\t}\r\n\r\n\t.pollutants_baseinfo_row {\r\n\t\tpadding: 14rpx;\r\n\t\tborder-bottom: 1rpx solid #e7ecf2;\r\n\t}\r\n\r\n\t.baseinfo__row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tbackground: $white;\r\n\t\tborder: 1rpx solid #e7ecf2;\r\n\t\tborder-radius: $radius;\r\n\t\tpadding: 14rpx;\r\n\t}\r\n\r\n\t.form-item__row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tbackground: $white;\r\n\t\tborder: 1rpx solid #e7ecf2;\r\n\t\tborder-radius: $radius;\r\n\t\tpadding: 14rpx;\r\n\t}\r\n\r\n\t.form-item__label {\r\n\t\tmin-width: 180rpx;\r\n\t\tcolor: #334155;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t/* 污染物表格样式 */\r\n\t.pollutants-container {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tborder: 1rpx solid #e7ecf2;\r\n\t\tborder-radius: $radius;\r\n\t\toverflow: hidden;\r\n\t\tgrid-column: 1 / -1;\r\n\t\t/* 让表格占据整行 */\r\n\t}\r\n\r\n\t.pollutants-table {\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t/* 表格头部 */\r\n\t.pollutants-header {\r\n\t\tdisplay: flex;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-bottom: 1px solid #e5e7eb;\r\n\t\tfont-weight: 600;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #374151;\r\n\t}\r\n\r\n\t/* 表格行 */\r\n\t.pollutants-row {\r\n\t\tdisplay: flex;\r\n\t\tborder-bottom: 1px solid #f3f4f6;\r\n\t}\r\n\r\n\t.pollutants-row:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t/* 表格列 */\r\n\t.pollutants-col {\r\n\t\tpadding: 20rpx 12rpx;\r\n\t\tword-break: break-word;\r\n\t\tline-height: 1.5;\r\n\t\tfont-size: 26rpx;\r\n\t\tborder-right: 1px solid #f3f4f6;\r\n\t}\r\n\r\n\t.pollutants-col:last-child {\r\n\t\tborder-right: none;\r\n\t}\r\n\r\n\t/* 列宽度分配 */\r\n\t.pollutants-col--type {\r\n\t\tflex: 0.8;\r\n\t\tmin-width: 120rpx;\r\n\t\tbackground: #f0f9ff;\r\n\t\tcolor: #0369a1;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.pollutants-col--link {\r\n\t\tflex: 1.2;\r\n\t\tmin-width: 150rpx;\r\n\t}\r\n\r\n\t.pollutants-col--name {\r\n\t\tflex: 1;\r\n\t\tmin-width: 140rpx;\r\n\t}\r\n\r\n\t.pollutants-col--measure {\r\n\t\tflex: 1.5;\r\n\t\tmin-width: 180rpx;\r\n\t}\r\n\r\n\t.pollutants-col--direction {\r\n\t\tflex: 1;\r\n\t\tmin-width: 140rpx;\r\n\t}\r\n\r\n\t.pollutants-col--standard {\r\n\t\tflex: 1.2;\r\n\t\tmin-width: 160rpx;\r\n\t}\r\n\r\n\t/* 表格选择框 */\r\n\t.pollutants-select {\r\n\t\tpadding: 20rpx;\r\n\t\tborder-top: 1px solid #e5e7eb;\r\n\t\tbackground: #fafafa;\r\n\t}\r\n\r\n\r\n\t/* 小标签的样式 */\r\n\t.extract-tag {\r\n\t\tdisplay: inline-block;\r\n\t\tmargin-left: 8px;\r\n\t\tpadding: 2px 6px;\r\n\t\tbackground-color: #52c41a;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 10px;\r\n\t\tborder-radius: 3px;\r\n\t\tvertical-align: middle;\r\n\t}\r\n\r\n\t/* 标识牌：左侧标题输入，固定宽度以避免与值重叠 */\r\n\t.pw-ico {\r\n\t\twidth: 140rpx;\r\n\t\theight: 64rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tborder: 1rpx solid #edf1f5;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: $white;\r\n\t\tmargin-left: -100rpx;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.pw-ico text {\r\n\t\tfont-size: 22rpx;\r\n\t}\r\n\r\n\r\n\t.form-item__title {\r\n\t\twidth: 180rpx;\r\n\t}\r\n\r\n\t.form-item__input {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.form-item__select {\r\n\t\twidth: 56rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t/* 空状态 */\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 50rpx 24rpx;\r\n\t\tcolor: #cbd5e1;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #64748b;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.empty-tip {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #9aa8b6;\r\n\t}\r\n\r\n\t/* 底部导航 */\r\n\t.acceptance-navigation {\r\n\t\tbackground: $white;\r\n\t\tborder-top: 1rpx solid $line;\r\n\t\tpadding: 18rpx 24rpx;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(16, 24, 40, .06);\r\n\t}\r\n\r\n\t.nav-buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmax-width: 1200rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t/* 弹窗 */\r\n\t.modal {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: 20rpx;\r\n\t\twidth: 86vw;\r\n\t\tmax-width: 620rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 18rpx 52rpx rgba(15, 23, 42, .18);\r\n\t}\r\n\r\n\t.modal-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1rpx solid #eff3f7;\r\n\t}\r\n\r\n\t.modal-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.modal-close {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbackground: transparent;\r\n\t\tborder: 1rpx solid #eef2f6;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.modal-body {\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.modal-description {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t\tmargin-bottom: 14rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.draft-textarea {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 360rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 1.5;\r\n\t\tbackground: #fafafa;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.modal-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.fieldwork-textarea {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 200rpx;\r\n\t\tpadding: 16rpx;\r\n\t\tborder: 1rpx solid #e6ebf1;\r\n\t\tborder-radius: $radius;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 1.5;\r\n\t\tbackground: $white;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.update-confirm {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid #e9edf2;\r\n\t}\r\n\r\n\t.update-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.update-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.action-buttons {\r\n\t\tdisplay: flex;\r\n\t\tgap: 8rpx;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.report-generation {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.generation-options {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.option-group {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.option-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: $ink;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.radio-group {\r\n\t\tdisplay: flex;\r\n\t\tgap: 24rpx;\r\n\t}\r\n\r\n\t.radio-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.radio-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: $muted;\r\n\t}\r\n\r\n\t.generation-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.report-preview {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f0fdf4;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid #dcfce7;\r\n\t}\r\n\r\n\t.paln-preview {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f0fdf4;\r\n\t\tborder-radius: $radius;\r\n\t\tborder: 1rpx solid #dcfce7;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.preview-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.preview-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $brand;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.preview-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.preview-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #374151;\r\n\t}\r\n\r\n\t.preview-sections {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t}\r\n\r\n\t.section-item {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #475569;\r\n\t}\r\n\r\n\t/* 提资单界面样式 */\r\n\t.tizidan-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 80vh;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.tizidan-header {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 60rpx 40rpx;\r\n\t\tbackground: linear-gradient(135deg, #166534 0%, #17834a 100%);\r\n\t\tcolor: #ffffff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.tizidan-title {\r\n\t\tfont-size: 44rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.tizidan-subtitle {\r\n\t\tfont-size: 32rpx;\r\n\t\topacity: 0.9;\r\n\t}\r\n\r\n\t.tizidan-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 40rpx;\r\n\t}\r\n\r\n\t.tizidan-item-card {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #f8fafc;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 32rpx;\r\n\t\tborder: 1rpx solid #e2e8f0;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.tizidan-item-card:hover {\r\n\t\ttransform: translateY(-2rpx);\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.tizidan-item-content {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.tizidan-item-number {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #166534;\r\n\t\tmargin-right: 16rpx;\r\n\t\tmin-width: 50rpx;\r\n\t}\r\n\r\n\t.tizidan-item-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #2d3748;\r\n\t\tline-height: 1.6;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.tizidan-item-status {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding-top: 20rpx;\r\n\t\tborder-top: 1rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.tizidan-status-text {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.tizidan-status-text.tizidan-submitted {\r\n\t\tcolor: #27ae60;\r\n\t}\r\n\r\n\t.tizidan-status-text.tizidan-unsubmitted {\r\n\t\tcolor: #e74c3c;\r\n\t}\r\n\r\n\t.tizidan-submit-btn {\r\n\t\tbackground-color: #3498db;\r\n\t\tcolor: #ffffff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 10rpx;\r\n\t\tpadding: 16rpx 32rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tbox-shadow: 0 2rpx 6rpx rgba(52, 152, 219, 0.3);\r\n\t\ttransition: background-color 0.3s;\r\n\t}\r\n\r\n\t.tizidan-submit-btn:active {\r\n\t\tbackground-color: #2980b9;\r\n\t}\r\n\r\n\t.tizidan-footer {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 40rpx;\r\n\t\tbackground-color: #f8fafc;\r\n\t\tborder-top: 1rpx solid #e2e8f0;\r\n\t}\r\n\r\n\t.tizidan-footer-text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #64748b;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t// 现场踏勘功能样式\r\n\t/* Tab切换样式 */\r\n\t.reconnoitre-tabs {\r\n\t\tflex-shrink: 0;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-bottom: 1px solid #e2e8f0;\r\n\t\tpadding: 0 32rpx;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(15, 23, 42, 0.05);\r\n\t\tz-index: 100;\r\n\t}\r\n\r\n\t.tabs-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.tab-item {\r\n\t\tflex: 1;\r\n\t\tpadding: 24rpx 16rpx;\r\n\t\ttext-align: center;\r\n\t\tposition: relative;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.tab-item:active {\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\r\n\t.tab-item--active {\r\n\t\tcolor: #166534;\r\n\t}\r\n\r\n\t.tab-item--active::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 4rpx;\r\n\t\tbackground: #166534;\r\n\t\tborder-radius: 2rpx 2rpx 0 0;\r\n\t}\r\n\r\n\t.tab-label {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #64748b;\r\n\t\ttransition: color 0.3s ease;\r\n\t}\r\n\r\n\t.tab-item--active .tab-label {\r\n\t\tcolor: #166534;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t/* 响应式设计 - 移动端 */\r\n\t@media (max-width: 768px) {\r\n\r\n\t\t// 项目文件列表\r\n\t\t.file-item {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: flex-start;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.file-status {\r\n\t\t\tmargin-left: 0;\r\n\t\t\talign-self: flex-end;\r\n\t\t}\r\n\r\n\t\t// 项目基本信息表\r\n\t\t.baseinfo__row {\r\n\t\t\tdisplay: block;\r\n\t\t\twidth: 54%;\r\n\t\t}\r\n\r\n\t\t.pollutants-container {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\twidth: 56.2%;\r\n\t\t}\r\n\r\n\t\t.pollutants-table {\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\r\n\t\t.solid-waste-table {\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\r\n\r\n\t\t.pollutants-header,\r\n\t\t.pollutants-row {\r\n\t\t\tmin-width: 1200rpx;\r\n\t\t\t/* 保证表格有足够宽度可以横向滚动 */\r\n\t\t}\r\n\r\n\t\t.pollutants-col {\r\n\t\t\tpadding: 16rpx 10rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\r\n\t\t.pw-ico {\r\n\t\t\twidth: 140rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tborder: none;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbackground: $white;\r\n\t\t\tmargin: 5rpx 0 0rpx 0;\r\n\r\n\t\t}\r\n\r\n\t\t.pw-ico text {\r\n\t\t\tfont-size: 22rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-content {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-left,\r\n\t\t.toolbar-right {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.toolbar-buttons {\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tpadding-bottom: 6rpx;\r\n\t\t}\r\n\r\n\t\t.acceptance-content {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.section-header {\r\n\t\t\tpadding: 20rpx 20rpx 0;\r\n\t\t}\r\n\r\n\t\t.section-body {\r\n\t\t\tpadding: 0 20rpx 20rpx;\r\n\t\t}\r\n\r\n\t\t.form-grid--base {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tgap: 10rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__label {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__title {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t}\r\n\r\n\t\t/* 表格卡片化：自动加标签（无须改模板） */\r\n\t\t.table-header {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.table-row {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t\t\tpadding: 10rpx 8rpx;\r\n\t\t\tgap: 0;\r\n\t\t}\r\n\r\n\t\t.table-td {\r\n\t\t\tposition: relative;\r\n\t\t\tpadding: 14rpx 14rpx 14rpx 120rpx;\r\n\t\t\tborder-right: none;\r\n\t\t\tborder-bottom: 1rpx solid #f7f8fa;\r\n\t\t\tmin-height: 64rpx;\r\n\t\t}\r\n\r\n\t\t.table-td:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\r\n\t\t/* 用 nth-child 给出列标题（与 header 顺序一致） */\r\n\t\t.table-row .table-td:nth-child(1)::before {\r\n\t\t\tcontent: '字段';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(2)::before {\r\n\t\t\tcontent: '当前值';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(3)::before {\r\n\t\t\tcontent: '类型';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(4)::before {\r\n\t\t\tcontent: '状态';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(5)::before {\r\n\t\t\tcontent: '操作';\r\n\t\t}\r\n\r\n\t\t.table-td::before {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 14rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #6b7a8a;\r\n\t\t\tfont-weight: 600;\r\n\t\t\twidth: 96rpx;\r\n\t\t\ttext-align-last: justify;\r\n\t\t}\r\n\r\n\t\t/* 简化型行（标识牌）不需要五列标签 */\r\n\t\t.table-row--simple .table-td {\r\n\t\t\tpadding: 14rpx;\r\n\t\t}\r\n\r\n\t\t.table-row--simple .table-td::before {\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.acceptance-navigation {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.modal {\r\n\t\t\twidth: 92vw;\r\n\t\t}\r\n\r\n\t\t.update-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.generation-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.radio-group {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 12rpx;\r\n\t\t}\r\n\r\n\t\t.action-buttons {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t}\r\n\r\n\t\t.tizidan-container {\r\n\t\t\tmargin: 10rpx;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-header {\r\n\t\t\tpadding: 30rpx 20rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-title {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-subtitle {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-content {\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-card {\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-content {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-number {\r\n\t\t\tmargin-bottom: 8rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-text {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-status {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: flex-start;\r\n\t\t\tgap: 12rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-status-text {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-submit-btn {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 16rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer {\r\n\t\t\tpadding: 24rpx 20rpx;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer-text {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer .btn {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: 0;\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\r\n\t\t// 现场踏勘样式\r\n\t\t.reconnoitre-tabs {\r\n\t\t\tpadding: 0 16rpx;\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\r\n\t\t.tabs-container {\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\r\n\t\t.tab-item {\r\n\t\t\tpadding: 20rpx 8rpx;\r\n\t\t\tmin-width: 120rpx;\r\n\t\t}\r\n\r\n\t\t.tab-label {\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 平板端适配 */\r\n\t@media (min-width: 769px) and (max-width: 960px) {\r\n\r\n\t\t// 步骤导航\r\n\t\t.desktop-steps {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\r\n\t\t.step-connector {\r\n\t\t\twidth: 0;\r\n\t\t}\r\n\r\n\t\t// 项目基本信息表\r\n\t\t.baseinfo__row {\r\n\t\t\tdisplay: block;\r\n\t\t\twidth: 50%;\r\n\t\t}\r\n\r\n\t\t.pollutants-container {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\twidth: 52.2%;\r\n\t\t}\r\n\r\n\t\t.pollutants-table {\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\r\n\t\t.pollutants-header,\r\n\t\t.pollutants-row {\r\n\t\t\tmin-width: 1200rpx;\r\n\t\t\t/* 保证表格有足够宽度可以横向滚动 */\r\n\t\t}\r\n\r\n\t\t.pollutants-col {\r\n\t\t\tpadding: 16rpx 10rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\r\n\t\t.pw-ico {\r\n\t\t\twidth: 140rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tborder: none;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbackground: $white;\r\n\t\t\tmargin: 5rpx 0 0rpx 0;\r\n\r\n\t\t}\r\n\r\n\t\t.pw-ico text {\r\n\t\t\tfont-size: 22rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-content {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 16rpx;\r\n\t\t}\r\n\r\n\t\t.toolbar-left,\r\n\t\t.toolbar-right {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.toolbar-buttons {\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tpadding-bottom: 6rpx;\r\n\t\t}\r\n\r\n\t\t.acceptance-content {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.section-header {\r\n\t\t\tpadding: 20rpx 20rpx 0;\r\n\t\t}\r\n\r\n\t\t.section-body {\r\n\t\t\tpadding: 0 20rpx 20rpx;\r\n\t\t}\r\n\r\n\t\t.form-grid--base {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tgap: 10rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__label {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.form-item__title {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 140rpx;\r\n\t\t}\r\n\r\n\t\t/* 表格卡片化：自动加标签（无须改模板） */\r\n\t\t.table-header {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.table-row {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tborder-bottom: 1rpx solid #f1f5f9;\r\n\t\t\tpadding: 10rpx 8rpx;\r\n\t\t\tgap: 0;\r\n\t\t}\r\n\r\n\t\t.table-td {\r\n\t\t\tposition: relative;\r\n\t\t\tpadding: 14rpx 14rpx 14rpx 120rpx;\r\n\t\t\tborder-right: none;\r\n\t\t\tborder-bottom: 1rpx solid #f7f8fa;\r\n\t\t\tmin-height: 64rpx;\r\n\t\t}\r\n\r\n\t\t.table-td:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\r\n\t\t/* 用 nth-child 给出列标题（与 header 顺序一致） */\r\n\t\t.table-row .table-td:nth-child(1)::before {\r\n\t\t\tcontent: '字段';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(2)::before {\r\n\t\t\tcontent: '当前值';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(3)::before {\r\n\t\t\tcontent: '类型';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(4)::before {\r\n\t\t\tcontent: '状态';\r\n\t\t}\r\n\r\n\t\t.table-row .table-td:nth-child(5)::before {\r\n\t\t\tcontent: '操作';\r\n\t\t}\r\n\r\n\t\t.table-td::before {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 14rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #6b7a8a;\r\n\t\t\tfont-weight: 600;\r\n\t\t\twidth: 96rpx;\r\n\t\t\ttext-align-last: justify;\r\n\t\t}\r\n\r\n\t\t/* 简化型行（标识牌）不需要五列标签 */\r\n\t\t.table-row--simple .table-td {\r\n\t\t\tpadding: 14rpx;\r\n\t\t}\r\n\r\n\t\t.table-row--simple .table-td::before {\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.acceptance-navigation {\r\n\t\t\tpadding: 16rpx;\r\n\t\t}\r\n\r\n\t\t.modal {\r\n\t\t\twidth: 92vw;\r\n\t\t}\r\n\r\n\t\t.update-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.generation-actions {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.radio-group {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 12rpx;\r\n\t\t}\r\n\r\n\t\t.action-buttons {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t}\r\n\r\n\t\t.tizidan-container {\r\n\t\t\tmargin: 20rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-container {\r\n\t\t\tmargin: 20rpx;\r\n\t\t\tmax-width: 90%;\r\n\t\t}\r\n\r\n\t\t.tizidan-header {\r\n\t\t\tpadding: 40rpx 30rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-title {\r\n\t\t\tfont-size: 38rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-subtitle {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-content {\r\n\t\t\tpadding: 30rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-card {\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: flex-start;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-content {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\tflex: 1;\r\n\t\t\tmax-width: 70%;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-status {\r\n\t\t\tflex-shrink: 0;\r\n\t\t\tborder-top: none;\r\n\t\t\tpadding-top: 0;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: flex-end;\r\n\t\t\tgap: 12rpx;\r\n\t\t\tmin-width: 180rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer {\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer-text {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\tflex: 1;\r\n\t\t\ttext-align: left;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-footer .btn {\r\n\t\t\tflex-shrink: 0;\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 桌面端适配 - 最大化宽度和字体 */\r\n\t@media (min-width: 961px) {\r\n\r\n\t\t// 全局设置\r\n\t\t.btn--primary:hover {\r\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(22, 101, 52, .28);\r\n\t\t}\r\n\r\n\t\t.btn--secondary:hover {\r\n\t\t\tbackground: #eef6f2;\r\n\t\t\tborder-color: #d7efe4;\r\n\t\t}\r\n\r\n\t\t.btn--ghost:hover {\r\n\t\t\tbackground: #f7f9fb;\r\n\t\t}\r\n\r\n\t\t.btn--danger:hover {\r\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(217, 45, 32, .25);\r\n\t\t}\r\n\r\n\t\t.step-item:hover {\r\n\t\t\tbackground: #f7fafc;\r\n\t\t}\r\n\r\n\t\t.icon-btn:hover {\r\n\t\t\tbackground: #f3f6fa;\r\n\t\t}\r\n\r\n\t\t.tizidan-container {\r\n\t\t\tmax-width: 1400rpx;\r\n\t\t\t/* 增大最大宽度 */\r\n\t\t\tmargin: 0 auto;\r\n\t\t\twidth: 95%;\r\n\t\t\t/* 使用百分比宽度，充分利用屏幕空间 */\r\n\t\t}\r\n\r\n\t\t.tizidan-header {\r\n\t\t\tpadding: 80rpx 60rpx;\r\n\t\t\t/* 增大头部内边距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-title {\r\n\t\t\tfont-size: 48rpx;\r\n\t\t\t/* 增大标题字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-subtitle {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\t/* 增大副标题字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-content {\r\n\t\t\tpadding: 50rpx 60rpx;\r\n\t\t\t/* 增大内容区域内边距 */\r\n\t\t\tgap: 30rpx;\r\n\t\t\t/* 增大卡片间距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-card {\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 40rpx;\r\n\t\t\t/* 增大卡片内边距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-content {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\tflex: 1;\r\n\t\t\tmax-width: 80%;\r\n\t\t\t/* 增大内容区域最大宽度 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-number {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\t/* 增大序号字体 */\r\n\t\t\tmin-width: 60rpx;\r\n\t\t}\r\n\r\n\t\t.tizidan-item-text {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\t/* 增大内容字体 */\r\n\t\t\tline-height: 1.7;\r\n\t\t\t/* 增大行高，提高可读性 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-status {\r\n\t\t\tborder-top: none;\r\n\t\t\tpadding-top: 0;\r\n\t\t\tflex-shrink: 0;\r\n\t\t\tmin-width: 220rpx;\r\n\t\t\t/* 增大状态区域最小宽度 */\r\n\t\t\tjustify-content: flex-end;\r\n\t\t}\r\n\r\n\t\t.tizidan-status-text {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\t/* 增大状态字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-submit-btn {\r\n\t\t\tpadding: 18rpx 36rpx;\r\n\t\t\t/* 增大按钮内边距 */\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\t/* 增大按钮字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-footer {\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 50rpx 60rpx;\r\n\t\t\t/* 增大底部内边距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-footer-text {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\tflex: 1;\r\n\t\t\ttext-align: left;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\t/* 增大底部文字字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-footer .btn {\r\n\t\t\tflex-shrink: 0;\r\n\t\t\tmargin-left: 30rpx;\r\n\t\t\tpadding: 20rpx 40rpx;\r\n\t\t\t/* 增大底部按钮内边距 */\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\t/* 增大底部按钮字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-submit-btn:hover {\r\n\t\t\tbackground-color: #2980b9;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 超大屏幕适配 */\r\n\t@media (min-width: 1200px) {\r\n\t\t.tizidan-container {\r\n\t\t\tmax-width: 1600rpx;\r\n\t\t\t/* 在超大屏幕上进一步增大宽度 */\r\n\t\t}\r\n\r\n\t\t.tizidan-content {\r\n\t\t\tpadding: 60rpx 80rpx;\r\n\t\t\t/* 进一步增大内边距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-card {\r\n\t\t\tpadding: 45rpx;\r\n\t\t\t/* 进一步增大卡片内边距 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-number {\r\n\t\t\tfont-size: 38rpx;\r\n\t\t\t/* 进一步增大序号字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-item-text {\r\n\t\t\tfont-size: 38rpx;\r\n\t\t\t/* 进一步增大内容字体 */\r\n\t\t}\r\n\r\n\t\t.tizidan-footer {\r\n\t\t\tpadding: 60rpx 80rpx;\r\n\t\t\t/* 进一步增大底部内边距 */\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/97247/Desktop/uni-ecoful/pages/reports/acceptance/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["navTitleStore","onShow","usePlatformInfo","ref","computed","uni","onLoad","onUnmounted","watch","runTask","transformExtractResult","reactive","code","downloadSignboardWord","wx","generateMonitorPlan","downloadMonitorPlan","res"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAykCC,MAAM,YAAY,MAAW;AAK7B,MAAM,oBAAoB,MAAW;AA6FrC,MAAM,oBAAoB;AAC1B,MAAM,mBAAmB;;;;AAjFzB,UAAM,WAAWA,gBAAAA,cAAe;AAChCC,kBAAAA,OAAO,MAAM,SAAS,SAAS,UAAU,CAAC;AAG1C,UAAM;AAAA,MACL;AAAA,IACA,IAAGC,+BAAiB;AAGrB,UAAM,oBAAoBC,cAAG,IAAC,IAAI;AAClC,UAAM,oBAAoBA,cAAG,IAAC,OAAO;AACrC,UAAM,eAAeA,cAAG,IAAC,CAAC;AAC1B,UAAM,iBAAiBA,cAAG,IAAC,UAAU;AACrC,UAAM,YAAYA,cAAG,IAAC,SAAS;AAK/B,UAAM,YAAY,CAAC,aAAa,QAAQ,SAAS,UAAU,QAAQ;AAGnE,UAAM,cAAcA,cAAG,IAAC,CAAC;AAGAC,kBAAAA,SAAS,MAAM,UAAU,IAAI,CAAC,GAAG,MAAM,SAAS,CAAC,IAAK,IAAI,OAAQ,CAAC,CAAC;AAC7F,UAAM,oBAAoBA,cAAAA,SAAS,MAAM,UAAU,IAAI,CAAC,GAAG,OAAO;AAAA,MACjE,MAAM,SAAS,CAAC,IAAK,IAAI,OAAQ;AAAA,MACjC,OAAO;AAAA,IACP,EAAC,CAAC;AASH,aAAS,WAAW;AACnB,UAAI,YAAY,QAAQ;AAAG,oBAAY,SAAS;AAAA,IAChD;AAED,aAAS,WAAW;AACnB,UAAI,YAAY,QAAQ,UAAU,SAAS;AAAG,oBAAY,SAAS;AAAA,IACnE;AAGD,UAAM,eAAeD,cAAG,IAAC,KAAK;AAG9B,aAAS,SAAS,GAAG;AACpB,cAAQ,GAAC;AAAA,QACR,KAAK;AACJ,iBAAO,aAAa;AAAA,QACrB,KAAK;AACJ,iBAAO,UAAU,MAAM,SAAS;AAAA,QACjC,KAAK;AACJ,iBAAO,aAAa,MAAM,KAAK,UAAQ,KAAK,SAAS;AAAA,QACtD,KAAK;AACJ,iBAAO,oBAAoB,MAAM,SAAS;AAAA,QAC3C,KAAK;AACJ,iBAAO,gBAAgB;AAAA,QACxB;AACC,iBAAO;AAAA,MACR;AAAA,IACD;AAKD,UAAM,oBAAoBA,cAAG,IAAC,IAAI;AAClC,UAAM,kBAAkBA,cAAG,IAAC,IAAI;AAChC,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,uBAAuBA,cAAG,IAAC,EAAE;AACnC,UAAM,qBAAqBA,cAAG,IAAC,IAAI;AAGnC,UAAM,eAAeA,cAAG,IAAC,IAAI;AAC7B,UAAM,YAAYA,cAAG,IAAC,KAAK;AAC3B,UAAM,eAAeA,cAAG,IAAC,CAAC;AAK1B,UAAM,mBAAmBC,cAAAA,SAAS,MAAM;AACvC,UAAI,CAAC,qBAAqB,OAAO;AAChC,eAAO,YAAY;AAAA,MACnB;AACD,YAAM,UAAU,qBAAqB,MAAM,YAAW,EAAG,KAAM;AAC/D,aAAO,YAAY,MAAM,OAAO,aAAW;AAC1C,cAAM,QAAQ,QAAQ,QAAQ,IAAI,YAAa;AAC/C,cAAM,QAAQ,QAAQ,eAAe,IAAI,YAAa;AACtD,cAAM,UAAU,QAAQ,eAAe,IAAI,YAAa;AACxD,eAAO,KAAK,SAAS,OAAO,KAAK,KAAK,SAAS,OAAO,KAAK,OAAO,SAAS,OAAO;AAAA,MACrF,CAAG;AAAA,IACH,CAAE;AAGD,aAAS,oBAAoB;;AAC5B,UAAI,YAAY,MAAM,WAAW,GAAG;AACnCC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AACD,2BAAqB,QAAQ;AAC7B,+BAAmB,UAAnB,mBAA0B;AAAA,IAC1B;AAGD,aAAS,qBAAqB;;AAC7B,+BAAmB,UAAnB,mBAA0B;AAAA,IAC1B;AAGD,mBAAe,cAAc,SAAS;AACrC,wBAAkB,QAAQ,QAAQ;AAClC,sBAAgB,QAAQ;AACxBA,oBAAY,MAAA,MAAA,OAAA,8CAAA,SAAS,QAAQ,IAAI;AAGjC,UAAI;AACH,qBAAa,QAAQ,kCAAkC,QAAQ,GAAG,SAAQ,CAAE;AAC5EA,sBAAAA,MAAY,MAAA,OAAA,8CAAA,gBAAgB;AAAA,MAC5B,SAAQ,GAAG;AACXA,sBAAAA,MAAa,MAAA,QAAA,8CAAA,gBAAgB,CAAC;AAAA,MAC9B;AAGD,yBAAoB;AAGpB,kBAAa;AAGb,YAAM,iBAAiB,QAAQ,EAAE;AAGjC,6BAAuB,QAAQ,EAAE;AAGjC,uBAAiB,QAAQ,EAAE;AAG3BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO,OAAO,QAAQ,IAAI;AAAA,QAC1B,MAAM;AAAA,QACN,UAAU;AAAA,MACb,CAAG;AAAA,IACD;AAGD,aAAS,cAAc,GAAG;AAEzBA,oBAAY,MAAA,MAAA,OAAA,8CAAA,UAAU,qBAAqB,KAAK;AAAA,IAChD;AAKD,aAAS,qBAAqB;AAC7B,aAAO,aAAa,MAAM;AAAA,QAAK,UAC9B,CAAC,CAAC,WAAW,QAAQ,EAAE,SAAS,KAAK,MAAM;AAAA,MAC3C;AAAA,IACD;AAGD,aAAS,uBAAuB,WAAW;AAE1C,UAAI,CAAC,mBAAkB,GAAI;AAE1B;AAAA,MACA;AAGD,UAAI,UAAU,OAAO;AACpBA,sBAAAA,MAAA,MAAA,OAAA,8CAAY,aAAa;AACzB;AAAA,MACA;AAED,gBAAU,QAAQ;AAClB,mBAAa,QAAQ;AAEG,mBAAa,MAAM;AAAA,QAAO,OACjD,CAAC,CAAC,WAAW,QAAQ,EAAE,SAAS,EAAE,MAAM;AAAA,MAC3C,EAAI;AAKF,mBAAa,QAAQ,YAAY,YAAY;AAC5C,qBAAa;AAGb,YAAI,aAAa,QAAQ,mBAAmB;AAC3CA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,iBAAiB;AAC7B,sBAAa;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACf,CAAK;AACD;AAAA,QACA;AAED,YAAI;AAEH,gBAAM,iBAAiB,WAAW,IAAI;AAGtC,cAAI,CAAC,mBAAkB,GAAI;AAC1BA,0BAAAA,iEAAY,iBAAiB;AAC7B,wBAAa;AAGbA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YAChB,CAAM;AAAA,UACN,OAAW;AAEN,kBAAM,aAAa,aAAa,MAAM;AAAA,cAAO,OAC5C,CAAC,CAAC,WAAW,QAAQ,EAAE,SAAS,EAAE,MAAM;AAAA,YACxC;AAAA,UAED;AAAA,QACD,SAAQ,OAAO;AACfA,wBAAAA,MAAc,MAAA,SAAA,8CAAA,eAAe,KAAK;AAAA,QAElC;AAAA,MACD,GAAE,gBAAgB;AAAA,IACnB;AAGD,aAAS,cAAc;AACtB,UAAI,aAAa,OAAO;AACvB,sBAAc,aAAa,KAAK;AAChC,qBAAa,QAAQ;AAAA,MACrB;AACD,gBAAU,QAAQ;AAClB,mBAAa,QAAQ;AAAA,IAErB;AAGD,mBAAe,eAAe;AAC7B,UAAI;AACH,cAAM;AAAA,UACL;AAAA,QACJ,IAAO,MAAa;AACjB,cAAM,WAAW,MAAM,YAAa;AAEpC,oBAAY,QAAQ,YAAY,CAAE;AAAA,MAGlC,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACD;AAKD,mBAAe,iBAAiB,WAAW,SAAS,OAAO;AAC1D,UAAI;AAEH,YAAI,CAAC,QAAQ;AACZA,wBAAAA,MAAI,YAAY;AAAA,YACf,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AAED,cAAM;AAAA,UACL;AAAA,QACJ,IAAO,MAAa;AACjB,cAAM,WAAW,MAAM,oBAAoB,SAAS;AAIpD,YAAI,MAAM,QAAQ,QAAQ,GAAG;AAC5B,uBAAa,QAAQ;AAAA,QACzB,WAAc,YAAY,MAAM,QAAQ,SAAS,SAAS,GAAG;AACzD,uBAAa,QAAQ,SAAS;AAAA,QAClC,OAAU;AACN,uBAAa,QAAQ,CAAE;AAAA,QACvB;AAID,YAAI,CAAC,QAAQ;AACZA,wBAAAA,MAAI,YAAa;AAEjB,cAAI,aAAa,MAAM,WAAW,GAAG;AACpCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,aAAa,KAAK;AAChC,YAAI,CAAC,QAAQ;AACZA,wBAAAA,MAAI,YAAa;AACjBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AACD,qBAAa,QAAQ,CAAE;AAAA,MACvB;AAAA,IACD;AAGD,aAAS,YAAY,WAAW;AAC/B,YAAM,OAAO,aAAa,IAAI,YAAW,EAAG,QAAQ,KAAK,EAAE;AAC3D,YAAM,UAAU;AAAA,QACf,OAAO;AAAA,QACP,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,OAAO;AAAA,QACP,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,OAAO;AAAA,MACP;AACD,aAAO,QAAQ,GAAG,KAAK;AAAA,IACvB;AAGD,aAAS,eAAe,OAAO;AAC9B,UAAI,CAAC;AAAO,eAAO;AACnB,YAAM,IAAI;AACV,YAAM,QAAQ,CAAC,KAAK,MAAM,MAAM,IAAI;AACpC,YAAM,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,CAAC,CAAC;AAClD,aAAO,KAAK,MAAM,QAAQ,KAAK,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,MAAM,MAAM,MAAM,CAAC;AAAA,IACrE;AAGD,aAAS,iBAAiB,QAAQ;AACjC,YAAM,YAAY;AAAA,QACjB,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,aAAa;AAAA,QACb,eAAe;AAAA,QACf,WAAW;AAAA,QACX,UAAU;AAAA,MACV;AACD,aAAO,UAAU,MAAM,KAAK;AAAA,IAC5B;AAGD,aAAS,cAAc,QAAQ;AAC9B,YAAM,YAAY;AAAA,QACjB,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,aAAa;AAAA,QACb,eAAe;AAAA,QACf,WAAW;AAAA,QACX,UAAU;AAAA,MACV;AACD,aAAO,UAAU,MAAM,KAAK;AAAA,IAC5B;AAGD,aAAS,eAAe,QAAQ;AAC/B,YAAM,WAAW;AAAA,QAChB,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,aAAa;AAAA,QACb,eAAe;AAAA,QACf,WAAW;AAAA,QACX,UAAU;AAAA,MACV;AACD,aAAO,SAAS,MAAM,KAAK;AAAA,IAC3B;AAGD,aAAS,iBAAiB,WAAW;AACpC,UAAI,CAAC;AAAW;AAEhB,YAAM,WAAW,qBAAqB,SAAS;AAC/C,YAAM,aAAaA,cAAAA,MAAI,eAAe,QAAQ;AAE9C,UAAI,YAAY;AACf,YAAI;AACH,oBAAU,QAAQ,KAAK,MAAM,UAAU;AACvC,uBAAa,QAAQ;AACrBA,wBAAA,MAAA,MAAA,OAAA,8CAAY,WAAW,SAAS,QAAQ;AAExCA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACf,CAAK;AAAA,QACD,SAAQ,OAAO;AACfA,wBAAAA,MAAA,MAAA,SAAA,8CAAc,aAAa,KAAK;AAChC,oBAAU,QAAQ,CAAE;AACpB,uBAAa,QAAQ;AAAA,QACrB;AAAA,MACJ,OAAS;AAEN,kBAAU,QAAQ,CAAE;AACpB,qBAAa,QAAQ;AACrBA,sBAAY,MAAA,MAAA,OAAA,8CAAA,SAAS,SAAS,SAAS;AAAA,MACvC;AAAA,IACD;AAGD,aAAS,oBAAoB;AAC5B,UAAI,CAAC,kBAAkB,OAAO;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAEDA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,kBAAM,WAAW,qBAAqB,kBAAkB,KAAK;AAC7DA,0BAAG,MAAC,kBAAkB,QAAQ;AAG9B,sBAAU,QAAQ,CAAE;AACpB,yBAAa,QAAQ;AAErBA,2FAAY,aAAa,kBAAkB,KAAK,MAAM;AAEtDA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAGDC,kBAAAA,OAAO,YAAY;AAClB,YAAM,aAAc;AAGpB,UAAI;AACH,cAAM,iBAAiB,aAAa,QAAQ,gCAAgC;AAE5E,YAAI,gBAAgB;AACnB,gBAAM,YAAY,SAAS,cAAc;AACzC,gBAAM,UAAU,YAAY,MAAM,KAAK,OAAK,EAAE,OAAO,SAAS;AAE9D,cAAI,SAAS;AAGZ,8BAAkB,QAAQ,QAAQ;AAClC,4BAAgB,QAAQ;AAGxB,kBAAM,iBAAiB,QAAQ,EAAE;AAGjC,mCAAuB,QAAQ,EAAE;AAGjC,6BAAiB,QAAQ,EAAE;AAAA,UAChC,OAAW;AAGN,yBAAa,WAAW,gCAAgC;AAAA,UACxD;AAAA,QACD;AAAA,MACD,SAAQ,GAAG;AACXD,sBAAAA,MAAa,MAAA,QAAA,8CAAA,gBAAgB,CAAC;AAAA,MAC9B;AAAA,IACH,CAAE;AAGDE,kBAAAA,YAAY,MAAM;AACjB,kBAAa;AACbF,oBAAAA,iEAAY,iBAAiB;AAAA,IAC/B,CAAE;AAGDG,kBAAAA,MAAM,mBAAmB,CAAC,OAAO,UAAU;AAC1C,UAAI,SAAS,UAAU,OAAO;AAC7B,oBAAa;AACbH,sBAAAA,MAAY,MAAA,OAAA,8CAAA,kBAAkB;AAAA,MAC9B;AAAA,IACH,CAAE;AAED,UAAM,aAAaF,cAAG,IAAC,KAAK;AACPA,kBAAAA,IAAI,EAAE;AAM3B,QAAI,sBAAsB;AAC1B,QAAI,yBAAyB;AAC7B,QAAI,iBAAiB;AACrB,QAAI,qBAAqB;AACzB,QAAI,iBAAiB;AAGrB,aAAS,qBAAqB,aAAa,YAAY,QAAQ,WAAW;AAEzE,YAAM,kBAAkB,gBAAgB;AAGxC,uBAAiB;AACjB,qBAAe,QAAQ;AACvB,gBAAU,QAAQ;AAGlB,UAAI,iBAAiB;AACpB,yBAAiB,KAAK,IAAK;AAC3B,6BAAqB;AACrBE,4BAAY,MAAA,OAAA,8CAAA,YAAY,WAAW,OAAO,UAAU,EAAE;AAAA,MACtD;AAGD,UAAI,CAAC,qBAAqB;AACzB,8BAAsB,YAAY,MAAM;AACvC,gBAAM,MAAM,KAAK,IAAK;AACtB,gBAAM,sBAAsB,MAAM;AAGlC,cAAI,yBAAyB,gBAAgB;AAE5C,kBAAM,OAAO,iBAAiB;AAC9B,kBAAM,OAAO,KAAK,IAAI,KAAK,OAAO,EAAE;AAEpC,qCAAyB,KAAK;AAAA,cAC7B,yBAAyB;AAAA,cACzB;AAAA,YACA;AAAA,UACD,WAAU,0BAA0B,kBAAkB,iBAAiB,KAAK;AAI5E,gBAAI,sBAAsB,KAAM;AAE/B,oBAAM,qBAAqB,KAAK,IAAI,iBAAiB,GAAG,EAAE;AAE1D,kBAAI,yBAAyB,oBAAoB;AAEhD,0CAA0B;AAC1BA;;;kBACC,eAAe,cAAc,UAAU,KAAK,MAAM,sBAAsB,CAAC;AAAA,gBAAG;AAAA,cAC7E;AAAA,YACD;AAAA,UACD;AAGD,uBAAa,QAAQ,KAAK,MAAM,sBAAsB;AAGtD,cAAI,0BAA0B,QAAQ,kBAAkB,KAAK;AAC5D,0BAAc,mBAAmB;AACjC,kCAAsB;AACtB,qCAAyB;AACzB,yBAAa,QAAQ;AACrB,sBAAU,QAAQ;AAClB,2BAAe,QAAQ;AAGvB,uBAAW,MAAM;;AAChB,sCAAkB,UAAlB,mBAAyB;AACzBA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACjB,CAAO;AAAA,YACD,GAAE,GAAI;AAAA,UACP;AAAA,QACD,GAAE,EAAE;AAAA,MACL;AAAA,IACD;AAGD,aAAS,qBAAqB;AAC7B,UAAI,qBAAqB;AACxB,sBAAc,mBAAmB;AACjC,8BAAsB;AAAA,MACtB;AACD,+BAAyB;AACzB,uBAAiB;AACjB,2BAAqB;AACrB,uBAAiB;AACjB,mBAAa,QAAQ;AACrB,qBAAe,QAAQ;AACvB,gBAAU,QAAQ;AAAA,IAClB;AAGD,mBAAe,kBAAkB;;AAEhC,UAAI,CAAC,kBAAkB,OAAO;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,QACjB,CAAI;AACD;AAAA,MACA;AAGD,UAAI,aAAa,MAAM,WAAW,GAAG;AACpCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,QACjB,CAAI;AACD;AAAA,MACA;AAGD,YAAM,kBAAkB,aAAa,MAAM,KAAK,UAAQ,KAAK,WAAW,SAAS;AACjF,UAAI,CAAC,iBAAiB;AACrBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,QACjB,CAAI;AACD;AAAA,MACA;AAED,iBAAW,QAAQ;AAGnB,yBAAoB;AAGpB,wBAAkB,QAAQ;AAC1B,mBAAa,QAAQ;AACrB,qBAAe,QAAQ;AACvB,gBAAU,QAAQ;AAClB,8BAAkB,UAAlB,mBAAyB;AAEzB,UAAI;AACH,cAAM,SAAS,MAAMI,uBAAQ;AAAA,UAC5B,WAAW,kBAAkB;AAAA,UAC7B,eAAe,gBAAgB,MAAM;AAAA;AAAA,UAErC,YAAY,CAAC,UAAU,YAAY,UAAU;AAE5C,iCAAqB,UAAU,YAAY,KAAK;AAAA,UAChD;AAAA,UACD,cAAc;AAAA;AAAA,UACd,SAAS;AAAA;AAAA,QACb,CAAI;AAGD,6BAAqB,KAAK,QAAQ,SAAS;AAG3C,aAAI,iCAAQ,YAAW,aAAa,CAAC,OAAO,QAAQ;AACnD,gBAAM,IAAI,OAAM,iCAAQ,YAAW,gBAAgB;AAAA,QACnD;AAGD,kBAAU,QAAQC,sCAAuB,OAAO,MAAM;AAGtD,cAAM,WAAW,qBAAqB,kBAAkB,KAAK;AAC7DL,sBAAG,MAAC,eAAe,UAAU,KAAK,UAAU,UAAU,KAAK,CAAC;AAC5DA,4BAAY,MAAA,OAAA,8CAAA,QAAQ,kBAAkB,KAAK,SAAS;AAGpD,qBAAa,QAAQ;AAAA,MAErB,SAAQ,OAAO;AAEf,2BAAoB;AACpB,gCAAkB,UAAlB,mBAAyB;AAGzBA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,mBAAmB,KAAK;AAEtC,YAAI,MAAM,QAAQ,SAAS,IAAI,KAAK,MAAM,QAAQ,SAAS,SAAS,GAAG;AACtEA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,aAAa;AAAA,UAClB,CAAK;AAAA,QACD,WAAU,MAAM,QAAQ,SAAS,MAAM,GAAG;AAC1CA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,aAAa;AAAA,UAClB,CAAK;AAAA,QACD,WAAU,MAAM,QAAQ,SAAS,SAAS,GAAG;AAC7CA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,aAAa;AAAA,UAClB,CAAK;AAAA,QACL,OAAU;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS,MAAM,WAAW;AAAA,YAC1B,YAAY;AAAA,YACZ,aAAa;AAAA,UAClB,CAAK;AAAA,QACD;AAAA,MACJ,UAAY;AACT,mBAAW,QAAQ;AAAA,MACnB;AAAA,IACD;AAGD,UAAM,mBAAmBF,cAAG,IAAC,IAAI;AAGjC,UAAM,mBAAmBA,cAAG,IAAC,EAAE;AAG/B,aAAS,cAAc;;AACtB,uBAAiB,QAAQ;AACzB,mCAAiB,UAAjB,mBAAwB,SAAxB;AAAA,IACA;AAGD,aAAS,qBAAqB;;AAC7B,YAAM,SAAS,iBAAiB,SAAS,IAAI,KAAI;AACjD,UAAI,CAAC,OAAO;AACXE,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AACD,gBAAU,MAAM,KAAK;AAAA,QACpB,IAAI,KAAK,QAAQ,KAAK,OAAQ;AAAA,QAC9B,SAAS;AAAA,QACT;AAAA,QACA,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,UAAU;AAAA,MACb,CAAG;AACD,mCAAiB,UAAjB,mBAAwB,UAAxB;AAAA,IACA;AAGD,aAAS,gBAAgB;;AACxB,mCAAiB,UAAjB,mBAAwB,UAAxB;AAAA,IACA;AAQD,UAAM,gBAAgBF,cAAG,IAAC,KAAK;AAG/B,UAAM,YAAYQ,cAAAA,SAAS;AAAA,MAC1B,UAAU;AAAA,QAAC;AAAA,UACT,OAAO;AAAA,UACP,OAAO,CAAC;AAAA,YACP,OAAO;AAAA,YACP,SAAS;AAAA,UACd,CAAK;AAAA,QACD;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,OAAO,CAAC;AAAA,YACP,OAAO;AAAA,YACP,SAAS;AAAA,UACd,CAAK;AAAA,QACD;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,OAAO,CAAC;AAAA,YACP,OAAO;AAAA,YACP,SAAS;AAAA,UACd,CAAK;AAAA,QACL;AAAA,QAAM;AAAA,UACF,OAAO;AAAA,UACP,OAAO,CAAC;AAAA,YACP,OAAO;AAAA,YACP,SAAS;AAAA,UACd,CAAK;AAAA,QACD;AAAA,MACD;AAAA,IACH,CAAE;AAGD,aAAS,oBAAoB;;AAC5B,YAAM,WAAW,cAAc,QAAQ,KAAK,cAAc,MAAM,KAAK;AACtD,oBAAc,MAAM,KAAK,cAAc,IAAI,KAAK;AAC/D,YAAM,gBAAe,eAAU,MAAM,KAAK,OAAK,EAAE,OAAO,qBAAqB,MAAxD,mBAA2D;AAEhF,UAAI,CAAC,gBAAgB,OAAO,iBAAiB,UAAU;AACtDN,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAGD,gBAAU,SAAS,QAAQ,SAAQ,IAAI,QAAQ,CAAE,CAAC;AAGlD,eAAS,iBAAiB,SAAS;AAClC,YAAI,CAAC;AAAS,iBAAO;AAGrB,cAAM,eAAe,CAAC,KAAK,SAAS,EAAE;AAEtC,eAAO,QACL,MAAM,OAAO,EACb,IAAI,OAAK,EAAE,MAAM,EACjB,OAAO,OAAK,KAAK,CAAC,aAAa,SAAS,CAAC,CAAC;AAAA,MAC5C;AAGD,eAAS,kBAAkB,MAAM,WAAW;AAC3C,cAAM,YAAY,oBAAI;AAEtB,aAAK,QAAQ,UAAQ;AACpB,gBAAM,QAAQ,iBAAiB,KAAK,OAAO,CAAC;AACtB,eAAK,OAAO,KAAK;AACvC,gBAAM,OAAO,KAAK,MAAM,KAAK;AAE7B,gBAAM,QAAQ,UAAQ;AACrB,gBAAI,CAAC,UAAU,IAAI,IAAI,GAAG;AACzB,wBAAU,IAAI,MAAM;AAAA,gBACnB,YAAY,CAAE;AAAA,gBACd,MAAM,CAAE;AAAA,gBACR,WAAW;AAAA;AAAA,cAClB,CAAO;AAAA,YACD;AAED,gBAAI,MAAM;AACT,wBAAU,IAAI,IAAI,EAAE,KAAK,KAAK,IAAI;AAAA,YAClC;AAAA,UACN,CAAK;AAAA,QACL,CAAI;AAED,eAAO;AAAA,MACP;AAGD,YAAM,YAAY,aAAa,MAAM,KAAK,CAAA;AAC1C,YAAM,eAAe,kBAAkB,SAAe;AACtD,mBAAa,QAAQ,CAAC,MAAM,SAAS;AACpC,cAAM,OAAO,CAAC,GAAG,IAAI,IAAI,KAAK,IAAI,CAAC,EAAE,KAAK,GAAG;AAC7C,kBAAU,SAAS,KAAK,OAAK,EAAE,UAAU,IAAI,EAAE,MAAM,KAAK;AAAA,UACzD,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,CAAI;AAAA,MACJ,CAAG;AAGD,YAAM,UAAU,aAAa,OAAO,KAAK,CAAA;AACzC,YAAM,aAAa,kBAAkB,OAAa;AAClD,iBAAW,QAAQ,CAAC,MAAM,SAAS;AAClC,cAAM,OAAO,CAAC,GAAG,IAAI,IAAI,KAAK,IAAI,CAAC,EAAE,KAAK,GAAG;AAC7C,kBAAU,SAAS,KAAK,OAAK,EAAE,UAAU,IAAI,EAAE,MAAM,KAAK;AAAA,UACzD,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,CAAI;AAAA,MACJ,CAAG;AAGD,YAAM,YAAY,aAAa,IAAI,KAAK,CAAA;AACxC,YAAM,eAAe,kBAAkB,SAAe;AACtD,mBAAa,QAAQ,CAAC,MAAM,SAAS;AACvB,SAAC,GAAG,IAAI,IAAI,KAAK,IAAI,CAAC,EAAE,KAAK,GAAG;AAC7C,kBAAU,SAAS,KAAK,OAAK,EAAE,UAAU,IAAI,EAAE,MAAM,KAAK;AAAA,UACzD,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,GAAM;AAAA,UACF,OAAO;AAAA,UACP,SAAS;AAAA,QACb,CAAI;AAAA,MACJ,CAAG;AAGD,eAAS,mBAAmB,KAAK;AAChC,YAAI,CAAC;AAAK,iBAAO;AAEjB,cAAM,UAAU,IAAI,MAAM,QAAQ;AAClC,YAAI,CAAC;AAAS,iBAAO;AAErB,eAAO,CAAC,GAAG,IAAI,IAAI,OAAO,CAAC,EAAE,KAAK,GAAG;AAAA,MACrC;AAGD,eAAS,wBAAwB,KAAK;AACrC,YAAI,CAAC;AAAK,iBAAO;AAEjB,cAAM,UAAU,IAAI,MAAM,YAAY;AACtC,YAAI,CAAC;AAAS,iBAAO;AAErB,cAAM,aAAa,QAAQ,IAAI,OAAK,EAAE,QAAQ,SAAS,EAAE,CAAC;AAC1D,eAAO,CAAC,GAAG,IAAI,IAAI,UAAU,CAAC,EAAE,KAAK,GAAG;AAAA,MACxC;AAGD,YAAM,iBAAiB,aAAa,MAAM,KAAK,CAAA;AAC/C,YAAM,UAAU;AAAA,QAAC;AAAA,UACf,OAAO;AAAA,UACP,SAAS,mBAAmB,eAAe,QAAQ,CAAC,KAAK;AAAA,QACzD;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS,eAAe,MAAM,KAAK;AAAA,QACnC;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS,wBAAwB,eAAe,MAAM,CAAC,KAAK;AAAA,QAC5D;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS;AAAA,QACT;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS;AAAA,QACT;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS,cAAc,MAAM;AAAA,QAC7B;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS,cAAc,MAAM;AAAA,QAC7B;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS,cAAc,OAAO;AAAA,QAC9B;AAAA,MACJ;AACE,gBAAU,SAAS,KAAK,OAAK,EAAE,UAAU,MAAM,EAAE,QAAQ;AAEzDA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAGD,aAAS,YAAY,YAAY;AAChC,YAAM,MAAM,UAAU,SAAS,UAAU;AACzC,YAAM,QAAQ,IAAI;AAClB,YAAM,WAAW,cAAc,QAAQ,KAAK,cAAc,MAAM,KAAK;AAGrE,UAAI,UAAU,MAAM;AACnBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAGD,UAAI,SAAS;AAEb,eAAS,IAAI,GAAG,IAAI,IAAI,MAAM,QAAQ,KAAK,GAAG;AAC7C,cAAM,WAAW,IAAI,MAAM,IAAI,CAAC;AAChC,YAAI,YAAY,SAAS,UAAU,SAAS;AAC3C,gBAAMO,QAAO,SAAS,WAAW;AAEjC,gBAAM,QAAQA,MAAK,MAAM,KAAK;AAC9B,cAAI,OAAO;AACV,kBAAM,MAAM,SAAS,MAAM,CAAC,GAAG,EAAE;AACjC,gBAAI,MAAM;AAAQ,uBAAS;AAAA,UAC3B;AAAA,QACD;AAAA,MACD;AAGD,UAAI,OAAO;AACX,UAAI,UAAU;AAAM,eAAO,KAAK,OAAO,SAAS,CAAC,EAAE,SAAS,GAAE,GAAG,CAAC;AAAA,eACzD,UAAU;AAAM,eAAO,KAAK,OAAO,SAAS,CAAC,EAAE,SAAS,GAAE,GAAG,CAAC;AAAA,eAC9D,UAAU;AAAM,eAAO,MAAM,OAAO,SAAS,CAAC,EAAE,SAAS,GAAE,GAAG,CAAC;AAGxE,YAAM,QAAQ;AAAA,QAAC;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,QACT;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS;AAAA,QACT;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,SAAS;AAAA,QACT;AAAA,MACJ;AAGE,UAAI,MAAM,KAAK,GAAG,KAAK;AAEvBP,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAGD,aAAS,WAAW,OAAO,OAAO;AACjC,UAAI,UAAU;AAAQ,eAAO,CAAC,KAAK;AACnC,YAAM,SAAS,CAAA;AACf,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAG;AACzC,eAAO,KAAK,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC;AAAA,MACjC;AACD,aAAO;AAAA,IACP;AAGD,aAAS,YAAY,SAAS,YAAY;AAEzC,YAAM,QAAQ,aAAa;AAC3B,YAAM,WAAW,QAAQ,MAAM,MAAM,OAAO,QAAQ,CAAC,EACnD,KAAK,QAAM,GAAG,UAAU,OAAO;AACjC,YAAM,QAAO,qCAAU,YAAW;AAElCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS,YAAY,IAAI;AAAA,QACzB,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,oBAAQ,MAAM,OAAO,OAAO,CAAC;AAAA,UAC7B;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAGD,aAAS,cAAc,OAAO;AAC7B,YAAM,IAAI,UAAU,MAAM,KAAK,OAAK,EAAE,UAAU,KAAK;AACrD,aAAO,IAAK,EAAE,SAAS,KAAM;AAAA,IAE7B;AAGD,aAAS,cAAc;AAEtB,UAAI,CAAC,kBAAkB,OAAO;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AAEDA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,MACV,CAAG;AACDQ,2CAAsB,WAAW,kBAAkB,KAAK,EACtD,KAAK,SAAO;AACZ,cAAM,WAAW;AAiBjB,cAAM,WAAW,GAAGC,mBAAG,IAAI,cAAc,IAAI,QAAQ;AACrDA,2BAAG,qBAAsB,EAAC,UAAU;AAAA,UACnC;AAAA,UACA,MAAM;AAAA,UACN,UAAU;AAAA,UACV,SAAS,MAAMA,cAAE,KAAC,aAAa;AAAA,YAC9B;AAAA,YACA,UAAU;AAAA,UAChB,CAAM;AAAA,UACD,MAAM,OAAKT,cAAG,MAAC,UAAU;AAAA,YACxB,OAAO;AAAA,YACP,MAAM;AAAA,UACZ,CAAM;AAAA,QACN,CAAK;AAAA,MAkBL,CAAI,EACA,MAAM,SAAO;AACbA,sBAAAA,MAAI,UAAU;AAAA,UACb,SAAS,IAAI,WAAW;AAAA,UACxB,YAAY;AAAA,QACjB,CAAK;AAAA,MACL,CAAI,EACA,QAAQ,MAAMA,cAAAA,MAAI,YAAW,CAAE;AAAA,IACjC;AAID,UAAM,OAAOF,cAAG,IAAC,KAAK;AACtB,UAAM,cAAcA,cAAG,IAAC,KAAK;AAG7B,mBAAe,kBAAkB;;AAChC,UAAI,CAAC,kBAAkB;AAAO,eAAOE,cAAAA,MAAI,UAAU;AAAA,UAClD,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QACf,CAAG;AACD,UAAI,CAAC,aAAa;AAAO,eAAOA,cAAAA,MAAI,UAAU;AAAA,UAC7C,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QACf,CAAG;AAED,yBAAoB;AACpB,wBAAkB,QAAQ;AAC1B,mBAAa,QAAQ;AACrB,gBAAU,QAAQ;AAClB,8BAAkB,UAAlB,mBAAyB;AAEzB,UAAI;AACH,cAAMU,mCAAoB;AAAA,UACzB,WAAW,kBAAkB;AAAA,UAC7B,YAAY,CAAC,GAAG,QAAQ,qBAAqB,GAAG,GAAG;AAAA,QACvD,CAAI;AAED,oBAAY,QAAQ;AACpB,gCAAkB,UAAlB,mBAAyB;AACzBV,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD,SAAQ,GAAG;AACX,2BAAoB;AACpB,gCAAkB,UAAlB,mBAAyB;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS,EAAE,WAAW;AAAA,UACtB,YAAY;AAAA,QAChB,CAAI;AAAA,MACD;AAAA,IACD;AAGD,mBAAe,eAAe;AAC7BA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AACD,UAAI;AACH,cAAM;AAAA,UACL;AAAA,UACA;AAAA,QACJ,IAAO,MAAMW,eAAAA,oBAAoB,kBAAkB,KAAK;AACrD,cAAM,gBAAgB,IAAI,QAAQ;AAClCX,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,SAAS;AAAA,UAChB,MAAM;AAAA,QACV,CAAI;AAAA,MACD,SAAQ,GAAG;AACXA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS,EAAE;AAAA,UACX,YAAY;AAAA,QAChB,CAAI;AAAA,MACD;AAAA,IACD;AAGD,mBAAe,gBAAgB,aAAa,UAAU;AAgBrD,YAAM,KAAKS,cAAE,KAAC,qBAAsB;AACpC,YAAM,WAAW,GAAGA,cAAE,KAAC,IAAI,cAAc,IAAI,QAAQ;AACrD,SAAG,UAAU;AAAA,QACZ;AAAA,QACA,MAAM;AAAA,QACN,UAAU;AAAA,QACV,SAAS,MAAMA,cAAE,KAAC,aAAa;AAAA,UAC9B;AAAA,UACA,UAAU;AAAA,QACd,CAAI;AAAA,QACD,MAAM,MAAMT,cAAG,MAAC,UAAU;AAAA,UACzB,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACJ,CAAG;AAAA,IAiBD;AAID,UAAM,eAAeF,cAAG,IAAC,EAAE;AAC3B,UAAM,eAAeA,cAAAA,IAAI;AAAA,MACxB,mBAAmB;AAAA,MACnB,iBAAiB;AAAA,IACnB,CAAE;AAKD,mBAAe,mBAAmB;AAEjC,UAAI;AACHE,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACX,CAAI;AAEDA,sBAAAA,MAAY,MAAA,OAAA,8CAAA,WAAW;AAGvB,cAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvDA,wBAAAA,MAAI,QAAQ;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,MAAM;AAAA,cACL,UAAU;AAAA,YACV;AAAA,YACD,SAAS,CAAC,QAAQ;AACjBA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,sBAAQ,GAAG;AAAA,YACX;AAAA,YACD,MAAM,CAAC,QAAQ;AACdA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,qBAAO,GAAG;AAAA,YACV;AAAA,UACN,CAAK;AAAA,QACL,CAAI;AAEDA,sBAAAA,MAAY,MAAA,OAAA,8CAAA,WAAW,QAAQ;AAC/BA,sBAAY,MAAA,MAAA,OAAA,8CAAA,UAAU,SAAS,UAAU;AACzCA,sBAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,SAAS,IAAI;AAGlC,YAAI,YAAY,SAAS,eAAe,KAAK;AAC5CA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,gBAAgB;AAG5B,cAAI,CAAC,SAAS,MAAM;AACnB,kBAAM,IAAI,MAAM,QAAQ;AAAA,UACxB;AAED,gBAAM,OAAO,SAAS;AACtBA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,WAAW,IAAI;AAG3B,cAAI,CAAC,KAAK,SAAS,CAAC,MAAM,QAAQ,KAAK,KAAK,GAAG;AAC9C,kBAAM,IAAI,MAAM,yBAAyB;AAAA,UACzC;AAED,uBAAa,QAAQ,KAAK;AAC1B,uBAAa,QAAQ,KAAK,iBAAiB,CAAE;AAE7CA,wBAAAA,MAAY,MAAA,OAAA,8CAAA,YAAY;AAAA,YACvB,OAAO,aAAa;AAAA,YACpB,MAAM,aAAa;AAAA,UACxB,CAAK;AAEDA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACL,OAAU;AACN,gBAAM,IAAI,MAAM,aAAY,qCAAU,eAAc,IAAI,EAAE;AAAA,QAC1D;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,cAAc,KAAK;AAEjCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACd,CAAI;AAED,qBAAa,QAAQ,CAAE;AACvB,qBAAa,QAAQ;AAAA,UACpB,mBAAmB;AAAA,UACnB,iBAAiB;AAAA,QACjB;AAAA,MACJ,UAAY;AACTA,sBAAAA,MAAI,YAAa;AAAA,MACjB;AACD,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACX,CAAI;AAED,cAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvDA,wBAAAA,MAAI,QAAQ;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,MAAM;AAAA,cACL,UAAU;AAAA,YACV;AAAA,YACD,SAAS,CAAC,QAAQ;AACjBA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,sBAAQ,GAAG;AAAA,YACX;AAAA,YACD,MAAM,CAAC,QAAQ;AACdA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,qBAAO,GAAG;AAAA,YACV;AAAA,UACN,CAAK;AAAA,QACL,CAAI;AAED,YAAI,YAAY,SAAS,eAAe,KAAK;AAC5C,gBAAM,OAAO,SAAS;AAEtB,cAAI,CAAC,KAAK,SAAS,CAAC,MAAM,QAAQ,KAAK,KAAK,GAAG;AAC9C,kBAAM,IAAI,MAAM,yBAAyB;AAAA,UACzC;AAED,uBAAa,QAAQ,KAAK;AAC1BA,wBAAA,MAAA,MAAA,OAAA,8CAAY,QAAQ,KAAK,aAAa;AAEtC,gBAAM,mBAAmB,KAAK,iBAAiB,CAAE;AACjD,uBAAa,QAAQ;AAAA,YACpB,mBAAmB,kBAAkB,iBAAiB,OAAO;AAAA,YAC7D,iBAAiB,kBAAkB,iBAAiB,eAAe;AAAA,UACnE;AAEDA,wBAAA,MAAA,MAAA,OAAA,8CAAY,YAAY,aAAa,KAAK;AAE1CA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACL,OAAU;AACN,gBAAM,IAAI,MAAM,aAAY,qCAAU,eAAc,IAAI,EAAE;AAAA,QAC1D;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,cAAc,KAAK;AACjCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACd,CAAI;AACD,qBAAa,QAAQ,CAAE;AACvB,qBAAa,QAAQ;AAAA,UACpB,mBAAmB;AAAA,UACnB,iBAAiB;AAAA,QACjB;AAAA,MACJ,UAAY;AACTA,sBAAAA,MAAI,YAAa;AAAA,MACjB;AAAA,IACD;AAGD,aAAS,kBAAkB,KAAK;AAC/B,UAAI,CAAC;AAAK,eAAO;AAGjB,UAAI,IAAI,WAAW,GAAG,GAAG;AACxB,eAAO,0BAA0B,GAAG;AAAA,MACpC;AAGD,UAAI,IAAI,WAAW,SAAS,KAAK,IAAI,WAAW,UAAU,GAAG;AAC5D,eAAO;AAAA,MACP;AACD,aAAO;AAAA,IACP;AAID,mBAAe,aAAa,KAAK,UAAU;AAC1C,UAAI,CAAC,KAAK;AACTA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAGDA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAED,UAAI;AAQH,cAAM,mBAAmB,KAAK,QAAQ;AAQtCA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MAED,SAAQ,OAAO;AACfA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAA,MAAA,SAAA,8CAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,YAAY,MAAM,WAAW;AAAA,UACpC,MAAM;AAAA,UACN,UAAU;AAAA,QACd,CAAI;AAAA,MACD;AAAA,IACD;AAwBD,aAAS,mBAAmB,KAAK,UAAU;AAC1C,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,sBAAAA,MAAI,aAAa;AAAA,UAChB;AAAA,UACA,SAAS,CAAC,QAAQ;AACjB,gBAAI,IAAI,eAAe,KAAK;AAE3B,oBAAM,WAAW,IAAI;AACrBA,4BAAAA,MAAI,SAAS;AAAA,gBACZ,cAAc;AAAA,gBACd,SAAS,CAAC,YAAY;AACrBA,gCAAY,MAAA,MAAA,OAAA,8CAAA,WAAW,QAAQ,aAAa;AAC5C,0BAAQ,OAAO;AAAA,gBACf;AAAA,gBACD,MAAM,CAAC,YAAY;AAClB,yBAAO,IAAI,MAAM,cAAc,QAAQ,UAAU,OAAO,CAAC;AAAA,gBACzD;AAAA,cACR,CAAO;AAAA,YACP,OAAY;AACN,qBAAO,IAAI,MAAM,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,YAC/C;AAAA,UACD;AAAA,UACD,MAAM,CAAC,QAAQ;AACd,mBAAO,IAAI,MAAM,cAAc,IAAI,UAAU,OAAO,CAAC;AAAA,UACrD;AAAA,QACL,CAAI;AAAA,MACJ,CAAG;AAAA,IACD;AAwBD,mBAAe,kBAAkB,OAAO;AACvCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACvB,cAAI,IAAI,SAAS;AAChB,gBAAI;AACHA,4BAAAA,MAAI,YAAY;AAAA,gBACf,OAAO;AAAA,cACd,CAAO;AAEDA,4BAAAA,iEAAY,WAAW,OAAO,aAAa,MAAM,KAAK,EAAE,IAAI;AAG5D,oBAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvDA,8BAAAA,MAAI,QAAQ;AAAA,kBACX,KAAK;AAAA,kBACL,QAAQ;AAAA,kBACR,QAAQ;AAAA,oBACP,gBAAgB;AAAA,kBAChB;AAAA,kBACD,MAAM;AAAA,oBACL,YAAY;AAAA,oBACZ,WAAW,aAAa,MAAM,KAAK,EAAE;AAAA,kBACrC;AAAA,kBACD,SAAS;AAAA,kBACT,SAAS,CAACY,SAAQ;AACjBZ,kCAAAA,MAAA,MAAA,OAAA,8CAAY,SAASY,IAAG;AACxB,4BAAQA,IAAG;AAAA,kBACX;AAAA,kBACD,MAAM,CAAC,QAAQ;AACdZ,kCAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,2BAAO,GAAG;AAAA,kBACV;AAAA,gBACT,CAAQ;AAAA,cACR,CAAO;AAEDA,4BAAAA,MAAY,MAAA,OAAA,8CAAA,WAAW,QAAQ;AAG/B,kBAAI,YAAY,SAAS,eAAe,KAAK;AAC5C,oBAAI,SAAS,QAAQ,SAAS,KAAK,SAAS;AAE3C,+BAAa,MAAM,KAAK,EAAE,YAAY;AACtCA,gCAAAA,MAAI,UAAU;AAAA,oBACb,OAAO;AAAA,oBACP,MAAM;AAAA,oBACN,UAAU;AAAA,kBACnB,CAAS;AAAA,gBACT,OAAc;AACN,wBAAM,IAAI,MAAM,SAAS,KAAK,WAAW,MAAM;AAAA,gBAC/C;AAAA,cACR,OAAa;AACN,sBAAM,IAAI,MAAM,aAAY,qCAAU,eAAc,IAAI,EAAE;AAAA,cAC1D;AAAA,YACD,SAAQ,OAAO;AACfA,4BAAAA,MAAc,MAAA,SAAA,8CAAA,SAAS,KAAK;AAC5BA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,cACb,CAAO;AAAA,YACP,UAAe;AACTA,4BAAAA,MAAI,YAAa;AAAA,YACjB;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAIDG,wBAAM,aAAa,CAAC,WAAW;AAC9B,UAAI,WAAW,GAAG;AAEjB,yBAAkB;AAAA,MAClB;AAAA,IACH,CAAE;AAED,UAAM,YAAYL,cAAG,IAAC,EAAE;AACxB,UAAM,YAAYA,cAAG,IAAC,EAAE;AAUxB,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,cAAcA,cAAG,IAAC,EAAE;AAE1B,aAAS,mBAAmB;AAC3B,iBAAW,QAAQ,CAAC,WAAW;AAC/B,UAAI,CAAC,WAAW;AAAO,oBAAY,QAAQ,CAAE;AAAA,IAC7C;AAED,aAAS,eAAe,IAAI;AAC3B,YAAM,MAAM,YAAY;AACxB,YAAM,IAAI,IAAI,QAAQ,EAAE;AACxB,UAAI,KAAK;AAAG,YAAI,OAAO,GAAG,CAAC;AAAA;AACtB,YAAI,KAAK,EAAE;AAAA,IAChB;AAED,aAAS,iBAAiB;AACzB,UAAI,CAAC,YAAY,MAAM,QAAQ;AAC9BE,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAED,YAAM,QAAQ,UAAU,MACtB,OAAO,OAAK,YAAY,MAAM,SAAS,EAAE,EAAE,CAAC,EAC5C,IAAI,QAAM,EAAE,SAAS,SAAS,MAAM;AAEtC,YAAM,UACL,MAAM,WAAW,IACjB,SAAS,MAAM,CAAC,CAAC,SAChB,MAAM;AACN,cAAM,MAAM;AACZ,cAAM,OAAO,MAAM,MAAM,GAAG,GAAG,EAAE,IAAI,OAAK,KAAK,CAAC,EAAE,EAAE,KAAK,IAAI;AAC7D,cAAM,OAAO,MAAM,SAAS,MAAM;AAAA,MAAS,MAAM,MAAM,OAAO;AAC9D,eAAO,WAAW,MAAM,MAAM;AAAA,EAAW,IAAI,GAAG,IAAI;AAAA,MACxD,GAAO;AAELA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,sBAAU,QAAQ,UAAU,MAAM;AAAA,cACjC,OAAK,CAAC,YAAY,MAAM,SAAS,EAAE,EAAE;AAAA,YACrC;AACD,wBAAY,QAAQ,CAAE;AACtB,uBAAW,QAAQ;AAEnBA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,OAAO,MAAM,MAAM;AAAA,cAC1B,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAID,UAAM,sBAAsBF,cAAG,IAAC,EAAE;AAElC,UAAM,OAAO,CAAC,QAAQ,QAAQ,QAAQ,KAAK;AAC3C,UAAM,aAAaA,cAAG,IAAC,CAAC;AAExB,UAAM,mBAAmBA,cAAG,IAAC,KAAK;AAClC,UAAM,sBAAsBA,cAAG,IAAC,EAAE;AAGlC,aAAS,gBAAgB,OAAO;AAC/B,iBAAW,QAAQ;AAEnB,UAAI,UAAU,KAAK,CAAC,cAAc,MAAM,QAAQ;AAC/C,2BAAoB;AAAA,MACpB;AAAA,IACD;AAED,UAAM,mBAAmBA,cAAAA,IAAI;AAAA,MAAC;AAAA,QAC5B,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,CAAE;AAAA,QACT,MAAM;AAAA,MACN;AAAA,IACH,CAAE;AAED,UAAM,iBAAiBA,cAAG,IAAC,KAAK;AAChC,UAAM,kBAAkBA,cAAG,IAAC,EAAE;AAC9B,UAAM,sBAAsBA,cAAG,IAAC,IAAI;AACpC,UAAM,sBAAsBA,cAAG,IAAC,EAAE;AAElC,aAAS,uBAAuB;AAC/B,qBAAe,QAAQ,CAAC,eAAe;AACvC,UAAI,CAAC,eAAe;AAAO,wBAAgB,QAAQ,CAAE;AAAA,IACrD;AAED,aAAS,mBAAmB,IAAI;AAC/B,YAAM,MAAM,gBAAgB,MAAM,QAAQ,EAAE;AAC5C,UAAI,MAAM;AAAI,wBAAgB,MAAM,OAAO,KAAK,CAAC;AAAA;AAC5C,wBAAgB,MAAM,KAAK,EAAE;AAAA,IAClC;AAED,aAAS,qBAAqB;AAC7B,uBAAiB,QAAQ,iBAAiB,MAAM,OAAO,UAAQ,CAAC,gBAAgB,MAAM,SAAS,KAAK,EAAE,CAAC;AACvG,sBAAgB,QAAQ,CAAE;AAC1B,qBAAe,QAAQ;AACvBE,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAED,aAAS,qBAAqB;;AAC7B,0BAAoB,QAAQ;AAC5B,gCAAoB,UAApB,mBAA2B;AAAA,IAC3B;AA8BD,UAAM,gBAAgBF,cAAG,IAAC,EAAE;AAG5B,aAAS,mBAAmB,SAAS;AACpC,UAAI;AACH,cAAM,kBAAkB,CAAE;AAG1B,YAAI,CAAC,WAAW,CAAC,MAAM,QAAQ,OAAO,KAAK,QAAQ,UAAU,GAAG;AAC/D,iBAAO,CAAE;AAAA,QACT;AAGD,iBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACxC,gBAAM,MAAM,QAAQ,CAAC;AAGrB,cAAI,IAAI,UAAU;AAEjB,kBAAM,UAAU,IAAI,SAAS,MAAM,KAAK;AAGxC,gBAAI,QAAQ,UAAU,GAAG;AAExB,oBAAM,aAAa,QAAQ,CAAC,KAAK;AACjC,oBAAM,WAAW,QAAQ,CAAC,KAAK;AAG/B,kBAAI,WAAW,QAAQ;AACtB,gCAAgB,KAAK;AAAA,kBACpB,IAAI,QAAQ,KAAK,IAAK,IAAG,MAAM;AAAA,kBAC/B,MAAM,WAAW,KAAM;AAAA,kBACvB,UAAU,SAAS,KAAM;AAAA,kBACzB,QAAQ;AAAA;AAAA,kBACR,QAAQ,CAAE;AAAA,gBAClB,CAAQ;AAAA,cACD;AAAA,YACP,OAAY;AACNE,kCAAa,MAAA,QAAA,8CAAA,IAAI,IAAE,CAAC,YAAY,OAAO;AAAA,YACvC;AAAA,UACN,OAAW;AACNA,4FAAa,IAAI,IAAE,CAAC,kBAAkB,GAAG;AAAA,UACzC;AAAA,QACD;AAED,eAAO;AAAA,MACP,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,aAAa,KAAK;AAChC,eAAO,CAAE;AAAA,MACT;AAAA,IACD;AAGD,mBAAe,qBAAqB;AACnC,uBAAiB,QAAQ;AACzB,0BAAoB,QAAQ;AAE5B,UAAI;AAGH,cAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvDA,wBAAAA,MAAI,QAAQ;AAAA,YACX,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,MAAM;AAAA,cACL,UAAU;AAAA,YACV;AAAA,YACD,SAAS,CAAC,QAAQ;AACjBA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,sBAAQ,GAAG;AAAA,YACX;AAAA,YACD,MAAM,CAAC,QAAQ;AACdA,4BAAAA,MAAA,MAAA,OAAA,8CAAY,SAAS,GAAG;AACxB,qBAAO,GAAG;AAAA,YACV;AAAA,UACN,CAAK;AAAA,QACL,CAAI;AAID,YAAI;AAGJ,YAAI,MAAM,QAAQ,QAAQ,GAAG;AAE5B,oBAAU,SAAS,CAAC;AAAA,QACxB,WAAc,YAAY,SAAS,MAAM;AAErC,oBAAU,SAAS;AAAA,QACvB,OAAU;AACN,oBAAU;AAAA,QACV;AAEDA,sBAAAA,MAAA,MAAA,OAAA,8CAAY,aAAa,OAAO;AAGhC,YAAI,WAAW,QAAQ,MAAM;AAC5B,gBAAM,UAAU,QAAQ;AACxBA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,WAAW,OAAO;AAE9B,cAAI,WAAW,MAAM,QAAQ,OAAO,KAAK,QAAQ,SAAS,GAAG;AAC5D,kBAAM,aAAa,mBAAmB,OAAO;AAC7CA,0BAAAA,MAAY,MAAA,OAAA,8CAAA,aAAa,UAAU;AAEnC,gBAAI,WAAW,SAAS,GAAG;AAE1B,4BAAc,QAAQ;AACtBA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO,SAAS,WAAW,MAAM;AAAA,gBACjC,MAAM;AAAA,gBACN,UAAU;AAAA,cACjB,CAAO;AAAA,YACP,OAAY;AACN,kCAAoB,QAAQ;AAC5BA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACjB,CAAO;AAAA,YACD;AAAA,UACN,OAAW;AACN,gCAAoB,QAAQ;AAC5BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YAChB,CAAM;AAAA,UACD;AAAA,QACL,OAAU;AACN,8BAAoB,SAAQ,mCAAS,YAAW;AAChDA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACf,CAAK;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,8CAAA,aAAa,KAAK;AAChC,4BAAoB,QAAQ,MAAM,WAAW;AAC7CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACd,CAAI;AAAA,MACJ,UAAY;AACT,yBAAiB,QAAQ;AAAA,MACzB;AAAA,IACD;AAED,aAAS,eAAe;AACvB,YAAM,eAAe;AAAA,QACpB,IAAI,QAAQ,KAAK,IAAK;AAAA,QACtB,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ,CAAE;AAAA,MACV;AACD,oBAAc,MAAM,KAAK,YAAY;AACrCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAED,aAAS,gBAAgB,OAAO;AAC/BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,0BAAc,MAAM,OAAO,OAAO,CAAC;AACnCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAGD,UAAM,wBAAwBF,cAAAA,IAAI;AAAA,MAAC;AAAA,QACjC,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ,CAAE;AAAA,MACV;AAAA,MACD;AAAA,QACC,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ,CAAE;AAAA,MACV;AAAA,IACH,CAAE;AAED,aAAS,uBAAuB;AAC/B,YAAM,cAAc;AAAA,QACnB,IAAI,QAAQ,KAAK,IAAK;AAAA,QACtB,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ,CAAE;AAAA,MACV;AACD,4BAAsB,MAAM,KAAK,WAAW;AAC5CE,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAED,aAAS,wBAAwB,OAAO;AACvCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,kCAAsB,MAAM,OAAO,OAAO,CAAC;AAC3CA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAIuBF,sBAAI;AAAA,MAC3B,UAAU,CAAE;AAAA,IACd,CAAE;AAqID,aAAS,8BAA8B;AACtC,YAAM,aAAa,UAAU,MAAM,IAAI,WAAS;AAAA,QAC/C,IAAI,KAAK,QAAQ,KAAK,OAAQ;AAAA,QAC9B,SAAS,KAAK;AAAA,QACd,gBAAgB,KAAK,SAAS;AAAA,QAC9B,gBAAgB;AAAA,QAChB,YAAY;AAAA,MACf,EAAI;AAEF,0BAAoB,QAAQ;AAC5BE,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAAA,IACD;AAKD,UAAM,aAAaF,cAAG,IAAC,aAAa;AACpC,UAAM,kBAAkBA,cAAG,IAAC,EAAE;AAG9B,UAAM,kBAAkBA,cAAG,IAAC,KAAK;AACjC,UAAM,cAAc;AAAA,MAAC;AAAA,QACnB,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,MAAM;AAAA,MACN;AAAA,IACD;AAGD,aAAS,mBAAmB,GAAG;AAC9B,iBAAW,QAAQ,EAAE,OAAO;AAAA,IAC5B;AAGD,aAAS,2BAA2B;AAEnC,UAAI,CAAC,SAAS,MAAM,QAAQ;AAC3BE,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAED,UAAI,WAAW,UAAU,cAAc,CAAC,gBAAgB,MAAM,QAAQ;AACrEA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAGD,iBAAW,MAAM;AAChB,wBAAgB,QAAQ;AACxBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD,GAAE,IAAI;AAAA,IACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpzGF,GAAG,WAAW,eAAe;"}