"use strict";const e=require("../../common/vendor.js"),o=require("../../stores/navTitle.js");if(!Array){e.resolveComponent("uni-icons")()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+t)();const t=()=>"../../components/layout/AppLayout.js",l={__name:"index",setup(t){var l;const a=o.navTitleStore();e.onShow((()=>a.setTitle("个人知识库")));const i=e.ref([{id:"kb-default",name:"默认知识库",description:"系统初始化的默认知识库",icon:"home",default:!0,fileCount:3,lastUpdate:"2小时前"},{id:"kb-project",name:"项目资料库",description:"存放项目方案与需求文档",icon:"folder",fileCount:12,lastUpdate:"1天前"},{id:"kb-research",name:"研究资料",description:"行业研究和技术文档",icon:"search",fileCount:8,lastUpdate:"3天前"}]),d=e.ref({"kb-default":[{id:"file-1",name:"产品白皮书.pdf",size:"2.1 MB",type:"pdf",uploadedAt:"2025-10-01",status:"processed"},{id:"file-2",name:"用户需求文档.docx",size:"1.8 MB",type:"word",uploadedAt:"2025-10-02",status:"processed"},{id:"file-3",name:"项目规划表.xlsx",size:"856 KB",type:"excel",uploadedAt:"2025-10-03",status:"processing"}],"kb-project":[{id:"file-4",name:"技术架构图.png",size:"3.2 MB",type:"image",uploadedAt:"2025-09-28",status:"processed"}],"kb-research":[]}),n=e.ref((null==(l=i.value[0])?void 0:l.id)||""),s=e.computed((()=>d.value[n.value]||[]));function u(){console.log("新建知识库");const e={id:"kb-new-"+Date.now(),name:"新建知识库",description:"这是一个新的知识库",icon:"folder",fileCount:0,lastUpdate:"刚刚"};i.value.push(e),d.value[e.id]=[],n.value=e.id}function c(){if(console.log("上传文件"),!n.value)return;const e={id:"file-"+Date.now(),name:"示例文档.pdf",size:"1.5 MB",type:"pdf",uploadedAt:"刚刚",status:"processing"};d.value[n.value].unshift(e);const o=i.value.find((e=>e.id===n.value));o&&(o.fileCount=(o.fileCount||0)+1,o.lastUpdate="刚刚")}function r(e){return{pdf:"#ef4444",word:"#3b82f6",excel:"#10b981",image:"#f59e0b",text:"#64748b",ppt:"#f97316"}[e]||"#64748b"}return(o,t)=>e.e({a:e.p({type:"plus",size:"16",color:"#ffffff"}),b:e.o(u),c:e.t(i.value.length),d:e.f(i.value,((o,t,l)=>e.e({a:"4b0da679-2-"+l+",4b0da679-0",b:e.p({type:o.icon||"folder",size:"24",color:o.id===n.value?"#3b82f6":"#64748b"}),c:e.t(o.name),d:o.default},(o.default,{}),{e:e.t(o.description),f:e.t(o.fileCount||0),g:e.t(o.lastUpdate||"刚刚"),h:"4b0da679-3-"+l+",4b0da679-0",i:e.o((()=>{return t=o.id,console.log("重命名知识库",t),void e.index.showToast({title:"重命名功能开发中",icon:"none"});var t}),o.id),j:!o.default},o.default?{}:{k:"4b0da679-4-"+l+",4b0da679-0",l:e.p({type:"trash",size:"16",color:"#ef4444"}),m:e.o((()=>{return e=o.id,console.log("删除知识库",e),void(confirm("确定要删除这个知识库吗？")&&(i.value=i.value.filter((o=>o.id!==e)),delete d.value[e],n.value===e&&(n.value=(null==(t=i.value[0])?void 0:t.id)||"")));var e,t}),o.id)},{n:o.id,o:o.id===n.value?1:"",p:o.default?1:"",q:e.o((()=>{return e=o.id,void(n.value=e);var e}),o.id)}))),e:e.p({type:"compose",size:"16",color:"#64748b"}),f:0===i.value.length},0===i.value.length?{g:e.p({type:"folder",size:"60",color:"#cbd5e1"})}:{},{h:s.value.length>0},s.value.length>0?{i:e.t(s.value.length)}:{},{j:e.p({type:"cloud-upload",size:"16",color:"#ffffff"}),k:e.o(c),l:!n.value,m:s.value.length>0},s.value.length>0?{n:e.f(s.value,((o,t,l)=>{return{a:"4b0da679-7-"+l+",4b0da679-0",b:e.p({type:(a=o.type,{pdf:"pdf",word:"document",excel:"stats-bars",image:"image",text:"compose",ppt:"slides"}[a]||"document"),size:"24",color:r(o.type)}),c:e.t(o.name),d:e.t(o.size),e:e.t(o.uploadedAt),f:e.t("processed"===o.status?"已处理":"待处理"),g:e.n(`knowledge__file-status--${o.status}`),h:"4b0da679-8-"+l+",4b0da679-0",i:e.o((()=>{return t=o.id,console.log("预览文件",t),void e.index.showToast({title:"预览功能开发中",icon:"none"});var t}),o.id),j:"4b0da679-9-"+l+",4b0da679-0",k:e.o((()=>{return t=o.id,console.log("添加备注",t),void e.index.showToast({title:"备注功能开发中",icon:"none"});var t}),o.id),l:"4b0da679-10-"+l+",4b0da679-0",m:e.o((()=>function(e){if(console.log("删除文件",e),confirm("确定要删除这个文件吗？")){const o=n.value;d.value[o]=d.value[o].filter((o=>o.id!==e));const t=i.value.find((e=>e.id===o));t&&(t.fileCount=Math.max(0,(t.fileCount||0)-1))}}(o.id)),o.id),n:o.id};var a})),o:e.p({type:"eye",size:"18",color:"#64748b"}),p:e.p({type:"chat",size:"18",color:"#64748b"}),q:e.p({type:"trash",size:"18",color:"#ef4444"})}:{r:e.p({type:"document",size:"60",color:"#cbd5e1"}),s:e.p({type:"cloud-upload",size:"16",color:"#3b82f6"}),t:e.o(c),v:!n.value},{w:e.p({current:"pages/knowledge/index"})})}},a=e._export_sfc(l,[["__scopeId","data-v-4b0da679"]]);wx.createPage(a);
