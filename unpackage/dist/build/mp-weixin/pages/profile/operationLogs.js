"use strict";const e=require("../../common/vendor.js"),a=require("../../stores/navTitle.js"),t=require("../../utils/request.js");if(!Array){e.resolveComponent("uni-icons")()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+l)();const l=()=>"../../components/layout/AppLayout.js",u={__name:"operationLogs",setup(l){const u=a.navTitleStore();e.onShow((()=>{u.setTitle("操作日志"),async function(){n.value=1,o.value=[],await r()}()}));const o=e.ref([]),n=e.ref(1),s=e.ref(!1),i=e.ref(!1),v=e.ref(!1);async function r(){var a;1===n.value&&(i.value=!0);try{const e=await t.request({url:`/user/logs?page=${n.value}&size=20`,method:"GET"}),l=(null==e?void 0:e.list)||[];o.value=1===n.value?l:o.value.concat(l);const u=(null==(a=null==e?void 0:e.page)?void 0:a.total)||0,r=o.value.length;s.value=r<u}catch(l){1===n.value&&(o.value=[]),e.index.showToast({title:"加载失败",icon:"none"})}finally{1===n.value&&(i.value=!1),v.value=!1}}function c(){s.value&&!v.value&&(v.value=!0,n.value+=1,r())}return(a,t)=>e.e({a:e.p({type:"list",size:"20",color:"#276019"}),b:i.value&&1===n.value},(i.value&&1===n.value||o.value.length,{}),{c:0===o.value.length,d:e.f(o.value,((a,t,l)=>({a:e.t(a.type||"操作"),b:e.t(a.time||"-"),c:e.t((a.device||"-")+" · "+(a.ip||"-")+" · "+(a.result||"-")),d:a.id||t}))),e:s.value},s.value?{f:e.t(v.value?"加载中...":"加载更多"),g:v.value,h:e.o(c)}:{},{i:e.p({current:"pages/profile/operationLogs"})})}},o=e._export_sfc(u,[["__scopeId","data-v-572f6704"]]);wx.createPage(o);
