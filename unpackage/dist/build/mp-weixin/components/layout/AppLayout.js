"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/platform.js"),a=require("../../utils/safe-area.js"),n=require("../../stores/navTitle.js");if(!Array){e.resolveComponent("uni-nav-bar")()}Math||((()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+r)();const r=()=>"./NavSider.js",i={__name:"AppLayout",props:{current:{type:String,required:!0},contentScroll:{type:Boolean,default:!0}},emits:["navigate"],setup(r,{emit:i}){const o=n.navTitleStore(),s=r,l=i,{isDesktop:c}=t.usePlatformInfo(),p=e.ref(s.current),{totalNavHeightPx:u}=a.useSafeArea();e.watch((()=>s.current),(e=>{p.value=e}));const d=e.computed((()=>c.value?"AppLayout--desktop":"AppLayout--mobile"));e.computed((()=>`height:${(u||{value:64}).value}px;`));const h=e.computed((()=>{const e=String(p.value||"").trim();return e.startsWith("/")?e:"/"+e})),f=new Set(["/pages/home/index","/pages/knowledge/index","/pages/profile/index"]),g=e.computed((()=>!c.value&&!f.has(h.value)));function x(){try{const t="function"==typeof getCurrentPages?getCurrentPages():[];if(Array.isArray(t)&&t.length>1)return void e.index.navigateBack()}catch(a){}const t=h.value;if(t.startsWith("/pages/profile/")&&"/pages/profile/index"!==t)try{e.index.switchTab({url:"/pages/profile/index"})}catch(a){e.index.redirectTo({url:"/pages/profile/index"})}else try{e.index.switchTab({url:"/pages/home/index"})}catch(a){e.index.redirectTo({url:"/pages/home/index"})}}const v=[{path:"pages/home/index",label:"首页",icon:"home"},{path:"pages/chat/index",label:"AI问答",icon:"chat"},{path:"pages/doc-generator/index",label:"报告生成",icon:"compose"},{path:"pages/compliance/index",label:"报告审查",icon:"calendar"},{path:"pages/knowledge/index",label:"知识库",icon:"folder-add"},{path:"pages/profile/index",label:"个人中心",icon:"person"}];function m(t){if(!(null==t?void 0:t.path)||t.path===p.value)return;l("navigate",t.path);const a=t.path.startsWith("/")?t.path:`/${t.path}`;if(new Set(["/pages/home/index","/pages/knowledge/index","/pages/profile/index"]).has(a))try{e.index.switchTab({url:a})}catch(n){e.index.redirectTo({url:a})}else e.index.redirectTo({url:a})}return e.watch((()=>c.value),(t=>{try{t?e.index.hideTabBar():e.index.showTabBar()}catch(a){}}),{immediate:!0}),(t,a)=>e.e({a:!e.unref(c)},e.unref(c)?{}:{b:e.o(x),c:e.p({title:e.unref(o).title,statusBar:!0,fixed:!0,placeholder:!0,border:!1,shadow:!1,height:"42",backgroundColor:"#ffffff","left-icon":g.value?"left":""})},{d:e.unref(c)},e.unref(c)?{e:e.o(m),f:e.p({items:v,current:p.value})}:{},{g:r.contentScroll},(r.contentScroll,{}),{h:e.n(d.value)})}},o=e._export_sfc(i,[["__scopeId","data-v-fc232ba7"]]);wx.createComponent(o);
